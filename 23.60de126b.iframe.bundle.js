(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"./dist/esm/Colors-1b298092.js":function(module,__webpack_exports__,__webpack_require__){"use strict";function getRGBA(roleIndex){switch(roleIndex%10){case 0:return 0===roleIndex?"rgba(255, 193, 7, 0.4)":"rgba(134, 134, 134, 0.3)";case 1:return"rgba(156, 39, 176, .4)";case 2:return"rgba(33, 150, 243, .4)";case 3:return"rgba(220, 231, 117, 0.3)";case 4:return"rgba(121, 134, 203, 0.3)";case 5:return"rgba(77, 182, 172, 0.3)";case 6:return"rgba(255, 202, 165, 0.3)";case 7:return"rgba(2, 247, 190, 0.3)";case 8:return"rgba(255, 138, 101, 0.3)";case 9:return"rgba(82, 255, 79, 0.3)";default:return"rgba(229, 115, 155, 0.3)"}}__webpack_require__.d(__webpack_exports__,"a",(function(){return getRGBA}))},"./dist/esm/utils-ea73036b.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getRoleIndex})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getFieldId})),__webpack_require__.d(__webpack_exports__,"c",(function(){return rescale})),__webpack_require__.d(__webpack_exports__,"d",(function(){return fullNameToInitials})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getFieldSettings})),__webpack_require__.d(__webpack_exports__,"f",(function(){return integerSequence})),__webpack_require__.d(__webpack_exports__,"g",(function(){return renderDocumentField})),__webpack_require__.d(__webpack_exports__,"h",(function(){return setControlStyles}));__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js");var _Colors_1b298092_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./dist/esm/Colors-1b298092.js");function rescale(r,n){return r*n}var integerSequence=function integerSequence(start,count){return Array(count).fill(1).map((function(_,index){return index+start}))},fullNameToInitials=function fullNameToInitials(name){return name.split(" ").map((function(word){return word[0]})).join("")},setControlStyles=function setControlStyles(el,field,xScale,yScale,roleIndex,option){var _a,_b,_c,_d,settings=field.setting||field.settings,_settings$x=settings.x,x=void 0===_settings$x?0:_settings$x,_settings$y=settings.y,y=void 0===_settings$y?0:_settings$y,_settings$width=settings.width,width=void 0===_settings$width?function defaultWidth(field){switch(field.type){case"attachment":case"payment":return 24;case"checkbox":case"checkbox_group":case"radio_button_group":return 14;case"signature":case"initial":return 82}return 150}(field):_settings$width,_settings$height=settings.height,height=void 0===_settings$height?function defaultHeight(field){switch(field.type){case"attachment":case"payment":return 24;case"checkbox":case"checkbox_group":case"radio_button_group":return 14;case"signature":case"initial":return 41}return 50}(field):_settings$height,optionSettings=void 0!==option&&settings.options[option]?settings.options[option]:null;optionSettings&&(x=null!==(_a=optionSettings.x)&&void 0!==_a?_a:x,y=null!==(_b=optionSettings.y)&&void 0!==_b?_b:y,width=null!==(_c=optionSettings.width)&&void 0!==_c?_c:width,height=null!==(_d=optionSettings.height)&&void 0!==_d?_d:height),el.style.width=width+"px",el.style.height=height+"px",el.style.position="absolute",el.style.left=rescale(xScale,x)+"px",el.style.bottom=rescale(yScale,y)+"px",el.style.transform="scale("+xScale+", "+yScale+")",el.style.backgroundColor=field.rgba||Object(_Colors_1b298092_js__WEBPACK_IMPORTED_MODULE_9__.a)(roleIndex)},getFieldId=function getFieldId(field){return"verdocs-doc-fld-"+field.name},getFieldOptionId=function getFieldOptionId(field,index){return"verdocs-doc-fld-"+field.name+"-"+index},renderDocumentField=function renderDocumentField(field,docPage,roleIndex,handleFieldChange,disabled){var controlsDiv=document.getElementById(docPage.containerId+"-controls");if(controlsDiv)switch(field.type){case"attachment":case"date":case"dropdown":case"initial":case"payment":case"signature":case"timestamp":case"textarea":case"textbox":var id=getFieldId(field),existingField=document.getElementById(id);if(existingField)return void setControlStyles(existingField,field,docPage.xScale,docPage.yScale,roleIndex);var el=document.createElement("verdocs-field-"+field.type);el.field=field,el.setAttribute("id",id),disabled&&el.setAttribute("disabled",!0),el.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(el,field,docPage.xScale,docPage.yScale,roleIndex),controlsDiv.appendChild(el);break;case"checkbox_group":field.setting.options.forEach((function(option,checkboxIndex){var id=getFieldOptionId(field,checkboxIndex),existingField=document.getElementById(id);if(existingField)setControlStyles(existingField,field,docPage.xScale,docPage.yScale,roleIndex,checkboxIndex);else{console.log("Adding checkbox",option);var cbEl=document.createElement("verdocs-field-checkbox");cbEl.field=field,cbEl.setAttribute("id",id),cbEl.setAttribute("option",checkboxIndex),disabled&&cbEl.setAttribute("disabled",!0),cbEl.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(cbEl,field,docPage.xScale,docPage.yScale,roleIndex,checkboxIndex),controlsDiv.appendChild(cbEl)}}));break;case"radio_button_group":field.setting.options.forEach((function(option,buttonIndex){var id=getFieldOptionId(field,buttonIndex),existingField=document.getElementById(id);if(existingField)setControlStyles(existingField,field,docPage.xScale,docPage.yScale,roleIndex,buttonIndex);else{console.log("Adding radio button",option);var cbEl=document.createElement("verdocs-field-radio-button");cbEl.field=field,cbEl.setAttribute("id",id),cbEl.setAttribute("option",buttonIndex),disabled&&cbEl.setAttribute("disabled",!0),cbEl.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(cbEl,field,docPage.xScale,docPage.yScale,roleIndex,buttonIndex),controlsDiv.appendChild(cbEl)}}));break;default:console.log("[PREVIEW] Skipping unsupported field type",field)}},getRoleIndex=function getRoleIndex(roles,role){return roles.indexOf(role)||0},getFieldSettings=function getFieldSettings(field){return field.setting?field.setting:field.settings?field.settings:{x:0,y:0,required:!1,disabled:!1,result:"",value:""}}},"./dist/esm/verdocs-field-payment.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"verdocs_field_payment",(function(){return VerdocsFieldPayment}));__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var _index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/esm/index-43893f54.js"),_utils_ea73036b_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/esm/utils-ea73036b.js");__webpack_require__("./dist/esm/Colors-1b298092.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var VerdocsFieldPayment=function(){function VerdocsFieldPayment(hostRef){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,VerdocsFieldPayment),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.h)(this,hostRef),this.signatureComplete=Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.d)(this,"signatureComplete",7),this.initialComplete=Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.d)(this,"initialComplete",7),this.field=null,this.disabled=!1,this.focused=!1,this.signed=!1,this.signatureUrl="",this._fields=[],this.signatureFile=null,this.initialFile=null,this.focusOrderNumber=-1,this.focusFieldName="",this.activeElement=null,this.showError={pageNum:-1,fieldIndex:-1,type:null},this.dialogOpened=!1,this.closeAllErrors=!1,this.fieldsMap={},this.fieldsForCurrentSigner=[],this.fontSize=11,this.averageFontWidth=5,this.requiredFields=[]}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(VerdocsFieldPayment,[{key:"componentWillLoad",value:function componentWillLoad(){if(console.log("sign field",this.field),this.recipients&&this.recipients.length>0){var preparer=this.recipients.find((function(r){return"preparer"===r.type}));console.log("Found preparer",preparer),preparer&&(this.preparedMessage="Prepared by "+preparer.full_name)}}},{key:"render",value:function render(){var _a,_b,settings=Object(_utils_ea73036b_js__WEBPACK_IMPORTED_MODULE_3__.e)(this.field),disabled=null!==(_b=null!==(_a=this.disabled)&&void 0!==_a?_a:settings.disabled)&&void 0!==_b&&_b;return console.log("Payment field",settings),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.f)(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.b,{class:{focused:this.focused,disabled:disabled}},Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.f)("button",{class:{hide:this.signed}},"$"),this.signed?Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.f)("div",{class:"frame"}):Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.f)("div",{style:{display:"none"}}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.f)("img",{width:"100%",height:"100%",src:this.signatureUrl}))}}]),VerdocsFieldPayment}();VerdocsFieldPayment.style='verdocs-field-payment{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;width:24px;height:24px;display:block;font-size:11px;position:relative;border:1px solid #cfa;background-color:transparent;-webkit-transform-origin:bottom left;transform-origin:bottom left}verdocs-field-payment.disabled{opacity:0.5}verdocs-field-payment button,verdocs-field-payment div{-webkit-box-sizing:border-box;box-sizing:border-box}verdocs-field-payment button{color:rgba(0, 0, 0, 0.87);font-weight:500;-webkit-transform-origin:0 0;transform-origin:0 0;height:100%;width:100%;background:none;font-size:11px}verdocs-field-payment button.hide{display:none}verdocs-field-payment input{float:left;font-family:Arial, sans-serif}verdocs-field-payment select{position:absolute;font-family:Arial, sans-serif;background:linear-gradient(55deg, transparent 50%, #333 50%), linear-gradient(125deg, #333 50%, transparent 50%), linear-gradient(to right, transparent, transparent);background-position:calc(100% - 7px) 4px, calc(100% - 3px) 4px, 100% 0;background-size:5px 5px, 5px 5px, 2.5em 2.5em;background-repeat:no-repeat;-webkit-appearance:none;-moz-appearance:none;appearance:none}verdocs-field-payment .frame{width:100%;height:100%;background-size:contain;text-align:left}verdocs-field-payment .frame img{position:absolute;height:auto;width:100%}verdocs-field-payment.focused{-webkit-animation:verdocs-field-pulse 0.75s 2;animation:verdocs-field-pulse 0.75s 2}'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9VdGlscy9Db2xvcnMuanMiLCJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy9AdmVyZG9jcy9qcy1zZGsvVXRpbHMvRmllbGRzLmpzIiwid2VicGFjazovLy9zcmMvdXRpbHMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vL3NyYy9jb21wb25lbnRzL2VsZW1lbnRzL3ZlcmRvY3MtZmllbGQtcGF5bWVudC92ZXJkb2NzLWZpZWxkLXBheW1lbnQuc2NzcyIsIndlYnBhY2s6Ly8vc3JjL2NvbXBvbmVudHMvZWxlbWVudHMvdmVyZG9jcy1maWVsZC1wYXltZW50L3ZlcmRvY3MtZmllbGQtcGF5bWVudC50c3giXSwibmFtZXMiOlsiZ2V0UkdCQSIsInJvbGVJbmRleCIsInJlc2NhbGUiLCJyIiwibiIsImludGVnZXJTZXF1ZW5jZSIsInN0YXJ0IiwiY291bnQiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJfIiwiaW5kZXgiLCJmdWxsTmFtZVRvSW5pdGlhbHMiLCJuYW1lIiwic3BsaXQiLCJ3b3JkIiwiam9pbiIsInNldENvbnRyb2xTdHlsZXMiLCJlbCIsImZpZWxkIiwieFNjYWxlIiwieVNjYWxlIiwib3B0aW9uIiwic2V0dGluZ3MiLCJzZXR0aW5nIiwieCIsInkiLCJ3aWR0aCIsImRlZmF1bHRXaWR0aCIsInR5cGUiLCJoZWlnaHQiLCJkZWZhdWx0SGVpZ2h0Iiwib3B0aW9uU2V0dGluZ3MiLCJ1bmRlZmluZWQiLCJvcHRpb25zIiwiX2EiLCJfYiIsIl9jIiwiX2QiLCJzdHlsZSIsInBvc2l0aW9uIiwibGVmdCIsImJvdHRvbSIsInRyYW5zZm9ybSIsImJhY2tncm91bmRDb2xvciIsImdldEZpZWxkSWQiLCJnZXRGaWVsZE9wdGlvbklkIiwicmVuZGVyRG9jdW1lbnRGaWVsZCIsImRvY1BhZ2UiLCJoYW5kbGVGaWVsZENoYW5nZSIsImRpc2FibGVkIiwiY29udHJvbHNEaXYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY29udGFpbmVySWQiLCJpZCIsImV4aXN0aW5nRmllbGQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJhcHBlbmRDaGlsZCIsImZvckVhY2giLCJjaGVja2JveEluZGV4IiwiY29uc29sZSIsImxvZyIsImNiRWwiLCJidXR0b25JbmRleCIsImdldFJvbGVJbmRleCIsInJvbGVzIiwicm9sZSIsImluZGV4T2YiLCJnZXRGaWVsZFNldHRpbmdzIiwicmVxdWlyZWQiLCJyZXN1bHQiLCJ2YWx1ZSIsIlZlcmRvY3NGaWVsZFBheW1lbnQiLCJmb2N1c2VkIiwic2lnbmVkIiwic2lnbmF0dXJlVXJsIiwiX2ZpZWxkcyIsInNpZ25hdHVyZUZpbGUiLCJpbml0aWFsRmlsZSIsImZvY3VzT3JkZXJOdW1iZXIiLCJmb2N1c0ZpZWxkTmFtZSIsImFjdGl2ZUVsZW1lbnQiLCJzaG93RXJyb3IiLCJwYWdlTnVtIiwiZmllbGRJbmRleCIsImRpYWxvZ09wZW5lZCIsImNsb3NlQWxsRXJyb3JzIiwiZmllbGRzTWFwIiwiZmllbGRzRm9yQ3VycmVudFNpZ25lciIsImZvbnRTaXplIiwiYXZlcmFnZUZvbnRXaWR0aCIsInJlcXVpcmVkRmllbGRzIiwiY29tcG9uZW50V2lsbExvYWQiLCJ0aGlzIiwicmVjaXBpZW50cyIsImxlbmd0aCIsInByZXBhcmVyIiwiZmluZCIsInByZXBhcmVkTWVzc2FnZSIsInJlbmRlciIsImgiLCJIb3N0IiwiY2xhc3MiLCJoaWRlIiwiZGlzcGxheSIsInNyYyJdLCJtYXBwaW5ncyI6ImdLQThCTyxTQUFTQSxRQUFRQyxXQUNwQixPQUFRQSxVQUFZLElBQ2hCLEtBQUssRUFDRCxPQUFxQixJQUFkQSxVQUFrQix5QkFBMkIsMkJBQ3hELEtBQUssRUFDRCxNQUFPLHlCQUNYLEtBQUssRUFDRCxNQUFPLHlCQUNYLEtBQUssRUFDRCxNQUFPLDJCQUNYLEtBQUssRUFDRCxNQUFPLDJCQUNYLEtBQUssRUFDRCxNQUFPLDBC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Q2pDbUIsS0FBS25CLE9BQVMwQixpRUFBS0UsTUFBTSxVQUFhRixpRUFBS2pFLE1BQU8sQ0FBQ3FFLFFBQVMsVUFDN0RKLGlFQUFLN0UsTUFBTSxPQUFPRyxPQUFPLE9BQU8rRSxJQUFLWixLQUFLbEIsZUFHL0MsS0ExSDZCLHVCLDBCRGRELDQ3QyIsImZpbGUiOiIyMy42MGRlMTI2Yi5pZnJhbWUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBHaXZlbiBhIGByZ2JhKHIsZyxiLGEpYCBzdHJpbmcgdmFsdWUsIHJldHVybnMgdGhlIGhleCBlcXVpdmFsZW50LCBkcm9wcGluZyB0aGUgYWxwaGEgY2hhbm5lbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJHQihyZ2JhKSB7XG4gICAgdmFyIHJnYk51bWJlcnMgPSByZ2JhLnJlcGxhY2UoJ3JnYmEoJywgJycpLnJlcGxhY2UoJyknLCAnJykuc3BsaXQoJywnKTtcbiAgICB2YXIgcmdiT2JqZWN0ID0ge1xuICAgICAgICByZWQ6ICtyZ2JOdW1iZXJzWzBdLFxuICAgICAgICBncmVlbjogK3JnYk51bWJlcnNbMV0sXG4gICAgICAgIGJsdWU6ICtyZ2JOdW1iZXJzWzJdLFxuICAgICAgICBhbHBoYTogK3JnYk51bWJlcnNbM10sXG4gICAgfTtcbiAgICB2YXIgYWxwaGEgPSAxIC0gcmdiT2JqZWN0LmFscGhhO1xuICAgIHZhciByZWQgPSBNYXRoLnJvdW5kKChyZ2JPYmplY3QuYWxwaGEgKiAocmdiT2JqZWN0LnJlZCAvIDI1NSkgKyBhbHBoYSkgKiAyNTUpO1xuICAgIHZhciBncmVlbiA9IE1hdGgucm91bmQoKHJnYk9iamVjdC5hbHBoYSAqIChyZ2JPYmplY3QuZ3JlZW4gLyAyNTUpICsgYWxwaGEpICogMjU1KTtcbiAgICB2YXIgYmx1ZSA9IE1hdGgucm91bmQoKHJnYk9iamVjdC5hbHBoYSAqIChyZ2JPYmplY3QuYmx1ZSAvIDI1NSkgKyBhbHBoYSkgKiAyNTUpO1xuICAgIHJldHVybiAnIycgKyByZ2JUb0hleChyZWQpICsgcmdiVG9IZXgoZ3JlZW4pICsgcmdiVG9IZXgoYmx1ZSk7XG59XG4vKipcbiAqIEdpdmVuIGFuIFJHQiBzdHJpbmcgdmFsdWUsIHJldHVybnMgdGhlIGhleCBlcXVpdmFsZW50LlxuICovXG5mdW5jdGlvbiByZ2JUb0hleChyZ2IpIHtcbiAgICB2YXIgaGV4ID0gcmdiLnRvU3RyaW5nKDE2KTtcbiAgICBpZiAoaGV4Lmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuICcwJyArIGhleDtcbiAgICB9XG4gICAgcmV0dXJuIGhleDtcbn1cbi8qKlxuICogR2l2ZW4gYSBzaWduZXIgcm9sZSBpbmRleCwgcmV0dXJuIHRoZSBjb2xvciBjb2RlIGZvciB0aGF0IHNpZ25lci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJHQkEocm9sZUluZGV4KSB7XG4gICAgc3dpdGNoIChyb2xlSW5kZXggJSAxMCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gcm9sZUluZGV4ID09PSAwID8gJ3JnYmEoMjU1LCAxOTMsIDcsIDAuNCknIDogJ3JnYmEoMTM0LCAxMzQsIDEzNCwgMC4zKSc7IC8vICNGRkU2OUNcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDE1NiwgMzksIDE3NiwgLjQpJzsgLy8gJyNFM0MzRTknXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgzMywgMTUwLCAyNDMsIC40KSc7IC8vICcjQzFFMUZCJ1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMjIwLCAyMzEsIDExNywgMC4zKSc7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgxMjEsIDEzNCwgMjAzLCAwLjMpJztcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDc3LCAxODIsIDE3MiwgMC4zKSc7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgyNTUsIDIwMiwgMTY1LCAwLjMpJztcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDIsIDI0NywgMTkwLCAwLjMpJztcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDI1NSwgMTM4LCAxMDEsIDAuMyknO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoODIsIDI1NSwgNzksIDAuMyknO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDIyOSwgMTE1LCAxNTUsIDAuMyknO1xuICAgIH1cbn1cbi8qKlxuICogR2l2ZW4gYSByb2xlIG5hbWUsIHJldHVybiBhIGNvbG9yIGNvZGUgZm9yIGl0LiBUaGlzIHdvcmtzIGJ5IGNvbXB1dGluZyBhIGhhc2ggY29kZSBzbyB0aGUgc3BlY2lmaWMgY29sb3IgcmV0dXJuZWRcbiAqIGlzIG5vdCBzcGVjaWZpZWQgZXhwbGljaXRseSwgYnV0IHdpbGwgYmUgdGhlIHNhbWUgZm9yIGV2ZXJ5IGNhbGwgd2l0aCB0aGUgc2FtZSBpbnB1dCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5hbWVUb1JHQkEoc3RyKSB7XG4gICAgaWYgKCEhc3RyKSB7XG4gICAgICAgIHZhciB2YWxpZE51bSA9IHBhcnNlSW50KHN0ci5zbGljZSgtMSksIDEwKTtcbiAgICAgICAgaWYgKCFpc05hTih2YWxpZE51bSkpIHtcbiAgICAgICAgICAgIHN0ciArPSAodmFsaWROdW0gKiA5OSkudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaGFzaCA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBoYXNoID0gc3RyLmNoYXJDb2RlQXQoaSkgKyAoKGhhc2ggPDwgNSkgLSBoYXNoKTtcbiAgICAgICAgfVxuICAgICAgICBoYXNoID0gTWF0aC5yb3VuZChoYXNoIC8gMS4zKTtcbiAgICAgICAgdmFyIGMgPSAoaGFzaCAmIDB4MDBmZmZmMDgpLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB2YXIgaGV4ID0gJyMnICsgJzAwMDAwJy5zdWJzdHJpbmcoMCwgNiAtIGMubGVuZ3RoKSArIGM7XG4gICAgICAgIHZhciByZXN1bHQgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcbiAgICAgICAgdmFyIGNvbG9yID0ge1xuICAgICAgICAgICAgcjogcGFyc2VJbnQocmVzdWx0WzFdLCAxNiksXG4gICAgICAgICAgICBnOiBwYXJzZUludChyZXN1bHRbMl0sIDE2KSxcbiAgICAgICAgICAgIGI6IHBhcnNlSW50KHJlc3VsdFszXSwgMTYpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gXCJyZ2JhKFwiLmNvbmNhdChjb2xvci5yLCBcIiwgXCIpLmNvbmNhdChjb2xvci5nLCBcIiwgXCIpLmNvbmNhdChjb2xvci5iLCBcIiwgMC4yKVwiKTtcbiAgICB9XG59XG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBvYnRhaW4gYSBjb2xvciBjb2RlIGdpdmVuIGEgcm9sZSBuYW1lIGdpdmVuIHZhcmlvdXMgcG9zc2libGUgaW5wdXRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Um9sZUNvbG9yKG5hbWUsIHJvbGVzLCBpbmRleCkge1xuICAgIGlmIChpbmRleCkge1xuICAgICAgICByZXR1cm4gZ2V0UkdCQShpbmRleCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJvbGVzICYmIHJvbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIHJvbGVJbmRleCA9IHJvbGVzLmZpbmRJbmRleChmdW5jdGlvbiAocm9sZSkgeyByZXR1cm4gcm9sZS5uYW1lID09PSBuYW1lOyB9KTtcbiAgICAgICAgaWYgKHJvbGVJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gcm9sZXNbcm9sZUluZGV4XS5yZ2JhIHx8IGdldFJHQkEocm9sZUluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuYW1lVG9SR0JBKG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbmFtZVRvUkdCQShuYW1lKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZ2V0UlRvcCh5LCBmaWVsZEhlaWdodCwgaVRleHRIZWlnaHQsIHlSYXRpbykge1xuICAgIHJldHVybiBpVGV4dEhlaWdodCAtICh5ICsgZmllbGRIZWlnaHQpICogeVJhdGlvO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFJMZWZ0KHgsIHJhdGlvKSB7XG4gICAgcmV0dXJuIHggKiByYXRpbztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRSVmFsdWUoeSwgcmF0aW8pIHtcbiAgICByZXR1cm4geSAqIHJhdGlvO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJsb2JUb0Jhc2U2NChpbWFnZSkge1xuICAgIHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmaWxlUmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZWplY3QobmV3IERPTUV4Y2VwdGlvbignUHJvYmxlbSByZWFkaW5nIGJsb2IuJykpO1xuICAgICAgICB9O1xuICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc29sdmUoZmlsZVJlYWRlci5yZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2UpO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc2NhbGUociwgbikge1xuICAgIHJldHVybiByICogbjtcbn1cbiIsIi8vIFRoZXNlIHNob3VsZCBwcm9iYWJseSBhbGwgbW92ZSB0byBKUy1TREtcbmltcG9ydCB7cmVzY2FsZX0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1V0aWxzL0ZpZWxkcyc7XG5pbXBvcnQge2dldFJHQkF9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9VdGlscy9Db2xvcnMnO1xuaW1wb3J0IHtJVGVtcGxhdGVGaWVsZH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcy9UeXBlcyc7XG5pbXBvcnQge0lEb2N1bWVudEZpZWxkfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvRG9jdW1lbnRzL1R5cGVzJztcbmltcG9ydCB7SURvY3VtZW50UGFnZUluZm99IGZyb20gJy4vVHlwZXMnO1xuXG5leHBvcnQgY29uc3QgaW50ZWdlclNlcXVlbmNlID0gKHN0YXJ0OiBudW1iZXIsIGNvdW50OiBudW1iZXIpOiBudW1iZXJbXSA9PlxuICBBcnJheShjb3VudClcbiAgICAuZmlsbCgxKVxuICAgIC5tYXAoKF8sIGluZGV4KSA9PiBpbmRleCArIHN0YXJ0KTtcblxuZXhwb3J0IGNvbnN0IGZ1bGxOYW1lVG9Jbml0aWFscyA9IChuYW1lOiBzdHJpbmcpID0+XG4gIG5hbWVcbiAgICAuc3BsaXQoJyAnKVxuICAgIC5tYXAod29yZCA9PiB3b3JkWzBdKVxuICAgIC5qb2luKCcnKTtcblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRXaWR0aCA9IChmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCkgPT4ge1xuICBzd2l0Y2ggKGZpZWxkLnR5cGUpIHtcbiAgICBjYXNlICdhdHRhY2htZW50JzpcbiAgICBjYXNlICdwYXltZW50JzpcbiAgICAgIHJldHVybiAyNDtcbiAgICBjYXNlICdjaGVja2JveCc6XG4gICAgY2FzZSAnY2hlY2tib3hfZ3JvdXAnOlxuICAgIGNhc2UgJ3JhZGlvX2J1dHRvbl9ncm91cCc6XG4gICAgICByZXR1cm4gMTQ7XG4gICAgY2FzZSAnc2lnbmF0dXJlJzpcbiAgICBjYXNlICdpbml0aWFsJzpcbiAgICAgIHJldHVybiA4MjtcbiAgfVxuXG4gIHJldHVybiAxNTA7XG59O1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdEhlaWdodCA9IChmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCkgPT4ge1xuICBzd2l0Y2ggKGZpZWxkLnR5cGUpIHtcbiAgICBjYXNlICdhdHRhY2htZW50JzpcbiAgICBjYXNlICdwYXltZW50JzpcbiAgICAgIHJldHVybiAyNDtcbiAgICBjYXNlICdjaGVja2JveCc6XG4gICAgY2FzZSAnY2hlY2tib3hfZ3JvdXAnOlxuICAgIGNhc2UgJ3JhZGlvX2J1dHRvbl9ncm91cCc6XG4gICAgICByZXR1cm4gMTQ7XG4gICAgY2FzZSAnc2lnbmF0dXJlJzpcbiAgICBjYXNlICdpbml0aWFsJzpcbiAgICAgIHJldHVybiA0MTtcbiAgfVxuXG4gIHJldHVybiA1MDtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRDb250cm9sU3R5bGVzID0gKGVsOiBIVE1MRWxlbWVudCwgZmllbGQ6IElUZW1wbGF0ZUZpZWxkIHwgSURvY3VtZW50RmllbGQsIHhTY2FsZTogbnVtYmVyLCB5U2NhbGU6IG51bWJlciwgcm9sZUluZGV4OiBudW1iZXIsIG9wdGlvbj86IG51bWJlcikgPT4ge1xuICBjb25zdCBzZXR0aW5ncyA9IChmaWVsZCBhcyBJVGVtcGxhdGVGaWVsZCkuc2V0dGluZyB8fCAoZmllbGQgYXMgSURvY3VtZW50RmllbGQpLnNldHRpbmdzO1xuICBsZXQge3ggPSAwLCB5ID0gMCwgd2lkdGggPSBkZWZhdWx0V2lkdGgoZmllbGQpLCBoZWlnaHQgPSBkZWZhdWx0SGVpZ2h0KGZpZWxkKX0gPSBzZXR0aW5ncztcblxuICBjb25zdCBvcHRpb25TZXR0aW5ncyA9IG9wdGlvbiAhPT0gdW5kZWZpbmVkICYmIHNldHRpbmdzLm9wdGlvbnNbb3B0aW9uXSA/IHNldHRpbmdzLm9wdGlvbnNbb3B0aW9uXSA6IG51bGw7XG4gIGlmIChvcHRpb25TZXR0aW5ncykge1xuICAgIHggPSBvcHRpb25TZXR0aW5ncy54ID8/IHg7XG4gICAgeSA9IG9wdGlvblNldHRpbmdzLnkgPz8geTtcbiAgICB3aWR0aCA9IG9wdGlvblNldHRpbmdzLndpZHRoID8/IHdpZHRoO1xuICAgIGhlaWdodCA9IG9wdGlvblNldHRpbmdzLmhlaWdodCA/PyBoZWlnaHQ7XG4gIH1cblxuICBlbC5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDtcbiAgZWwuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcbiAgZWwuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICBlbC5zdHlsZS5sZWZ0ID0gYCR7cmVzY2FsZSh4U2NhbGUsIHgpfXB4YDtcbiAgZWwuc3R5bGUuYm90dG9tID0gYCR7cmVzY2FsZSh5U2NhbGUsIHkpfXB4YDtcbiAgZWwuc3R5bGUudHJhbnNmb3JtID0gYHNjYWxlKCR7eFNjYWxlfSwgJHt5U2NhbGV9KWA7XG4gIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGZpZWxkWydyZ2JhJ10gfHwgZ2V0UkdCQShyb2xlSW5kZXgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEZpZWxkSWQgPSAoZmllbGQ6IElUZW1wbGF0ZUZpZWxkIHwgSURvY3VtZW50RmllbGQpID0+IHtcbiAgcmV0dXJuIGB2ZXJkb2NzLWRvYy1mbGQtJHtmaWVsZC5uYW1lfWA7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0RmllbGRPcHRpb25JZCA9IChmaWVsZDogSVRlbXBsYXRlRmllbGQsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgcmV0dXJuIGB2ZXJkb2NzLWRvYy1mbGQtJHtmaWVsZC5uYW1lfS0ke2luZGV4fWA7XG59O1xuXG5leHBvcnQgY29uc3QgcmVuZGVyRG9jdW1lbnRGaWVsZCA9IChcbiAgZmllbGQ6IElUZW1wbGF0ZUZpZWxkLFxuICBkb2NQYWdlOiBJRG9jdW1lbnRQYWdlSW5mbyxcbiAgcm9sZUluZGV4OiBudW1iZXIsXG4gIGhhbmRsZUZpZWxkQ2hhbmdlOiAoZmllbGQ6IElUZW1wbGF0ZUZpZWxkLCBlOiBhbnksIG9wdGlvbklkPzogc3RyaW5nKSA9PiB2b2lkLFxuICBkaXNhYmxlZDogYm9vbGVhbixcbikgPT4ge1xuICBjb25zdCBjb250cm9sc0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRvY1BhZ2UuY29udGFpbmVySWQgKyAnLWNvbnRyb2xzJyk7XG4gIGlmICghY29udHJvbHNEaXYpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2l0Y2ggKGZpZWxkLnR5cGUpIHtcbiAgICBjYXNlICdhdHRhY2htZW50JzpcbiAgICBjYXNlICdkYXRlJzpcbiAgICBjYXNlICdkcm9wZG93bic6XG4gICAgY2FzZSAnaW5pdGlhbCc6XG4gICAgY2FzZSAncGF5bWVudCc6XG4gICAgY2FzZSAnc2lnbmF0dXJlJzpcbiAgICBjYXNlICd0aW1lc3RhbXAnOlxuICAgIGNhc2UgJ3RleHRhcmVhJzpcbiAgICBjYXNlICd0ZXh0Ym94JzpcbiAgICAgIHtcbiAgICAgICAgY29uc3QgaWQgPSBnZXRGaWVsZElkKGZpZWxkKTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nRmllbGQpIHtcbiAgICAgICAgICBzZXRDb250cm9sU3R5bGVzKGV4aXN0aW5nRmllbGQsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUsIHJvbGVJbmRleCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZWw6IGFueSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYHZlcmRvY3MtZmllbGQtJHtmaWVsZC50eXBlfWApO1xuICAgICAgICBlbC5maWVsZCA9IGZpZWxkO1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2lkJywgaWQpO1xuICAgICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignZmllbGRDaGFuZ2UnLCBlID0+IGhhbmRsZUZpZWxkQ2hhbmdlKGZpZWxkLCBlKSk7XG4gICAgICAgIHNldENvbnRyb2xTdHlsZXMoZWwsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUsIHJvbGVJbmRleCk7XG4gICAgICAgIGNvbnRyb2xzRGl2LmFwcGVuZENoaWxkKGVsKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnY2hlY2tib3hfZ3JvdXAnOlxuICAgICAgZmllbGQuc2V0dGluZy5vcHRpb25zLmZvckVhY2goKG9wdGlvbiwgY2hlY2tib3hJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpZCA9IGdldEZpZWxkT3B0aW9uSWQoZmllbGQsIGNoZWNrYm94SW5kZXgpO1xuICAgICAgICBjb25zdCBleGlzdGluZ0ZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICBpZiAoZXhpc3RpbmdGaWVsZCkge1xuICAgICAgICAgIHNldENvbnRyb2xTdHlsZXMoZXhpc3RpbmdGaWVsZCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSwgcm9sZUluZGV4LCBjaGVja2JveEluZGV4KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZygnQWRkaW5nIGNoZWNrYm94Jywgb3B0aW9uKTtcbiAgICAgICAgY29uc3QgY2JFbDogYW55ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgdmVyZG9jcy1maWVsZC1jaGVja2JveGApO1xuICAgICAgICBjYkVsLmZpZWxkID0gZmllbGQ7XG4gICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdpZCcsIGlkKTtcbiAgICAgICAgY2JFbC5zZXRBdHRyaWJ1dGUoJ29wdGlvbicsIGNoZWNrYm94SW5kZXgpO1xuICAgICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZpZWxkQ2hhbmdlJywgZSA9PiBoYW5kbGVGaWVsZENoYW5nZShmaWVsZCwgZSkpO1xuICAgICAgICBzZXRDb250cm9sU3R5bGVzKGNiRWwsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUsIHJvbGVJbmRleCwgY2hlY2tib3hJbmRleCk7XG4gICAgICAgIGNvbnRyb2xzRGl2LmFwcGVuZENoaWxkKGNiRWwpO1xuICAgICAgfSk7XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAncmFkaW9fYnV0dG9uX2dyb3VwJzpcbiAgICAgIGZpZWxkLnNldHRpbmcub3B0aW9ucy5mb3JFYWNoKChvcHRpb24sIGJ1dHRvbkluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlkID0gZ2V0RmllbGRPcHRpb25JZChmaWVsZCwgYnV0dG9uSW5kZXgpO1xuICAgICAgICBjb25zdCBleGlzdGluZ0ZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICBpZiAoZXhpc3RpbmdGaWVsZCkge1xuICAgICAgICAgIHNldENvbnRyb2xTdHlsZXMoZXhpc3RpbmdGaWVsZCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSwgcm9sZUluZGV4LCBidXR0b25JbmRleCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0FkZGluZyByYWRpbyBidXR0b24nLCBvcHRpb24pO1xuICAgICAgICBjb25zdCBjYkVsOiBhbnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGB2ZXJkb2NzLWZpZWxkLXJhZGlvLWJ1dHRvbmApO1xuICAgICAgICBjYkVsLmZpZWxkID0gZmllbGQ7XG4gICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdpZCcsIGlkKTtcbiAgICAgICAgY2JFbC5zZXRBdHRyaWJ1dGUoJ29wdGlvbicsIGJ1dHRvbkluZGV4KTtcbiAgICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgICAgY2JFbC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2JFbC5hZGRFdmVudExpc3RlbmVyKCdmaWVsZENoYW5nZScsIGUgPT4gaGFuZGxlRmllbGRDaGFuZ2UoZmllbGQsIGUpKTtcbiAgICAgICAgc2V0Q29udHJvbFN0eWxlcyhjYkVsLCBmaWVsZCwgZG9jUGFnZS54U2NhbGUsIGRvY1BhZ2UueVNjYWxlLCByb2xlSW5kZXgsIGJ1dHRvbkluZGV4KTtcbiAgICAgICAgY29udHJvbHNEaXYuYXBwZW5kQ2hpbGQoY2JFbCk7XG4gICAgICB9KTtcblxuICAgICAgYnJlYWs7XG5cbiAgICAvLyBjYXNlICdhdHRhY2htZW50JzpcbiAgICAvLyAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmVyZG9jcy1maWVsZC1hdHRhY2htZW50Jyk7XG4gICAgLy8gICBlbC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgcmVzdWx0IHx8ICcnKTtcbiAgICAvLyAgIGJyZWFrO1xuICAgIC8vIGNhc2UgJ3BheW1lbnQnOlxuICAgIC8vICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2ZXJkb2NzLWZpZWxkLXBheW1lbnQnKTtcbiAgICAvLyAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBjb25zb2xlLmxvZygnW1BSRVZJRVddIFNraXBwaW5nIHVuc3VwcG9ydGVkIGZpZWxkIHR5cGUnLCBmaWVsZCk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBnZXRSb2xlSW5kZXggPSAocm9sZXM6IHN0cmluZ1tdLCByb2xlOiBzdHJpbmcpID0+IHJvbGVzLmluZGV4T2Yocm9sZSkgfHwgMDtcblxuLy8gVE9ETzogV2UgY2FuIGNsZWFuIHRoaXMgdXAgYSBsb3QgaWYgd2UgYWx0ZXIgdGhlIEFQSSB0byBlbWl0IGJvdGggc2V0dGluZyBhbmQgc2V0dGluZ3MgcmVnYXJkbGVzcyBvZiB0aGUgc291cmNlIHR5cGUsXG4vLyAgIGJ1dCB0aGVuIG1lcmdlIHRoZSBTREsgdHlwZXMgdG8gZW5jb3VyYWdlIGRldmVsb3BlcnMgdG8gdXNlIGp1c3QgYHNldHRpbmdzYC5cbmV4cG9ydCBjb25zdCBnZXRGaWVsZFNldHRpbmdzID0gKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCB8IElEb2N1bWVudEZpZWxkKSA9PiB7XG4gIGlmICgoZmllbGQgYXMgSVRlbXBsYXRlRmllbGQpLnNldHRpbmcpIHtcbiAgICByZXR1cm4gKGZpZWxkIGFzIElUZW1wbGF0ZUZpZWxkKS5zZXR0aW5nO1xuICB9XG5cbiAgaWYgKChmaWVsZCBhcyBJRG9jdW1lbnRGaWVsZCkuc2V0dGluZ3MpIHtcbiAgICByZXR1cm4gKGZpZWxkIGFzIElEb2N1bWVudEZpZWxkKS5zZXR0aW5ncztcbiAgfVxuXG4gIHJldHVybiB7eDogMCwgeTogMCwgcmVxdWlyZWQ6IGZhbHNlLCBkaXNhYmxlZDogZmFsc2UsIHJlc3VsdDogJycsIHZhbHVlOiAnJ307XG59O1xuIiwiQGltcG9ydCAnLi4vLi4vLi4vdGhlbWUuc2Nzcyc7XG5cbnZlcmRvY3MtZmllbGQtcGF5bWVudCB7XG4gIGZvbnQtZmFtaWx5OiAkdmVyZG9jcy1wcmltYXJ5LWZvbnQ7XG4gIHdpZHRoOiAyNHB4O1xuICBoZWlnaHQ6IDI0cHg7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBmb250LXNpemU6IDExcHg7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyOiAxcHggc29saWQgI2NmYTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIHRyYW5zZm9ybS1vcmlnaW46IGJvdHRvbSBsZWZ0O1xuXG4gICYuZGlzYWJsZWQge1xuICAgIG9wYWNpdHk6IDAuNTtcbiAgfVxuXG4gIGJ1dHRvbixcbiAgZGl2IHtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICB9XG5cbiAgYnV0dG9uIHtcbiAgICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg3KTtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIHRyYW5zZm9ybS1vcmlnaW46IDAgMDtcbiAgICAvL2JhY2tncm91bmQtY29sb3I6IHJnYmEoMjI1LCAyNTUsIDI1NSwgMC41KTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICBmb250LXNpemU6IDExcHg7XG5cbiAgICAmLmhpZGUge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gIH1cblxuICBpbnB1dCB7XG4gICAgZmxvYXQ6IGxlZnQ7XG4gICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO1xuICB9XG5cbiAgc2VsZWN0IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO1xuICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg1NWRlZywgdHJhbnNwYXJlbnQgNTAlLCAjMzMzIDUwJSksIGxpbmVhci1ncmFkaWVudCgxMjVkZWcsICMzMzMgNTAlLCB0cmFuc3BhcmVudCA1MCUpLCBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHRyYW5zcGFyZW50LCB0cmFuc3BhcmVudCk7XG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2FsYygxMDAlIC0gN3B4KSA0cHgsIGNhbGMoMTAwJSAtIDNweCkgNHB4LCAxMDAlIDA7XG4gICAgYmFja2dyb3VuZC1zaXplOiA1cHggNXB4LCA1cHggNXB4LCAyLjVlbSAyLjVlbTtcbiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICAgIGFwcGVhcmFuY2U6IG5vbmU7XG4gIH1cblxuICAuZnJhbWUge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvbnRhaW47XG4gICAgdGV4dC1hbGlnbjogbGVmdDtcblxuICAgIGltZyB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICB9XG4gIH1cblxuICAmLmZvY3VzZWQge1xuICAgIGFuaW1hdGlvbjogdmVyZG9jcy1maWVsZC1wdWxzZSAwLjc1cyAyO1xuICB9XG59XG4iLCJpbXBvcnQge0lUZW1wbGF0ZUZpZWxkfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzL1R5cGVzJztcbmltcG9ydCB7SURvY3VtZW50RmllbGQsIElSZWNpcGllbnR9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9Eb2N1bWVudHMvVHlwZXMnO1xuaW1wb3J0IHtDb21wb25lbnQsIGgsIEhvc3QsIFByb3AsIEV2ZW50LCBFdmVudEVtaXR0ZXIsIFN0YXRlfSBmcm9tICdAc3RlbmNpbC9jb3JlJztcbmltcG9ydCB7Z2V0RmllbGRTZXR0aW5nc30gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xuXG4vKipcbiAqIERpc3BsYXlzIGEgc2lnbmF0dXJlIGZpZWxkLiBWYXJpb3VzIGZpZWxkIHR5cGVzIGFyZSBzdXBwb3J0ZWQsIGluY2x1ZGluZyB0cmFkaXRpb25hbCBTaWduYXR1cmUgYW5kIEluaXRpYWxzIHR5cGVzIGFzIHdlbGwgYXNcbiAqIGlucHV0IHR5cGVzIGxpa2UgdGV4dCBhbmQgY2hlY2tib3guXG4gKi9cbkBDb21wb25lbnQoe1xuICB0YWc6ICd2ZXJkb2NzLWZpZWxkLXBheW1lbnQnLFxuICBzdHlsZVVybDogJ3ZlcmRvY3MtZmllbGQtcGF5bWVudC5zY3NzJyxcbiAgc2hhZG93OiBmYWxzZSxcbn0pXG5leHBvcnQgY2xhc3MgVmVyZG9jc0ZpZWxkUGF5bWVudCB7XG4gIC8qKlxuICAgKiBUaGUgZG9jdW1lbnQgb3IgdGVtcGxhdGUgZmllbGQgdG8gZGlzcGxheS5cbiAgICovXG4gIEBQcm9wKCkgZmllbGQ6IElEb2N1bWVudEZpZWxkIHwgSVRlbXBsYXRlRmllbGQgfCBudWxsID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIHJlY2lwaWVudCBjb21wbGV0aW5nIHRoZSBmb3JtLCBpZiBrbm93bi5cbiAgICovXG4gIEBQcm9wKCkgcmVjaXBpZW50PzogSVJlY2lwaWVudDtcblxuICAvKipcbiAgICogSWYgc2V0LCBvdmVycmlkZXMgdGhlIGZpZWxkJ3Mgc2V0dGluZ3Mgb2JqZWN0LiBQcmltYXJpbHkgdXNlZCB0byBzdXBwb3J0IFwicHJldmlld1wiIG1vZGVzIHdoZXJlIGFsbCBmaWVsZHMgYXJlIGRpc2FibGVkLlxuICAgKi9cbiAgQFByb3AoKSBkaXNhYmxlZD86IGJvb2xlYW4gPSBmYWxzZTtcblxuICBAUHJvcCgpIGZpZWxkczogYW55W107XG4gIEBQcm9wKCkgcGFnZU51bTogbnVtYmVyO1xuICBAUHJvcCgpIHJvbGVOYW1lOiBzdHJpbmc7XG4gIEBQcm9wKCkgZmllbGRJZDogc3RyaW5nO1xuICBAUHJvcCgpIHJlY2lwaWVudHM6IGFueTtcbiAgQFByb3AoKSBzZWxlY3RlZFJvbGVOYW1lOiBzdHJpbmc7XG4gIEBQcm9wKCkgcGRmUGFnZXM6IGFueVtdO1xuICBAUHJvcCgpIGN1cnJlbnRTaWduYXR1cmU6IHN0cmluZztcbiAgQFByb3AoKSBjdXJyZW50U2lnbmF0dXJlSWQ6IHN0cmluZztcbiAgQFByb3AoKSBjdXJyZW50SW5pdGlhbDogc3RyaW5nO1xuICBAUHJvcCgpIGN1cnJlbnRJbml0aWFsSWQ6IHN0cmluZztcbiAgQFByb3AoKSBmb2N1c2VkOiBib29sZWFuID0gZmFsc2U7XG4gIEBQcm9wKCkgc2lnbmVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgQEV2ZW50KHtjb21wb3NlZDogdHJ1ZX0pIHNpZ25hdHVyZUNvbXBsZXRlOiBFdmVudEVtaXR0ZXI8c3RyaW5nPjtcblxuICBARXZlbnQoe2NvbXBvc2VkOiB0cnVlfSkgaW5pdGlhbENvbXBsZXRlOiBFdmVudEVtaXR0ZXI8c3RyaW5nPjtcblxuICBAU3RhdGUoKSBwcmVwYXJlZE1lc3NhZ2U6IHN0cmluZztcbiAgQFN0YXRlKCkgc2lnbmF0dXJlVXJsOiBzdHJpbmcgPSAnJztcblxuICBfZmllbGRzOiBhbnlbXSA9IFtdO1xuICAvLyBlbnZlbG9wZUZpZWxkc0Zvcm1Hcm91cDogRm9ybUdyb3VwO1xuICBzaWduYXR1cmVGaWxlOiBhbnkgPSBudWxsO1xuICBpbml0aWFsRmlsZTogYW55ID0gbnVsbDtcbiAgdG9kYXk6IHN0cmluZztcbiAgZm9jdXNPcmRlck51bWJlciA9IC0xO1xuICBmb2N1c0ZpZWxkTmFtZTogc3RyaW5nID0gJyc7XG4gIHRpbWVyOiBhbnk7XG4gIGFjdGl2ZUVsZW1lbnQgPSBudWxsO1xuICBzaG93RXJyb3IgPSB7XG4gICAgcGFnZU51bTogLTEsXG4gICAgZmllbGRJbmRleDogLTEsXG4gICAgdHlwZTogbnVsbCxcbiAgfTtcbiAgZGlhbG9nT3BlbmVkID0gZmFsc2U7XG4gIGNsb3NlQWxsRXJyb3JzID0gZmFsc2U7XG4gIGZpZWxkc01hcDogYW55ID0ge307XG4gIG1vZGU6IHN0cmluZztcblxuICBmaWVsZHNGb3JDdXJyZW50U2lnbmVyOiBhbnlbXSA9IFtdO1xuXG4gIHZhbGlkYXRvcnM7XG4gIGZvbnRTaXplID0gMTE7XG4gIGF2ZXJhZ2VGb250V2lkdGggPSA1O1xuICByZXF1aXJlZEZpZWxkczogYW55W10gPSBbXTtcblxuICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAvLyBMb2FkIHZhbGlkYXRvcnNcbiAgICAvLyBMb2FkIGZpZWxkc1xuICAgIC8vIEdldCByb2xlIG5hbWVzXG4gICAgY29uc29sZS5sb2coJ3NpZ24gZmllbGQnLCB0aGlzLmZpZWxkKTtcblxuICAgIGlmICh0aGlzLnJlY2lwaWVudHMgJiYgdGhpcy5yZWNpcGllbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHByZXBhcmVyID0gdGhpcy5yZWNpcGllbnRzLmZpbmQociA9PiByLnR5cGUgPT09ICdwcmVwYXJlcicpO1xuICAgICAgY29uc29sZS5sb2coJ0ZvdW5kIHByZXBhcmVyJywgcHJlcGFyZXIpO1xuICAgICAgaWYgKHByZXBhcmVyKSB7XG4gICAgICAgIHRoaXMucHJlcGFyZWRNZXNzYWdlID0gYFByZXBhcmVkIGJ5ICR7cHJlcGFyZXJbJ2Z1bGxfbmFtZSddfWA7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gW3RhYkluZGV4XT1cImZpZWxkLnJvbGUgIT09IHJvbGVOYW1lID8gLTEgOiAxXCJcbiAgLy8gW25nU3R5bGVdPVwiZmllbGQuZWxlbWVudF9zdHlsZVwiXG4gIC8vIFt2YWx1ZV09XCJmaWVsZC52YWx1ZVwiXG4gIC8vIChjbGljayk9XCJpbml0aWF0ZVNpZ24oZmllbGQpXCJcbiAgLy8gKGJsdXIpPVwidmFsaWRhdGVDaGFuZ2VzKGZpZWxkKVwiXG4gIC8vIFtkaXNhYmxlZF09XCJmaWVsZC5yb2xlIT09cm9sZU5hbWVcIlxuICAvLyBbaWRdPVwiZmllbGQua2V5XCJcblxuICAvLyA8YnV0dG9uIF9uZ2NvbnRlbnQtYXBwLXJvb3QtYzM0Mj1cIlwiIGNsYXNzPVwiZW52ZWxvcGVfX2ZpZWxkXCIgdGFiaW5kZXg9XCIxXCIgbmctcmVmbGVjdC1uZy1zdHlsZT1cIltvYmplY3QgT2JqZWN0XVwiXG4gIC8vIG5nLXJlZmxlY3QtbmctY2xhc3M9XCJbb2JqZWN0IE9iamVjdF1cIiB2YWx1ZT1cIlwiIGlkPVwic2lnbmF0dXJlUDUtMVwiXG4gIC8vIHN0eWxlPVwiaGVpZ2h0OiAxMDAlOyB3aWR0aDogMTAwJTsgYmFja2dyb3VuZDogbm9uZTsgZm9udC1zaXplOiAxMXB4OyBib3JkZXI6IDFweCBzb2xpZCByZ2IoMjA0LCAwLCAwKTtcIj4gU2lnbmF0dXJlIDwvYnV0dG9uPlxuXG4gIC8vICAgICBib3R0b206IDIyOS4zMzNcbiAgLy8gcHhcbiAgLy8gO1xuICAvLyAgICAgbGVmdDogMTY5LjMzM1xuICAvLyBweFxuICAvLyA7XG4gIC8vICAgICBoZWlnaHQ6IDQxXG4gIC8vIHB4XG4gIC8vIDtcbiAgLy8gICAgIHdpZHRoOiA4MlxuICAvLyBweFxuICAvLyA7XG4gIC8vICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDE1NiwgMzksIDE3NiwgMC40KTtcbiAgLy8gICAgIHRyYW5zZm9ybTogc2NhbGUoMS4zMzMzMywgMS4zMzMzMyk7XG4gIC8vIH1cbiAgLy8gPHN0eWxlPlxuICAvLyAuZW52ZWxvcGVfX2l0ZW1bX25nY29udGVudC1hcHAtcm9vdC1jMzQyXSB7XG4gIC8vICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIC8vICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBib3R0b20gbGVmdDtcbiAgLy8gICAgIG9wYWNpdHk6IDE7XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHNldHRpbmdzID0gZ2V0RmllbGRTZXR0aW5ncyh0aGlzLmZpZWxkKTtcbiAgICBjb25zdCBkaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQgPz8gc2V0dGluZ3MuZGlzYWJsZWQgPz8gZmFsc2U7XG4gICAgY29uc29sZS5sb2coJ1BheW1lbnQgZmllbGQnLCBzZXR0aW5ncyk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxIb3N0IGNsYXNzPXt7Zm9jdXNlZDogdGhpcy5mb2N1c2VkLCBkaXNhYmxlZH19PlxuICAgICAgICA8YnV0dG9uIGNsYXNzPXt7aGlkZTogdGhpcy5zaWduZWR9fT4kPC9idXR0b24+XG4gICAgICAgIHt0aGlzLnNpZ25lZCA/IDxkaXYgY2xhc3M9XCJmcmFtZVwiIC8+IDogPGRpdiBzdHlsZT17e2Rpc3BsYXk6ICdub25lJ319IC8+fVxuICAgICAgICA8aW1nIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiBzcmM9e3RoaXMuc2lnbmF0dXJlVXJsfSAvPlxuICAgICAgPC9Ib3N0PlxuICAgICk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=
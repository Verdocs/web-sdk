/*! For license information please see 18.9a24afcb.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"./dist/esm/Colors-1b298092.js":function(module,__webpack_exports__,__webpack_require__){"use strict";function getRGBA(roleIndex){switch(roleIndex%10){case 0:return 0===roleIndex?"rgba(255, 193, 7, 0.4)":"rgba(134, 134, 134, 0.3)";case 1:return"rgba(156, 39, 176, .4)";case 2:return"rgba(33, 150, 243, .4)";case 3:return"rgba(220, 231, 117, 0.3)";case 4:return"rgba(121, 134, 203, 0.3)";case 5:return"rgba(77, 182, 172, 0.3)";case 6:return"rgba(255, 202, 165, 0.3)";case 7:return"rgba(2, 247, 190, 0.3)";case 8:return"rgba(255, 138, 101, 0.3)";case 9:return"rgba(82, 255, 79, 0.3)";default:return"rgba(229, 115, 155, 0.3)"}}__webpack_require__.d(__webpack_exports__,"a",(function(){return getRGBA}))},"./dist/esm/Templates-22116158.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getTemplates})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getTemplate}));var getTemplates=function getTemplates(endpoint,params){return endpoint.api.get("/templates",{params:params}).then((function(r){return r.data}))},getTemplate=function getTemplate(endpoint,templateId){return endpoint.api.get("/templates/".concat(templateId)).then((function(r){return r.data}))}},"./dist/esm/Validators-f110bae2.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isValidPhone})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isValidEmail}));var EMAIL_REGEX=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,isValidEmail=function isValidEmail(email){return!!email&&EMAIL_REGEX.test(email)},PHONE_REGEX=/((?:\+|00)[17](?: |\-)?|(?:\+|00)[1-9]\d{0,2}(?: |\-)?|(?:\+|00)1\-\d{3}(?: |\-)?)?(0\d|\([0-9]{3}\)|[1-9]{0,3})(?:((?: |\-)[0-9]{2}){4}|((?:[0-9]{2}){4})|((?: |\-)[0-9]{3}(?: |\-)[0-9]{4})|([0-9]{7}))/,isValidPhone=function isValidPhone(phone){return!!phone&&PHONE_REGEX.test(phone)}},"./dist/esm/utils-3f23facc.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getRoleIndex})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getFieldId})),__webpack_require__.d(__webpack_exports__,"c",(function(){return rescale})),__webpack_require__.d(__webpack_exports__,"d",(function(){return fullNameToInitials})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getFieldSettings})),__webpack_require__.d(__webpack_exports__,"f",(function(){return integerSequence})),__webpack_require__.d(__webpack_exports__,"g",(function(){return renderDocumentField})),__webpack_require__.d(__webpack_exports__,"h",(function(){return setControlStyles}));__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js");function rescale(r,n){return r*n}var integerSequence=function integerSequence(start,count){return Array(count).fill(1).map((function(_,index){return index+start}))},fullNameToInitials=function fullNameToInitials(name){return name.split(" ").map((function(word){return word[0]})).join("")},setControlStyles=function setControlStyles(el,field,xScale,yScale,option){var _a,_b,_c,_d,settings=field.setting||field.settings,_settings$x=settings.x,x=void 0===_settings$x?0:_settings$x,_settings$y=settings.y,y=void 0===_settings$y?0:_settings$y,_settings$width=settings.width,width=void 0===_settings$width?function defaultWidth(field){switch(field.type){case"attachment":case"payment":return 24;case"checkbox":case"checkbox_group":case"radio_button_group":return 14;case"signature":case"initial":return 82}return 150}(field):_settings$width,_settings$height=settings.height,height=void 0===_settings$height?function defaultHeight(field){switch(field.type){case"attachment":case"payment":return 24;case"checkbox":case"checkbox_group":case"radio_button_group":return 14;case"signature":case"initial":return 41}return 50}(field):_settings$height,optionSettings=void 0!==option&&settings.options[option]?settings.options[option]:null;optionSettings&&(x=null!==(_a=optionSettings.x)&&void 0!==_a?_a:x,y=null!==(_b=optionSettings.y)&&void 0!==_b?_b:y,width=null!==(_c=optionSettings.width)&&void 0!==_c?_c:width,height=null!==(_d=optionSettings.height)&&void 0!==_d?_d:height),el.style.width=width+"px",el.style.height=height+"px",el.style.position="absolute",el.style.left=rescale(xScale,x)+"px",el.style.bottom=rescale(yScale,y)+"px",el.style.transform="scale("+xScale+", "+yScale+")"},getFieldId=function getFieldId(field){return"verdocs-doc-fld-"+field.name},getFieldOptionId=function getFieldOptionId(field,index){return"verdocs-doc-fld-"+field.name+"-"+index},renderDocumentField=function renderDocumentField(field,docPage,roleIndex,handleFieldChange,disabled){var editable=arguments.length>5&&void 0!==arguments[5]&&arguments[5],draggable=arguments.length>6&&void 0!==arguments[6]&&arguments[6],controlsDiv=document.getElementById(docPage.containerId+"-controls");if(controlsDiv)switch(field.type){case"attachment":case"date":case"dropdown":case"initial":case"payment":case"signature":case"timestamp":case"textarea":case"textbox":var id=getFieldId(field),existingField=document.getElementById(id);if(existingField)return void setControlStyles(existingField,field,docPage.xScale,docPage.yScale);var el=document.createElement("verdocs-field-"+field.type);return el.field=field,el.setAttribute("id",id),el.setAttribute("roleindex",roleIndex),disabled&&el.setAttribute("disabled",!0),editable&&el.setAttribute("editable",!0),draggable&&el.setAttribute("draggable",!0),el.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(el,field,docPage.xScale,docPage.yScale),controlsDiv.appendChild(el),el;case"checkbox_group":field.setting.options.forEach((function(_,checkboxIndex){var id=getFieldOptionId(field,checkboxIndex),existingField=document.getElementById(id);if(!existingField){var cbEl=document.createElement("verdocs-field-checkbox");return cbEl.field=field,cbEl.setAttribute("id",id),cbEl.setAttribute("roleindex",roleIndex),cbEl.setAttribute("option",checkboxIndex),disabled&&cbEl.setAttribute("disabled",!0),cbEl.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(cbEl,field,docPage.xScale,docPage.yScale),controlsDiv.appendChild(cbEl),cbEl}setControlStyles(existingField,field,docPage.xScale,docPage.yScale)}));break;case"radio_button_group":field.setting.options.forEach((function(_,buttonIndex){var id=getFieldOptionId(field,buttonIndex),existingField=document.getElementById(id);if(!existingField){var cbEl=document.createElement("verdocs-field-radio-button");return cbEl.field=field,cbEl.setAttribute("id",id),cbEl.setAttribute("roleindex",roleIndex),cbEl.setAttribute("option",buttonIndex),disabled&&cbEl.setAttribute("disabled",!0),cbEl.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(cbEl,field,docPage.xScale,docPage.yScale,buttonIndex),controlsDiv.appendChild(cbEl),cbEl}setControlStyles(existingField,field,docPage.xScale,docPage.yScale)}));break;default:return console.log("[PREVIEW] Skipping unsupported field type",field),null}},getRoleIndex=function getRoleIndex(roles,role){return roles.indexOf(role)||0},getFieldSettings=function getFieldSettings(field){return field.setting?field.setting:field.settings?field.settings:{x:0,y:0,required:!1,disabled:!1,result:"",value:""}}},"./dist/esm/verdocs-send.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"verdocs_send",(function(){return VerdocsSend}));__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.sort.js"),__webpack_require__("./node_modules/core-js/modules/es.object.values.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js");var _index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./dist/esm/index-275ee459.js"),_Templates_22116158_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("./dist/esm/Templates-22116158.js"),_Validators_f110bae2_js__WEBPACK_IMPORTED_MODULE_32__=(__webpack_require__("./dist/esm/Types-ab9f6af8.js"),__webpack_require__("./dist/esm/Validators-f110bae2.js")),_Colors_1b298092_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("./dist/esm/Colors-1b298092.js"),_VerdocsEndpoint_9db225a3_js__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("./dist/esm/VerdocsEndpoint-9db225a3.js"),_utils_3f23facc_js__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("./dist/esm/utils-3f23facc.js");function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var VerdocsSend=function(){function VerdocsSend(hostRef){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,VerdocsSend),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.j)(this,hostRef),this.send=Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.e)(this,"send",7),this.cancel=Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.e)(this,"cancel",7),this.sdkError=Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.e)(this,"sdkError",7),this.endpoint=_VerdocsEndpoint_9db225a3_js__WEBPACK_IMPORTED_MODULE_34__.a.getDefault(),this.templateId=null,this.template=null,this.pdfUrl=null,this.containerId="verdocs-send-"+Math.random().toString(36).substring(2,11),this.rolesAtLevel={},this.showPickerForId="",this.sessionContacts=[],this.recipientsAssigned={},this.levels=[]}var _componentDidLoad,_componentWillLoad;return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(VerdocsSend,[{key:"componentWillLoad",value:(_componentWillLoad=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var _a,result;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return this.sessionContacts=[],_context.prev=1,_context.next=4,this.endpoint.loadSession();case 4:result=_context.sent,(null===(_a=result.session)||void 0===_a?void 0:_a.profile)&&this.sessionContacts.push({id:result.session.profile.id,name:result.session.profile.first_name+" "+result.session.profile.last_name,email:result.session.profile.email,phone:result.session.profile.phone}),_context.next=11;break;case 8:_context.prev=8,_context.t0=_context.catch(1),console.log("Error loading session",_context.t0);case 11:case"end":return _context.stop()}}),_callee,this,[[1,8]])}))),function componentWillLoad(){return _componentWillLoad.apply(this,arguments)})},{key:"componentDidLoad",value:(_componentDidLoad=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var template,rolesAtLevel;return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return console.log("[SEND] Showing template",this.templateId),_context2.prev=1,console.log("[SEND] Loading template "+this.templateId),_context2.next=5,Object(_Templates_22116158_js__WEBPACK_IMPORTED_MODULE_30__.b)(this.endpoint,this.templateId);case 5:template=_context2.sent,console.log("[SEND] Got template",template),this.template=template,(null==template?void 0:template.roles)&&(rolesAtLevel={},template.roles.forEach((function(role){var level=role.sequence-1;rolesAtLevel[level]||(rolesAtLevel[level]=[]);var id="r-"+level+"-"+rolesAtLevel[level].length;rolesAtLevel[level].push(Object.assign({},role,{id:id}))})),this.rolesAtLevel=rolesAtLevel,this.levels=Object.keys(rolesAtLevel).map((function(levelStr){return+levelStr})),this.levels.sort((function(a,b){return a-b}))),_context2.next=14;break;case 11:_context2.prev=11,_context2.t0=_context2.catch(1),console.log("[SEND] Error getting template",_context2.t0);case 14:case"end":return _context2.stop()}}),_callee2,this,[[1,11]])}))),function componentDidLoad(){return _componentDidLoad.apply(this,arguments)})},{key:"getLevelIcon",value:function getLevelIcon(level){return level<0?Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("div",{class:"level-icon",innerHTML:'<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="M2 12C2 6.48 6.48 2 12 2s10 4.48 10 10-4.48 10-10 10S2 17.52 2 12zm10 6c3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6 2.69 6 6 6z"></path></svg>'}):level>=this.levels.length?Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("div",{class:"level-icon",innerHTML:'<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="m18 7-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41 6 19l1.41-1.41L1.83 12 .41 13.41z"></path></svg>'}):Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("div",{class:"level-icon",innerHTML:'<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></svg>'})}},{key:"handleSelectContact",value:function handleSelectContact(e,role){e.preventDefault(),this.recipientsAssigned[role.id]=Object.assign({},role,e.detail),this.showPickerForId=""}},{key:"handleClickRole",value:function handleClickRole(e,role){e.stopPropagation(),this.showPickerForId=role.id}},{key:"handleSend",value:function handleSend(e){var _a;e.stopPropagation(),null===(_a=this.send)||void 0===_a||_a.emit({recipientsAssigned:Object.values(this.recipientsAssigned)})}},{key:"handleCancel",value:function handleCancel(e){var _a;e.stopPropagation(),null===(_a=this.cancel)||void 0===_a||_a.emit()}},{key:"render",value:function render(){var _a,_b,_c,_this=this,roleNames=(null===(_b=null===(_a=this.template)||void 0===_a?void 0:_a.roles)||void 0===_b?void 0:_b.map((function(role){return role.name})))||[],allRecipientsAssigned=Object.values(this.recipientsAssigned).filter((function(recipient){return console.log("valid email",Object(_Validators_f110bae2_js__WEBPACK_IMPORTED_MODULE_32__.b)(recipient.email),recipient.email),console.log("valid phone",Object(_Validators_f110bae2_js__WEBPACK_IMPORTED_MODULE_32__.a)(recipient.phone),recipient.phone),Object(_Validators_f110bae2_js__WEBPACK_IMPORTED_MODULE_32__.b)(recipient.email)||Object(_Validators_f110bae2_js__WEBPACK_IMPORTED_MODULE_32__.a)(recipient.phone)})).length>=(null===(_c=this.template)||void 0===_c?void 0:_c.roles.length);return console.log("assigned",allRecipientsAssigned),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.b,{class:{}},Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("div",{class:"recipients"},Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("div",{class:"left-line"}),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("div",{class:"level level-start"},this.getLevelIcon(-1),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("div",{class:"complete"},"Send Document")),this.levels.map((function(level){return Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("div",{class:"level level-"+level},_this.getLevelIcon(level),_this.rolesAtLevel[level].map((function(role){var _a,_b,_c;return Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("div",{class:"recipient",style:{backgroundColor:Object(_Colors_1b298092_js__WEBPACK_IMPORTED_MODULE_33__.a)(Object(_utils_3f23facc_js__WEBPACK_IMPORTED_MODULE_35__.a)(roleNames,role.name))},onClick:function onClick(e){return _this.handleClickRole(e,role)}},null!==(_b=null===(_a=_this.recipientsAssigned[role.id])||void 0===_a?void 0:_a.full_name)&&void 0!==_b?_b:role.name,Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("div",{class:"icon",innerHTML:'<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg>'}),_this.showPickerForId===role.id&&Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("verdocs-contact-picker",{onCancel:function onCancel(){return _this.showPickerForId=""},contactSuggestions:_this.sessionContacts,templateRole:null!==(_c=_this.recipientsAssigned[role.id])&&void 0!==_c?_c:role,onSearchContacts:function onSearchContacts(e){return console.log("Search",e.detail)},onContactSelected:function onContactSelected(e){return _this.handleSelectContact(e,role)}}))})))})),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("div",{class:"level level-done"},this.getLevelIcon(this.levels.length),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("div",{class:"complete"},"Document Complete"))),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("div",{class:"buttons"},Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("verdocs-button",{label:"Cancel",size:"small",variant:"outline",onPress:function onPress(e){return _this.handleCancel(e)}}),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_29__.h)("verdocs-button",{label:"Send",size:"small",disabled:!allRecipientsAssigned,onPress:function onPress(e){return _this.handleSend(e)}})))}}]),VerdocsSend}();VerdocsSend.style='verdocs-send{display:-ms-flexbox;display:flex;padding:10px;position:relative;background:#ffffff;-ms-flex-direction:column;flex-direction:column;font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-send .recipients{position:relative}verdocs-send .left-line{top:32px;left:20px;z-index:1;width:12px;bottom:30px;position:absolute;background:#ffffff;border-left:3px dotted #9b9b9b}verdocs-send .level{display:-ms-flexbox;display:flex;-webkit-column-gap:10px;-moz-column-gap:10px;column-gap:10px;margin-left:50px;position:relative;-ms-flex-direction:row;flex-direction:row;padding:8px 0 4px 0;border-bottom:1px solid #97979744}verdocs-send .level .level-icon{top:14px;z-index:2;left:-40px;width:24px;height:24px;position:absolute;background:#ffffff}verdocs-send .level .level-icon svg{fill:#00000089}verdocs-send .level .recipient{height:30px;display:-ms-flexbox;display:flex;-ms-flex:0 0 30px;flex:0 0 30px;color:#000000;cursor:pointer;font-size:14px;-ms-flex-align:center;align-items:center;border-radius:30px;-ms-flex-direction:row;flex-direction:row;background:#dddddd;white-space:nowrap;padding:2px 10px 2px 14px}verdocs-send .level .recipient .icon{width:22px;height:22px;-ms-flex:0 0 22px;flex:0 0 22px;margin:0 0 0 10px}verdocs-send .level .recipient .icon svg{width:22px;height:22px;fill:#333333;outline:none}verdocs-send .level .complete{-ms-flex:1;flex:1;height:30px;display:-ms-flexbox;display:flex;color:#000000;font-size:14px;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;padding:3px 10px 3px 2px}verdocs-send .buttons{display:-ms-flexbox;display:flex;margin-top:10px;-webkit-column-gap:15px;-moz-column-gap:15px;column-gap:15px;-ms-flex-direction:row;flex-direction:row}verdocs-send verdocs-contact-picker{left:0;top:41px;z-index:10;position:absolute;border:1px solid #dddddd;-webkit-box-shadow:0 0 6px 3px rgba(0, 0, 0, 0.1);box-shadow:0 0 6px 3px rgba(0, 0, 0, 0.1)}'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9VdGlscy9Db2xvcnMuanMiLCJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy9AdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzL1RlbXBsYXRlcy5qcyIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMvVmFsaWRhdG9ycy5qcyIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9VdGlscy9GaWVsZHMuanMiLCJ3ZWJwYWNrOi8vL3NyYy91dGlscy91dGlscy50cyIsIndlYnBhY2s6Ly8vc3JjL2NvbXBvbmVudHMvZW1iZWRzL3ZlcmRvY3Mtc2VuZC92ZXJkb2NzLXNlbmQuc2NzcyIsIndlYnBhY2s6Ly8vc3JjL2NvbXBvbmVudHMvZW1iZWRzL3ZlcmRvY3Mtc2VuZC92ZXJkb2NzLXNlbmQudHN4Il0sIm5hbWVzIjpbImdldFJHQkEiLCJyb2xlSW5kZXgiLCJnZXRUZW1wbGF0ZXMiLCJlbmRwb2ludCIsInBhcmFtcyIsImFwaSIsImdldCIsInRoZW4iLCJyIiwiZGF0YSIsImdldFRlbXBsYXRlIiwidGVtcGxhdGVJZCIsImNvbmNhdCIsIkVNQUlMX1JFR0VYIiwiaXNWYWxpZEVtYWlsIiwiZW1haWwiLCJ0ZXN0IiwiUEhPTkVfUkVHRVgiLCJpc1ZhbGlkUGhvbmUiLCJwaG9uZSIsInJlc2NhbGUiLCJuIiwiaW50ZWdlclNlcXVlbmNlIiwic3RhcnQiLCJjb3VudCIsIkFycmF5IiwiZmlsbCIsIm1hcCIsIl8iLCJpbmRleCIsImZ1bGxOYW1lVG9Jbml0aWFscyIsIm5hbWUiLCJzcGxpdCIsIndvcmQiLCJqb2luIiwic2V0Q29udHJvbFN0eWxlcyIsImVsIiwiZmllbGQiLCJ4U2NhbGUiLCJ5U2NhbGUiLCJvcHRpb24iLCJzZXR0aW5ncyIsInNldHRpbmciLCJ4IiwieSIsIndpZHRoIiwiZGVmYXVsdFdpZHRoIiwidHlwZSIsImhlaWdodCIsImRlZmF1bHRIZWlnaHQiLCJvcHRpb25TZXR0aW5ncyIsInVuZGVmaW5lZCIsIm9wdGlvbnMiLCJfYSIsIl9iIiwiX2MiLCJfZCIsInN0eWxlIiwicG9zaXRpb24iLCJsZWZ0IiwiYm90dG9tIiwidHJhbnNmb3JtIiwiZ2V0RmllbGRJZCIsImdldEZpZWxkT3B0aW9uSWQiLCJyZW5kZXJEb2N1bWVudEZpZWxkIiwiZG9jUGFnZSIsImhhbmRsZUZpZWxkQ2hhbmdlIiwiZGlzYWJsZWQiLCJlZGl0YWJsZSIsImRyYWdnYWJsZSIsImNvbnRyb2xzRGl2IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnRhaW5lcklkIiwiaWQiLCJleGlzdGluZ0ZpZWxkIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiYXBwZW5kQ2hpbGQiLCJmb3JFYWNoIiwiY2hlY2tib3hJbmRleCIsImNiRWwiLCJidXR0b25JbmRleCIsImNvbnNvbGUiLCJsb2ciLCJnZXRSb2xlSW5kZXgiLCJyb2xlcyIsInJvbGUiLCJpbmRleE9mIiwiZ2V0RmllbGRTZXR0aW5ncyIsInJlcXVpcmVkIiwicmVzdWx0IiwidmFsdWUiLCJWZXJkb2NzU2VuZCIsIlZlcmRvY3NFbmRwb2ludCIsImdldERlZmF1bHQiLCJ0ZW1wbGF0ZSIsInBkZlVybCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsInJvbGVzQXRMZXZlbCIsInNob3dQaWNrZXJGb3JJZCIsInNlc3Npb25Db250YWN0cyIsInJlY2lwaWVudHNBc3NpZ25lZCIsImxldmVscyIsInRoaXMiLCJsb2FkU2Vzc2lvbiIsInNlc3Npb24iLCJwcm9maWxlIiwicHVzaCIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJsZXZlbCIsInNlcXVlbmNlIiwibGVuZ3RoIiwiT2JqZWN0Iiwia2V5cyIsImxldmVsU3RyIiwic29ydCIsImEiLCJiIiwiZ2V0TGV2ZWxJY29uIiwiaCIsImNsYXNzIiwiaW5uZXJIVE1MIiwiaGFuZGxlU2VsZWN0Q29udGFjdCIsInByZXZlbnREZWZhdWx0IiwiZGV0YWlsIiwiaGFuZGxlQ2xpY2tSb2xlIiwic3RvcFByb3BhZ2F0aW9uIiwiaGFuZGxlU2VuZCIsInNlbmQiLCJlbWl0IiwidmFsdWVzIiwiaGFuZGxlQ2FuY2VsIiwiY2FuY2VsIiwicmVuZGVyIiwicm9sZU5hbWVzIiwiYWxsUmVjaXBpZW50c0Fzc2lnbmVkIiwiZmlsdGVyIiwicmVjaXBpZW50IiwiSG9zdCIsImJhY2tncm91bmRDb2xvciIsIm9uQ2xpY2siLCJmdWxsX25hbWUiLCJvbkNhbmNlbCIsImNvbnRhY3RTdWdnZXN0aW9ucyIsInRlbXBsYXRlUm9sZSIsIm9uU2VhcmNoQ29udGFjdHMiLCJvbkNvbnRhY3RTZWxlY3RlZCIsImxhYmVsIiwic2l6ZSIsInZhcmlhbnQiLCJvblByZXNzIl0sIm1hcHBpbmdzIjoiO2dLQThCTyxTQUFTQSxRQUFRQyxXQUNwQixPQUFRQSxVQUFZLElBQ2hCLEtBQUssRUFDRCxPQUFxQixJQUFkQSxVQUFrQix5QkFBMkIsMkJBQ3hELEtBQUssRUFDRCxNQUFPLHlCQUNYLEtBQUssRUFDRCxNQUFPLHlCQUNYLEtBQUssRUFDRCxNQUFPLDJCQUNYLEtBQUssRUFDRCxNQUFPLDJCQUNYLEtBQUssRUFDRCxNQUFPLDBCQUNYLEtBQUssRUFDRCxNQUFPLDJCQUNYLEtBQUssRUFDRCxNQUFPLHlCQUNYLEtBQUssRUFDRCxNQUFPLDJCQUNYLEtBQUssRUFDRCxNQUFPLHlCQUNYLFFBQ0ksTUFBTywyQkFFbkIsQ0F2REEsMkUsMkdDQUEsaUtBc0RVLElBQUNDLGFBQWUsU0FBZkEsYUFBeUJDLFNBQVVDLFFBQzFDLE9BQU9ELFNBQVNFLElBQ1hDLElBQUksYUFBYyxDQUFFRixPQUFRQSxTQUM1QkcsTUFBSyxTQUFVQyxHQUFLLE9BQU9BLEVBQUVDLElBQU8sR0FDN0MsRUFVV0MsWUFBYyxTQUFkQSxZQUF3QlAsU0FBVVEsWUFDekMsT0FBT1IsU0FBU0UsSUFDWEMsSUFBSSxjQUFjTSxP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YTI0YWZjYi5pZnJhbWUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBHaXZlbiBhIGByZ2JhKHIsZyxiLGEpYCBzdHJpbmcgdmFsdWUsIHJldHVybnMgdGhlIGhleCBlcXVpdmFsZW50LCBkcm9wcGluZyB0aGUgYWxwaGEgY2hhbm5lbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJHQihyZ2JhKSB7XG4gICAgdmFyIHJnYk51bWJlcnMgPSByZ2JhLnJlcGxhY2UoJ3JnYmEoJywgJycpLnJlcGxhY2UoJyknLCAnJykuc3BsaXQoJywnKTtcbiAgICB2YXIgcmdiT2JqZWN0ID0ge1xuICAgICAgICByZWQ6ICtyZ2JOdW1iZXJzWzBdLFxuICAgICAgICBncmVlbjogK3JnYk51bWJlcnNbMV0sXG4gICAgICAgIGJsdWU6ICtyZ2JOdW1iZXJzWzJdLFxuICAgICAgICBhbHBoYTogK3JnYk51bWJlcnNbM10sXG4gICAgfTtcbiAgICB2YXIgYWxwaGEgPSAxIC0gcmdiT2JqZWN0LmFscGhhO1xuICAgIHZhciByZWQgPSBNYXRoLnJvdW5kKChyZ2JPYmplY3QuYWxwaGEgKiAocmdiT2JqZWN0LnJlZCAvIDI1NSkgKyBhbHBoYSkgKiAyNTUpO1xuICAgIHZhciBncmVlbiA9IE1hdGgucm91bmQoKHJnYk9iamVjdC5hbHBoYSAqIChyZ2JPYmplY3QuZ3JlZW4gLyAyNTUpICsgYWxwaGEpICogMjU1KTtcbiAgICB2YXIgYmx1ZSA9IE1hdGgucm91bmQoKHJnYk9iamVjdC5hbHBoYSAqIChyZ2JPYmplY3QuYmx1ZSAvIDI1NSkgKyBhbHBoYSkgKiAyNTUpO1xuICAgIHJldHVybiAnIycgKyByZ2JUb0hleChyZWQpICsgcmdiVG9IZXgoZ3JlZW4pICsgcmdiVG9IZXgoYmx1ZSk7XG59XG4vKipcbiAqIEdpdmVuIGFuIFJHQiBzdHJpbmcgdmFsdWUsIHJldHVybnMgdGhlIGhleCBlcXVpdmFsZW50LlxuICovXG5mdW5jdGlvbiByZ2JUb0hleChyZ2IpIHtcbiAgICB2YXIgaGV4ID0gcmdiLnRvU3RyaW5nKDE2KTtcbiAgICBpZiAoaGV4Lmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuICcwJyArIGhleDtcbiAgICB9XG4gICAgcmV0dXJuIGhleDtcbn1cbi8qKlxuICogR2l2ZW4gYSBzaWduZXIgcm9sZSBpbmRleCwgcmV0dXJuIHRoZSBjb2xvciBjb2RlIGZvciB0aGF0IHNpZ25lci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJHQkEocm9sZUluZGV4KSB7XG4gICAgc3dpdGNoIChyb2xlSW5kZXggJSAxMCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gcm9sZUluZGV4ID09PSAwID8gJ3JnYmEoMjU1LCAxOTMsIDcsIDAuNCknIDogJ3JnYmEoMTM0LCAxMzQsIDEzNCwgMC4zKSc7IC8vICNGRkU2OUNcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDE1NiwgMzksIDE3NiwgLjQpJzsgLy8gJyNFM0MzRTknXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgzMywgMTUwLCAyNDMsIC40KSc7IC8vICcjQzFFMUZCJ1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMjIwLCAyMzEsIDExNywgMC4zKSc7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgxMjEsIDEzNCwgMjAzLCAwLjMpJztcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDc3LCAxODIsIDE3MiwgMC4zKSc7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgyNTUsIDIwMiwgMTY1LCAwLjMpJztcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDIsIDI0NywgMTkwLCAwLjMpJztcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDI1NSwgMTM4LCAxMDEsIDAuMyknO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoODIsIDI1NSwgNzksIDAuMyknO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDIyOSwgMTE1LCAxNTUsIDAuMyknO1xuICAgIH1cbn1cbi8qKlxuICogR2l2ZW4gYSByb2xlIG5hbWUsIHJldHVybiBhIGNvbG9yIGNvZGUgZm9yIGl0LiBUaGlzIHdvcmtzIGJ5IGNvbXB1dGluZyBhIGhhc2ggY29kZSBzbyB0aGUgc3BlY2lmaWMgY29sb3IgcmV0dXJuZWRcbiAqIGlzIG5vdCBzcGVjaWZpZWQgZXhwbGljaXRseSwgYnV0IHdpbGwgYmUgdGhlIHNhbWUgZm9yIGV2ZXJ5IGNhbGwgd2l0aCB0aGUgc2FtZSBpbnB1dCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5hbWVUb1JHQkEoc3RyKSB7XG4gICAgaWYgKCEhc3RyKSB7XG4gICAgICAgIHZhciB2YWxpZE51bSA9IHBhcnNlSW50KHN0ci5zbGljZSgtMSksIDEwKTtcbiAgICAgICAgaWYgKCFpc05hTih2YWxpZE51bSkpIHtcbiAgICAgICAgICAgIHN0ciArPSAodmFsaWROdW0gKiA5OSkudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaGFzaCA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBoYXNoID0gc3RyLmNoYXJDb2RlQXQoaSkgKyAoKGhhc2ggPDwgNSkgLSBoYXNoKTtcbiAgICAgICAgfVxuICAgICAgICBoYXNoID0gTWF0aC5yb3VuZChoYXNoIC8gMS4zKTtcbiAgICAgICAgdmFyIGMgPSAoaGFzaCAmIDB4MDBmZmZmMDgpLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB2YXIgaGV4ID0gJyMnICsgJzAwMDAwJy5zdWJzdHJpbmcoMCwgNiAtIGMubGVuZ3RoKSArIGM7XG4gICAgICAgIHZhciByZXN1bHQgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcbiAgICAgICAgdmFyIGNvbG9yID0ge1xuICAgICAgICAgICAgcjogcGFyc2VJbnQocmVzdWx0WzFdLCAxNiksXG4gICAgICAgICAgICBnOiBwYXJzZUludChyZXN1bHRbMl0sIDE2KSxcbiAgICAgICAgICAgIGI6IHBhcnNlSW50KHJlc3VsdFszXSwgMTYpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gXCJyZ2JhKFwiLmNvbmNhdChjb2xvci5yLCBcIiwgXCIpLmNvbmNhdChjb2xvci5nLCBcIiwgXCIpLmNvbmNhdChjb2xvci5iLCBcIiwgMC4yKVwiKTtcbiAgICB9XG59XG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBvYnRhaW4gYSBjb2xvciBjb2RlIGdpdmVuIGEgcm9sZSBuYW1lIGdpdmVuIHZhcmlvdXMgcG9zc2libGUgaW5wdXRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Um9sZUNvbG9yKG5hbWUsIHJvbGVzLCBpbmRleCkge1xuICAgIGlmIChpbmRleCkge1xuICAgICAgICByZXR1cm4gZ2V0UkdCQShpbmRleCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJvbGVzICYmIHJvbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIHJvbGVJbmRleCA9IHJvbGVzLmZpbmRJbmRleChmdW5jdGlvbiAocm9sZSkgeyByZXR1cm4gcm9sZS5uYW1lID09PSBuYW1lOyB9KTtcbiAgICAgICAgaWYgKHJvbGVJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gcm9sZXNbcm9sZUluZGV4XS5yZ2JhIHx8IGdldFJHQkEocm9sZUluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuYW1lVG9SR0JBKG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbmFtZVRvUkdCQShuYW1lKTtcbiAgICB9XG59XG4iLCIvKipcbiAqIEEgVGVtcGxhdGUgZGVmaW5lcyBob3cgYSBWZXJkb2NzIHNpZ25pbmcgZmxvdyB3aWxsIGJlIHBlcmZvcm1lZCwgaW5jbHVkaW5nIGF0dGFjaG1lbnRzLCBzaWduaW5nIGZpZWxkcywgYW5kXG4gKiByZWNpcGllbnRzLlxuICpcbiAqIEBtb2R1bGVcbiAqL1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbi8qKlxuICogR2V0IGFsbCB0ZW1wbGF0ZXMgYWNjZXNzaWJsZSBieSB0aGUgY2FsbGVyLCB3aXRoIG9wdGlvbmFsIGZpbHRlcnMuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZXMoKTtcbiAqIGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZXMoeyBpc19zdGFycmVkOiB0cnVlIH0pO1xuICogYXdhaXQgVGVtcGxhdGVzLmdldFRlbXBsYXRlcyh7IGlzX2NyZWF0b3I6IHRydWUgfSk7XG4gKiBhd2FpdCBUZW1wbGF0ZXMuZ2V0VGVtcGxhdGVzKHsgaXNfb3JnYW5pemF0aW9uOiB0cnVlIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VGVtcGxhdGVzID0gZnVuY3Rpb24gKGVuZHBvaW50LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5nZXQoJy90ZW1wbGF0ZXMnLCB7IHBhcmFtczogcGFyYW1zIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogR2V0IG9uZSB0ZW1wbGF0ZSBieSBpdHMgSUQuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGNvbnN0IHRlbXBsYXRlID0gYXdhaXQgVGVtcGxhdGVzLmdldFRlbXBsYXRlKCc4M2RhM2Q3MC03ODU3LTQzOTItYjg3Ni1jNDU5MmEzMDRiYzknKTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGdldFRlbXBsYXRlID0gZnVuY3Rpb24gKGVuZHBvaW50LCB0ZW1wbGF0ZUlkKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAuZ2V0KFwiL3RlbXBsYXRlcy9cIi5jb25jYXQodGVtcGxhdGVJZCkpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogR2V0IG93bmVyIGluZm9ybWF0aW9uIGZvciBhIHRlbXBsYXRlLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBjb25zdCB0ZW1wbGF0ZSA9IGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZU93bmVySW5mbygnODNkYTNkNzAtNzg1Ny00MzkyLWI4NzYtYzQ1OTJhMzA0YmM5Jyk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBnZXRUZW1wbGF0ZU93bmVySW5mbyA9IGZ1bmN0aW9uIChlbmRwb2ludCwgdGVtcGxhdGVJZCkge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLmdldChcIi90ZW1wbGF0ZXMvXCIuY29uY2F0KHRlbXBsYXRlSWQpKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIHRlbXBsYXRlLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBjb25zdCBuZXdUZW1wbGF0ZSA9IGF3YWl0IFRlbXBsYXRlcy5jcmVhdGVUZW1wbGF0ZSh7Li4ufSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBjcmVhdGVUZW1wbGF0ZSA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAucG9zdCgnL3RlbXBsYXRlcy8nLCBwYXJhbXMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogVXBkYXRlIGEgdGVtcGxhdGUuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGNvbnN0IHVwZGF0ZWRUZW1wbGF0ZSA9IGF3YWl0IFRlbXBsYXRlcy51cGRhdGVUZW1wbGF0ZSgnODNkYTNkNzAtNzg1Ny00MzkyLWI4NzYtYzQ1OTJhMzA0YmM5JywgeyBuYW1lOiAnTmV3IE5hbWUnIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlVGVtcGxhdGUgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHRlbXBsYXRlSWQsIHBhcmFtcykge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLnB1dChcIi90ZW1wbGF0ZXMvXCIuY29uY2F0KHRlbXBsYXRlSWQpLCBwYXJhbXMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogU2VhcmNoIGZvciB0ZW1wbGF0ZXMgbWF0Y2hpbmcgdmFyaW91cyBjcml0ZXJpYS5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1RlbXBsYXRlc30gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcyc7XG4gKlxuICogY29uc3Qge3Jlc3VsdCwgcGFnZSwgdG90YWx9ID0gYXdhaXQgVGVtcGxhdGVzLnNlYXJjaCh7IC4uLiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIHNlYXJjaFRlbXBsYXRlcyA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAgICAgICAgIC5wb3N0KCcvdGVtcGxhdGVzL3NlYXJjaCcsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KV07XG4gICAgfSk7XG59KTsgfTtcbi8qKlxuICogR2V0IGEgc3VtbWFyeSBvZiB0ZW1wbGF0ZSBkYXRhLCB0eXBpY2FsbHkgdXNlZCB0byBwb3B1bGF0ZSBhZG1pbiBwYW5lbCBkYXNoYm9hcmQgcGFnZXMuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGNvbnN0IHN1bW1hcnkgPSBhd2FpdCBUZW1wbGF0ZXMuZ2V0U3VtbWFyeSgwKTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGdldFN1bW1hcnkgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHBhZ2UpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgICAgICAgICAgLnBvc3QoJy90ZW1wbGF0ZXMvc3VtbWFyeScsIHsgcGFnZTogcGFnZSB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pXTtcbiAgICB9KTtcbn0pOyB9O1xuIiwiLyoqXG4gKiBHZXQgYWxsIGRlZmluZWQgdmFsaWRhdG9yc1xuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7RG9jdW1lbnRzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBhd2FpdCBEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKHRlbXBsYXRlSUQpO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VmFsaWRhdG9ycyA9IGZ1bmN0aW9uIChlbmRwb2ludCkge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLmdldCgnL3ZhbGlkYXRvcnMnKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG5leHBvcnQgdmFyIGdldFZhbGlkYXRvciA9IGZ1bmN0aW9uIChlbmRwb2ludCwgdmFsaWRhdG9yTmFtZSkge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLmdldChcIi92YWxpZGF0b3JzL1wiLmNvbmNhdCh2YWxpZGF0b3JOYW1lKSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xudmFyIEVNQUlMX1JFR0VYID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG5leHBvcnQgdmFyIGlzVmFsaWRFbWFpbCA9IGZ1bmN0aW9uIChlbWFpbCkgeyByZXR1cm4gISFlbWFpbCAmJiBFTUFJTF9SRUdFWC50ZXN0KGVtYWlsKTsgfTtcbi8vIEBzZWUgaHR0cHM6Ly93d3cucmVnZXh0ZXN0ZXIuY29tLzE5NzhcbnZhciBQSE9ORV9SRUdFWCA9IC8oKD86XFwrfDAwKVsxN10oPzogfFxcLSk/fCg/OlxcK3wwMClbMS05XVxcZHswLDJ9KD86IHxcXC0pP3woPzpcXCt8MDApMVxcLVxcZHszfSg/OiB8XFwtKT8pPygwXFxkfFxcKFswLTldezN9XFwpfFsxLTldezAsM30pKD86KCg/OiB8XFwtKVswLTldezJ9KXs0fXwoKD86WzAtOV17Mn0pezR9KXwoKD86IHxcXC0pWzAtOV17M30oPzogfFxcLSlbMC05XXs0fSl8KFswLTldezd9KSkvO1xuZXhwb3J0IHZhciBpc1ZhbGlkUGhvbmUgPSBmdW5jdGlvbiAocGhvbmUpIHsgcmV0dXJuICEhcGhvbmUgJiYgUEhPTkVfUkVHRVgudGVzdChwaG9uZSk7IH07XG5leHBvcnQgdmFyIGlzVmFsaWRSb2xlTmFtZSA9IGZ1bmN0aW9uICh2YWx1ZSwgcm9sZXMpIHsgcmV0dXJuIHJvbGVzLmZpbmRJbmRleChmdW5jdGlvbiAocm9sZSkgeyByZXR1cm4gcm9sZS5uYW1lID09PSB2YWx1ZTsgfSkgIT09IC0xOyB9O1xudmFyIFRhZ1JlZ0V4ID0gL15bYS16QS1aMC05LV17MCwzMn0kLztcbmV4cG9ydCB2YXIgaXNWYWxpZFRhZyA9IGZ1bmN0aW9uICh2YWx1ZSwgdGFncykgeyByZXR1cm4gVGFnUmVnRXgudGVzdCh2YWx1ZSkgfHwgdGFncy5maW5kSW5kZXgoZnVuY3Rpb24gKHRhZykgeyByZXR1cm4gdGFnLm5hbWUgPT09IHZhbHVlOyB9KSAhPT0gLTE7IH07XG4iLCJleHBvcnQgZnVuY3Rpb24gZ2V0UlRvcCh5LCBmaWVsZEhlaWdodCwgaVRleHRIZWlnaHQsIHlSYXRpbykge1xuICAgIHJldHVybiBpVGV4dEhlaWdodCAtICh5ICsgZmllbGRIZWlnaHQpICogeVJhdGlvO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFJMZWZ0KHgsIHJhdGlvKSB7XG4gICAgcmV0dXJuIHggKiByYXRpbztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRSVmFsdWUoeSwgcmF0aW8pIHtcbiAgICByZXR1cm4geSAqIHJhdGlvO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJsb2JUb0Jhc2U2NChpbWFnZSkge1xuICAgIHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmaWxlUmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZWplY3QobmV3IERPTUV4Y2VwdGlvbignUHJvYmxlbSByZWFkaW5nIGJsb2IuJykpO1xuICAgICAgICB9O1xuICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc29sdmUoZmlsZVJlYWRlci5yZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2UpO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc2NhbGUociwgbikge1xuICAgIHJldHVybiByICogbjtcbn1cbiIsIi8vIFRoZXNlIHNob3VsZCBwcm9iYWJseSBhbGwgbW92ZSB0byBKUy1TREtcbmltcG9ydCB7cmVzY2FsZX0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1V0aWxzL0ZpZWxkcyc7XG4vLyBpbXBvcnQge2dldFJHQkF9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9VdGlscy9Db2xvcnMnO1xuaW1wb3J0IHtJVGVtcGxhdGVGaWVsZH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcy9UeXBlcyc7XG5pbXBvcnQge0lEb2N1bWVudEZpZWxkfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvRG9jdW1lbnRzL1R5cGVzJztcbmltcG9ydCB7SURvY3VtZW50UGFnZUluZm99IGZyb20gJy4vVHlwZXMnO1xuXG5leHBvcnQgY29uc3QgaW50ZWdlclNlcXVlbmNlID0gKHN0YXJ0OiBudW1iZXIsIGNvdW50OiBudW1iZXIpOiBudW1iZXJbXSA9PlxuICBBcnJheShjb3VudClcbiAgICAuZmlsbCgxKVxuICAgIC5tYXAoKF8sIGluZGV4KSA9PiBpbmRleCArIHN0YXJ0KTtcblxuZXhwb3J0IGNvbnN0IGZ1bGxOYW1lVG9Jbml0aWFscyA9IChuYW1lOiBzdHJpbmcpID0+XG4gIG5hbWVcbiAgICAuc3BsaXQoJyAnKVxuICAgIC5tYXAod29yZCA9PiB3b3JkWzBdKVxuICAgIC5qb2luKCcnKTtcblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRXaWR0aCA9IChmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCkgPT4ge1xuICBzd2l0Y2ggKGZpZWxkLnR5cGUpIHtcbiAgICBjYXNlICdhdHRhY2htZW50JzpcbiAgICBjYXNlICdwYXltZW50JzpcbiAgICAgIHJldHVybiAyNDtcbiAgICBjYXNlICdjaGVja2JveCc6XG4gICAgY2FzZSAnY2hlY2tib3hfZ3JvdXAnOlxuICAgIGNhc2UgJ3JhZGlvX2J1dHRvbl9ncm91cCc6XG4gICAgICByZXR1cm4gMTQ7XG4gICAgY2FzZSAnc2lnbmF0dXJlJzpcbiAgICBjYXNlICdpbml0aWFsJzpcbiAgICAgIHJldHVybiA4MjtcbiAgfVxuXG4gIHJldHVybiAxNTA7XG59O1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdEhlaWdodCA9IChmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCkgPT4ge1xuICBzd2l0Y2ggKGZpZWxkLnR5cGUpIHtcbiAgICBjYXNlICdhdHRhY2htZW50JzpcbiAgICBjYXNlICdwYXltZW50JzpcbiAgICAgIHJldHVybiAyNDtcbiAgICBjYXNlICdjaGVja2JveCc6XG4gICAgY2FzZSAnY2hlY2tib3hfZ3JvdXAnOlxuICAgIGNhc2UgJ3JhZGlvX2J1dHRvbl9ncm91cCc6XG4gICAgICByZXR1cm4gMTQ7XG4gICAgY2FzZSAnc2lnbmF0dXJlJzpcbiAgICBjYXNlICdpbml0aWFsJzpcbiAgICAgIHJldHVybiA0MTtcbiAgfVxuXG4gIHJldHVybiA1MDtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRDb250cm9sU3R5bGVzID0gKGVsOiBIVE1MRWxlbWVudCwgZmllbGQ6IElUZW1wbGF0ZUZpZWxkIHwgSURvY3VtZW50RmllbGQsIHhTY2FsZTogbnVtYmVyLCB5U2NhbGU6IG51bWJlciwgb3B0aW9uPzogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHNldHRpbmdzID0gKGZpZWxkIGFzIElUZW1wbGF0ZUZpZWxkKS5zZXR0aW5nIHx8IChmaWVsZCBhcyBJRG9jdW1lbnRGaWVsZCkuc2V0dGluZ3M7XG4gIGxldCB7eCA9IDAsIHkgPSAwLCB3aWR0aCA9IGRlZmF1bHRXaWR0aChmaWVsZCksIGhlaWdodCA9IGRlZmF1bHRIZWlnaHQoZmllbGQpfSA9IHNldHRpbmdzO1xuXG4gIGNvbnN0IG9wdGlvblNldHRpbmdzID0gb3B0aW9uICE9PSB1bmRlZmluZWQgJiYgc2V0dGluZ3Mub3B0aW9uc1tvcHRpb25dID8gc2V0dGluZ3Mub3B0aW9uc1tvcHRpb25dIDogbnVsbDtcbiAgaWYgKG9wdGlvblNldHRpbmdzKSB7XG4gICAgeCA9IG9wdGlvblNldHRpbmdzLnggPz8geDtcbiAgICB5ID0gb3B0aW9uU2V0dGluZ3MueSA/PyB5O1xuICAgIHdpZHRoID0gb3B0aW9uU2V0dGluZ3Mud2lkdGggPz8gd2lkdGg7XG4gICAgaGVpZ2h0ID0gb3B0aW9uU2V0dGluZ3MuaGVpZ2h0ID8/IGhlaWdodDtcbiAgfVxuXG4gIGVsLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgO1xuICBlbC5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuICBlbC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gIGVsLnN0eWxlLmxlZnQgPSBgJHtyZXNjYWxlKHhTY2FsZSwgeCl9cHhgO1xuICBlbC5zdHlsZS5ib3R0b20gPSBgJHtyZXNjYWxlKHlTY2FsZSwgeSl9cHhgO1xuICBlbC5zdHlsZS50cmFuc2Zvcm0gPSBgc2NhbGUoJHt4U2NhbGV9LCAke3lTY2FsZX0pYDtcbiAgLy8gZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZmllbGRbJ3JnYmEnXSB8fCBnZXRSR0JBKHJvbGVJbmRleCk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0RmllbGRJZCA9IChmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCkgPT4ge1xuICByZXR1cm4gYHZlcmRvY3MtZG9jLWZsZC0ke2ZpZWxkLm5hbWV9YDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRGaWVsZE9wdGlvbklkID0gKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCwgaW5kZXg6IG51bWJlcikgPT4ge1xuICByZXR1cm4gYHZlcmRvY3MtZG9jLWZsZC0ke2ZpZWxkLm5hbWV9LSR7aW5kZXh9YDtcbn07XG5cbmV4cG9ydCBjb25zdCByZW5kZXJEb2N1bWVudEZpZWxkID0gKFxuICBmaWVsZDogSVRlbXBsYXRlRmllbGQsXG4gIGRvY1BhZ2U6IElEb2N1bWVudFBhZ2VJbmZvLFxuICByb2xlSW5kZXg6IG51bWJlcixcbiAgaGFuZGxlRmllbGRDaGFuZ2U6IChmaWVsZDogSVRlbXBsYXRlRmllbGQsIGU6IGFueSwgb3B0aW9uSWQ/OiBzdHJpbmcpID0+IHZvaWQsXG4gIGRpc2FibGVkOiBib29sZWFuLFxuICBlZGl0YWJsZTogYm9vbGVhbiA9IGZhbHNlLFxuICBkcmFnZ2FibGU6IGJvb2xlYW4gPSBmYWxzZSxcbikgPT4ge1xuICBjb25zdCBjb250cm9sc0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRvY1BhZ2UuY29udGFpbmVySWQgKyAnLWNvbnRyb2xzJyk7XG4gIGlmICghY29udHJvbHNEaXYpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2l0Y2ggKGZpZWxkLnR5cGUpIHtcbiAgICBjYXNlICdhdHRhY2htZW50JzpcbiAgICBjYXNlICdkYXRlJzpcbiAgICBjYXNlICdkcm9wZG93bic6XG4gICAgY2FzZSAnaW5pdGlhbCc6XG4gICAgY2FzZSAncGF5bWVudCc6XG4gICAgY2FzZSAnc2lnbmF0dXJlJzpcbiAgICBjYXNlICd0aW1lc3RhbXAnOlxuICAgIGNhc2UgJ3RleHRhcmVhJzpcbiAgICBjYXNlICd0ZXh0Ym94Jzoge1xuICAgICAgY29uc3QgaWQgPSBnZXRGaWVsZElkKGZpZWxkKTtcbiAgICAgIGNvbnN0IGV4aXN0aW5nRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICBpZiAoZXhpc3RpbmdGaWVsZCkge1xuICAgICAgICBzZXRDb250cm9sU3R5bGVzKGV4aXN0aW5nRmllbGQsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVsOiBhbnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGB2ZXJkb2NzLWZpZWxkLSR7ZmllbGQudHlwZX1gKTtcbiAgICAgIGVsLmZpZWxkID0gZmllbGQ7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2lkJywgaWQpO1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdyb2xlaW5kZXgnLCByb2xlSW5kZXgpO1xuICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChlZGl0YWJsZSkge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2VkaXRhYmxlJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoZHJhZ2dhYmxlKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdmaWVsZENoYW5nZScsIGUgPT4gaGFuZGxlRmllbGRDaGFuZ2UoZmllbGQsIGUpKTtcbiAgICAgIHNldENvbnRyb2xTdHlsZXMoZWwsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUpO1xuICAgICAgY29udHJvbHNEaXYuYXBwZW5kQ2hpbGQoZWwpO1xuXG4gICAgICByZXR1cm4gZWw7XG4gICAgfVxuXG4gICAgY2FzZSAnY2hlY2tib3hfZ3JvdXAnOlxuICAgICAgZmllbGQuc2V0dGluZy5vcHRpb25zLmZvckVhY2goKF8sIGNoZWNrYm94SW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBnZXRGaWVsZE9wdGlvbklkKGZpZWxkLCBjaGVja2JveEluZGV4KTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nRmllbGQpIHtcbiAgICAgICAgICBzZXRDb250cm9sU3R5bGVzKGV4aXN0aW5nRmllbGQsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNiRWw6IGFueSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYHZlcmRvY3MtZmllbGQtY2hlY2tib3hgKTtcbiAgICAgICAgY2JFbC5maWVsZCA9IGZpZWxkO1xuICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG4gICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdyb2xlaW5kZXgnLCByb2xlSW5kZXgpO1xuICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgnb3B0aW9uJywgY2hlY2tib3hJbmRleCk7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGNiRWwuYWRkRXZlbnRMaXN0ZW5lcignZmllbGRDaGFuZ2UnLCBlID0+IGhhbmRsZUZpZWxkQ2hhbmdlKGZpZWxkLCBlKSk7XG4gICAgICAgIHNldENvbnRyb2xTdHlsZXMoY2JFbCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSk7XG4gICAgICAgIGNvbnRyb2xzRGl2LmFwcGVuZENoaWxkKGNiRWwpO1xuXG4gICAgICAgIHJldHVybiBjYkVsO1xuICAgICAgfSk7XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAncmFkaW9fYnV0dG9uX2dyb3VwJzpcbiAgICAgIGZpZWxkLnNldHRpbmcub3B0aW9ucy5mb3JFYWNoKChfLCBidXR0b25JbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpZCA9IGdldEZpZWxkT3B0aW9uSWQoZmllbGQsIGJ1dHRvbkluZGV4KTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nRmllbGQpIHtcbiAgICAgICAgICBzZXRDb250cm9sU3R5bGVzKGV4aXN0aW5nRmllbGQsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNiRWw6IGFueSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYHZlcmRvY3MtZmllbGQtcmFkaW8tYnV0dG9uYCk7XG4gICAgICAgIGNiRWwuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgY2JFbC5zZXRBdHRyaWJ1dGUoJ2lkJywgaWQpO1xuICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgncm9sZWluZGV4Jywgcm9sZUluZGV4KTtcbiAgICAgICAgY2JFbC5zZXRBdHRyaWJ1dGUoJ29wdGlvbicsIGJ1dHRvbkluZGV4KTtcbiAgICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgICAgY2JFbC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2JFbC5hZGRFdmVudExpc3RlbmVyKCdmaWVsZENoYW5nZScsIGUgPT4gaGFuZGxlRmllbGRDaGFuZ2UoZmllbGQsIGUpKTtcbiAgICAgICAgc2V0Q29udHJvbFN0eWxlcyhjYkVsLCBmaWVsZCwgZG9jUGFnZS54U2NhbGUsIGRvY1BhZ2UueVNjYWxlLCBidXR0b25JbmRleCk7XG4gICAgICAgIGNvbnRyb2xzRGl2LmFwcGVuZENoaWxkKGNiRWwpO1xuXG4gICAgICAgIHJldHVybiBjYkVsO1xuICAgICAgfSk7XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gY2FzZSAnYXR0YWNobWVudCc6XG4gICAgLy8gICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZlcmRvY3MtZmllbGQtYXR0YWNobWVudCcpO1xuICAgIC8vICAgZWwuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHJlc3VsdCB8fCAnJyk7XG4gICAgLy8gICBicmVhaztcbiAgICAvLyBjYXNlICdwYXltZW50JzpcbiAgICAvLyAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmVyZG9jcy1maWVsZC1wYXltZW50Jyk7XG4gICAgLy8gICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBTa2lwcGluZyB1bnN1cHBvcnRlZCBmaWVsZCB0eXBlJywgZmllbGQpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBnZXRSb2xlSW5kZXggPSAocm9sZXM6IHN0cmluZ1tdLCByb2xlOiBzdHJpbmcpID0+IHJvbGVzLmluZGV4T2Yocm9sZSkgfHwgMDtcblxuLy8gVE9ETzogV2UgY2FuIGNsZWFuIHRoaXMgdXAgYSBsb3QgaWYgd2UgYWx0ZXIgdGhlIEFQSSB0byBlbWl0IGJvdGggc2V0dGluZyBhbmQgc2V0dGluZ3MgcmVnYXJkbGVzcyBvZiB0aGUgc291cmNlIHR5cGUsXG4vLyAgIGJ1dCB0aGVuIG1lcmdlIHRoZSBTREsgdHlwZXMgdG8gZW5jb3VyYWdlIGRldmVsb3BlcnMgdG8gdXNlIGp1c3QgYHNldHRpbmdzYC5cbmV4cG9ydCBjb25zdCBnZXRGaWVsZFNldHRpbmdzID0gKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCB8IElEb2N1bWVudEZpZWxkKSA9PiB7XG4gIGlmICgoZmllbGQgYXMgSVRlbXBsYXRlRmllbGQpLnNldHRpbmcpIHtcbiAgICByZXR1cm4gKGZpZWxkIGFzIElUZW1wbGF0ZUZpZWxkKS5zZXR0aW5nO1xuICB9XG5cbiAgaWYgKChmaWVsZCBhcyBJRG9jdW1lbnRGaWVsZCkuc2V0dGluZ3MpIHtcbiAgICByZXR1cm4gKGZpZWxkIGFzIElEb2N1bWVudEZpZWxkKS5zZXR0aW5ncztcbiAgfVxuXG4gIHJldHVybiB7eDogMCwgeTogMCwgcmVxdWlyZWQ6IGZhbHNlLCBkaXNhYmxlZDogZmFsc2UsIHJlc3VsdDogJycsIHZhbHVlOiAnJ307XG59O1xuIiwiQGltcG9ydCAnLi4vLi4vLi4vdGhlbWUuc2Nzcyc7XG5cbnZlcmRvY3Mtc2VuZCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHBhZGRpbmc6IDEwcHg7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYmFja2dyb3VuZDogI2ZmZmZmZjtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZm9udC1mYW1pbHk6ICR2ZXJkb2NzLXByaW1hcnktZm9udDtcblxuICAucmVjaXBpZW50cyB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG5cbiAgLy8gVG8gYXZvaWQgdGhlIG5lZWQgdG8gY29tcHV0ZSB0aGluZ3MgbGlrZSBoZWlnaHRzLCB0aGlzIGxheWVyIGlzIHNpbXBseSBkaXNwbGF5ZWQgXCJvbiB0b3BcIiBvZiBhbGwgdGhlIGxldmVsIHJvd3MuIEl0c1xuICAvLyBiYWNrZ3JvdW5kIG9ic2N1cmVzIHRoZSBob3Jpem9udGFsIGxpbmVzLlxuICAubGVmdC1saW5lIHtcbiAgICB0b3A6IDMycHg7XG4gICAgbGVmdDogMjBweDtcbiAgICB6LWluZGV4OiAxO1xuICAgIHdpZHRoOiAxMnB4O1xuICAgIGJvdHRvbTogMzBweDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgYmFja2dyb3VuZDogI2ZmZmZmZjtcbiAgICBib3JkZXItbGVmdDogM3B4IGRvdHRlZCAjOWI5YjliO1xuICB9XG5cbiAgLmxldmVsIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGNvbHVtbi1nYXA6IDEwcHg7XG4gICAgbWFyZ2luLWxlZnQ6IDUwcHg7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgcGFkZGluZzogOHB4IDAgNHB4IDA7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM5Nzk3OTc0NDtcblxuICAgIC5sZXZlbC1pY29uIHtcbiAgICAgIHRvcDogMTRweDtcbiAgICAgIHotaW5kZXg6IDI7XG4gICAgICBsZWZ0OiAtNDBweDtcbiAgICAgIHdpZHRoOiAyNHB4O1xuICAgICAgaGVpZ2h0OiAyNHB4O1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgZmlsbDogIzAwMDAwMDg5O1xuICAgICAgfVxuICAgIH1cblxuICAgIC5yZWNpcGllbnQge1xuICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXg6IDAgMCAzMHB4O1xuICAgICAgY29sb3I6ICMwMDAwMDA7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgYm9yZGVyLXJhZGl1czogMzBweDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICBiYWNrZ3JvdW5kOiAjZGRkZGRkO1xuICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgIHBhZGRpbmc6IDJweCAxMHB4IDJweCAxNHB4O1xuXG4gICAgICAuaWNvbiB7XG4gICAgICAgIHdpZHRoOiAyMnB4O1xuICAgICAgICBoZWlnaHQ6IDIycHg7XG4gICAgICAgIGZsZXg6IDAgMCAyMnB4O1xuICAgICAgICBtYXJnaW46IDAgMCAwIDEwcHg7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICB3aWR0aDogMjJweDtcbiAgICAgICAgICBoZWlnaHQ6IDIycHg7XG4gICAgICAgICAgZmlsbDogIzMzMzMzMztcbiAgICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLmNvbXBsZXRlIHtcbiAgICAgIGZsZXg6IDE7XG4gICAgICBoZWlnaHQ6IDMwcHg7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgY29sb3I6ICMwMDAwMDA7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICAgIHBhZGRpbmc6IDNweCAxMHB4IDNweCAycHg7XG4gICAgfVxuICB9XG5cbiAgLmJ1dHRvbnMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICBjb2x1bW4tZ2FwOiAxNXB4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIH1cblxuICB2ZXJkb2NzLWNvbnRhY3QtcGlja2VyIHtcbiAgICBsZWZ0OiAwO1xuICAgIHRvcDogNDFweDtcbiAgICB6LWluZGV4OiAxMDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2RkZGRkZDtcbiAgICBib3gtc2hhZG93OiAwIDAgNnB4IDNweCByZ2IoMCAwIDAgLyAxMCUpO1xuICB9XG59XG4iLCJpbXBvcnQge1ZlcmRvY3NFbmRwb2ludH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrJztcbmltcG9ydCB7Z2V0UkdCQX0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1V0aWxzL0NvbG9ycyc7XG5pbXBvcnQge2dldFRlbXBsYXRlfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzL1RlbXBsYXRlcyc7XG5pbXBvcnQge0lSb2xlLCBJVGVtcGxhdGV9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMvVHlwZXMnO1xuaW1wb3J0IHtpc1ZhbGlkRW1haWwsIGlzVmFsaWRQaG9uZX0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcy9WYWxpZGF0b3JzJztcbmltcG9ydCB7Q29tcG9uZW50LCBQcm9wLCBTdGF0ZSwgaCwgRXZlbnQsIEV2ZW50RW1pdHRlciwgSG9zdH0gZnJvbSAnQHN0ZW5jaWwvY29yZSc7XG5pbXBvcnQge2dldFJvbGVJbmRleH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHtTREtFcnJvcn0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvZXJyb3JzJztcblxuLy8gVE9ETzogRXZhbHVhdGluZyB0aGlzIHBhdHRlcm4gZm9yIHNpbXBsZSBpY29ucyB2cy4gaW1wb3J0aW5nIGV4dGVybmFsIFNWRyBmaWxlcy4gVHJ5IHRvIHN0YW5kYXJkaXplIG9uIGFuIGFwcHJvYWNoIHNvb24uXG5jb25zdCBlZGl0SWNvbiA9XG4gICc8c3ZnIGZvY3VzYWJsZT1cImZhbHNlXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHRhYmluZGV4PVwiLTFcIj48cGF0aCBkPVwiTTMgMTcuMjVWMjFoMy43NUwxNy44MSA5Ljk0bC0zLjc1LTMuNzVMMyAxNy4yNXpNMjAuNzEgNy4wNGMuMzktLjM5LjM5LTEuMDIgMC0xLjQxbC0yLjM0LTIuMzRhLjk5NTkuOTk1OSAwIDAgMC0xLjQxIDBsLTEuODMgMS44MyAzLjc1IDMuNzUgMS44My0xLjgzelwiPjwvcGF0aD48L3N2Zz4nO1xuXG5jb25zdCBzdGFydEljb24gPVxuICAnPHN2ZyBmb2N1c2FibGU9XCJmYWxzZVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB0YWJpbmRleD1cIi0xXCI+PHBhdGggZD1cIk0yIDEyQzIgNi40OCA2LjQ4IDIgMTIgMnMxMCA0LjQ4IDEwIDEwLTQuNDggMTAtMTAgMTBTMiAxNy41MiAyIDEyem0xMCA2YzMuMzEgMCA2LTIuNjkgNi02cy0yLjY5LTYtNi02LTYgMi42OS02IDYgMi42OSA2IDYgNnpcIj48L3BhdGg+PC9zdmc+JztcblxuY29uc3Qgc3RlcEljb24gPVxuICAnPHN2ZyBmb2N1c2FibGU9XCJmYWxzZVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB0YWJpbmRleD1cIi0xXCI+PHBhdGggZD1cIk0xMiAyQzguMTMgMiA1IDUuMTMgNSA5YzAgNS4yNSA3IDEzIDcgMTNzNy03Ljc1IDctMTNjMC0zLjg3LTMuMTMtNy03LTd6bTAgOS41Yy0xLjM4IDAtMi41LTEuMTItMi41LTIuNXMxLjEyLTIuNSAyLjUtMi41IDIuNSAxLjEyIDIuNSAyLjUtMS4xMiAyLjUtMi41IDIuNXpcIj48L3BhdGg+PC9zdmc+JztcblxuY29uc3QgZG9uZUljb24gPVxuICAnPHN2ZyBmb2N1c2FibGU9XCJmYWxzZVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB0YWJpbmRleD1cIi0xXCI+PHBhdGggZD1cIm0xOCA3LTEuNDEtMS40MS02LjM0IDYuMzQgMS40MSAxLjQxTDE4IDd6bTQuMjQtMS40MUwxMS42NiAxNi4xNyA3LjQ4IDEybC0xLjQxIDEuNDFMMTEuNjYgMTlsMTItMTItMS40Mi0xLjQxek0uNDEgMTMuNDEgNiAxOWwxLjQxLTEuNDFMMS44MyAxMiAuNDEgMTMuNDF6XCI+PC9wYXRoPjwvc3ZnPic7XG5cbnR5cGUgVEFubm90YXRlZFJvbGUgPSBJUm9sZSAmIHtpZDogc3RyaW5nfTtcblxuLyoqXG4gKiBEaXNwbGF5IGEgZm9ybSB0byBjb2xsZWN0IHJlY2lwaWVudCBpbmZvcm1hdGlvbiBmb3IgYSBuZXcgRG9jdW1lbnQuIElmIHVzZWQgYW5vbnltb3VzbHksIHRoZSBzcGVjaWZpZWQgYHRlbXBsYXRlSWRgIG11c3QgYmUgcHVibGljLlxuICogSWYgdGhlIHVzZXIgaXMgYXV0aGVudGljYXRlZFxuICovXG5AQ29tcG9uZW50KHtcbiAgdGFnOiAndmVyZG9jcy1zZW5kJyxcbiAgc3R5bGVVcmw6ICd2ZXJkb2NzLXNlbmQuc2NzcycsXG4gIHNoYWRvdzogZmFsc2UsXG59KVxuZXhwb3J0IGNsYXNzIFZlcmRvY3NTZW5kIHtcbiAgLyoqXG4gICAqIFRoZSBlbmRwb2ludCB0byB1c2UgdG8gY29tbXVuaWNhdGUgd2l0aCBWZXJkb2NzLiBJZiBub3Qgc2V0LCB0aGUgZGVmYXVsdCBlbmRwb2ludCB3aWxsIGJlIHVzZWQuXG4gICAqL1xuICBAUHJvcCgpIGVuZHBvaW50OiBWZXJkb2NzRW5kcG9pbnQgPSBWZXJkb2NzRW5kcG9pbnQuZ2V0RGVmYXVsdCgpO1xuXG4gIC8qKlxuICAgKiBUaGUgSUQgb2YgdGhlIHRlbXBsYXRlIHRvIGNyZWF0ZSB0aGUgZG9jdW1lbnQgZnJvbS5cbiAgICovXG4gIEBQcm9wKCkgdGVtcGxhdGVJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSB1c2VyIGNvbXBsZXRlZCB0aGUgZm9ybSBhbmQgY2xpY2tlZCBzZW5kLlxuICAgKi9cbiAgQEV2ZW50KHtjb21wb3NlZDogdHJ1ZX0pIHNlbmQ6IEV2ZW50RW1pdHRlcjx7cmVjaXBpZW50c0Fzc2lnbmVkOiBJUm9sZVtdfT47XG5cbiAgLyoqXG4gICAqIFRoZSB1c2VyIGNhbmNlbGVkIHRoZSBwcm9jZXNzLlxuICAgKi9cbiAgQEV2ZW50KHtjb21wb3NlZDogdHJ1ZX0pIGNhbmNlbDogRXZlbnRFbWl0dGVyO1xuXG4gIC8qKlxuICAgKiBFdmVudCBmaXJlZCBpZiBhbiBlcnJvciBvY2N1cnMuIFRoZSBldmVudCBkZXRhaWxzIHdpbGwgY29udGFpbiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZXJyb3IuIE1vc3QgZXJyb3JzIHdpbGxcbiAgICogdGVybWluYXRlIHRoZSBwcm9jZXNzLCBhbmQgdGhlIGNhbGxpbmcgYXBwbGljYXRpb24gc2hvdWxkIGNvcnJlY3QgdGhlIGNvbmRpdGlvbiBhbmQgcmUtcmVuZGVyIHRoZSBjb21wb25lbnQuXG4gICAqL1xuICBARXZlbnQoe2NvbXBvc2VkOiB0cnVlfSkgc2RrRXJyb3I6IEV2ZW50RW1pdHRlcjxTREtFcnJvcj47XG5cbiAgQFN0YXRlKCkgdGVtcGxhdGU6IElUZW1wbGF0ZSB8IG51bGwgPSBudWxsO1xuXG4gIEBTdGF0ZSgpIHBkZlVybCA9IG51bGw7XG5cbiAgQFN0YXRlKCkgY29udGFpbmVySWQgPSBgdmVyZG9jcy1zZW5kLSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDExKX1gO1xuXG4gIEBTdGF0ZSgpIHJvbGVzQXRMZXZlbDogUmVjb3JkPG51bWJlciwgVEFubm90YXRlZFJvbGVbXT4gPSB7fTtcblxuICBAU3RhdGUoKSBzaG93UGlja2VyRm9ySWQgPSAnJztcblxuICBAU3RhdGUoKSBzZXNzaW9uQ29udGFjdHMgPSBbXTtcblxuICBAU3RhdGUoKSByZWNpcGllbnRzQXNzaWduZWQ6IFJlY29yZDxzdHJpbmcsIFRBbm5vdGF0ZWRSb2xlPiA9IHt9O1xuXG4gIGxldmVsczogbnVtYmVyW10gPSBbXTtcblxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICB0aGlzLnNlc3Npb25Db250YWN0cyA9IFtdO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmVuZHBvaW50LmxvYWRTZXNzaW9uKCk7XG5cbiAgICAgIGlmIChyZXN1bHQuc2Vzc2lvbj8ucHJvZmlsZSkge1xuICAgICAgICB0aGlzLnNlc3Npb25Db250YWN0cy5wdXNoKHtcbiAgICAgICAgICBpZDogcmVzdWx0LnNlc3Npb24ucHJvZmlsZS5pZCxcbiAgICAgICAgICBuYW1lOiBgJHtyZXN1bHQuc2Vzc2lvbi5wcm9maWxlLmZpcnN0X25hbWV9ICR7cmVzdWx0LnNlc3Npb24ucHJvZmlsZS5sYXN0X25hbWV9YCxcbiAgICAgICAgICBlbWFpbDogcmVzdWx0LnNlc3Npb24ucHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICBwaG9uZTogcmVzdWx0LnNlc3Npb24ucHJvZmlsZS5waG9uZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGxvYWRpbmcgc2Vzc2lvbicsIGUpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgY29uc29sZS5sb2coJ1tTRU5EXSBTaG93aW5nIHRlbXBsYXRlJywgdGhpcy50ZW1wbGF0ZUlkKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhgW1NFTkRdIExvYWRpbmcgdGVtcGxhdGUgJHt0aGlzLnRlbXBsYXRlSWR9YCk7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGF3YWl0IGdldFRlbXBsYXRlKHRoaXMuZW5kcG9pbnQsIHRoaXMudGVtcGxhdGVJZCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdbU0VORF0gR290IHRlbXBsYXRlJywgdGVtcGxhdGUpO1xuICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuXG4gICAgICBpZiAodGVtcGxhdGU/LnJvbGVzKSB7XG4gICAgICAgIGNvbnN0IHJvbGVzQXRMZXZlbDogUmVjb3JkPG51bWJlciwgVEFubm90YXRlZFJvbGVbXT4gPSB7fTtcblxuICAgICAgICB0ZW1wbGF0ZS5yb2xlcy5mb3JFYWNoKHJvbGUgPT4ge1xuICAgICAgICAgIGNvbnN0IGxldmVsID0gcm9sZS5zZXF1ZW5jZSAtIDE7XG4gICAgICAgICAgcm9sZXNBdExldmVsW2xldmVsXSB8fD0gW107XG4gICAgICAgICAgY29uc3QgaWQgPSBgci0ke2xldmVsfS0ke3JvbGVzQXRMZXZlbFtsZXZlbF0ubGVuZ3RofWA7XG4gICAgICAgICAgcm9sZXNBdExldmVsW2xldmVsXS5wdXNoKHsuLi5yb2xlLCBpZH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnJvbGVzQXRMZXZlbCA9IHJvbGVzQXRMZXZlbDtcbiAgICAgICAgdGhpcy5sZXZlbHMgPSBPYmplY3Qua2V5cyhyb2xlc0F0TGV2ZWwpLm1hcChsZXZlbFN0ciA9PiArbGV2ZWxTdHIpO1xuICAgICAgICB0aGlzLmxldmVscy5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coJ1tTRU5EXSBFcnJvciBnZXR0aW5nIHRlbXBsYXRlJywgZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0TGV2ZWxJY29uKGxldmVsOiBudW1iZXIpIHtcbiAgICBpZiAobGV2ZWwgPCAwKSB7XG4gICAgICByZXR1cm4gPGRpdiBjbGFzcz1cImxldmVsLWljb25cIiBpbm5lckhUTUw9e3N0YXJ0SWNvbn0gLz47XG4gICAgfSBlbHNlIGlmIChsZXZlbCA+PSB0aGlzLmxldmVscy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiA8ZGl2IGNsYXNzPVwibGV2ZWwtaWNvblwiIGlubmVySFRNTD17ZG9uZUljb259IC8+O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gPGRpdiBjbGFzcz1cImxldmVsLWljb25cIiBpbm5lckhUTUw9e3N0ZXBJY29ufSAvPjtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVTZWxlY3RDb250YWN0KGU6IGFueSwgcm9sZTogVEFubm90YXRlZFJvbGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5kZXRhaWw7IC8vIElDb250YWN0U2VsZWN0RXZlbnRcbiAgICB0aGlzLnJlY2lwaWVudHNBc3NpZ25lZFtyb2xlLmlkXSA9IHsuLi5yb2xlLCAuLi5lLmRldGFpbH07XG4gICAgdGhpcy5zaG93UGlja2VyRm9ySWQgPSAnJztcbiAgfVxuXG4gIGhhbmRsZUNsaWNrUm9sZShlOiBhbnksIHJvbGU6IFRBbm5vdGF0ZWRSb2xlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLnNob3dQaWNrZXJGb3JJZCA9IHJvbGUuaWQ7XG4gIH1cblxuICBoYW5kbGVTZW5kKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMuc2VuZD8uZW1pdCh7cmVjaXBpZW50c0Fzc2lnbmVkOiBPYmplY3QudmFsdWVzKHRoaXMucmVjaXBpZW50c0Fzc2lnbmVkKX0pO1xuICB9XG5cbiAgaGFuZGxlQ2FuY2VsKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMuY2FuY2VsPy5lbWl0KCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgcm9sZU5hbWVzID0gdGhpcy50ZW1wbGF0ZT8ucm9sZXM/Lm1hcChyb2xlID0+IHJvbGUubmFtZSkgfHwgW107XG4gICAgY29uc3QgYWxsUmVjaXBpZW50c0Fzc2lnbmVkID1cbiAgICAgIE9iamVjdC52YWx1ZXModGhpcy5yZWNpcGllbnRzQXNzaWduZWQpLmZpbHRlcihyZWNpcGllbnQgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygndmFsaWQgZW1haWwnLCBpc1ZhbGlkRW1haWwocmVjaXBpZW50LmVtYWlsKSwgcmVjaXBpZW50LmVtYWlsKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3ZhbGlkIHBob25lJywgaXNWYWxpZFBob25lKHJlY2lwaWVudC5waG9uZSksIHJlY2lwaWVudC5waG9uZSk7XG4gICAgICAgIHJldHVybiBpc1ZhbGlkRW1haWwocmVjaXBpZW50LmVtYWlsKSB8fCBpc1ZhbGlkUGhvbmUocmVjaXBpZW50LnBob25lKTtcbiAgICAgIH0pLmxlbmd0aCA+PSB0aGlzLnRlbXBsYXRlPy5yb2xlcy5sZW5ndGg7XG4gICAgY29uc29sZS5sb2coJ2Fzc2lnbmVkJywgYWxsUmVjaXBpZW50c0Fzc2lnbmVkKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8SG9zdCBjbGFzcz17e319PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicmVjaXBpZW50c1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZWZ0LWxpbmVcIiAvPlxuICAgICAgICAgIDxkaXYgY2xhc3M9e2BsZXZlbCBsZXZlbC1zdGFydGB9PlxuICAgICAgICAgICAge3RoaXMuZ2V0TGV2ZWxJY29uKC0xKX1cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb21wbGV0ZVwiPlNlbmQgRG9jdW1lbnQ8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHt0aGlzLmxldmVscy5tYXAobGV2ZWwgPT4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzcz17YGxldmVsIGxldmVsLSR7bGV2ZWx9YH0+XG4gICAgICAgICAgICAgIHt0aGlzLmdldExldmVsSWNvbihsZXZlbCl9XG5cbiAgICAgICAgICAgICAge3RoaXMucm9sZXNBdExldmVsW2xldmVsXS5tYXAocm9sZSA9PiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJlY2lwaWVudFwiIHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiBnZXRSR0JBKGdldFJvbGVJbmRleChyb2xlTmFtZXMsIHJvbGUubmFtZSkpfX0gb25DbGljaz17ZSA9PiB0aGlzLmhhbmRsZUNsaWNrUm9sZShlLCByb2xlKX0+XG4gICAgICAgICAgICAgICAgICB7dGhpcy5yZWNpcGllbnRzQXNzaWduZWRbcm9sZS5pZF0/LmZ1bGxfbmFtZSA/PyByb2xlLm5hbWV9XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaWNvblwiIGlubmVySFRNTD17ZWRpdEljb259IC8+XG4gICAgICAgICAgICAgICAgICB7dGhpcy5zaG93UGlja2VyRm9ySWQgPT09IHJvbGUuaWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8dmVyZG9jcy1jb250YWN0LXBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2FuY2VsPXsoKSA9PiAodGhpcy5zaG93UGlja2VyRm9ySWQgPSAnJyl9XG4gICAgICAgICAgICAgICAgICAgICAgY29udGFjdFN1Z2dlc3Rpb25zPXt0aGlzLnNlc3Npb25Db250YWN0c31cbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJvbGU9e3RoaXMucmVjaXBpZW50c0Fzc2lnbmVkW3JvbGUuaWRdID8/IHJvbGV9XG4gICAgICAgICAgICAgICAgICAgICAgb25TZWFyY2hDb250YWN0cz17ZSA9PiBjb25zb2xlLmxvZygnU2VhcmNoJywgZS5kZXRhaWwpfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ29udGFjdFNlbGVjdGVkPXtlID0+IHRoaXMuaGFuZGxlU2VsZWN0Q29udGFjdChlLCByb2xlKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSl9XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzPXtgbGV2ZWwgbGV2ZWwtZG9uZWB9PlxuICAgICAgICAgICAge3RoaXMuZ2V0TGV2ZWxJY29uKHRoaXMubGV2ZWxzLmxlbmd0aCl9XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29tcGxldGVcIj5Eb2N1bWVudCBDb21wbGV0ZTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiYnV0dG9uc1wiPlxuICAgICAgICAgIDx2ZXJkb2NzLWJ1dHRvbiBsYWJlbD1cIkNhbmNlbFwiIHNpemU9XCJzbWFsbFwiIHZhcmlhbnQ9XCJvdXRsaW5lXCIgb25QcmVzcz17ZSA9PiB0aGlzLmhhbmRsZUNhbmNlbChlKX0gLz5cbiAgICAgICAgICA8dmVyZG9jcy1idXR0b24gbGFiZWw9XCJTZW5kXCIgc2l6ZT1cInNtYWxsXCIgZGlzYWJsZWQ9eyFhbGxSZWNpcGllbnRzQXNzaWduZWR9IG9uUHJlc3M9e2UgPT4gdGhpcy5oYW5kbGVTZW5kKGUpfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvSG9zdD5cbiAgICApO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9
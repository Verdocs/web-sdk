(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{"./dist/esm/verdocs-initial-dialog.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"verdocs_initial_dialog",(function(){return VerdocsInitialDialog}));__webpack_require__("./node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var _index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/esm/index-b18c0348.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var VerdocsInitialDialog=function(){function VerdocsInitialDialog(hostRef){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,VerdocsInitialDialog),Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.j)(this,hostRef),this.next=Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.e)(this,"next",7),this.exit=Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.e)(this,"exit",7),this.initials="",this.fontLoaded=!1,this.enteredInitials="",this.mode="type"}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(VerdocsInitialDialog,[{key:"componentWillLoad",value:function componentWillLoad(){var _this=this;this.enteredInitials=this.initials.toUpperCase(),new FontFace("Dancing Script","url(https://fonts.gstatic.com/s/dancingscript/v19/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup6hNX6plRP.woff)").load().then((function(font){document.fonts.add(font),_this.fontLoaded=!0}))}},{key:"componentDidLoad",value:function componentDidLoad(){this.redrawSignature()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.redrawSignature()}},{key:"redrawSignature",value:function redrawSignature(){if(this.canvasElement){var canvasWidth=this.canvasElement.width,context=this.canvasElement.getContext("2d");context.clearRect(0,0,this.canvasElement.width,this.canvasElement.height);var fontSize=100;do{fontSize-=2,context.font=fontSize+"px Dancing Script"}while(context.measureText(this.enteredInitials).width>canvasWidth-32);context.textAlign="center",context.textBaseline="middle",context.font=fontSize+"px Dancing Script",context.fillText(this.enteredInitials,this.canvasElement.width/2,this.canvasElement.height/2)}}},{key:"handleNameChange",value:function handleNameChange(e){this.enteredInitials=e.target.value}},{key:"handleCancel",value:function handleCancel(e){e.stopPropagation(),e.preventDefault(),this.exit.emit()}},{key:"handleAdopt",value:function handleAdopt(e){e.stopPropagation(),e.preventDefault();var data=this.canvasElement.toDataURL("image/png");this.next.emit(data)}},{key:"render",value:function render(){var _this2=this;return Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.h)(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.b,{onClick:function onClick(e){return _this2.handleCancel(e)}},Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{class:"dialog"},Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{class:"heading"},"Create Your Initial"),Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{class:"content"},Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-text-input",{placeholder:"Initials...",label:"Initials",value:this.enteredInitials,onInput:function onInput(e){return _this2.handleNameChange(e)}}),Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{class:"as-shown"},"As shown on driver's license or govt. ID card."),this.fontLoaded?Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.h)("canvas",{ref:function ref(el){return _this2.canvasElement=el}}):Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{style:{display:"none"}}),Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{class:"disclaimer"},"By clicking Adopt, I agree that the signature will be the electronic representation of my signature for all purposes when I (or my agent) use them on documents, including legally binding contracts â€” just the same as a pen-and-paper signature or initial."),Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{class:"buttons"},Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-button",{label:"CANCEL",variant:"outline",onClick:function onClick(e){return _this2.handleCancel(e)}}),Object(_index_b18c0348_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-button",{label:"Adopt & Sign",onClick:function onClick(e){return _this2.handleAdopt(e)}})))))}}]),VerdocsInitialDialog}();VerdocsInitialDialog.style='verdocs-initial-dialog{font-family:"Inter", "Barlow", sans-serif;-webkit-box-sizing:border-box;box-sizing:border-box;position:fixed;z-index:10000;top:0;left:0;right:0;bottom:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;background:#0000007f}verdocs-initial-dialog .dialog{width:100%;max-width:340px;border-radius:4px;overflow:hidden;-webkit-box-shadow:3px 3px 5px 1px rgba(40, 40, 40, 0.4);box-shadow:3px 3px 5px 1px rgba(40, 40, 40, 0.4);background:#f9f9f9}verdocs-initial-dialog .heading{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:20px 20px 0 20px;line-height:28px;font-size:20px;font-weight:500}verdocs-initial-dialog .content{font-size:14px;padding:20px}verdocs-initial-dialog .buttons{display:-ms-flexbox;display:flex;margin:20px 0 0 0;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:end;justify-content:flex-end;-ms-flex-align:center;align-items:center}verdocs-initial-dialog .buttons verdocs-button{margin-left:16px}verdocs-initial-dialog canvas{background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 auto;width:300px;height:79px;max-width:100%;-webkit-box-shadow:0 0 6px 0 #0000001f;box-shadow:0 0 6px 0 #0000001f}verdocs-initial-dialog .disclaimer{text-align:justify;padding:8px 0;font-size:11px;line-height:14px;color:rgba(0, 0, 0, 0.54)}verdocs-initial-dialog .as-shown{font-size:11px;margin:4px 0 20px 4px;color:rgba(0, 0, 0, 0.54)}verdocs-initial-dialog .tabs{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}verdocs-initial-dialog .tabs .tab{padding:8px 15px;cursor:pointer}verdocs-initial-dialog .tabs .tab.active{border-bottom:2px solid #cccccc}verdocs-initial-dialog .tabs .tab:hover{color:#55bc81}'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L2VzbS92ZXJkb2NzLWluaXRpYWwtZGlhbG9nLmVudHJ5LmpzIl0sIm5hbWVzIjpbIlZlcmRvY3NJbml0aWFsRGlhbG9nIiwiaG9zdFJlZiIsInJlZ2lzdGVySW5zdGFuY2UiLCJ0aGlzIiwibmV4dCIsImNyZWF0ZUV2ZW50IiwiZXhpdCIsImluaXRpYWxzIiwiZm9udExvYWRlZCIsImVudGVyZWRJbml0aWFscyIsIm1vZGUiLCJjb21wb25lbnRXaWxsTG9hZCIsInRvVXBwZXJDYXNlIiwiRm9udEZhY2UiLCJsb2FkIiwidGhlbiIsImZvbnQiLCJkb2N1bWVudCIsImZvbnRzIiwiYWRkIiwiY29tcG9uZW50RGlkTG9hZCIsInJlZHJhd1NpZ25hdHVyZSIsImNvbXBvbmVudERpZFVwZGF0ZSIsImNhbnZhc0VsZW1lbnQiLCJjYW52YXNXaWR0aCIsIndpZHRoIiwiY29udGV4dCIsImdldENvbnRleHQiLCJjbGVhclJlY3QiLCJoZWlnaHQiLCJmb250U2l6ZSIsIm1lYXN1cmVUZXh0IiwidGV4dEFsaWduIiwidGV4dEJhc2VsaW5lIiwiZmlsbFRleHQiLCJoYW5kbGVOYW1lQ2hhbmdlIiwiZSIsInRhcmdldCIsInZhbHVlIiwiaGFuZGxlQ2FuY2VsIiwic3RvcFByb3BhZ2F0aW9uIiwicHJldmVudERlZmF1bHQiLCJlbWl0IiwiaGFuZGxlQWRvcHQiLCJkYXRhIiwidG9EYXRhVVJMIiwicmVuZGVyIiwiaCIsIkhvc3QiLCJvbkNsaWNrIiwiY2xhc3MiLCJwbGFjZWhvbGRlciIsImxhYmVsIiwib25JbnB1dCIsInJlZiIsImVsIiwic3R5bGUiLCJkaXNwbGF5IiwidmFyaWFudCJdLCJtYXBwaW5ncyI6IjJuREFFQSxJQUVNQSxxQkFBb0IsV0FDeEIsOEJBQVlDLFUsOElBQVMsNEJBQ25CQywwREFBaUJDLEtBQU1GLFNBQ3ZCRSxLQUFLQyxLQUFPQywwREFBWUYsS0FBTSxPQUFRLEdBQ3RDQSxLQUFLRyxLQUFPRCwwREFBWUYsS0FB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IHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIEggYXMgSG9zdCB9IGZyb20gJy4vaW5kZXgtYjE4YzAzNDguanMnO1xuXG5jb25zdCB2ZXJkb2NzSW5pdGlhbERpYWxvZ0NzcyA9IFwidmVyZG9jcy1pbml0aWFsLWRpYWxvZ3tmb250LWZhbWlseTpcXFwiSW50ZXJcXFwiLCBcXFwiQmFybG93XFxcIiwgc2Fucy1zZXJpZjstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7cG9zaXRpb246Zml4ZWQ7ei1pbmRleDoxMDAwMDt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDtib3R0b206MDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstbXMtZmxleC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyOy1tcy1mbGV4LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7YmFja2dyb3VuZDojMDAwMDAwN2Z9dmVyZG9jcy1pbml0aWFsLWRpYWxvZyAuZGlhbG9ne3dpZHRoOjEwMCU7bWF4LXdpZHRoOjM0MHB4O2JvcmRlci1yYWRpdXM6NHB4O292ZXJmbG93OmhpZGRlbjstd2Via2l0LWJveC1zaGFkb3c6M3B4IDNweCA1cHggMXB4IHJnYmEoNDAsIDQwLCA0MCwgMC40KTtib3gtc2hhZG93OjNweCAzcHggNXB4IDFweCByZ2JhKDQwLCA0MCwgNDAsIDAuNCk7YmFja2dyb3VuZDojZjlmOWY5fXZlcmRvY3MtaW5pdGlhbC1kaWFsb2cgLmhlYWRpbmd7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LW1zLWZsZXgtZGlyZWN0aW9uOnJvdztmbGV4LWRpcmVjdGlvbjpyb3c7cGFkZGluZzoyMHB4IDIwcHggMCAyMHB4O2xpbmUtaGVpZ2h0OjI4cHg7Zm9udC1zaXplOjIwcHg7Zm9udC13ZWlnaHQ6NTAwfXZlcmRvY3MtaW5pdGlhbC1kaWFsb2cgLmNvbnRlbnR7Zm9udC1zaXplOjE0cHg7cGFkZGluZzoyMHB4fXZlcmRvY3MtaW5pdGlhbC1kaWFsb2cgLmJ1dHRvbnN7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7bWFyZ2luOjIwcHggMCAwIDA7LW1zLWZsZXgtZGlyZWN0aW9uOnJvdztmbGV4LWRpcmVjdGlvbjpyb3c7LW1zLWZsZXgtcGFjazplbmQ7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kOy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXJ9dmVyZG9jcy1pbml0aWFsLWRpYWxvZyAuYnV0dG9ucyB2ZXJkb2NzLWJ1dHRvbnttYXJnaW4tbGVmdDoxNnB4fXZlcmRvY3MtaW5pdGlhbC1kaWFsb2cgY2FudmFze2JhY2tncm91bmQ6I2ZmZjstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7bWFyZ2luOjAgYXV0bzt3aWR0aDozMDBweDtoZWlnaHQ6NzlweDttYXgtd2lkdGg6MTAwJTstd2Via2l0LWJveC1zaGFkb3c6MCAwIDZweCAwICMwMDAwMDAxZjtib3gtc2hhZG93OjAgMCA2cHggMCAjMDAwMDAwMWZ9dmVyZG9jcy1pbml0aWFsLWRpYWxvZyAuZGlzY2xhaW1lcnt0ZXh0LWFsaWduOmp1c3RpZnk7cGFkZGluZzo4cHggMDtmb250LXNpemU6MTFweDtsaW5lLWhlaWdodDoxNHB4O2NvbG9yOnJnYmEoMCwgMCwgMCwgMC41NCl9dmVyZG9jcy1pbml0aWFsLWRpYWxvZyAuYXMtc2hvd257Zm9udC1zaXplOjExcHg7bWFyZ2luOjRweCAwIDIwcHggNHB4O2NvbG9yOnJnYmEoMCwgMCwgMCwgMC41NCl9dmVyZG9jcy1pbml0aWFsLWRpYWxvZyAudGFic3tkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstbXMtZmxleC1kaXJlY3Rpb246cm93O2ZsZXgtZGlyZWN0aW9uOnJvd312ZXJkb2NzLWluaXRpYWwtZGlhbG9nIC50YWJzIC50YWJ7cGFkZGluZzo4cHggMTVweDtjdXJzb3I6cG9pbnRlcn12ZXJkb2NzLWluaXRpYWwtZGlhbG9nIC50YWJzIC50YWIuYWN0aXZle2JvcmRlci1ib3R0b206MnB4IHNvbGlkICNjY2NjY2N9dmVyZG9jcy1pbml0aWFsLWRpYWxvZyAudGFicyAudGFiOmhvdmVye2NvbG9yOiM1NWJjODF9XCI7XG5cbmNvbnN0IFZlcmRvY3NJbml0aWFsRGlhbG9nID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLm5leHQgPSBjcmVhdGVFdmVudCh0aGlzLCBcIm5leHRcIiwgNyk7XG4gICAgdGhpcy5leGl0ID0gY3JlYXRlRXZlbnQodGhpcywgXCJleGl0XCIsIDcpO1xuICAgIHRoaXMuaW5pdGlhbHMgPSAnJztcbiAgICB0aGlzLmZvbnRMb2FkZWQgPSBmYWxzZTtcbiAgICB0aGlzLmVudGVyZWRJbml0aWFscyA9ICcnO1xuICAgIHRoaXMubW9kZSA9ICd0eXBlJztcbiAgfVxuICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICB0aGlzLmVudGVyZWRJbml0aWFscyA9IHRoaXMuaW5pdGlhbHMudG9VcHBlckNhc2UoKTtcbiAgICBjb25zdCBkcyA9IG5ldyBGb250RmFjZSgnRGFuY2luZyBTY3JpcHQnLCAndXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9kYW5jaW5nc2NyaXB0L3YxOS9JZjJjWFRyNllTLXpGNFMta2NTV1NWaV9zeGpzb2hEOUY1MFJ1dTdCTVNvM1N1cDZoTlg2cGxSUC53b2ZmKScpO1xuICAgIGRzLmxvYWQoKS50aGVuKGZvbnQgPT4ge1xuICAgICAgZG9jdW1lbnQuZm9udHMuYWRkKGZvbnQpO1xuICAgICAgdGhpcy5mb250TG9hZGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuICBjb21wb25lbnREaWRMb2FkKCkge1xuICAgIHRoaXMucmVkcmF3U2lnbmF0dXJlKCk7XG4gIH1cbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIHRoaXMucmVkcmF3U2lnbmF0dXJlKCk7XG4gIH1cbiAgcmVkcmF3U2lnbmF0dXJlKCkge1xuICAgIGlmICghdGhpcy5jYW52YXNFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNhbnZhc1dpZHRoID0gdGhpcy5jYW52YXNFbGVtZW50LndpZHRoO1xuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmNhbnZhc0VsZW1lbnQuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhc0VsZW1lbnQud2lkdGgsIHRoaXMuY2FudmFzRWxlbWVudC5oZWlnaHQpO1xuICAgIGxldCBmb250U2l6ZSA9IDEwMDtcbiAgICBkbyB7XG4gICAgICBmb250U2l6ZSAtPSAyO1xuICAgICAgY29udGV4dC5mb250ID0gYCR7Zm9udFNpemV9cHggRGFuY2luZyBTY3JpcHRgO1xuICAgIH0gd2hpbGUgKGNvbnRleHQubWVhc3VyZVRleHQodGhpcy5lbnRlcmVkSW5pdGlhbHMpLndpZHRoID4gY2FudmFzV2lkdGggLSAzMik7IC8vIDMycHggcGFkZGluZyBlYWNoIHNpZGVcbiAgICBjb250ZXh0LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIGNvbnRleHQudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG4gICAgY29udGV4dC5mb250ID0gYCR7Zm9udFNpemV9cHggRGFuY2luZyBTY3JpcHRgO1xuICAgIGNvbnRleHQuZmlsbFRleHQodGhpcy5lbnRlcmVkSW5pdGlhbHMsIHRoaXMuY2FudmFzRWxlbWVudC53aWR0aCAvIDIsIHRoaXMuY2FudmFzRWxlbWVudC5oZWlnaHQgLyAyKTtcbiAgfVxuICBoYW5kbGVOYW1lQ2hhbmdlKGUpIHtcbiAgICB0aGlzLmVudGVyZWRJbml0aWFscyA9IGUudGFyZ2V0LnZhbHVlO1xuICB9XG4gIGhhbmRsZUNhbmNlbChlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5leGl0LmVtaXQoKTtcbiAgfVxuICBoYW5kbGVBZG9wdChlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuY2FudmFzRWxlbWVudC50b0RhdGFVUkwoJ2ltYWdlL3BuZycpO1xuICAgIHRoaXMubmV4dC5lbWl0KGRhdGEpO1xuICB9XG4gIC8qXG4gIHNlbENvbG9yKGhleDogc3RyaW5nKSB7XG4gICAgdGhpcy5jb2xvciA9IGhleDtcbiAgICB0aGlzLmFuaW1hdGVEcmF3KCk7XG4gIH1cblxuICBzdG9wRHJhdygpIHtcbiAgICB0aGlzLnBhaW50ID0gZmFsc2U7XG4gICAgdGhpcy5hZG9wdGVkQW5kU2lnbmVkID0gIXRoaXMuaGFzU2lnbmF0dXJlKCk7XG4gIH1cblxuICBkcmF3KGUpIHtcbiAgICB0aGlzLnBhaW50ID0gdHJ1ZTtcbiAgICB0aGlzLmFkZFBvaW50cyhlLCBmYWxzZSk7XG4gICAgdGhpcy5hbmltYXRlRHJhdygpO1xuICB9XG5cbiAgcmVjb3JkUG9pbnRzKGUpIHtcbiAgICBpZiAodGhpcy5wYWludCkge1xuICAgICAgdGhpcy5hZGRQb2ludHMoZSwgdHJ1ZSk7XG4gICAgICB0aGlzLmFuaW1hdGVEcmF3KCk7XG4gICAgfVxuICB9XG5cbiAgYW5pbWF0ZURyYXcoKSB7XG4gICAgdGhpcy5jYW52YXMuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLmNhbnZhcy5vZmZzZXRXaWR0aCwgdGhpcy5jYW52YXMuY2FudmFzLm9mZnNldEhlaWdodCk7XG5cbiAgICB0aGlzLmNhbnZhcy5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3IgfHwgJyMwMDAwMDAnO1xuICAgIHRoaXMuY2FudmFzLmxpbmVKb2luID0gJ3JvdW5kJztcbiAgICB0aGlzLmNhbnZhcy5saW5lV2lkdGggPSAzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7XG4gICAgICBpZiAodGhpcy5wb2ludHNbaV0uZHJhZyAmJiBpKSB7XG4gICAgICAgIHRoaXMuY2FudmFzLm1vdmVUbyh0aGlzLnBvaW50c1tpIC0gMV0ueCwgdGhpcy5wb2ludHNbaSAtIDFdLnkpO1xuICAgICAgICAvLyB0aGlzLmNhbnZhcy5hcmModGhpcy5wb2ludHNbaSAtIDFdLngsIHRoaXMucG9pbnRzW2kgLSAxXS55LCAyLCAwLCAyICogTWF0aC5QSSwgZmFsc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jYW52YXMubW92ZVRvKHRoaXMucG9pbnRzW2ldLnggLSAxLCB0aGlzLnBvaW50c1tpXS55KTtcbiAgICAgICAgLy8gdGhpcy5jYW52YXMuYXJjKHRoaXMucG9pbnRzW2ldLngsIHRoaXMucG9pbnRzW2ldLnksIDIsIDAsIDIgKiBNYXRoLlBJLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2FudmFzLmxpbmVUbyh0aGlzLnBvaW50c1tpXS54LCB0aGlzLnBvaW50c1tpXS55KTtcbiAgICAgIHRoaXMuY2FudmFzLmNsb3NlUGF0aCgpO1xuICAgICAgdGhpcy5jYW52YXMuc3Ryb2tlKCk7XG4gICAgfVxuICB9XG5cbiAgZHJhd0N1cnZlKGNvbG9yOiBzdHJpbmcsIGN1cnZlOiBudW1iZXIpIHtcbiAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcbiAgfVxuXG5cblxuICBhZGRQb2ludHMoZSwgZHJhZzogYm9vbGVhbikge1xuICAgIGlmICh3aW5kb3cpIHtcbiAgICAgIGxldCB4O1xuICAgICAgbGV0IHk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHggPSBlLmNsaWVudFg7XG4gICAgICB9XG5cbiAgICAgIGlmIChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgeSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeSA9IGUuY2xpZW50WTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLnNpZ25hdHVyZUNhbnZhcy5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgdGhpcy5wb2ludHMucHVzaCh7XG4gICAgICAgIHg6IHggLSByZWN0LmxlZnQsXG4gICAgICAgIHk6IHkgLSByZWN0LnRvcCxcbiAgICAgICAgZHJhZzogZHJhZ1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY2xlYXJQYWQoKSB7XG4gICAgdGhpcy5jYW52YXMuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLmNhbnZhcy5vZmZzZXRXaWR0aCwgdGhpcy5jYW52YXMuY2FudmFzLm9mZnNldEhlaWdodCk7XG4gICAgdGhpcy5wb2ludHMgPSBbXTtcbiAgICB0aGlzLmFkb3B0ZWRBbmRTaWduZWQgPSAhdGhpcy5oYXNTaWduYXR1cmUoKTtcbiAgfVxuXG4gICAgYXN5bmMgYWRvcHRBbmRTaWduKCkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmFkb3B0ZWRBbmRTaWduZWQgPSB0cnVlO1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGVGdWxsTmFtZSgpO1xuICAgICAgYXdhaXQgdGhpcy5jYXB0dXJlU2lnbmF0dXJlRnJvbUNhbnZhcygpO1xuICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuc2lnbmF0dXJlTW9kZSA9PT0gJ1NpZ25hdHVyZScgPyAnU2F2aW5nIFNpZ25hdHVyZScgOiAnU2F2aW5nIEluaXRpYWwnO1xuICAgICAgdGhpcy5zbmFja2JhclNlcnZpY2Uub3BlbihtZXNzYWdlLCAnT0snLCB0aGlzLnNuYWNrYmFyU2VydmljZS5pbml0Q29uZmlnKG51bGwsICdib3R0b20nKSk7XG4gICAgICB0aGlzLmhhbmRsZU1vZGUoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuc25hY2tiYXJTZXJ2aWNlLm9wZW4oJ0ZhaWxlZCB0byBhcHBseSBzaWduYXR1cmUnLCAnT0snLCB0aGlzLnNuYWNrYmFyU2VydmljZS5pbml0Q29uZmlnKG51bGwsICdib3R0b20nKSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlTW9kZSgpIHtcbiAgICBsZXQgY3VycmVudEZpZWxkO1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlICdzaWduZXJ2aWV3JzpcbiAgICAgICAgaWYgKHRoaXMuc2lnbmF0dXJlTW9kZSA9PT0gJ1NpZ25hdHVyZScpIHtcbiAgICAgICAgICB0aGlzLnNpZ25hdHVyZVNlcnZpY2UucG9zdFNpZ25hdHVyZUJsb2IoKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5pZCAmJiByZXN1bHQudXJsKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnRGaWVsZCA9IHRoaXMuc2lnbmF0dXJlU2VydmljZS5jdXJyRmllbGQ7XG4gICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VydmljZS51cGRhdGVTaWduZWQoY3VycmVudEZpZWxkLmZOYW1lLCB0cnVlKTtcbiAgICAgICAgICAgICAgdGhpcy5zaWduYXR1cmVTZXJ2aWNlLnRvZ2dsZVNpZyhmYWxzZSk7XG4gICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VydmljZS5zZXRTaWduYXR1cmVJZChyZXN1bHQuaWQpO1xuICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZVNlcnZpY2UucHV0U2lnbmF0dXJlRmllbGQodGhpcy5lbnZlbG9wZUlkLCB0aGlzLmZpZWxkTmFtZSwgcmVzdWx0LmlkKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudFRyYWNrZXIuY3JlYXRlRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICd2ZXJkb2MnLFxuICAgICAgICAgICAgICAgICAgYWN0aW9uOiAndmVyZG9jIHNpZ25lZCcsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogYHZlcmRvYyBpZDogJHt0aGlzLmVudmVsb3BlSWR9YFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuc2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VydmljZS5zZXRTaWduYXR1cmVEYXRhKHJlcy5zZXR0aW5ncy5iYXNlNjQpO1xuICAgICAgICAgICAgICAgICAgdGhpcy5zaWduYXR1cmVTZXJ2aWNlLnNldFNpZ25hdHVyZUlkKHJlcy5zZXR0aW5ncy5zaWduYXR1cmVfaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNuYWNrYmFyU2VydmljZS5kaXNtaXNzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cuY2xvc2UoeyBzdGF0dXM6ICdzYXZlZCcsIHRlbXBfc2lnOiByZXMuc2V0dGluZ3MuYmFzZTY0LCBzaWdfaWQ6IHJlcy5zZXR0aW5ncy5zaWduYXR1cmVfaWQgfSk7XG4gICAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbmFja2JhclNlcnZpY2Uub3BlbignRmFpbGVkIHRvIHNhdmUgc2lnbmF0dXJlLiBQbGVhc2UgdHJ5IGFnYWluLicsICdESVNNSVNTJywge1xuICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkb3B0ZWRBbmRTaWduZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNpZ25hdHVyZVNlcnZpY2UucG9zdEluaXRpYWxCbG9iKCkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQuaWQgJiYgcmVzdWx0LnVybCkge1xuICAgICAgICAgICAgICBjdXJyZW50RmllbGQgPSB0aGlzLnNpZ25hdHVyZVNlcnZpY2UuY3VyckZpZWxkO1xuICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZVNlcnZpY2UudXBkYXRlSW5pdGlhbGVkKGN1cnJlbnRGaWVsZC5mTmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VydmljZS5zZXRJbml0aWFsSWQocmVzdWx0LmlkKTtcbiAgICAgICAgICAgICAgdGhpcy5zaWduYXR1cmVTZXJ2aWNlLnRvZ2dsZVNpZyhmYWxzZSk7XG4gICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VydmljZS5wdXRJbml0aWFsRmllbGQodGhpcy5lbnZlbG9wZUlkLCB0aGlzLmZpZWxkTmFtZSwgcmVzdWx0LmlkKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuc2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VydmljZS5zZXRJbml0aWFsRGF0YShyZXMuc2V0dGluZ3MuYmFzZTY0KTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VydmljZS5zZXRJbml0aWFsSWQocmVzLnNldHRpbmdzLmluaXRpYWxfaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNuYWNrYmFyU2VydmljZS5kaXNtaXNzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cuY2xvc2UoeyBzdGF0dXM6ICdzYXZlZCcsIHRlbXBfaW50OiByZXMuc2V0dGluZ3MuYmFzZTY0LCBpbnRfaWQ6IHJlcy5zZXR0aW5ncy5pbml0aWFsX2lkIH0pO1xuICAgICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc25hY2tiYXJTZXJ2aWNlLm9wZW4oJ0ZhaWxlZCB0byBzYXZlIGluaXRpYWwuIFBsZWFzZSB0cnkgYWdhaW4uJywgJ0RJU01JU1MnLCB7XG4gICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRvcHRlZEFuZFNpZ25lZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICAgKi9cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoaChIb3N0LCB7IG9uQ2xpY2s6IGUgPT4gdGhpcy5oYW5kbGVDYW5jZWwoZSkgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImRpYWxvZ1wiIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJoZWFkaW5nXCIgfSwgXCJDcmVhdGUgWW91ciBJbml0aWFsXCIpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiY29udGVudFwiIH0sIGgoXCJ2ZXJkb2NzLXRleHQtaW5wdXRcIiwgeyBwbGFjZWhvbGRlcjogXCJJbml0aWFscy4uLlwiLCBsYWJlbDogXCJJbml0aWFsc1wiLCB2YWx1ZTogdGhpcy5lbnRlcmVkSW5pdGlhbHMsIG9uSW5wdXQ6IGUgPT4gdGhpcy5oYW5kbGVOYW1lQ2hhbmdlKGUpIH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiYXMtc2hvd25cIiB9LCBcIkFzIHNob3duIG9uIGRyaXZlcidzIGxpY2Vuc2Ugb3IgZ292dC4gSUQgY2FyZC5cIiksIHRoaXMuZm9udExvYWRlZCA/IGgoXCJjYW52YXNcIiwgeyByZWY6IGVsID0+ICh0aGlzLmNhbnZhc0VsZW1lbnQgPSBlbCkgfSkgOiBoKFwiZGl2XCIsIHsgc3R5bGU6IHsgZGlzcGxheTogJ25vbmUnIH0gfSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJkaXNjbGFpbWVyXCIgfSwgXCJCeSBjbGlja2luZyBBZG9wdCwgSSBhZ3JlZSB0aGF0IHRoZSBzaWduYXR1cmUgd2lsbCBiZSB0aGUgZWxlY3Ryb25pYyByZXByZXNlbnRhdGlvbiBvZiBteSBzaWduYXR1cmUgZm9yIGFsbCBwdXJwb3NlcyB3aGVuIEkgKG9yIG15IGFnZW50KSB1c2UgdGhlbSBvbiBkb2N1bWVudHMsIGluY2x1ZGluZyBsZWdhbGx5IGJpbmRpbmcgY29udHJhY3RzIFxcdTIwMTQganVzdCB0aGUgc2FtZSBhcyBhIHBlbi1hbmQtcGFwZXIgc2lnbmF0dXJlIG9yIGluaXRpYWwuXCIpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiYnV0dG9uc1wiIH0sIGgoXCJ2ZXJkb2NzLWJ1dHRvblwiLCB7IGxhYmVsOiBcIkNBTkNFTFwiLCB2YXJpYW50OiBcIm91dGxpbmVcIiwgb25DbGljazogZSA9PiB0aGlzLmhhbmRsZUNhbmNlbChlKSB9KSwgaChcInZlcmRvY3MtYnV0dG9uXCIsIHsgbGFiZWw6IFwiQWRvcHQgJiBTaWduXCIsIG9uQ2xpY2s6IGUgPT4gdGhpcy5oYW5kbGVBZG9wdChlKSB9KSkpKSkpO1xuICB9XG59O1xuVmVyZG9jc0luaXRpYWxEaWFsb2cuc3R5bGUgPSB2ZXJkb2NzSW5pdGlhbERpYWxvZ0NzcztcblxuZXhwb3J0IHsgVmVyZG9jc0luaXRpYWxEaWFsb2cgYXMgdmVyZG9jc19pbml0aWFsX2RpYWxvZyB9O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==
/*! For license information please see 20.f7b3d370.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"./dist/esm/Templates-b21d67ac.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getTemplates})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getTemplate}));var getTemplates=function getTemplates(endpoint,params){return endpoint.api.post("/templates",{params:params}).then((function(r){return r.data}))},getTemplate=function getTemplate(endpoint,templateId){return endpoint.api.get("/templates/".concat(templateId)).then((function(r){return r.data}))}},"./dist/esm/builderStore-1b832e3a.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return state}));__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("./node_modules/core-js/modules/web.timers.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.entries.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js");var _index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./dist/esm/index-275ee459.js");function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var isConnected=function isConnected(maybeElement){return!("isConnected"in maybeElement)||maybeElement.isConnected},cleanupElements=function debounce(fn,ms){var timeoutId;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];timeoutId&&clearTimeout(timeoutId),timeoutId=setTimeout((function(){timeoutId=0,fn.apply(void 0,args)}),ms)}}((function(map){var _step,_iterator=_createForOfIteratorHelper(map.keys());try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;map.set(key,map.get(key).filter(isConnected))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}),2e3),unwrap=function unwrap(val){return"function"==typeof val?val():val},removeFromArray=function removeFromArray(array,item){var index=array.indexOf(item);index>=0&&(array[index]=array[array.length-1],array.length--)},_createStore=function createStore(defaultState,shouldUpdate){var map=function createObservableMap(defaultState){var shouldUpdate=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(a,b){return a!==b},unwrappedState=unwrap(defaultState),states=new Map(Object.entries(null!=unwrappedState?unwrappedState:{})),handlers={dispose:[],get:[],set:[],reset:[]},reset=function reset(){var _a;states=new Map(Object.entries(null!==(_a=unwrap(defaultState))&&void 0!==_a?_a:{})),handlers.reset.forEach((function(cb){return cb()}))},dispose=function dispose(){handlers.dispose.forEach((function(cb){return cb()})),reset()},_get=function get(propName){return handlers.get.forEach((function(cb){return cb(propName)})),states.get(propName)},_set=function set(propName,value){var oldValue=states.get(propName);shouldUpdate(value,oldValue,propName)&&(states.set(propName,value),handlers.set.forEach((function(cb){return cb(propName,value,oldValue)})))},state="undefined"==typeof Proxy?{}:new Proxy(unwrappedState,{get:function get(_,propName){return _get(propName)},ownKeys:function ownKeys(_){return Array.from(states.keys())},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},has:function has(_,propName){return states.has(propName)},set:function set(_,propName,value){return _set(propName,value),!0}}),on=function on(eventName,callback){return handlers[eventName].push(callback),function(){removeFromArray(handlers[eventName],callback)}},onChange=function onChange(propName,cb){var unSet=on("set",(function(key,newValue){key===propName&&cb(newValue)})),unReset=on("reset",(function(){return cb(unwrap(defaultState)[propName])}));return function(){unSet(),unReset()}},use=function use(){for(var _len2=arguments.length,subscriptions=new Array(_len2),_key2=0;_key2<_len2;_key2++)subscriptions[_key2]=arguments[_key2];var unsubs=subscriptions.reduce((function(unsubs,subscription){return subscription.set&&unsubs.push(on("set",subscription.set)),subscription.get&&unsubs.push(on("get",subscription.get)),subscription.reset&&unsubs.push(on("reset",subscription.reset)),subscription.dispose&&unsubs.push(on("dispose",subscription.dispose)),unsubs}),[]);return function(){return unsubs.forEach((function(unsub){return unsub()}))}};return{state:state,get:_get,set:_set,on:on,onChange:onChange,use:use,dispose:dispose,reset:reset,forceUpdate:function forceUpdate(key){var oldValue=states.get(key);handlers.set.forEach((function(cb){return cb(key,oldValue,oldValue)}))}}}(defaultState,shouldUpdate);return map.use(function stencilSubscription(){if("function"!=typeof _index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.g)return{};var elmsToUpdate=new Map;return{dispose:function dispose(){return elmsToUpdate.clear()},get:function get(propName){var elm=Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.g)();elm&&function appendToMap(map,propName,value){var items=map.get(propName);items?items.includes(value)||items.push(value):map.set(propName,[value])}(elmsToUpdate,propName,elm)},set:function set(propName){var elements=elmsToUpdate.get(propName);elements&&elmsToUpdate.set(propName,elements.filter(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.f)),cleanupElements(elmsToUpdate)},reset:function reset(){elmsToUpdate.forEach((function(elms){return elms.forEach(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.f)})),cleanupElements(elmsToUpdate)}}}()),map}({dirty:!1,templateId:"",template:null,roleNames:[],fields:[]}),state=_createStore.state;(0,_createStore.onChange)("fields",(function(){state.dirty=!0}))},"./dist/esm/verdocs-template-fields.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"verdocs_template_fields",(function(){return VerdocsTemplateFields}));__webpack_require__("./node_modules/core-js/modules/es.string.match-all.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js");var _index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("./dist/esm/index-275ee459.js"),_interact_min_bcdb22f3_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("./dist/esm/interact.min-bcdb22f3.js"),_Templates_b21d67ac_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./dist/esm/Templates-b21d67ac.js"),_Colors_1b298092_js__WEBPACK_IMPORTED_MODULE_31__=(__webpack_require__("./dist/esm/Types-ab9f6af8.js"),__webpack_require__("./dist/esm/Colors-1b298092.js")),_VerdocsEndpoint_9acb111c_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("./dist/esm/VerdocsEndpoint-9acb111c.js"),_utils_3f23facc_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("./dist/esm/utils-3f23facc.js"),_builderStore_1b832e3a_js__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("./dist/esm/builderStore-1b832e3a.js");__webpack_require__("./dist/esm/_commonjsHelpers-a94ce721.js");function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var VerdocsTemplateFields=function(){function VerdocsTemplateFields(hostRef){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,VerdocsTemplateFields),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.j)(this,hostRef),this.save=Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.e)(this,"save",7),this.cancel=Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.e)(this,"cancel",7),this.sdkError=Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.e)(this,"sdkError",7),this.endpoint=_VerdocsEndpoint_9acb111c_js__WEBPACK_IMPORTED_MODULE_32__.a.getDefault(),this.templateId=null,this.pdfUrl=null,this.template=null}var _handleFieldChange,_componentWillLoad;return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(VerdocsTemplateFields,[{key:"componentWillLoad",value:(_componentWillLoad=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var _a,template;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,console.log("[PREVIEW] Loading template "+this.templateId),_builderStore_1b832e3a_js__WEBPACK_IMPORTED_MODULE_34__.a.templateId=this.templateId,_context.next=5,Object(_Templates_b21d67ac_js__WEBPACK_IMPORTED_MODULE_29__.b)(this.endpoint,this.templateId);case 5:template=_context.sent,console.log("[PREVIEW] Got template",this.template),this.template=template,_builderStore_1b832e3a_js__WEBPACK_IMPORTED_MODULE_34__.a.template=this.template,this.pdfUrl=this.endpoint.getBaseURL()+"/templates/"+this.templateId+"/documents/"+(null===(_a=template.template_document)||void 0===_a?void 0:_a.id)+"?file=true",_builderStore_1b832e3a_js__WEBPACK_IMPORTED_MODULE_34__.a.roleNames=template.roles.map((function(role){return role.name})),console.log("[PREVIEW] Loaded roles",_builderStore_1b832e3a_js__WEBPACK_IMPORTED_MODULE_34__.a.roleNames),_builderStore_1b832e3a_js__WEBPACK_IMPORTED_MODULE_34__.a.fields=[],template.roles.forEach((function(role){var _state$fields;(_state$fields=_builderStore_1b832e3a_js__WEBPACK_IMPORTED_MODULE_34__.a.fields).push.apply(_state$fields,_toConsumableArray(role.fields))})),console.log("[PREVIEW] Loaded fields",_builderStore_1b832e3a_js__WEBPACK_IMPORTED_MODULE_34__.a.fields),_context.next=20;break;case 17:_context.prev=17,_context.t0=_context.catch(0),console.log("[PREVIEW] Error with preview session",_context.t0);case 20:case"end":return _context.stop()}}),_callee,this,[[0,17]])}))),function componentWillLoad(){return _componentWillLoad.apply(this,arguments)})},{key:"componentDidRender",value:function componentDidRender(){_interact_min_bcdb22f3_js__WEBPACK_IMPORTED_MODULE_28__.a.dynamicDrop(!0),this.toolbarEl.style.width=this.page0El.clientWidth+"px"}},{key:"handleFieldChange",value:(_handleFieldChange=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(field,e,optionId){return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:console.log("[PREVIEW] handleFieldChange",field,e,optionId);case 1:case"end":return _context2.stop()}}),_callee2)}))),function handleFieldChange(_x,_x2,_x3){return _handleFieldChange.apply(this,arguments)})},{key:"handlePageRendered",value:function handlePageRendered(e){var _this=this,pageInfo=e.detail;console.log("[PREVIEW] Page rendered",pageInfo);var fields=_builderStore_1b832e3a_js__WEBPACK_IMPORTED_MODULE_34__.a.fields.filter((function(field){return field.page_sequence===pageInfo.renderedPage.pageNumber}));console.log("[PREVIEW] Fields on page",fields),fields.forEach((function(field){var el=Object(_utils_3f23facc_js__WEBPACK_IMPORTED_MODULE_33__.g)(field,pageInfo.renderedPage,Object(_utils_3f23facc_js__WEBPACK_IMPORTED_MODULE_33__.a)(_builderStore_1b832e3a_js__WEBPACK_IMPORTED_MODULE_34__.a.roleNames,field.role_name),_this.handleFieldChange,!0,!0,!0);el?(el.addEventListener("recipientChanged",(function(e){el.setAttribute("roleindex",Object(_utils_3f23facc_js__WEBPACK_IMPORTED_MODULE_33__.a)(_builderStore_1b832e3a_js__WEBPACK_IMPORTED_MODULE_34__.a.roleNames,e.detail))})),el.setAttribute("xScale",pageInfo.renderedPage.xScale),el.setAttribute("yScale",pageInfo.renderedPage.yScale),Object(_interact_min_bcdb22f3_js__WEBPACK_IMPORTED_MODULE_28__.a)(el).draggable({listeners:{start:function start(event){console.log("drag started",event.type,event.target)},move:function move(event){console.log("moved");var oldX=+(event.target.getAttribute("posX")||0),oldY=+(event.target.getAttribute("posY")||0),xScale=+(event.target.getAttribute("xScale")||1),yScale=+(event.target.getAttribute("yScale")||1),newX=event.dx/xScale+oldX,newY=event.dy/yScale+oldY;event.target.setAttribute("posX",newX),event.target.setAttribute("posy",newY),function updateCssTransform(el,key,value){var components=_toConsumableArray(el.style.transform.matchAll(/(\w+)\(([^)]*)\)/gi));el.style.transform=[components.filter((function(component){return component[1]!==key})).map((function(component){return component[0]})),key+"("+value+")"].join(" ")}(event.target,"translate",newX+"px, "+newY+"px")},end:function end(event){console.log("ended",event)}}})):console.log("Skipping partially rendered field",field)}))}},{key:"render",value:function render(){var _this2=this;return Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.b,null,this.pdfUrl?Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.a,null,Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("div",{class:"fields-bar",ref:function ref(el){return _this2.toolbarEl=el}},Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("div",{class:"label"},"Add Field:"),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("verdocs-toolbar-icon",{icon:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M3.425 16.15V13h11.15v3.15Zm0-5.15V7.85h17.15V11Z"/></svg>',text:"Single-line Text Box",onPress:function onPress(){return console.log("single press")}}),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("verdocs-toolbar-icon",{icon:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M3.225 20.725v-3.15h11.55v3.15Zm0-4.775V12.8h17.55v3.15Zm0-4.75V8.05h17.55v3.15Zm0-4.775v-3.15h17.55v3.15Z"/></svg>',text:"Multi-line Text Box",onPress:function onPress(){return console.log("multi press")}}),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("verdocs-toolbar-icon",{icon:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="m10.55 16.55 7.275-7.275L16.05 7.5l-5.5 5.45-2.675-2.65L6.1 12.075Zm-5.375 4.925q-1.125 0-1.887-.763-.763-.762-.763-1.887V5.175q0-1.125.763-1.888.762-.762 1.887-.762h13.65q1.125 0 1.888.762.762.763.762 1.888v13.65q0 1.125-.762 1.887-.763.763-1.888.763Zm0-2.65h13.65V5.175H5.175v13.65Zm0-13.65v13.65-13.65Z"/></svg>',text:"Checkbox",onPress:function onPress(){return console.log("check press")}}),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("verdocs-toolbar-icon",{icon:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M12 17q2.075 0 3.538-1.463Q17 14.075 17 12t-1.462-3.538Q14.075 7 12 7 9.925 7 8.463 8.462 7 9.925 7 12q0 2.075 1.463 3.537Q9.925 17 12 17Zm0 5.85q-2.275 0-4.25-.85t-3.438-2.312Q2.85 18.225 2 16.25q-.85-1.975-.85-4.25T2 7.75q.85-1.975 2.312-3.438Q5.775 2.85 7.75 2q1.975-.85 4.25-.85t4.25.85q1.975.85 3.438 2.312Q21.15 5.775 22 7.75q.85 1.975.85 4.25T22 16.25q-.85 1.975-2.312 3.438Q18.225 21.15 16.25 22q-1.975.85-4.25.85Zm0-3.15q3.25 0 5.475-2.225Q19.7 15.25 19.7 12q0-3.25-2.225-5.475Q15.25 4.3 12 4.3q-3.25 0-5.475 2.225Q4.3 8.75 4.3 12q0 3.25 2.225 5.475Q8.75 19.7 12 19.7Zm0-7.7Z"/></svg>',text:"Radio Button",onPress:function onPress(){return console.log("radio press")}}),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("verdocs-toolbar-icon",{icon:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M7.6 13.925q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375Zm4.4 0q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375Zm4.4 0q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375ZM5.3 22.85q-1.325 0-2.238-.912-.912-.913-.912-2.238V6.3q0-1.325.912-2.238.913-.912 2.238-.912H6v-2h2.575v2h6.85v-2H18v2h.7q1.325 0 2.238.912.912.913.912 2.238v13.4q0 1.325-.912 2.238-.913.912-2.238.912Zm0-3.15h13.4V10H5.3v9.7ZM5.3 8h13.4V6.3H5.3Zm0 0V6.3 8Z"/></svg>',text:"Date Picker",onPress:function onPress(){return console.log("date press")}}),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("verdocs-toolbar-icon",{icon:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="m9.225 21.225 4.65-4.65h8.45v4.65Zm-5.35-2.2H5.05l8.5-8.5-1.175-1.175-8.5 8.5Zm14.25-9.95L13.8 4.8l1.325-1.325q.625-.65 1.525-.663.9-.012 1.6.663l1.225 1.175q.675.675.663 1.562-.013.888-.663 1.513ZM16.7 10.55 6 21.225H1.675V16.9L12.35 6.225Zm-3.725-.625-.6-.575 1.175 1.175Z"/></svg>',text:"Signature",onPress:function onPress(){return console.log("signature press")}}),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("verdocs-toolbar-icon",{icon:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M6.225 20.775V7h-5V3.225H15V7h-5v13.775Zm9.775 0v-8h-3V9h9.775v3.775h-3v8Z"/></svg>',text:"Initials",onPress:function onPress(){return console.log("initial press")}}),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("div",{style:{flex:"1"}}),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("button",{onClick:function onClick(){return console.log("save")},disabled:!0,class:"operation"},"Save"),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("button",{onClick:function onClick(){return console.log("close")},class:"operation"},"Close")),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("div",{class:"page-0",ref:function ref(el){return _this2.page0El=el}},Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("div",{class:"user-placed-fields"},Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("div",{class:"title"},"User-Placed Fields"),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("verdocs-field-signature",{field:{template_id:"",name:"test",role_name:"Recipient 1",type:"textbox",required:!0,setting:{x:0,y:0},page_sequence:0},style:{width:"82px",height:"41px",left:"20px",top:"40px",transform:"scale(1,1)",backgroundColor:Object(_Colors_1b298092_js__WEBPACK_IMPORTED_MODULE_31__.a)(0)},moveable:!0,editable:!0}))),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("verdocs-view",{source:this.pdfUrl,endpoint:this.endpoint,onPageRendered:function onPageRendered(e){return _this2.handlePageRendered(e)},pageLayers:[{name:"page",type:"canvas"},{name:"controls",type:"div"}]})):Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_27__.h)("verdocs-loader",null))}}]),VerdocsTemplateFields}();VerdocsTemplateFields.style='verdocs-template-fields{position:relative;font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-template-fields .page-0{padding:65px 15px 0 15px;-webkit-box-sizing:border-box;box-sizing:border-box}verdocs-template-fields .page-0 .user-placed-fields{height:100px;position:relative;background:#ffffff;-webkit-box-shadow:0 0 10px 5px #0000000f;box-shadow:0 0 10px 5px #0000000f}verdocs-template-fields .page-0 .user-placed-fields .title{top:0;left:0;color:#ffffff;font-size:12px;padding:3px 6px;font-weight:bold;position:absolute;background:#46497d}verdocs-template-fields .fields-bar{height:50px;display:-ms-flexbox;display:flex;z-index:10000;position:fixed;padding:5px 20px;line-height:28px;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;-webkit-box-sizing:border-box;box-sizing:border-box;background:#46497d}verdocs-template-fields .fields-bar .label{color:#ffffff;font-size:14px;font-weight:bold;margin-right:8px}verdocs-template-fields .fields-bar .icon{margin:0 4px;display:-ms-flexbox;display:flex;-webkit-transform:scale(0.8, 0.8);transform:scale(0.8, 0.8)}verdocs-template-fields .fields-bar .icon svg{fill:#ffffff}verdocs-template-fields .fields-bar .operation{border:none;outline:none;color:#ffffff;cursor:pointer;font-size:16px;margin-left:10px;background:transparent;text-transform:uppercase}verdocs-template-fields .fields-bar .operation:disabled{color:#cccccc;cursor:inherit;pointer-events:none}'},"./node_modules/core-js/modules/es.string.match-all.js":function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__("./node_modules/core-js/internals/export.js"),call=__webpack_require__("./node_modules/core-js/internals/function-call.js"),uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),createIteratorConstructor=__webpack_require__("./node_modules/core-js/internals/create-iterator-constructor.js"),requireObjectCoercible=__webpack_require__("./node_modules/core-js/internals/require-object-coercible.js"),toLength=__webpack_require__("./node_modules/core-js/internals/to-length.js"),toString=__webpack_require__("./node_modules/core-js/internals/to-string.js"),anObject=__webpack_require__("./node_modules/core-js/internals/an-object.js"),classof=__webpack_require__("./node_modules/core-js/internals/classof-raw.js"),isRegExp=__webpack_require__("./node_modules/core-js/internals/is-regexp.js"),getRegExpFlags=__webpack_require__("./node_modules/core-js/internals/regexp-get-flags.js"),getMethod=__webpack_require__("./node_modules/core-js/internals/get-method.js"),defineBuiltIn=__webpack_require__("./node_modules/core-js/internals/define-built-in.js"),fails=__webpack_require__("./node_modules/core-js/internals/fails.js"),wellKnownSymbol=__webpack_require__("./node_modules/core-js/internals/well-known-symbol.js"),speciesConstructor=__webpack_require__("./node_modules/core-js/internals/species-constructor.js"),advanceStringIndex=__webpack_require__("./node_modules/core-js/internals/advance-string-index.js"),regExpExec=__webpack_require__("./node_modules/core-js/internals/regexp-exec-abstract.js"),InternalStateModule=__webpack_require__("./node_modules/core-js/internals/internal-state.js"),IS_PURE=__webpack_require__("./node_modules/core-js/internals/is-pure.js"),MATCH_ALL=wellKnownSymbol("matchAll"),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("RegExp String Iterator"),RegExpPrototype=RegExp.prototype,$TypeError=TypeError,stringIndexOf=uncurryThis("".indexOf),un$MatchAll=uncurryThis("".matchAll),WORKS_WITH_NON_GLOBAL_REGEX=!!un$MatchAll&&!fails((function(){un$MatchAll("a",/./)})),$RegExpStringIterator=createIteratorConstructor((function RegExpStringIterator(regexp,string,$global,fullUnicode){setInternalState(this,{type:"RegExp String Iterator",regexp:regexp,string:string,global:$global,unicode:fullUnicode,done:!1})}),"RegExp String",(function next(){var state=getInternalState(this);if(state.done)return{value:void 0,done:!0};var R=state.regexp,S=state.string,match=regExpExec(R,S);return null===match?{value:void 0,done:state.done=!0}:state.global?(""===toString(match[0])&&(R.lastIndex=advanceStringIndex(S,toLength(R.lastIndex),state.unicode)),{value:match,done:!1}):(state.done=!0,{value:match,done:!1})})),$matchAll=function(string){var matcher,$global,fullUnicode,R=anObject(this),S=toString(string),C=speciesConstructor(R,RegExp),flags=toString(getRegExpFlags(R));return matcher=new C(C===RegExp?R.source:R,flags),$global=!!~stringIndexOf(flags,"g"),fullUnicode=!!~stringIndexOf(flags,"u"),matcher.lastIndex=toLength(R.lastIndex),new $RegExpStringIterator(matcher,S,$global,fullUnicode)};$({target:"String",proto:!0,forced:WORKS_WITH_NON_GLOBAL_REGEX},{matchAll:function matchAll(regexp){var flags,S,matcher,rx,O=requireObjectCoercible(this);if(null!=regexp){if(isRegExp(regexp)&&(flags=toString(requireObjectCoercible(getRegExpFlags(regexp))),!~stringIndexOf(flags,"g")))throw $TypeError("`.matchAll` does not allow non-global regexes");if(WORKS_WITH_NON_GLOBAL_REGEX)return un$MatchAll(O,regexp);if(void 0===(matcher=getMethod(regexp,MATCH_ALL))&&IS_PURE&&"RegExp"==classof(regexp)&&(matcher=$matchAll),matcher)return call(matcher,regexp,O)}else if(WORKS_WITH_NON_GLOBAL_REGEX)return un$MatchAll(O,regexp);return S=toString(O),rx=new RegExp(regexp,"g"),IS_PURE?call($matchAll,rx,S):rx[MATCH_ALL](S)}}),IS_PURE||MATCH_ALL in RegExpPrototype||defineBuiltIn(RegExpPrototype,MATCH_ALL,$matchAll)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMvVGVtcGxhdGVzLmpzIiwid2VicGFjazovLy9ub2RlX21vZHVsZXMvQHN0ZW5jaWwvc3RvcmUvZGlzdC9pbmRleC5tanMiLCJ3ZWJwYWNrOi8vL3NyYy91dGlscy9idWlsZGVyU3RvcmUudHMiLCJ3ZWJwYWNrOi8vL3NyYy9jb21wb25lbnRzL2VsZW1lbnRzL3ZlcmRvY3MtdGVtcGxhdGUtZmllbGRzL3ZlcmRvY3MtdGVtcGxhdGUtZmllbGRzLnNjc3MiLCJ3ZWJwYWNrOi8vL3NyYy9jb21wb25lbnRzL2VsZW1lbnRzL3ZlcmRvY3MtdGVtcGxhdGUtZmllbGRzL3ZlcmRvY3MtdGVtcGxhdGUtZmllbGRzLnRzeCIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC1hbGwuanMiXSwibmFtZXMiOlsiZ2V0VGVtcGxhdGVzIiwiZW5kcG9pbnQiLCJwYXJhbXMiLCJhcGkiLCJwb3N0IiwidGhlbiIsInIiLCJkYXRhIiwiZ2V0VGVtcGxhdGUiLCJ0ZW1wbGF0ZUlkIiwiZ2V0IiwiY29uY2F0IiwiaXNDb25uZWN0ZWQiLCJtYXliZUVsZW1lbnQiLCJjbGVhbnVwRWxlbWVudHMiLCJkZWJvdW5jZSIsImZuIiwibXMiLCJ0aW1lb3V0SWQiLCJhcmdzIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIm1hcCIsImtleXMiLCJrZXkiLCJzZXQiLCJmaWx0ZXIiLCJ1bndyYXAiLCJ2YWwiLCJyZW1vdmVGcm9tQXJyYXkiLCJhcnJheSIsIml0ZW0iLCJpbmRleCIsImluZGV4T2YiLCJsZW5ndGgiLCJjcmVhdGVTdG9yZSIsImRlZmF1bHRTdGF0ZSIsInNob3VsZFVwZGF0ZSIsImNyZWF0ZU9ic2VydmFibGVNYXAiLCJhIiwiYiIsInVud3JhcHBlZFN0YXRlIiwic3RhdGVzIiwiTWFwIiwiT2JqZWN0IiwiZW50cmllcyIsImhhbmRsZXJzIiwiZGlzcG9zZSIsInJlc2V0IiwiX2EiLCJmb3JFYWNoIiwiY2IiLCJwcm9wTmFtZSIsInZhbHVlIiwib2xkVmFsdWUiLCJzdGF0ZSIsIlByb3h5IiwiXyIsIm93bktleXMiLCJBcnJheSIsImZyb20iLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiaGFzIiwib24iLCJldmVudE5hbWUiLCJjYWxsYmFjayIsInB1c2giLCJvbkNoYW5nZSIsInVuU2V0IiwibmV3VmFsdWUiLCJ1blJlc2V0IiwidXNlIiwic3Vic2NyaXB0aW9ucyIsInVuc3VicyIsInJlZHVjZSIsInN1YnNjcmlwdGlvbiIsInVuc3ViIiwiZm9yY2VVcGRhdGUiLCJzdGVuY2lsU3Vic2NyaXB0aW9uIiwiZ2V0UmVuZGVyaW5nUmVmIiwiZWxtc1RvVXBkYXRlIiwiY2xlYXIiLCJlbG0iLCJhcHBlbmRUb01hcCIsIml0ZW1zIiwiaW5jbHVkZXMiLCJlbGVtZW50cyIsImVsbXMiLCJkaXJ0eSIsInRlbXBsYXRlIiwicm9sZU5hbWVzIiwiZmllbGRzIiwiVmVyZG9jc1RlbXBsYXRlRmllbGRzIiwiVmVyZG9jc0VuZHBvaW50IiwiZ2V0RGVmYXVsdCIsInBkZlVybCIsImNvbnNvbGUiLCJsb2ciLCJ0aGlzIiwiYnVpbGRlclN0b3JlIiwiZ2V0QmFzZVVSTCIsInRlbXBsYXRlX2RvY3VtZW50IiwiaWQiLCJyb2xlcyIsInJvbGUiLCJuYW1lIiwiY29tcG9uZW50RGlkUmVuZGVyIiwiaW50ZXJhY3QiLCJkeW5hbWljRHJvcCIsInRvb2xiYXJFbCIsInN0eWxlIiwid2lkdGgiLCJwYWdlMEVsIiwiY2xpZW50V2lkdGgiLCJmaWVsZCIsImUiLCJvcHRpb25JZCIsImhhbmRsZVBhZ2VSZW5kZXJlZCIsInBhZ2VJbmZvIiwiZGV0YWlsIiwicGFnZV9zZXF1ZW5jZSIsInJlbmRlcmVkUGFnZSIsInBhZ2VOdW1iZXIiLCJlbCIsInJlbmRlckRvY3VtZW50RmllbGQiLCJnZXRSb2xlSW5kZXgiLCJyb2xlX25hbWUiLCJoYW5kbGVGaWVsZENoYW5nZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRBdHRyaWJ1dGUiLCJ4U2NhbGUiLCJ5U2NhbGUiLCJkcmFnZ2FibGUiLCJsaXN0ZW5lcnMiLCJzdGFydCIsImV2ZW50IiwidHlwZSIsInRhcmdldCIsIm1vdmUiLCJvbGRYIiwiZ2V0QXR0cmlidXRlIiwib2xkWSIsIm5ld1giLCJkeCIsIm5ld1kiLCJkeSIsInVwZGF0ZUNzc1RyYW5zZm9ybSIsImNvbXBvbmVudHMiLCJ0cmFuc2Zvcm0iLCJtYXRjaEFsbCIsImNvbXBvbmVudCIsImpvaW4iLCJlbmQiLCJyZW5kZXIiLCJoIiwiSG9zdCIsIkZyYWdtZW50IiwiY2xhc3MiLCJyZWYiLCJpY29uIiwidGV4dCIsIm9uUHJlc3MiLCJmbGV4Iiwib25DbGljayIsImRpc2FibGVkIiwidGVtcGxhdGVfaWQiLCJyZXF1aXJlZCIsInNldHRpbmciLCJ4IiwieSIsImhlaWdodCIsImxlZnQiLCJ0b3AiLCJiYWNrZ3JvdW5kQ29sb3IiLCJnZXRSR0JBIiwibW92ZWFibGUiLCJlZGl0YWJsZSIsInNvdXJjZSIsIm9uUGFnZVJlbmRlcmVkIiwicGFnZUxheWVycyIsIiQiLCJjYWxsIiwidW5jdXJyeVRoaXMiLCJjcmVhdGVJdGVyYXRvckNvbnN0cnVjdG9yIiwicmVxdWlyZU9iamVjdENvZXJjaWJsZSIsInRvTGVuZ3RoIiwidG9TdHJpbmciLCJhbk9iamVjdCIsImNsYXNzb2YiLCJpc1JlZ0V4cCIsImdldFJlZ0V4cEZsYWdzIiwiZ2V0TWV0aG9kIiwiZGVmaW5lQnVpbHRJbiIsImZhaWxzIiwid2VsbEtub3duU3ltYm9sIiwic3BlY2llc0NvbnN0cnVjdG9yIiwiYWR2YW5jZVN0cmluZ0luZGV4IiwicmVnRXhwRXhlYyIsIkludGVybmFsU3RhdGVNb2R1bGUiLCJJU19QVVJFIiwiTUFUQ0hfQUxMIiwic2V0SW50ZXJuYWxTdGF0ZSIsImdldEludGVybmFsU3RhdGUiLCJnZXR0ZXJGb3IiLCJSRUdFWFBfU1RSSU5HIiwiUmVnRXhwUHJvdG90eXBlIiwiUmVnRXhwIiwicHJvdG90eXBlIiwiJFR5cGVFcnJvciIsIlR5cGVFcnJvciIsInN0cmluZ0luZGV4T2YiLCJ1biRNYXRjaEFsbCIsIldPUktTX1dJVEhfTk9OX0dMT0JBTF9SRUdFWCIsIiRSZWdFeHBTdHJpbmdJdGVyYXRvciIsIlJlZ0V4cFN0cmluZ0l0ZXJhdG9yIiwicmVnZXhwIiwic3RyaW5nIiwiJGdsb2JhbCIsImZ1bGxVbmljb2RlIiwiZ2xvYmFsIiwidW5pY29kZSIsImRvbmUiLCJuZXh0IiwidW5kZWZpbmVkIiwiUiIsIlMiLCJtYXRjaCIsImxhc3RJbmRleCIsIiRtYXRjaEFsbCIsIm1hdGNoZXIiLCJDIiwiZmxhZ3MiLCJwcm90byIsImZvcmNlZCIsInJ4IiwiTyJdLCJtYXBwaW5ncyI6IjttS0FBQSxpS0FzRFUsSUFBQ0EsYUFBZSxTQUFmQSxhQUF5QkMsU0FBVUMsUUFDMUMsT0FBT0QsU0FBU0UsSUFDWEMsS0FBSyxhQUFjLENBQUVGLE9BQVFBLFNBQzdCRyxNQUFLLFNBQVVDLEdBQUssT0FBT0EsRUFBRUMsSUFBTyxHQUM3QyxFQVVXQyxZQUFjLFNBQWRBLFlBQXdCUCxTQUFVUSxZQUN6QyxPQUFPUixTQUFTRSxJQUNYTyxJQUFJLGNBQWNDLE9BQU9GLGFBQ3pCSixNQUFLLFNBQVVDLEdBQUssT0FBT0EsRUFBRUMsSUFBTyxHQUM3QyxDLHltR0N0RUEsSUErQk1LLFlBQWMsU0FBZEEsWUFBZUMsY0FBRCxRQUFvQixnQkFBaUJBLGVBQWlCQSxhQUFhRCxXQUFuRSxFQUNkRSxnQkF2QlcsU0FBWEMsU0FBWUMsR0FBSUMsSUFDbEIsSUFBSUMsVUFDSixPQUFPLFdBQWEsOEJBQVRDLEtBQVMsd0NBQVRBLEtBQVMsc0JBQ1pELFdBQ0FFLGFBQWFGLFdBRWpCQSxVQUFZRyxZQUFXLFdBQ25CSCxVQUFZLEVBQ1pGLEdBQUUsV0FBRixFQUFNRyxLQUNULEdBQUVGLEdBQ04sQ0FDSixDQVl1QkYsRUFBUyxTQUFDTyxLQUFRLCtDQUN0QkEsSUFBSUMs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TXhCLE9BQVNrQixFQUFFL0MsT0FBUytDLEVBQUdPLE9BQzdDZCxXQUFhUCxjQUFjcUIsTUFBTyxLQUNsQ2IsZUFBaUJSLGNBQWNxQixNQUFPLEtBQ3RDRixRQUFRRixVQUFZMUMsU0FBU3VDLEVBQUVHLFdBQ3hCLElBQUlkLHNCQUFzQmdCLFFBQVNKLEVBQUdSLFFBQVNDLFlBQ3hELEVBSUF0QyxFQUFFLENBQUUzQyxPQUFRLFNBQVUrRixPQUFPLEVBQU1DLE9BQVFyQiw2QkFBK0IsQ0FDeEUvRCxTQUFVLFNBQVNBLFNBQVNrRSxRQUMxQixJQUNJZ0IsTUFBT04sRUFBR0ksUUFBU0ssR0FEbkJDLEVBQUluRCx1QkFBdUJ0RixNQUUvQixHQUFjLE1BQVZxSCxPQUFnQixDQUNsQixHQUFJMUIsU0FBUzBCLFVBQ1hnQixNQUFRN0MsU0FBU0YsdUJBQXVCTSxlQUFleUIsWUFDakRMLGNBQWNxQixNQUFPLE1BQU0sTUFBTXZCLFdBQVcsaURBRXBELEdBQUlJLDRCQUE2QixPQUFPRCxZQUFZd0IsRUFBR3BCLFFBR3ZELFFBRGdCUSxLQURoQk0sUUFBVXRDLFVBQVV3QixPQUFRZixhQUNDRCxTQUE4QixVQUFuQlgsUUFBUTJCLFVBQXFCYyxRQUFVRCxXQUMzRUMsUUFBUyxPQUFPaEQsS0FBS2dELFFBQVNkLE9BQVFvQixFQUM1QyxNQUFPLEdBQUl2Qiw0QkFBNkIsT0FBT0QsWUFBWXdCLEVBQUdwQixRQUc5RCxPQUZBVSxFQUFJdkMsU0FBU2lELEdBQ2JELEdBQUssSUFBSTVCLE9BQU9TLE9BQVEsS0FDakJoQixRQUFVbEIsS0FBSytDLFVBQVdNLEdBQUlULEdBQUtTLEdBQUdsQyxXQUFXeUIsRUFDMUQsSUFHRjFCLFNBQVdDLGFBQWFLLGlCQUFtQmIsY0FBY2EsZ0JBQWlCTCxVQUFXNEIsVSIsImZpbGUiOiIyMC5mN2IzZDM3MC5pZnJhbWUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBIFRlbXBsYXRlIGRlZmluZXMgaG93IGEgVmVyZG9jcyBzaWduaW5nIGZsb3cgd2lsbCBiZSBwZXJmb3JtZWQsIGluY2x1ZGluZyBhdHRhY2htZW50cywgc2lnbmluZyBmaWVsZHMsIGFuZFxuICogcmVjaXBpZW50cy5cbiAqXG4gKiBAbW9kdWxlXG4gKi9cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG4vKipcbiAqIEdldCBhbGwgdGVtcGxhdGVzIGFjY2Vzc2libGUgYnkgdGhlIGNhbGxlciwgd2l0aCBvcHRpb25hbCBmaWx0ZXJzLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBhd2FpdCBUZW1wbGF0ZXMuZ2V0VGVtcGxhdGVzKCk7XG4gKiBhd2FpdCBUZW1wbGF0ZXMuZ2V0VGVtcGxhdGVzKHsgaXNfc3RhcnJlZDogdHJ1ZSB9KTtcbiAqIGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZXMoeyBpc19jcmVhdG9yOiB0cnVlIH0pO1xuICogYXdhaXQgVGVtcGxhdGVzLmdldFRlbXBsYXRlcyh7IGlzX29yZ2FuaXphdGlvbjogdHJ1ZSB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGdldFRlbXBsYXRlcyA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAucG9zdCgnL3RlbXBsYXRlcycsIHsgcGFyYW1zOiBwYXJhbXMgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xuLyoqXG4gKiBHZXQgb25lIHRlbXBsYXRlIGJ5IGl0cyBJRC5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1RlbXBsYXRlc30gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcyc7XG4gKlxuICogY29uc3QgdGVtcGxhdGUgPSBhd2FpdCBUZW1wbGF0ZXMuZ2V0VGVtcGxhdGUoJzgzZGEzZDcwLTc4NTctNDM5Mi1iODc2LWM0NTkyYTMwNGJjOScpO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHRlbXBsYXRlSWQpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5nZXQoXCIvdGVtcGxhdGVzL1wiLmNvbmNhdCh0ZW1wbGF0ZUlkKSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xuLyoqXG4gKiBHZXQgb3duZXIgaW5mb3JtYXRpb24gZm9yIGEgdGVtcGxhdGUuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGNvbnN0IHRlbXBsYXRlID0gYXdhaXQgVGVtcGxhdGVzLmdldFRlbXBsYXRlT3duZXJJbmZvKCc4M2RhM2Q3MC03ODU3LTQzOTItYjg3Ni1jNDU5MmEzMDRiYzknKTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGdldFRlbXBsYXRlT3duZXJJbmZvID0gZnVuY3Rpb24gKGVuZHBvaW50LCB0ZW1wbGF0ZUlkKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAuZ2V0KFwiL3RlbXBsYXRlcy9cIi5jb25jYXQodGVtcGxhdGVJZCkpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogQ3JlYXRlIGEgdGVtcGxhdGUuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGNvbnN0IG5ld1RlbXBsYXRlID0gYXdhaXQgVGVtcGxhdGVzLmNyZWF0ZVRlbXBsYXRlKHsuLi59KTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGNyZWF0ZVRlbXBsYXRlID0gZnVuY3Rpb24gKGVuZHBvaW50LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5wb3N0KCcvdGVtcGxhdGVzLycsIHBhcmFtcylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xuLyoqXG4gKiBVcGRhdGUgYSB0ZW1wbGF0ZS5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1RlbXBsYXRlc30gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcyc7XG4gKlxuICogY29uc3QgdXBkYXRlZFRlbXBsYXRlID0gYXdhaXQgVGVtcGxhdGVzLnVwZGF0ZVRlbXBsYXRlKCc4M2RhM2Q3MC03ODU3LTQzOTItYjg3Ni1jNDU5MmEzMDRiYzknLCB7IG5hbWU6ICdOZXcgTmFtZScgfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVUZW1wbGF0ZSA9IGZ1bmN0aW9uIChlbmRwb2ludCwgdGVtcGxhdGVJZCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAucHV0KFwiL3RlbXBsYXRlcy9cIi5jb25jYXQodGVtcGxhdGVJZCksIHBhcmFtcylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xuLyoqXG4gKiBTZWFyY2ggZm9yIHRlbXBsYXRlcyBtYXRjaGluZyB2YXJpb3VzIGNyaXRlcmlhLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBjb25zdCB7cmVzdWx0LCBwYWdlLCB0b3RhbH0gPSBhd2FpdCBUZW1wbGF0ZXMuc2VhcmNoKHsgLi4uIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgc2VhcmNoVGVtcGxhdGVzID0gZnVuY3Rpb24gKGVuZHBvaW50LCBwYXJhbXMpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgICAgICAgICAgLnBvc3QoJy90ZW1wbGF0ZXMvc2VhcmNoJywgcGFyYW1zKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pXTtcbiAgICB9KTtcbn0pOyB9O1xuLyoqXG4gKiBHZXQgYSBzdW1tYXJ5IG9mIHRlbXBsYXRlIGRhdGEsIHR5cGljYWxseSB1c2VkIHRvIHBvcHVsYXRlIGFkbWluIHBhbmVsIGRhc2hib2FyZCBwYWdlcy5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1RlbXBsYXRlc30gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcyc7XG4gKlxuICogY29uc3Qgc3VtbWFyeSA9IGF3YWl0IFRlbXBsYXRlcy5nZXRTdW1tYXJ5KDApO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgZ2V0U3VtbWFyeSA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7XG4gICAgaWYgKHBhcmFtcyA9PT0gdm9pZCAwKSB7IHBhcmFtcyA9IHt9OyB9XG4gICAgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgICAgICAgICAgICAgLnBvc3QoJy90ZW1wbGF0ZXMvc3VtbWFyeScsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSldO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG4iLCJpbXBvcnQgeyBnZXRSZW5kZXJpbmdSZWYsIGZvcmNlVXBkYXRlIH0gZnJvbSAnQHN0ZW5jaWwvY29yZSc7XG5cbmNvbnN0IGFwcGVuZFRvTWFwID0gKG1hcCwgcHJvcE5hbWUsIHZhbHVlKSA9PiB7XG4gICAgY29uc3QgaXRlbXMgPSBtYXAuZ2V0KHByb3BOYW1lKTtcbiAgICBpZiAoIWl0ZW1zKSB7XG4gICAgICAgIG1hcC5zZXQocHJvcE5hbWUsIFt2YWx1ZV0pO1xuICAgIH1cbiAgICBlbHNlIGlmICghaXRlbXMuaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICAgIGl0ZW1zLnB1c2godmFsdWUpO1xuICAgIH1cbn07XG5jb25zdCBkZWJvdW5jZSA9IChmbiwgbXMpID0+IHtcbiAgICBsZXQgdGltZW91dElkO1xuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgICBpZiAodGltZW91dElkKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgfVxuICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRpbWVvdXRJZCA9IDA7XG4gICAgICAgICAgICBmbiguLi5hcmdzKTtcbiAgICAgICAgfSwgbXMpO1xuICAgIH07XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGEgcG9zc2libGUgZWxlbWVudCBpc0Nvbm5lY3RlZC5cbiAqIFRoZSBwcm9wZXJ0eSBtaWdodCBub3QgYmUgdGhlcmUsIHNvIHdlIGNoZWNrIGZvciBpdC5cbiAqXG4gKiBXZSB3YW50IGl0IHRvIHJldHVybiB0cnVlIGlmIGlzQ29ubmVjdGVkIGlzIG5vdCBhIHByb3BlcnR5LFxuICogb3RoZXJ3aXNlIHdlIHdvdWxkIHJlbW92ZSB0aGVzZSBlbGVtZW50cyBhbmQgd291bGQgbm90IHVwZGF0ZS5cbiAqXG4gKiBCZXR0ZXIgbGVhayBpbiBFZGdlIHRoYW4gdG8gYmUgdXNlbGVzcy5cbiAqL1xuY29uc3QgaXNDb25uZWN0ZWQgPSAobWF5YmVFbGVtZW50KSA9PiAhKCdpc0Nvbm5lY3RlZCcgaW4gbWF5YmVFbGVtZW50KSB8fCBtYXliZUVsZW1lbnQuaXNDb25uZWN0ZWQ7XG5jb25zdCBjbGVhbnVwRWxlbWVudHMgPSBkZWJvdW5jZSgobWFwKSA9PiB7XG4gICAgZm9yIChsZXQga2V5IG9mIG1hcC5rZXlzKCkpIHtcbiAgICAgICAgbWFwLnNldChrZXksIG1hcC5nZXQoa2V5KS5maWx0ZXIoaXNDb25uZWN0ZWQpKTtcbiAgICB9XG59LCAyMDAwKTtcbmNvbnN0IHN0ZW5jaWxTdWJzY3JpcHRpb24gPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBnZXRSZW5kZXJpbmdSZWYgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gSWYgd2UgYXJlIG5vdCBpbiBhIHN0ZW5jaWwgcHJvamVjdCwgd2UgZG8gbm90aGluZy5cbiAgICAgICAgLy8gVGhpcyBmdW5jdGlvbiBpcyBub3QgcmVhbGx5IGV4cG9ydGVkIGJ5IEBzdGVuY2lsL2NvcmUuXG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgY29uc3QgZWxtc1RvVXBkYXRlID0gbmV3IE1hcCgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGRpc3Bvc2U6ICgpID0+IGVsbXNUb1VwZGF0ZS5jbGVhcigpLFxuICAgICAgICBnZXQ6IChwcm9wTmFtZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxtID0gZ2V0UmVuZGVyaW5nUmVmKCk7XG4gICAgICAgICAgICBpZiAoZWxtKSB7XG4gICAgICAgICAgICAgICAgYXBwZW5kVG9NYXAoZWxtc1RvVXBkYXRlLCBwcm9wTmFtZSwgZWxtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiAocHJvcE5hbWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZWxtc1RvVXBkYXRlLmdldChwcm9wTmFtZSk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBlbG1zVG9VcGRhdGUuc2V0KHByb3BOYW1lLCBlbGVtZW50cy5maWx0ZXIoZm9yY2VVcGRhdGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFudXBFbGVtZW50cyhlbG1zVG9VcGRhdGUpO1xuICAgICAgICB9LFxuICAgICAgICByZXNldDogKCkgPT4ge1xuICAgICAgICAgICAgZWxtc1RvVXBkYXRlLmZvckVhY2goKGVsbXMpID0+IGVsbXMuZm9yRWFjaChmb3JjZVVwZGF0ZSkpO1xuICAgICAgICAgICAgY2xlYW51cEVsZW1lbnRzKGVsbXNUb1VwZGF0ZSk7XG4gICAgICAgIH0sXG4gICAgfTtcbn07XG5cbmNvbnN0IHVud3JhcCA9ICh2YWwpID0+ICh0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nID8gdmFsKCkgOiB2YWwpO1xuY29uc3QgY3JlYXRlT2JzZXJ2YWJsZU1hcCA9IChkZWZhdWx0U3RhdGUsIHNob3VsZFVwZGF0ZSA9IChhLCBiKSA9PiBhICE9PSBiKSA9PiB7XG4gICAgY29uc3QgdW53cmFwcGVkU3RhdGUgPSB1bndyYXAoZGVmYXVsdFN0YXRlKTtcbiAgICBsZXQgc3RhdGVzID0gbmV3IE1hcChPYmplY3QuZW50cmllcyh1bndyYXBwZWRTdGF0ZSAhPT0gbnVsbCAmJiB1bndyYXBwZWRTdGF0ZSAhPT0gdm9pZCAwID8gdW53cmFwcGVkU3RhdGUgOiB7fSkpO1xuICAgIGNvbnN0IGhhbmRsZXJzID0ge1xuICAgICAgICBkaXNwb3NlOiBbXSxcbiAgICAgICAgZ2V0OiBbXSxcbiAgICAgICAgc2V0OiBbXSxcbiAgICAgICAgcmVzZXQ6IFtdLFxuICAgIH07XG4gICAgY29uc3QgcmVzZXQgPSAoKSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgLy8gV2hlbiByZXNldHRpbmcgdGhlIHN0YXRlLCB0aGUgZGVmYXVsdCBzdGF0ZSBtYXkgYmUgYSBmdW5jdGlvbiAtIHVud3JhcCBpdCB0byBpbnZva2UgaXQuXG4gICAgICAgIC8vIG90aGVyd2lzZSwgdGhlIHN0YXRlIHdvbid0IGJlIHByb3Blcmx5IHJlc2V0XG4gICAgICAgIHN0YXRlcyA9IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoKF9hID0gdW53cmFwKGRlZmF1bHRTdGF0ZSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KSk7XG4gICAgICAgIGhhbmRsZXJzLnJlc2V0LmZvckVhY2goKGNiKSA9PiBjYigpKTtcbiAgICB9O1xuICAgIGNvbnN0IGRpc3Bvc2UgPSAoKSA9PiB7XG4gICAgICAgIC8vIENhbGwgZmlyc3QgZGlzcG9zZSBhcyByZXNldHRpbmcgdGhlIHN0YXRlIHdvdWxkXG4gICAgICAgIC8vIGNhdXNlIGxlc3MgdXBkYXRlcyA7KVxuICAgICAgICBoYW5kbGVycy5kaXNwb3NlLmZvckVhY2goKGNiKSA9PiBjYigpKTtcbiAgICAgICAgcmVzZXQoKTtcbiAgICB9O1xuICAgIGNvbnN0IGdldCA9IChwcm9wTmFtZSkgPT4ge1xuICAgICAgICBoYW5kbGVycy5nZXQuZm9yRWFjaCgoY2IpID0+IGNiKHByb3BOYW1lKSk7XG4gICAgICAgIHJldHVybiBzdGF0ZXMuZ2V0KHByb3BOYW1lKTtcbiAgICB9O1xuICAgIGNvbnN0IHNldCA9IChwcm9wTmFtZSwgdmFsdWUpID0+IHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBzdGF0ZXMuZ2V0KHByb3BOYW1lKTtcbiAgICAgICAgaWYgKHNob3VsZFVwZGF0ZSh2YWx1ZSwgb2xkVmFsdWUsIHByb3BOYW1lKSkge1xuICAgICAgICAgICAgc3RhdGVzLnNldChwcm9wTmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgaGFuZGxlcnMuc2V0LmZvckVhY2goKGNiKSA9PiBjYihwcm9wTmFtZSwgdmFsdWUsIG9sZFZhbHVlKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHN0YXRlID0gKHR5cGVvZiBQcm94eSA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgPyB7fVxuICAgICAgICA6IG5ldyBQcm94eSh1bndyYXBwZWRTdGF0ZSwge1xuICAgICAgICAgICAgZ2V0KF8sIHByb3BOYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldChwcm9wTmFtZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3duS2V5cyhfKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oc3RhdGVzLmtleXMoKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhhcyhfLCBwcm9wTmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZXMuaGFzKHByb3BOYW1lKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQoXywgcHJvcE5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgc2V0KHByb3BOYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KSk7XG4gICAgY29uc3Qgb24gPSAoZXZlbnROYW1lLCBjYWxsYmFjaykgPT4ge1xuICAgICAgICBoYW5kbGVyc1tldmVudE5hbWVdLnB1c2goY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgcmVtb3ZlRnJvbUFycmF5KGhhbmRsZXJzW2V2ZW50TmFtZV0sIGNhbGxiYWNrKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IG9uQ2hhbmdlID0gKHByb3BOYW1lLCBjYikgPT4ge1xuICAgICAgICBjb25zdCB1blNldCA9IG9uKCdzZXQnLCAoa2V5LCBuZXdWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gcHJvcE5hbWUpIHtcbiAgICAgICAgICAgICAgICBjYihuZXdWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBXZSBuZWVkIHRvIHVud3JhcCB0aGUgZGVmYXVsdFN0YXRlIGJlY2F1c2UgaXQgbWlnaHQgYmUgYSBmdW5jdGlvbi5cbiAgICAgICAgLy8gT3RoZXJ3aXNlIHdlIG1pZ2h0IG5vdCBiZSBzZW5kaW5nIHRoZSByaWdodCByZXNldCB2YWx1ZS5cbiAgICAgICAgY29uc3QgdW5SZXNldCA9IG9uKCdyZXNldCcsICgpID0+IGNiKHVud3JhcChkZWZhdWx0U3RhdGUpW3Byb3BOYW1lXSkpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgdW5TZXQoKTtcbiAgICAgICAgICAgIHVuUmVzZXQoKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHVzZSA9ICguLi5zdWJzY3JpcHRpb25zKSA9PiB7XG4gICAgICAgIGNvbnN0IHVuc3VicyA9IHN1YnNjcmlwdGlvbnMucmVkdWNlKCh1bnN1YnMsIHN1YnNjcmlwdGlvbikgPT4ge1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbi5zZXQpIHtcbiAgICAgICAgICAgICAgICB1bnN1YnMucHVzaChvbignc2V0Jywgc3Vic2NyaXB0aW9uLnNldCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbi5nZXQpIHtcbiAgICAgICAgICAgICAgICB1bnN1YnMucHVzaChvbignZ2V0Jywgc3Vic2NyaXB0aW9uLmdldCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbi5yZXNldCkge1xuICAgICAgICAgICAgICAgIHVuc3Vicy5wdXNoKG9uKCdyZXNldCcsIHN1YnNjcmlwdGlvbi5yZXNldCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbi5kaXNwb3NlKSB7XG4gICAgICAgICAgICAgICAgdW5zdWJzLnB1c2gob24oJ2Rpc3Bvc2UnLCBzdWJzY3JpcHRpb24uZGlzcG9zZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuc3VicztcbiAgICAgICAgfSwgW10pO1xuICAgICAgICByZXR1cm4gKCkgPT4gdW5zdWJzLmZvckVhY2goKHVuc3ViKSA9PiB1bnN1YigpKTtcbiAgICB9O1xuICAgIGNvbnN0IGZvcmNlVXBkYXRlID0gKGtleSkgPT4ge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHN0YXRlcy5nZXQoa2V5KTtcbiAgICAgICAgaGFuZGxlcnMuc2V0LmZvckVhY2goKGNiKSA9PiBjYihrZXksIG9sZFZhbHVlLCBvbGRWYWx1ZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGdldCxcbiAgICAgICAgc2V0LFxuICAgICAgICBvbixcbiAgICAgICAgb25DaGFuZ2UsXG4gICAgICAgIHVzZSxcbiAgICAgICAgZGlzcG9zZSxcbiAgICAgICAgcmVzZXQsXG4gICAgICAgIGZvcmNlVXBkYXRlLFxuICAgIH07XG59O1xuY29uc3QgcmVtb3ZlRnJvbUFycmF5ID0gKGFycmF5LCBpdGVtKSA9PiB7XG4gICAgY29uc3QgaW5kZXggPSBhcnJheS5pbmRleE9mKGl0ZW0pO1xuICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIGFycmF5W2luZGV4XSA9IGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdO1xuICAgICAgICBhcnJheS5sZW5ndGgtLTtcbiAgICB9XG59O1xuXG5jb25zdCBjcmVhdGVTdG9yZSA9IChkZWZhdWx0U3RhdGUsIHNob3VsZFVwZGF0ZSkgPT4ge1xuICAgIGNvbnN0IG1hcCA9IGNyZWF0ZU9ic2VydmFibGVNYXAoZGVmYXVsdFN0YXRlLCBzaG91bGRVcGRhdGUpO1xuICAgIG1hcC51c2Uoc3RlbmNpbFN1YnNjcmlwdGlvbigpKTtcbiAgICByZXR1cm4gbWFwO1xufTtcblxuZXhwb3J0IHsgY3JlYXRlT2JzZXJ2YWJsZU1hcCwgY3JlYXRlU3RvcmUgfTtcbiIsImltcG9ydCB7Y3JlYXRlU3RvcmV9IGZyb20gJ0BzdGVuY2lsL3N0b3JlJztcbmltcG9ydCB7SVRlbXBsYXRlLCBJVGVtcGxhdGVGaWVsZH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcy9UeXBlcyc7XG5cbmNvbnN0IHtzdGF0ZSwgb25DaGFuZ2V9ID0gY3JlYXRlU3RvcmUoe1xuICBkaXJ0eTogZmFsc2UsXG4gIHRlbXBsYXRlSWQ6ICcnLFxuICB0ZW1wbGF0ZTogbnVsbCBhcyBJVGVtcGxhdGUgfCBudWxsLFxuICByb2xlTmFtZXM6IFtdIGFzIHN0cmluZ1tdLFxuICBmaWVsZHM6IFtdIGFzIElUZW1wbGF0ZUZpZWxkW10sXG59KTtcblxuLy8gb25DaGFuZ2UoJ2ZpZWxkcycsIHZhbHVlID0+IHtcbm9uQ2hhbmdlKCdmaWVsZHMnLCAoKSA9PiB7XG4gIHN0YXRlLmRpcnR5ID0gdHJ1ZTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBzdGF0ZTtcbiIsIkBpbXBvcnQgJy4uLy4uLy4uL3RoZW1lLnNjc3MnO1xuXG52ZXJkb2NzLXRlbXBsYXRlLWZpZWxkcyB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgZm9udC1mYW1pbHk6ICR2ZXJkb2NzLXByaW1hcnktZm9udDtcblxuICAucGFnZS0wIHtcbiAgICBwYWRkaW5nOiA2NXB4IDE1cHggMCAxNXB4O1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cbiAgICAudXNlci1wbGFjZWQtZmllbGRzIHtcbiAgICAgIGhlaWdodDogMTAwcHg7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmO1xuICAgICAgYm94LXNoYWRvdzogMCAwIDEwcHggNXB4ICMwMDAwMDAwZjtcblxuICAgICAgLnRpdGxlIHtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICBjb2xvcjogI2ZmZmZmZjtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBwYWRkaW5nOiAzcHggNnB4O1xuICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBiYWNrZ3JvdW5kOiAkdmVyZG9jcy1ncmV5LWJsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLmZpZWxkcy1iYXIge1xuICAgIGhlaWdodDogNTBweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIHotaW5kZXg6IDEwMDAwO1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICBwYWRkaW5nOiA1cHggMjBweDtcbiAgICBsaW5lLWhlaWdodDogMjhweDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBiYWNrZ3JvdW5kOiAkdmVyZG9jcy1ncmV5LWJsdWU7XG5cbiAgICAubGFiZWwge1xuICAgICAgY29sb3I6ICNmZmZmZmY7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgIH1cblxuICAgIC5pY29uIHtcbiAgICAgIG1hcmdpbjogMCA0cHg7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwLjgsIDAuOCk7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGZpbGw6ICNmZmZmZmY7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLm9wZXJhdGlvbiB7XG4gICAgICBib3JkZXI6IG5vbmU7XG4gICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgY29sb3I6ICNmZmZmZmY7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICBtYXJnaW4tbGVmdDogMTBweDtcbiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcblxuICAgICAgJjpkaXNhYmxlZCB7XG4gICAgICAgIGNvbG9yOiAjY2NjY2NjO1xuICAgICAgICBjdXJzb3I6IGluaGVyaXQ7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IGludGVyYWN0IGZyb20gJ2ludGVyYWN0anMnO1xuaW1wb3J0IHtWZXJkb2NzRW5kcG9pbnR9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkayc7XG5pbXBvcnQge2dldFJHQkF9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9VdGlscy9Db2xvcnMnO1xuaW1wb3J0IHtJVGVtcGxhdGUsIElUZW1wbGF0ZUZpZWxkfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzL1R5cGVzJztcbmltcG9ydCB7Q29tcG9uZW50LCBoLCBFdmVudCwgRXZlbnRFbWl0dGVyLCBGcmFnbWVudCwgUHJvcCwgU3RhdGUsIEhvc3R9IGZyb20gJ0BzdGVuY2lsL2NvcmUnO1xuaW1wb3J0IHtJUGFnZVJlbmRlckV2ZW50fSBmcm9tICcuLi8uLi9lbWJlZHMvdmVyZG9jcy12aWV3L3ZlcmRvY3Mtdmlldyc7XG5pbXBvcnQge2dldFJvbGVJbmRleCwgcmVuZGVyRG9jdW1lbnRGaWVsZH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHtnZXRUZW1wbGF0ZX0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcy9UZW1wbGF0ZXMnO1xuaW1wb3J0IGJ1aWxkZXJTdG9yZSBmcm9tICcuLi8uLi8uLi91dGlscy9idWlsZGVyU3RvcmUnO1xuaW1wb3J0IHtTREtFcnJvcn0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvZXJyb3JzJztcblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gc2FmZWx5IHNldC91cGRhdGUgY29tcG9uZW50cyBpbiBhIENTUyB0cmFuc2Zvcm0gYXR0cmlidXRlLiBUcmFuc2Zvcm0gaXMgbm9ybWFsbHkgc2V0IGFzIGEgc3RyaW5nIG9mXG4gKiBgb3BlcmF0aW9uMShwYXJhbSkgb3BlcmF0aW9uMihwYXJhbSkgLi4uYCBjb21wb25lbnRzLCB3aGljaCBtYWtlcyB1cGRhdGluZyB0aGVtIGEgYml0IG9mIGEgcGFpbi4gVGhpcyB3aWxsIHJlbW92ZSB0aGVcbiAqIHNwZWNpZmllZCBjb21wb25lbnQgaWYgaXQncyBhbHJlYWR5IHNldCBhbmQgcmVwbGFjZSBpdCB3aXRoIHRoZSBuZXcgdmFsdWUsIHdpdGhvdXQgdG91Y2hpbmcgdGhlIG90aGVyIGNvbXBvbmVudHMgdGhhdFxuICogbWF5IGFscmVhZHkgYmUgc2V0LiBOb3RlIHRoYXQgdGhpcyBvcGVyYXRpb24gbW92ZXMgdGhlIGNvbXBvbmVudCB0byB0aGUgZW5kIG9mIHRoZSB0cmFuc2Zvcm0gY2hhaW4gc28gaXQncyBub3QgbWVhbnRcbiAqIHRvIGJlIHVzZWQgZm9yIG9yZGVyLXNlbnNpdGl2ZSBjb21wb25lbnRzIGUuZy4gdHJhbnNsYXRlLXRoZW4tcm90YXRlLlxuICovXG5jb25zdCB1cGRhdGVDc3NUcmFuc2Zvcm0gPSAoZWw6IEhUTUxFbGVtZW50LCBrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4ge1xuICAvLyBlLmcuICdzY2FsZSgxLjg3OTA4LCAxLjg3OTA4KSB0cmFuc2xhdGUoMHB4LCAwcHgpOydcbiAgY29uc3QgY3VycmVudFRyYW5zZm9ybSA9IGVsLnN0eWxlLnRyYW5zZm9ybTtcbiAgLy8gZS5nLiBbJ3NjYWxlKDEuODc5MDgsIDEuODc5MDgpJywgJ3NjYWxlJywgJzEuODc5MDgsIDEuODc5MDgnLCAuLi5dLCBbICd0cmFuc2xhdGUoMHB4LCAwcHgpJywgJ3RyYW5zbGF0ZScsICcwcHgsIDBweCddXVxuICBjb25zdCBjb21wb25lbnRzID0gWy4uLmN1cnJlbnRUcmFuc2Zvcm0ubWF0Y2hBbGwoLyhcXHcrKVxcKChbXildKilcXCkvZ2kpXTtcbiAgZWwuc3R5bGUudHJhbnNmb3JtID0gW1xuICAgIGNvbXBvbmVudHMgLy9cbiAgICAgIC5maWx0ZXIoY29tcG9uZW50ID0+IGNvbXBvbmVudFsxXSAhPT0ga2V5KSAvLyBSZW1vdmUgdGhlIGVudHJ5IGlmIGl0J3MgYWxyZWFkeSBzZXRcbiAgICAgIC5tYXAoY29tcG9uZW50ID0+IGNvbXBvbmVudFswXSksIC8vIENvbnZlcnQgYmFjayB0aGUgcmVtYWluaW5nIGVudHJpZXNcbiAgICBgJHtrZXl9KCR7dmFsdWV9KWAsXG4gIF0uam9pbignICcpO1xufTtcblxuY29uc3QgaWNvblNpbmdsZWxpbmUgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgaGVpZ2h0PVwiMjRcIiB3aWR0aD1cIjI0XCI+PHBhdGggZD1cIk0zLjQyNSAxNi4xNVYxM2gxMS4xNXYzLjE1Wm0wLTUuMTVWNy44NWgxNy4xNVYxMVpcIi8+PC9zdmc+JztcblxuY29uc3QgaWNvbk11bHRpbGluZSA9XG4gICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBoZWlnaHQ9XCIyNFwiIHdpZHRoPVwiMjRcIj48cGF0aCBkPVwiTTMuMjI1IDIwLjcyNXYtMy4xNWgxMS41NXYzLjE1Wm0wLTQuNzc1VjEyLjhoMTcuNTV2My4xNVptMC00Ljc1VjguMDVoMTcuNTV2My4xNVptMC00Ljc3NXYtMy4xNWgxNy41NXYzLjE1WlwiLz48L3N2Zz4nO1xuXG5jb25zdCBpY29uQ2hlY2sgPVxuICAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgaGVpZ2h0PVwiMjRcIiB3aWR0aD1cIjI0XCI+PHBhdGggZD1cIm0xMC41NSAxNi41NSA3LjI3NS03LjI3NUwxNi4wNSA3LjVsLTUuNSA1LjQ1LTIuNjc1LTIuNjVMNi4xIDEyLjA3NVptLTUuMzc1IDQuOTI1cS0xLjEyNSAwLTEuODg3LS43NjMtLjc2My0uNzYyLS43NjMtMS44ODdWNS4xNzVxMC0xLjEyNS43NjMtMS44ODguNzYyLS43NjIgMS44ODctLjc2MmgxMy42NXExLjEyNSAwIDEuODg4Ljc2Mi43NjIuNzYzLjc2MiAxLjg4OHYxMy42NXEwIDEuMTI1LS43NjIgMS44ODctLjc2My43NjMtMS44ODguNzYzWm0wLTIuNjVoMTMuNjVWNS4xNzVINS4xNzV2MTMuNjVabTAtMTMuNjV2MTMuNjUtMTMuNjVaXCIvPjwvc3ZnPic7XG5cbmNvbnN0IGljb25SYWRpbyA9XG4gICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBoZWlnaHQ9XCIyNFwiIHdpZHRoPVwiMjRcIj48cGF0aCBkPVwiTTEyIDE3cTIuMDc1IDAgMy41MzgtMS40NjNRMTcgMTQuMDc1IDE3IDEydC0xLjQ2Mi0zLjUzOFExNC4wNzUgNyAxMiA3IDkuOTI1IDcgOC40NjMgOC40NjIgNyA5LjkyNSA3IDEycTAgMi4wNzUgMS40NjMgMy41MzdROS45MjUgMTcgMTIgMTdabTAgNS44NXEtMi4yNzUgMC00LjI1LS44NXQtMy40MzgtMi4zMTJRMi44NSAxOC4yMjUgMiAxNi4yNXEtLjg1LTEuOTc1LS44NS00LjI1VDIgNy43NXEuODUtMS45NzUgMi4zMTItMy40MzhRNS43NzUgMi44NSA3Ljc1IDJxMS45NzUtLjg1IDQuMjUtLjg1dDQuMjUuODVxMS45NzUuODUgMy40MzggMi4zMTJRMjEuMTUgNS43NzUgMjIgNy43NXEuODUgMS45NzUuODUgNC4yNVQyMiAxNi4yNXEtLjg1IDEuOTc1LTIuMzEyIDMuNDM4UTE4LjIyNSAyMS4xNSAxNi4yNSAyMnEtMS45NzUuODUtNC4yNS44NVptMC0zLjE1cTMuMjUgMCA1LjQ3NS0yLjIyNVExOS43IDE1LjI1IDE5LjcgMTJxMC0zLjI1LTIuMjI1LTUuNDc1UTE1LjI1IDQuMyAxMiA0LjNxLTMuMjUgMC01LjQ3NSAyLjIyNVE0LjMgOC43NSA0LjMgMTJxMCAzLjI1IDIuMjI1IDUuNDc1UTguNzUgMTkuNyAxMiAxOS43Wm0wLTcuN1pcIi8+PC9zdmc+JztcblxuY29uc3QgaWNvbkRhdGVwaWNrZXIgPVxuICAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgaGVpZ2h0PVwiMjRcIiB3aWR0aD1cIjI0XCI+PHBhdGggZD1cIk03LjYgMTMuOTI1cS0uNTUgMC0uOTI1LS4zNzV0LS4zNzUtLjkyNXEwLS41NS4zNzUtLjkzNy4zNzUtLjM4OC45MjUtLjM4OHQuOTI1LjM4OHEuMzc1LjM4Ny4zNzUuOTM3dC0uMzc1LjkyNXEtLjM3NS4zNzUtLjkyNS4zNzVabTQuNCAwcS0uNTUgMC0uOTI1LS4zNzV0LS4zNzUtLjkyNXEwLS41NS4zNzUtLjkzNy4zNzUtLjM4OC45MjUtLjM4OHQuOTI1LjM4OHEuMzc1LjM4Ny4zNzUuOTM3dC0uMzc1LjkyNXEtLjM3NS4zNzUtLjkyNS4zNzVabTQuNCAwcS0uNTUgMC0uOTI1LS4zNzV0LS4zNzUtLjkyNXEwLS41NS4zNzUtLjkzNy4zNzUtLjM4OC45MjUtLjM4OHQuOTI1LjM4OHEuMzc1LjM4Ny4zNzUuOTM3dC0uMzc1LjkyNXEtLjM3NS4zNzUtLjkyNS4zNzVaTTUuMyAyMi44NXEtMS4zMjUgMC0yLjIzOC0uOTEyLS45MTItLjkxMy0uOTEyLTIuMjM4VjYuM3EwLTEuMzI1LjkxMi0yLjIzOC45MTMtLjkxMiAyLjIzOC0uOTEySDZ2LTJoMi41NzV2Mmg2Ljg1di0ySDE4djJoLjdxMS4zMjUgMCAyLjIzOC45MTIuOTEyLjkxMy45MTIgMi4yMzh2MTMuNHEwIDEuMzI1LS45MTIgMi4yMzgtLjkxMy45MTItMi4yMzguOTEyWm0wLTMuMTVoMTMuNFYxMEg1LjN2OS43Wk01LjMgOGgxMy40VjYuM0g1LjNabTAgMFY2LjMgOFpcIi8+PC9zdmc+JztcblxuY29uc3QgaWNvblNpZ25hdHVyZSA9XG4gICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBoZWlnaHQ9XCIyNFwiIHdpZHRoPVwiMjRcIj48cGF0aCBkPVwibTkuMjI1IDIxLjIyNSA0LjY1LTQuNjVoOC40NXY0LjY1Wm0tNS4zNS0yLjJINS4wNWw4LjUtOC41LTEuMTc1LTEuMTc1LTguNSA4LjVabTE0LjI1LTkuOTVMMTMuOCA0LjhsMS4zMjUtMS4zMjVxLjYyNS0uNjUgMS41MjUtLjY2My45LS4wMTIgMS42LjY2M2wxLjIyNSAxLjE3NXEuNjc1LjY3NS42NjMgMS41NjItLjAxMy44ODgtLjY2MyAxLjUxM1pNMTYuNyAxMC41NSA2IDIxLjIyNUgxLjY3NVYxNi45TDEyLjM1IDYuMjI1Wm0tMy43MjUtLjYyNS0uNi0uNTc1IDEuMTc1IDEuMTc1WlwiLz48L3N2Zz4nO1xuXG5jb25zdCBpY29uSW5pdGlhbCA9ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBoZWlnaHQ9XCIyNFwiIHdpZHRoPVwiMjRcIj48cGF0aCBkPVwiTTYuMjI1IDIwLjc3NVY3aC01VjMuMjI1SDE1VjdoLTV2MTMuNzc1Wm05Ljc3NSAwdi04aC0zVjloOS43NzV2My43NzVoLTN2OFpcIi8+PC9zdmc+JztcblxuLyoqXG4gKiBEaXNwbGF5cyBhIGJ1aWxkZXIgZXhwZXJpZW5jZSBmb3IgbGF5aW5nIG91dCBmaWVsZHMgaW4gYSB0ZW1wbGF0ZS4gTm90ZSB0aGF0IHRoaXMgZXhwZXJpZW5jZSByZXF1aXJlcyBhIGxhcmdlIGRpc3BsYXkgYXJlYSB0b1xuICogcHJlc2VudCBhbGwgb2YgdGhlIHJlcXVpcmVkIGNvbnRyb2xzLCBzbyBpdCBpcyBwcmltYXJpbHkgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbiBkZXNrdG9wIGVudmlyb25tZW50cy5cbiAqL1xuQENvbXBvbmVudCh7XG4gIHRhZzogJ3ZlcmRvY3MtdGVtcGxhdGUtZmllbGRzJyxcbiAgc3R5bGVVcmw6ICd2ZXJkb2NzLXRlbXBsYXRlLWZpZWxkcy5zY3NzJyxcbiAgc2hhZG93OiBmYWxzZSxcbn0pXG5leHBvcnQgY2xhc3MgVmVyZG9jc1RlbXBsYXRlRmllbGRzIHtcbiAgcGFnZTBFbDogSFRNTERpdkVsZW1lbnQ7XG4gIHRvb2xiYXJFbDogSFRNTERpdkVsZW1lbnQ7XG5cbiAgLyoqXG4gICAqIFRoZSBlbmRwb2ludCB0byB1c2UgdG8gY29tbXVuaWNhdGUgd2l0aCBWZXJkb2NzLiBJZiBub3Qgc2V0LCB0aGUgZGVmYXVsdCBlbmRwb2ludCB3aWxsIGJlIHVzZWQuXG4gICAqL1xuICBAUHJvcCgpIGVuZHBvaW50OiBWZXJkb2NzRW5kcG9pbnQgPSBWZXJkb2NzRW5kcG9pbnQuZ2V0RGVmYXVsdCgpO1xuXG4gIC8qKlxuICAgKiBUaGUgSUQgb2YgdGhlIHRlbXBsYXRlIHRvIGNyZWF0ZSB0aGUgZG9jdW1lbnQgZnJvbS5cbiAgICovXG4gIEBQcm9wKCkgdGVtcGxhdGVJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIHdoZW4gdGhlIGZpZWxkcyBhcmUgc2F2ZWQuXG4gICAqL1xuICBARXZlbnQoe2NvbXBvc2VkOiB0cnVlfSkgc2F2ZTogRXZlbnRFbWl0dGVyO1xuXG4gIC8qKlxuICAgKiBFdmVudCBmaXJlZCB3aGVuIHRoZSB1c2VyIGNhbmNlbHMgdGhlIGRpYWxvZy5cbiAgICovXG4gIEBFdmVudCh7Y29tcG9zZWQ6IHRydWV9KSBjYW5jZWw6IEV2ZW50RW1pdHRlcjtcblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgaWYgYW4gZXJyb3Igb2NjdXJzLiBUaGUgZXZlbnQgZGV0YWlscyB3aWxsIGNvbnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIGVycm9yLiBNb3N0IGVycm9ycyB3aWxsXG4gICAqIHRlcm1pbmF0ZSB0aGUgcHJvY2VzcywgYW5kIHRoZSBjYWxsaW5nIGFwcGxpY2F0aW9uIHNob3VsZCBjb3JyZWN0IHRoZSBjb25kaXRpb24gYW5kIHJlLXJlbmRlciB0aGUgY29tcG9uZW50LlxuICAgKi9cbiAgQEV2ZW50KHtjb21wb3NlZDogdHJ1ZX0pIHNka0Vycm9yOiBFdmVudEVtaXR0ZXI8U0RLRXJyb3I+O1xuXG4gIEBTdGF0ZSgpIHBkZlVybCA9IG51bGw7XG4gIEBTdGF0ZSgpIHRlbXBsYXRlOiBJVGVtcGxhdGUgfCBudWxsID0gbnVsbDtcblxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coYFtQUkVWSUVXXSBMb2FkaW5nIHRlbXBsYXRlICR7dGhpcy50ZW1wbGF0ZUlkfWApO1xuICAgICAgYnVpbGRlclN0b3JlLnRlbXBsYXRlSWQgPSB0aGlzLnRlbXBsYXRlSWQ7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGF3YWl0IGdldFRlbXBsYXRlKHRoaXMuZW5kcG9pbnQsIHRoaXMudGVtcGxhdGVJZCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdbUFJFVklFV10gR290IHRlbXBsYXRlJywgdGhpcy50ZW1wbGF0ZSk7XG4gICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICBidWlsZGVyU3RvcmUudGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlO1xuXG4gICAgICB0aGlzLnBkZlVybCA9IGAke3RoaXMuZW5kcG9pbnQuZ2V0QmFzZVVSTCgpfS90ZW1wbGF0ZXMvJHt0aGlzLnRlbXBsYXRlSWR9L2RvY3VtZW50cy8ke3RlbXBsYXRlLnRlbXBsYXRlX2RvY3VtZW50Py5pZH0/ZmlsZT10cnVlYDtcblxuICAgICAgYnVpbGRlclN0b3JlLnJvbGVOYW1lcyA9IHRlbXBsYXRlLnJvbGVzLm1hcChyb2xlID0+IHJvbGUubmFtZSk7XG4gICAgICAvLyB0aGlzLnJvbGVzID0gdGVtcGxhdGUucm9sZXMubWFwKHJvbGUgPT4gcm9sZS5uYW1lKTtcbiAgICAgIGNvbnNvbGUubG9nKCdbUFJFVklFV10gTG9hZGVkIHJvbGVzJywgYnVpbGRlclN0b3JlLnJvbGVOYW1lcyk7XG5cbiAgICAgIGJ1aWxkZXJTdG9yZS5maWVsZHMgPSBbXTtcbiAgICAgIHRlbXBsYXRlLnJvbGVzLmZvckVhY2gocm9sZSA9PiB7XG4gICAgICAgIGJ1aWxkZXJTdG9yZS5maWVsZHMucHVzaCguLi5yb2xlLmZpZWxkcyk7XG4gICAgICB9KTtcbiAgICAgIGNvbnNvbGUubG9nKCdbUFJFVklFV10gTG9hZGVkIGZpZWxkcycsIGJ1aWxkZXJTdG9yZS5maWVsZHMpO1xuICAgICAgLy8gdGhpcy5maWVsZHMgPSBbXTtcbiAgICAgIC8vIHRlbXBsYXRlLnJvbGVzLmZvckVhY2gocm9sZSA9PiB7XG4gICAgICAvLyAgIHRoaXMuZmllbGRzLnB1c2goLi4ucm9sZS5maWVsZHMpO1xuICAgICAgLy8gfSk7XG4gICAgICAvLyBjb25zb2xlLmxvZygnW1BSRVZJRVddIExvYWRlZCBmaWVsZHMnLCB0aGlzLmZpZWxkcyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBFcnJvciB3aXRoIHByZXZpZXcgc2Vzc2lvbicsIGUpO1xuICAgICAgLy8gdGhpcy5zZGtFcnJvcj8uZW1pdChuZXcgU0RLRXJyb3IoZS5tZXNzYWdlLCBlLnJlc3BvbnNlPy5zdGF0dXMsIGUucmVzcG9uc2U/LmRhdGEpKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRSZW5kZXIoKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ3JlbmRlcmVkJywgdGhpcy5wYWdlMEVsLCB0aGlzLnRvb2xiYXJFbCk7XG4gICAgLy8gY29uc29sZS5sb2coJ3cnLCB0aGlzLnBhZ2UwRWwuY2xpZW50V2lkdGgpO1xuICAgIC8vIGNvbnNvbGUubG9nKCd0JywgdGhpcy50b29sYmFyRWwuY2xpZW50V2lkdGgpO1xuICAgIGludGVyYWN0LmR5bmFtaWNEcm9wKHRydWUpO1xuICAgIHRoaXMudG9vbGJhckVsLnN0eWxlLndpZHRoID0gYCR7dGhpcy5wYWdlMEVsLmNsaWVudFdpZHRofXB4YDtcbiAgfVxuXG4gIGFzeW5jIGhhbmRsZUZpZWxkQ2hhbmdlKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCwgZTogYW55LCBvcHRpb25JZD86IHN0cmluZykge1xuICAgIGNvbnNvbGUubG9nKCdbUFJFVklFV10gaGFuZGxlRmllbGRDaGFuZ2UnLCBmaWVsZCwgZSwgb3B0aW9uSWQpO1xuICB9XG5cbiAgaGFuZGxlUGFnZVJlbmRlcmVkKGUpIHtcbiAgICBjb25zdCBwYWdlSW5mbyA9IGUuZGV0YWlsIGFzIElQYWdlUmVuZGVyRXZlbnQ7XG4gICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBQYWdlIHJlbmRlcmVkJywgcGFnZUluZm8pO1xuXG4gICAgY29uc3QgZmllbGRzID0gYnVpbGRlclN0b3JlLmZpZWxkcy5maWx0ZXIoZmllbGQgPT4gZmllbGQucGFnZV9zZXF1ZW5jZSA9PT0gcGFnZUluZm8ucmVuZGVyZWRQYWdlLnBhZ2VOdW1iZXIpO1xuICAgIC8vIGNvbnN0IGZpZWxkcyA9IHRoaXMuZmllbGRzLmZpbHRlcihmaWVsZCA9PiBmaWVsZC5wYWdlX3NlcXVlbmNlID09PSBwYWdlSW5mby5yZW5kZXJlZFBhZ2UucGFnZU51bWJlcik7XG4gICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBGaWVsZHMgb24gcGFnZScsIGZpZWxkcyk7XG4gICAgZmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgY29uc3QgZWwgPSByZW5kZXJEb2N1bWVudEZpZWxkKGZpZWxkLCBwYWdlSW5mby5yZW5kZXJlZFBhZ2UsIGdldFJvbGVJbmRleChidWlsZGVyU3RvcmUucm9sZU5hbWVzLCBmaWVsZC5yb2xlX25hbWUpLCB0aGlzLmhhbmRsZUZpZWxkQ2hhbmdlLCB0cnVlLCB0cnVlLCB0cnVlKTtcbiAgICAgIC8vIGNvbnN0IGVsID0gcmVuZGVyRG9jdW1lbnRGaWVsZChmaWVsZCwgcGFnZUluZm8ucmVuZGVyZWRQYWdlLCBnZXRSb2xlSW5kZXgodGhpcy5yb2xlcywgZmllbGQucm9sZV9uYW1lKSwgdGhpcy5oYW5kbGVGaWVsZENoYW5nZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICBpZiAoIWVsKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTa2lwcGluZyBwYXJ0aWFsbHkgcmVuZGVyZWQgZmllbGQnLCBmaWVsZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigncmVjaXBpZW50Q2hhbmdlZCcsIGUgPT4ge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3JvbGVpbmRleCcsIGdldFJvbGVJbmRleChidWlsZGVyU3RvcmUucm9sZU5hbWVzLCBlLmRldGFpbCkpO1xuICAgICAgICAvLyBlbC5zZXRBdHRyaWJ1dGUoJ3JvbGVpbmRleCcsIGdldFJvbGVJbmRleCh0aGlzLnJvbGVzLCBlLmRldGFpbCkpO1xuICAgICAgfSk7XG5cbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgneFNjYWxlJywgcGFnZUluZm8ucmVuZGVyZWRQYWdlLnhTY2FsZSk7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3lTY2FsZScsIHBhZ2VJbmZvLnJlbmRlcmVkUGFnZS55U2NhbGUpO1xuXG4gICAgICBpbnRlcmFjdChlbCkuZHJhZ2dhYmxlKHtcbiAgICAgICAgbGlzdGVuZXJzOiB7XG4gICAgICAgICAgc3RhcnQoZXZlbnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkcmFnIHN0YXJ0ZWQnLCBldmVudC50eXBlLCBldmVudC50YXJnZXQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbW92ZShldmVudCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ21vdmVkJyk7XG4gICAgICAgICAgICBjb25zdCBvbGRYID0gKyhldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdwb3NYJykgfHwgMCk7XG4gICAgICAgICAgICBjb25zdCBvbGRZID0gKyhldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdwb3NZJykgfHwgMCk7XG4gICAgICAgICAgICBjb25zdCB4U2NhbGUgPSArKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ3hTY2FsZScpIHx8IDEpO1xuICAgICAgICAgICAgY29uc3QgeVNjYWxlID0gKyhldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCd5U2NhbGUnKSB8fCAxKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1ggPSBldmVudC5keCAvIHhTY2FsZSArIG9sZFg7XG4gICAgICAgICAgICBjb25zdCBuZXdZID0gZXZlbnQuZHkgLyB5U2NhbGUgKyBvbGRZO1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnNldEF0dHJpYnV0ZSgncG9zWCcsIG5ld1gpO1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnNldEF0dHJpYnV0ZSgncG9zeScsIG5ld1kpO1xuICAgICAgICAgICAgdXBkYXRlQ3NzVHJhbnNmb3JtKGV2ZW50LnRhcmdldCwgJ3RyYW5zbGF0ZScsIGAke25ld1h9cHgsICR7bmV3WX1weGApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW5kKGV2ZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZW5kZWQnLCBldmVudCk7XG4gICAgICAgICAgICAvLyBldmVudC50YXJnZXQuc2V0QXR0cmlidXRlKCdwb3NYJywgMCk7XG4gICAgICAgICAgICAvLyBldmVudC50YXJnZXQuc2V0QXR0cmlidXRlKCdwb3N5JywgMCk7XG4gICAgICAgICAgICAvLyB1cGRhdGVDc3NUcmFuc2Zvcm0oZXZlbnQudGFyZ2V0LCAndHJhbnNsYXRlJywgYCR7MH1weCwgJHswfXB4YCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHRlc3RGaWVsZDogSVRlbXBsYXRlRmllbGQgPSB7XG4gICAgICB0ZW1wbGF0ZV9pZDogJycsXG4gICAgICBuYW1lOiAndGVzdCcsXG4gICAgICByb2xlX25hbWU6ICdSZWNpcGllbnQgMScsXG4gICAgICB0eXBlOiAndGV4dGJveCcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIHNldHRpbmc6IHtcbiAgICAgICAgeDogMCxcbiAgICAgICAgeTogMCxcbiAgICAgIH0sXG4gICAgICBwYWdlX3NlcXVlbmNlOiAwLFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEhvc3Q+XG4gICAgICAgIHt0aGlzLnBkZlVybCA/IChcbiAgICAgICAgICA8RnJhZ21lbnQ+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmllbGRzLWJhclwiIHJlZj17ZWwgPT4gKHRoaXMudG9vbGJhckVsID0gZWwgYXMgSFRNTERpdkVsZW1lbnQpfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxhYmVsXCI+QWRkIEZpZWxkOjwvZGl2PlxuICAgICAgICAgICAgICA8dmVyZG9jcy10b29sYmFyLWljb24gaWNvbj17aWNvblNpbmdsZWxpbmV9IHRleHQ9XCJTaW5nbGUtbGluZSBUZXh0IEJveFwiIG9uUHJlc3M9eygpID0+IGNvbnNvbGUubG9nKCdzaW5nbGUgcHJlc3MnKX0gLz5cbiAgICAgICAgICAgICAgPHZlcmRvY3MtdG9vbGJhci1pY29uIGljb249e2ljb25NdWx0aWxpbmV9IHRleHQ9XCJNdWx0aS1saW5lIFRleHQgQm94XCIgb25QcmVzcz17KCkgPT4gY29uc29sZS5sb2coJ211bHRpIHByZXNzJyl9IC8+XG4gICAgICAgICAgICAgIDx2ZXJkb2NzLXRvb2xiYXItaWNvbiBpY29uPXtpY29uQ2hlY2t9IHRleHQ9XCJDaGVja2JveFwiIG9uUHJlc3M9eygpID0+IGNvbnNvbGUubG9nKCdjaGVjayBwcmVzcycpfSAvPlxuICAgICAgICAgICAgICA8dmVyZG9jcy10b29sYmFyLWljb24gaWNvbj17aWNvblJhZGlvfSB0ZXh0PVwiUmFkaW8gQnV0dG9uXCIgb25QcmVzcz17KCkgPT4gY29uc29sZS5sb2coJ3JhZGlvIHByZXNzJyl9IC8+XG4gICAgICAgICAgICAgIDx2ZXJkb2NzLXRvb2xiYXItaWNvbiBpY29uPXtpY29uRGF0ZXBpY2tlcn0gdGV4dD1cIkRhdGUgUGlja2VyXCIgb25QcmVzcz17KCkgPT4gY29uc29sZS5sb2coJ2RhdGUgcHJlc3MnKX0gLz5cbiAgICAgICAgICAgICAgPHZlcmRvY3MtdG9vbGJhci1pY29uIGljb249e2ljb25TaWduYXR1cmV9IHRleHQ9XCJTaWduYXR1cmVcIiBvblByZXNzPXsoKSA9PiBjb25zb2xlLmxvZygnc2lnbmF0dXJlIHByZXNzJyl9IC8+XG4gICAgICAgICAgICAgIDx2ZXJkb2NzLXRvb2xiYXItaWNvbiBpY29uPXtpY29uSW5pdGlhbH0gdGV4dD1cIkluaXRpYWxzXCIgb25QcmVzcz17KCkgPT4gY29uc29sZS5sb2coJ2luaXRpYWwgcHJlc3MnKX0gLz5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2ZsZXg6ICcxJ319IC8+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gY29uc29sZS5sb2coJ3NhdmUnKX0gZGlzYWJsZWQ9e3RydWV9IGNsYXNzPVwib3BlcmF0aW9uXCI+XG4gICAgICAgICAgICAgICAgU2F2ZVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBjb25zb2xlLmxvZygnY2xvc2UnKX0gY2xhc3M9XCJvcGVyYXRpb25cIj5cbiAgICAgICAgICAgICAgICBDbG9zZVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFnZS0wXCIgcmVmPXtlbCA9PiAodGhpcy5wYWdlMEVsID0gZWwgYXMgSFRNTERpdkVsZW1lbnQpfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVzZXItcGxhY2VkLWZpZWxkc1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aXRsZVwiPlVzZXItUGxhY2VkIEZpZWxkczwvZGl2PlxuICAgICAgICAgICAgICAgIDx2ZXJkb2NzLWZpZWxkLXNpZ25hdHVyZVxuICAgICAgICAgICAgICAgICAgZmllbGQ9e3Rlc3RGaWVsZH1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6ICc4MnB4JywgaGVpZ2h0OiAnNDFweCcsIGxlZnQ6ICcyMHB4JywgdG9wOiAnNDBweCcsIHRyYW5zZm9ybTogJ3NjYWxlKDEsMSknLCBiYWNrZ3JvdW5kQ29sb3I6IGdldFJHQkEoMCl9fVxuICAgICAgICAgICAgICAgICAgbW92ZWFibGU9e3RydWV9XG4gICAgICAgICAgICAgICAgICBlZGl0YWJsZT17dHJ1ZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8dmVyZG9jcy12aWV3XG4gICAgICAgICAgICAgIHNvdXJjZT17dGhpcy5wZGZVcmx9XG4gICAgICAgICAgICAgIGVuZHBvaW50PXt0aGlzLmVuZHBvaW50fVxuICAgICAgICAgICAgICBvblBhZ2VSZW5kZXJlZD17ZSA9PiB0aGlzLmhhbmRsZVBhZ2VSZW5kZXJlZChlKX1cbiAgICAgICAgICAgICAgcGFnZUxheWVycz17W1xuICAgICAgICAgICAgICAgIHtuYW1lOiAncGFnZScsIHR5cGU6ICdjYW52YXMnfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ2NvbnRyb2xzJywgdHlwZTogJ2Rpdid9LFxuICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0ZyYWdtZW50PlxuICAgICAgICApIDogKFxuICAgICAgICAgIDx2ZXJkb2NzLWxvYWRlciAvPlxuICAgICAgICApfVxuICAgICAgPC9Ib3N0PlxuICAgICk7XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0Jztcbi8qIGVzbGludC1kaXNhYmxlIGVzLXgvbm8tc3RyaW5nLXByb3RvdHlwZS1tYXRjaGFsbCAtLSBzYWZlICovXG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciBjYWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWNhbGwnKTtcbnZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcbnZhciBjcmVhdGVJdGVyYXRvckNvbnN0cnVjdG9yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NyZWF0ZS1pdGVyYXRvci1jb25zdHJ1Y3RvcicpO1xudmFyIHJlcXVpcmVPYmplY3RDb2VyY2libGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVxdWlyZS1vYmplY3QtY29lcmNpYmxlJyk7XG52YXIgdG9MZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tbGVuZ3RoJyk7XG52YXIgdG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tc3RyaW5nJyk7XG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgY2xhc3NvZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jbGFzc29mLXJhdycpO1xudmFyIGlzUmVnRXhwID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLXJlZ2V4cCcpO1xudmFyIGdldFJlZ0V4cEZsYWdzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZ2V4cC1nZXQtZmxhZ3MnKTtcbnZhciBnZXRNZXRob2QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2V0LW1ldGhvZCcpO1xudmFyIGRlZmluZUJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVmaW5lLWJ1aWx0LWluJyk7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcbnZhciBzcGVjaWVzQ29uc3RydWN0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc3BlY2llcy1jb25zdHJ1Y3RvcicpO1xudmFyIGFkdmFuY2VTdHJpbmdJbmRleCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hZHZhbmNlLXN0cmluZy1pbmRleCcpO1xudmFyIHJlZ0V4cEV4ZWMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVnZXhwLWV4ZWMtYWJzdHJhY3QnKTtcbnZhciBJbnRlcm5hbFN0YXRlTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ludGVybmFsLXN0YXRlJyk7XG52YXIgSVNfUFVSRSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1wdXJlJyk7XG5cbnZhciBNQVRDSF9BTEwgPSB3ZWxsS25vd25TeW1ib2woJ21hdGNoQWxsJyk7XG52YXIgUkVHRVhQX1NUUklORyA9ICdSZWdFeHAgU3RyaW5nJztcbnZhciBSRUdFWFBfU1RSSU5HX0lURVJBVE9SID0gUkVHRVhQX1NUUklORyArICcgSXRlcmF0b3InO1xudmFyIHNldEludGVybmFsU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLnNldDtcbnZhciBnZXRJbnRlcm5hbFN0YXRlID0gSW50ZXJuYWxTdGF0ZU1vZHVsZS5nZXR0ZXJGb3IoUkVHRVhQX1NUUklOR19JVEVSQVRPUik7XG52YXIgUmVnRXhwUHJvdG90eXBlID0gUmVnRXhwLnByb3RvdHlwZTtcbnZhciAkVHlwZUVycm9yID0gVHlwZUVycm9yO1xudmFyIHN0cmluZ0luZGV4T2YgPSB1bmN1cnJ5VGhpcygnJy5pbmRleE9mKTtcbnZhciB1biRNYXRjaEFsbCA9IHVuY3VycnlUaGlzKCcnLm1hdGNoQWxsKTtcblxudmFyIFdPUktTX1dJVEhfTk9OX0dMT0JBTF9SRUdFWCA9ICEhdW4kTWF0Y2hBbGwgJiYgIWZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgdW4kTWF0Y2hBbGwoJ2EnLCAvLi8pO1xufSk7XG5cbnZhciAkUmVnRXhwU3RyaW5nSXRlcmF0b3IgPSBjcmVhdGVJdGVyYXRvckNvbnN0cnVjdG9yKGZ1bmN0aW9uIFJlZ0V4cFN0cmluZ0l0ZXJhdG9yKHJlZ2V4cCwgc3RyaW5nLCAkZ2xvYmFsLCBmdWxsVW5pY29kZSkge1xuICBzZXRJbnRlcm5hbFN0YXRlKHRoaXMsIHtcbiAgICB0eXBlOiBSRUdFWFBfU1RSSU5HX0lURVJBVE9SLFxuICAgIHJlZ2V4cDogcmVnZXhwLFxuICAgIHN0cmluZzogc3RyaW5nLFxuICAgIGdsb2JhbDogJGdsb2JhbCxcbiAgICB1bmljb2RlOiBmdWxsVW5pY29kZSxcbiAgICBkb25lOiBmYWxzZVxuICB9KTtcbn0sIFJFR0VYUF9TVFJJTkcsIGZ1bmN0aW9uIG5leHQoKSB7XG4gIHZhciBzdGF0ZSA9IGdldEludGVybmFsU3RhdGUodGhpcyk7XG4gIGlmIChzdGF0ZS5kb25lKSByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIHZhciBSID0gc3RhdGUucmVnZXhwO1xuICB2YXIgUyA9IHN0YXRlLnN0cmluZztcbiAgdmFyIG1hdGNoID0gcmVnRXhwRXhlYyhSLCBTKTtcbiAgaWYgKG1hdGNoID09PSBudWxsKSByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiBzdGF0ZS5kb25lID0gdHJ1ZSB9O1xuICBpZiAoc3RhdGUuZ2xvYmFsKSB7XG4gICAgaWYgKHRvU3RyaW5nKG1hdGNoWzBdKSA9PT0gJycpIFIubGFzdEluZGV4ID0gYWR2YW5jZVN0cmluZ0luZGV4KFMsIHRvTGVuZ3RoKFIubGFzdEluZGV4KSwgc3RhdGUudW5pY29kZSk7XG4gICAgcmV0dXJuIHsgdmFsdWU6IG1hdGNoLCBkb25lOiBmYWxzZSB9O1xuICB9XG4gIHN0YXRlLmRvbmUgPSB0cnVlO1xuICByZXR1cm4geyB2YWx1ZTogbWF0Y2gsIGRvbmU6IGZhbHNlIH07XG59KTtcblxudmFyICRtYXRjaEFsbCA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgdmFyIFIgPSBhbk9iamVjdCh0aGlzKTtcbiAgdmFyIFMgPSB0b1N0cmluZyhzdHJpbmcpO1xuICB2YXIgQyA9IHNwZWNpZXNDb25zdHJ1Y3RvcihSLCBSZWdFeHApO1xuICB2YXIgZmxhZ3MgPSB0b1N0cmluZyhnZXRSZWdFeHBGbGFncyhSKSk7XG4gIHZhciBtYXRjaGVyLCAkZ2xvYmFsLCBmdWxsVW5pY29kZTtcbiAgbWF0Y2hlciA9IG5ldyBDKEMgPT09IFJlZ0V4cCA/IFIuc291cmNlIDogUiwgZmxhZ3MpO1xuICAkZ2xvYmFsID0gISF+c3RyaW5nSW5kZXhPZihmbGFncywgJ2cnKTtcbiAgZnVsbFVuaWNvZGUgPSAhIX5zdHJpbmdJbmRleE9mKGZsYWdzLCAndScpO1xuICBtYXRjaGVyLmxhc3RJbmRleCA9IHRvTGVuZ3RoKFIubGFzdEluZGV4KTtcbiAgcmV0dXJuIG5ldyAkUmVnRXhwU3RyaW5nSXRlcmF0b3IobWF0Y2hlciwgUywgJGdsb2JhbCwgZnVsbFVuaWNvZGUpO1xufTtcblxuLy8gYFN0cmluZy5wcm90b3R5cGUubWF0Y2hBbGxgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1zdHJpbmcucHJvdG90eXBlLm1hdGNoYWxsXG4kKHsgdGFyZ2V0OiAnU3RyaW5nJywgcHJvdG86IHRydWUsIGZvcmNlZDogV09SS1NfV0lUSF9OT05fR0xPQkFMX1JFR0VYIH0sIHtcbiAgbWF0Y2hBbGw6IGZ1bmN0aW9uIG1hdGNoQWxsKHJlZ2V4cCkge1xuICAgIHZhciBPID0gcmVxdWlyZU9iamVjdENvZXJjaWJsZSh0aGlzKTtcbiAgICB2YXIgZmxhZ3MsIFMsIG1hdGNoZXIsIHJ4O1xuICAgIGlmIChyZWdleHAgIT0gbnVsbCkge1xuICAgICAgaWYgKGlzUmVnRXhwKHJlZ2V4cCkpIHtcbiAgICAgICAgZmxhZ3MgPSB0b1N0cmluZyhyZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGdldFJlZ0V4cEZsYWdzKHJlZ2V4cCkpKTtcbiAgICAgICAgaWYgKCF+c3RyaW5nSW5kZXhPZihmbGFncywgJ2cnKSkgdGhyb3cgJFR5cGVFcnJvcignYC5tYXRjaEFsbGAgZG9lcyBub3QgYWxsb3cgbm9uLWdsb2JhbCByZWdleGVzJyk7XG4gICAgICB9XG4gICAgICBpZiAoV09SS1NfV0lUSF9OT05fR0xPQkFMX1JFR0VYKSByZXR1cm4gdW4kTWF0Y2hBbGwoTywgcmVnZXhwKTtcbiAgICAgIG1hdGNoZXIgPSBnZXRNZXRob2QocmVnZXhwLCBNQVRDSF9BTEwpO1xuICAgICAgaWYgKG1hdGNoZXIgPT09IHVuZGVmaW5lZCAmJiBJU19QVVJFICYmIGNsYXNzb2YocmVnZXhwKSA9PSAnUmVnRXhwJykgbWF0Y2hlciA9ICRtYXRjaEFsbDtcbiAgICAgIGlmIChtYXRjaGVyKSByZXR1cm4gY2FsbChtYXRjaGVyLCByZWdleHAsIE8pO1xuICAgIH0gZWxzZSBpZiAoV09SS1NfV0lUSF9OT05fR0xPQkFMX1JFR0VYKSByZXR1cm4gdW4kTWF0Y2hBbGwoTywgcmVnZXhwKTtcbiAgICBTID0gdG9TdHJpbmcoTyk7XG4gICAgcnggPSBuZXcgUmVnRXhwKHJlZ2V4cCwgJ2cnKTtcbiAgICByZXR1cm4gSVNfUFVSRSA/IGNhbGwoJG1hdGNoQWxsLCByeCwgUykgOiByeFtNQVRDSF9BTExdKFMpO1xuICB9XG59KTtcblxuSVNfUFVSRSB8fCBNQVRDSF9BTEwgaW4gUmVnRXhwUHJvdG90eXBlIHx8IGRlZmluZUJ1aWx0SW4oUmVnRXhwUHJvdG90eXBlLCBNQVRDSF9BTEwsICRtYXRjaEFsbCk7XG4iXSwic291cmNlUm9vdCI6IiJ9
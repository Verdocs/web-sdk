/*! For license information please see 18.3776e3aa.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"./dist/esm/Colors-1b298092.js":function(module,__webpack_exports__,__webpack_require__){"use strict";function getRGBA(roleIndex){switch(roleIndex%10){case 0:return 0===roleIndex?"rgba(255, 193, 7, 0.4)":"rgba(134, 134, 134, 0.3)";case 1:return"rgba(156, 39, 176, .4)";case 2:return"rgba(33, 150, 243, .4)";case 3:return"rgba(220, 231, 117, 0.3)";case 4:return"rgba(121, 134, 203, 0.3)";case 5:return"rgba(77, 182, 172, 0.3)";case 6:return"rgba(255, 202, 165, 0.3)";case 7:return"rgba(2, 247, 190, 0.3)";case 8:return"rgba(255, 138, 101, 0.3)";case 9:return"rgba(82, 255, 79, 0.3)";default:return"rgba(229, 115, 155, 0.3)"}}__webpack_require__.d(__webpack_exports__,"a",(function(){return getRGBA}))},"./dist/esm/Templates-0638b1e4.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getTemplates})),__webpack_require__.d(__webpack_exports__,"b",(function(){return createTemplate})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getTemplate}));var getTemplates=function getTemplates(endpoint,params){return endpoint.api.post("/templates",{params:params}).then((function(r){return r.data}))},getTemplate=function getTemplate(endpoint,templateId,ssr){return endpoint.api.get("/templates/".concat(templateId)+(ssr?"?ssr=true":"")).then((function(r){return r.data}))},createTemplate=function createTemplate(endpoint,params){return endpoint.api.post("/templates/",params).then((function(r){return r.data}))}},"./dist/esm/Validators-f110bae2.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isValidPhone})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isValidEmail}));var EMAIL_REGEX=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,isValidEmail=function isValidEmail(email){return!!email&&EMAIL_REGEX.test(email)},PHONE_REGEX=/((?:\+|00)[17](?: |\-)?|(?:\+|00)[1-9]\d{0,2}(?: |\-)?|(?:\+|00)1\-\d{3}(?: |\-)?)?(0\d|\([0-9]{3}\)|[1-9]{0,3})(?:((?: |\-)[0-9]{2}){4}|((?:[0-9]{2}){4})|((?: |\-)[0-9]{3}(?: |\-)[0-9]{4})|([0-9]{7}))/,isValidPhone=function isValidPhone(phone){return!!phone&&PHONE_REGEX.test(phone)}},"./dist/esm/utils-1a27bb94.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getRoleIndex})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getFieldId})),__webpack_require__.d(__webpack_exports__,"c",(function(){return fullNameToInitials})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getFieldSettings})),__webpack_require__.d(__webpack_exports__,"e",(function(){return integerSequence})),__webpack_require__.d(__webpack_exports__,"f",(function(){return renderDocumentField})),__webpack_require__.d(__webpack_exports__,"g",(function(){return updateCssTransform}));__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.string.match-all.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function rescale(r,n){return r*n}var integerSequence=function integerSequence(start,count){return Array(count).fill(1).map((function(_,index){return index+start}))},fullNameToInitials=function fullNameToInitials(name){return name.split(" ").map((function(word){return word[0]})).join("")},setControlStyles=function setControlStyles(el,field,xScale,yScale,option){var _a,_b,_c,_d,settings=field.setting||field.settings,_settings$x=settings.x,x=void 0===_settings$x?0:_settings$x,_settings$y=settings.y,y=void 0===_settings$y?0:_settings$y,_settings$width=settings.width,width=void 0===_settings$width?function defaultWidth(field){switch(field.type){case"attachment":case"payment":return 24;case"checkbox":case"checkbox_group":case"radio_button_group":return 14;case"signature":case"initial":return 82}return 150}(field):_settings$width,_settings$height=settings.height,height=void 0===_settings$height?function defaultHeight(field){switch(field.type){case"attachment":case"payment":return 24;case"checkbox":case"checkbox_group":case"radio_button_group":return 14;case"signature":case"initial":return 41}return 50}(field):_settings$height,optionSettings=void 0!==option&&settings.options[option]?settings.options[option]:null;optionSettings&&(x=null!==(_a=optionSettings.x)&&void 0!==_a?_a:x,y=null!==(_b=optionSettings.y)&&void 0!==_b?_b:y,width=null!==(_c=optionSettings.width)&&void 0!==_c?_c:width,height=null!==(_d=optionSettings.height)&&void 0!==_d?_d:height),el.style.width=width+"px",el.style.height=height+"px",el.style.position="absolute",el.style.left=rescale(xScale,x)+"px",el.style.bottom=rescale(yScale,y)+"px",el.style.transform="scale("+xScale+", "+yScale+")"},getFieldId=function getFieldId(field){return"verdocs-doc-fld-"+field.name},getFieldOptionId=function getFieldOptionId(field,index){return"verdocs-doc-fld-"+field.name+"-"+index},renderDocumentField=function renderDocumentField(field,docPage,roleIndex,fieldOptions){var _fieldOptions$disable=fieldOptions.disabled,disabled=void 0!==_fieldOptions$disable&&_fieldOptions$disable,_fieldOptions$editabl=fieldOptions.editable,editable=void 0!==_fieldOptions$editabl&&_fieldOptions$editabl,_fieldOptions$draggab=fieldOptions.draggable,draggable=void 0!==_fieldOptions$draggab&&_fieldOptions$draggab,controlsDiv=document.getElementById(docPage.containerId+"-controls");if(controlsDiv)switch(field.type){case"attachment":case"date":case"dropdown":case"initial":case"payment":case"signature":case"timestamp":case"textarea":case"textbox":var id=getFieldId(field),existingField=document.getElementById(id);if(existingField)return void setControlStyles(existingField,field,docPage.xScale,docPage.yScale);var el=document.createElement("verdocs-field-"+field.type);return el.field=field,el.setAttribute("id",id),el.setAttribute("roleIndex",roleIndex),disabled?(el.setAttribute("tabindex",-1),el.setAttribute("disabled",!0)):el.setAttribute("tabIndex",1),editable&&el.setAttribute("editable",!0),draggable&&el.setAttribute("draggable",!0),setControlStyles(el,field,docPage.xScale,docPage.yScale),controlsDiv.appendChild(el),el;case"checkbox_group":return(field.settings||field.setting||{}).options.map((function(_,checkboxIndex){var id=getFieldOptionId(field,checkboxIndex),existingField=document.getElementById(id);if(!existingField){var cbEl=document.createElement("verdocs-field-checkbox");return cbEl.field=field,cbEl.setAttribute("id",id),cbEl.setAttribute("roleIndex",roleIndex),cbEl.setAttribute("option",checkboxIndex),disabled&&cbEl.setAttribute("disabled",!0),setControlStyles(cbEl,field,docPage.xScale,docPage.yScale,checkboxIndex),controlsDiv.appendChild(cbEl),cbEl}setControlStyles(existingField,field,docPage.xScale,docPage.yScale)}));case"radio_button_group":return(field.settings||field.setting||{}).options.map((function(_,buttonIndex){var id=getFieldOptionId(field,buttonIndex),existingField=document.getElementById(id);if(!existingField){var radioEl=document.createElement("verdocs-field-radio-button");return radioEl.field=field,radioEl.setAttribute("id",id),radioEl.setAttribute("roleIndex",roleIndex),radioEl.setAttribute("option",buttonIndex),disabled&&radioEl.setAttribute("disabled",!0),setControlStyles(radioEl,field,docPage.xScale,docPage.yScale,buttonIndex),controlsDiv.appendChild(radioEl),radioEl}setControlStyles(existingField,field,docPage.xScale,docPage.yScale)}));default:return console.log("[PREVIEW] Skipping unsupported field type",field),null}},getRoleIndex=function getRoleIndex(roles,role){return roles.indexOf(role)||0},getFieldSettings=function getFieldSettings(field){return field.setting?field.setting:field.settings?field.settings:{x:0,y:0,required:!1,disabled:!1,result:"",value:""}},updateCssTransform=function updateCssTransform(el,key,value){var components=_toConsumableArray(el.style.transform.matchAll(/(\w+)\(([^)]*)\)/gi));el.style.transform=[components.filter((function(component){return component[1]!==key})).map((function(component){return component[0]})),key+"("+value+")"].join(" ")}},"./dist/esm/verdocs-send.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"verdocs_send",(function(){return VerdocsSend}));__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.sort.js"),__webpack_require__("./node_modules/core-js/modules/es.object.values.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js");var _index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("./dist/esm/index-f78d163d.js"),_Templates_0638b1e4_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("./dist/esm/Templates-0638b1e4.js"),_Validators_f110bae2_js__WEBPACK_IMPORTED_MODULE_35__=(__webpack_require__("./dist/esm/Types-ab9f6af8.js"),__webpack_require__("./dist/esm/Validators-f110bae2.js")),_Colors_1b298092_js__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("./dist/esm/Colors-1b298092.js"),_VerdocsEndpoint_dac04424_js__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("./dist/esm/VerdocsEndpoint-dac04424.js"),_utils_1a27bb94_js__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__("./dist/esm/utils-1a27bb94.js");function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var VerdocsSend=function(){function VerdocsSend(hostRef){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,VerdocsSend),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.j)(this,hostRef),this.send=Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.e)(this,"send",7),this.cancel=Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.e)(this,"cancel",7),this.sdkError=Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.e)(this,"sdkError",7),this.levels=[],this.endpoint=_VerdocsEndpoint_dac04424_js__WEBPACK_IMPORTED_MODULE_37__.a.getDefault(),this.templateId=null,this.template=null,this.pdfUrl=null,this.containerId="verdocs-send-"+Math.random().toString(36).substring(2,11),this.rolesAtLevel={},this.showPickerForId="",this.sessionContacts=[],this.recipientsAssigned={}}var _componentDidLoad,_componentWillLoad;return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(VerdocsSend,[{key:"componentWillLoad",value:(_componentWillLoad=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var _a,result;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return this.sessionContacts=[],_context.prev=1,_context.next=4,this.endpoint.loadSession();case 4:result=_context.sent,(null===(_a=result.session)||void 0===_a?void 0:_a.profile)&&this.sessionContacts.push({id:result.session.profile.id,name:result.session.profile.first_name+" "+result.session.profile.last_name,email:result.session.profile.email,phone:result.session.profile.phone}),_context.next=11;break;case 8:_context.prev=8,_context.t0=_context.catch(1),console.log("Error loading session",_context.t0);case 11:case"end":return _context.stop()}}),_callee,this,[[1,8]])}))),function componentWillLoad(){return _componentWillLoad.apply(this,arguments)})},{key:"componentDidLoad",value:(_componentDidLoad=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var template,rolesAtLevel;return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return console.log("[SEND] Showing template",this.templateId),_context2.prev=1,console.log("[SEND] Loading template "+this.templateId),_context2.next=5,Object(_Templates_0638b1e4_js__WEBPACK_IMPORTED_MODULE_33__.c)(this.endpoint,this.templateId);case 5:template=_context2.sent,console.log("[SEND] Got template",template),this.template=template,(null==template?void 0:template.roles)&&(rolesAtLevel={},template.roles.forEach((function(role){var level=role.sequence-1;rolesAtLevel[level]||(rolesAtLevel[level]=[]);var id="r-"+level+"-"+rolesAtLevel[level].length;rolesAtLevel[level].push(Object.assign({},role,{id:id}))})),this.rolesAtLevel=rolesAtLevel,this.levels=Object.keys(rolesAtLevel).map((function(levelStr){return+levelStr})),this.levels.sort((function(a,b){return a-b}))),_context2.next=14;break;case 11:_context2.prev=11,_context2.t0=_context2.catch(1),console.log("[SEND] Error getting template",_context2.t0);case 14:case"end":return _context2.stop()}}),_callee2,this,[[1,11]])}))),function componentDidLoad(){return _componentDidLoad.apply(this,arguments)})},{key:"getLevelIcon",value:function getLevelIcon(level){return level<0?Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("div",{class:"level-icon",innerHTML:'<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="M2 12C2 6.48 6.48 2 12 2s10 4.48 10 10-4.48 10-10 10S2 17.52 2 12zm10 6c3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6 2.69 6 6 6z"></path></svg>'}):level>=this.levels.length?Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("div",{class:"level-icon",innerHTML:'<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="m18 7-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41 6 19l1.41-1.41L1.83 12 .41 13.41z"></path></svg>'}):Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("div",{class:"level-icon",innerHTML:'<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></svg>'})}},{key:"handleSelectContact",value:function handleSelectContact(e,role){e.preventDefault(),this.recipientsAssigned[role.id]=Object.assign({},role,e.detail),this.showPickerForId=""}},{key:"handleClickRole",value:function handleClickRole(e,role){e.stopPropagation(),this.showPickerForId=role.id}},{key:"handleSend",value:function handleSend(e){var _a;e.stopPropagation(),null===(_a=this.send)||void 0===_a||_a.emit({recipientsAssigned:Object.values(this.recipientsAssigned)})}},{key:"handleCancel",value:function handleCancel(e){var _a;e.stopPropagation(),null===(_a=this.cancel)||void 0===_a||_a.emit()}},{key:"render",value:function render(){var _a,_b,_c,_this=this,roleNames=(null===(_b=null===(_a=this.template)||void 0===_a?void 0:_a.roles)||void 0===_b?void 0:_b.map((function(role){return role.name})))||[],allRecipientsAssigned=Object.values(this.recipientsAssigned).filter((function(recipient){return console.log("valid email",Object(_Validators_f110bae2_js__WEBPACK_IMPORTED_MODULE_35__.b)(recipient.email),recipient.email),console.log("valid phone",Object(_Validators_f110bae2_js__WEBPACK_IMPORTED_MODULE_35__.a)(recipient.phone),recipient.phone),Object(_Validators_f110bae2_js__WEBPACK_IMPORTED_MODULE_35__.b)(recipient.email)||Object(_Validators_f110bae2_js__WEBPACK_IMPORTED_MODULE_35__.a)(recipient.phone)})).length>=(null===(_c=this.template)||void 0===_c?void 0:_c.roles.length);return console.log("assigned",allRecipientsAssigned),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.b,{class:{}},Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("div",{class:"recipients"},Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("div",{class:"left-line"}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("div",{class:"level level-start"},this.getLevelIcon(-1),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("div",{class:"complete"},"Send Document")),this.levels.map((function(level){return Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("div",{class:"level level-"+level},_this.getLevelIcon(level),_this.rolesAtLevel[level].map((function(role){var _a,_b,_c;return Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("div",{class:"recipient",style:{backgroundColor:Object(_Colors_1b298092_js__WEBPACK_IMPORTED_MODULE_36__.a)(Object(_utils_1a27bb94_js__WEBPACK_IMPORTED_MODULE_38__.a)(roleNames,role.name))},onClick:function onClick(e){return _this.handleClickRole(e,role)}},null!==(_b=null===(_a=_this.recipientsAssigned[role.id])||void 0===_a?void 0:_a.full_name)&&void 0!==_b?_b:role.name,Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("div",{class:"icon",innerHTML:'<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg>'}),_this.showPickerForId===role.id&&Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("verdocs-contact-picker",{onCancel:function onCancel(){return _this.showPickerForId=""},onNext:function onNext(e){return _this.handleSelectContact(e,role)},contactSuggestions:_this.sessionContacts,templateRole:null!==(_c=_this.recipientsAssigned[role.id])&&void 0!==_c?_c:role,onSearchContacts:function onSearchContacts(e){return console.log("Search",e.detail)}}))})))})),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("div",{class:"level level-done"},this.getLevelIcon(this.levels.length),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("div",{class:"complete"},"Document Complete"))),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("div",{class:"buttons"},Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("verdocs-button",{label:"Cancel",size:"small",variant:"outline",onClick:function onClick(e){return _this.handleCancel(e)}}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_32__.h)("verdocs-button",{label:"Send",size:"small",disabled:!allRecipientsAssigned,onClick:function onClick(e){return _this.handleSend(e)}})))}}]),VerdocsSend}();VerdocsSend.style='verdocs-send{display:-ms-flexbox;display:flex;padding:10px;position:relative;background:#ffffff;-ms-flex-direction:column;flex-direction:column;font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-send .recipients{position:relative}verdocs-send .left-line{top:32px;left:20px;z-index:1;width:12px;bottom:30px;position:absolute;background:#ffffff;border-left:3px dotted #9b9b9b}verdocs-send .level{display:-ms-flexbox;display:flex;-webkit-column-gap:10px;-moz-column-gap:10px;column-gap:10px;margin-left:50px;position:relative;-ms-flex-direction:row;flex-direction:row;padding:8px 0 4px 0;border-bottom:1px solid #97979744}verdocs-send .level .level-icon{top:14px;z-index:2;left:-40px;width:24px;height:24px;position:absolute;background:#ffffff}verdocs-send .level .level-icon svg{fill:#00000089}verdocs-send .level .recipient{height:30px;display:-ms-flexbox;display:flex;-ms-flex:0 0 30px;flex:0 0 30px;color:#000000;cursor:pointer;font-size:14px;-ms-flex-align:center;align-items:center;border-radius:30px;-ms-flex-direction:row;flex-direction:row;background:#dddddd;white-space:nowrap;padding:2px 10px 2px 14px}verdocs-send .level .recipient .icon{width:22px;height:22px;-ms-flex:0 0 22px;flex:0 0 22px;margin:0 0 0 10px}verdocs-send .level .recipient .icon svg{width:22px;height:22px;fill:#333333;outline:none}verdocs-send .level .complete{-ms-flex:1;flex:1;height:30px;display:-ms-flexbox;display:flex;color:#000000;font-size:14px;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;padding:3px 10px 3px 2px}verdocs-send .buttons{display:-ms-flexbox;display:flex;margin-top:10px;-webkit-column-gap:15px;-moz-column-gap:15px;column-gap:15px;-ms-flex-direction:row;flex-direction:row}verdocs-send verdocs-contact-picker{left:0;top:41px;z-index:10;position:absolute;border:1px solid #dddddd;-webkit-box-shadow:0 0 6px 3px rgba(0, 0, 0, 0.1);box-shadow:0 0 6px 3px rgba(0, 0, 0, 0.1)}'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9VdGlscy9Db2xvcnMuanMiLCJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy9AdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzL1RlbXBsYXRlcy5qcyIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMvVmFsaWRhdG9ycy5qcyIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9VdGlscy9GaWVsZHMuanMiLCJ3ZWJwYWNrOi8vL3NyYy91dGlscy91dGlscy50cyIsIndlYnBhY2s6Ly8vc3JjL2NvbXBvbmVudHMvZW1iZWRzL3ZlcmRvY3Mtc2VuZC92ZXJkb2NzLXNlbmQuc2NzcyIsIndlYnBhY2s6Ly8vc3JjL2NvbXBvbmVudHMvZW1iZWRzL3ZlcmRvY3Mtc2VuZC92ZXJkb2NzLXNlbmQudHN4Il0sIm5hbWVzIjpbImdldFJHQkEiLCJyb2xlSW5kZXgiLCJnZXRUZW1wbGF0ZXMiLCJlbmRwb2ludCIsInBhcmFtcyIsImFwaSIsInBvc3QiLCJ0aGVuIiwiciIsImRhdGEiLCJnZXRUZW1wbGF0ZSIsInRlbXBsYXRlSWQiLCJzc3IiLCJnZXQiLCJjb25jYXQiLCJjcmVhdGVUZW1wbGF0ZSIsIkVNQUlMX1JFR0VYIiwiaXNWYWxpZEVtYWlsIiwiZW1haWwiLCJ0ZXN0IiwiUEhPTkVfUkVHRVgiLCJpc1ZhbGlkUGhvbmUiLCJwaG9uZSIsInJlc2NhbGUiLCJuIiwiaW50ZWdlclNlcXVlbmNlIiwic3RhcnQiLCJjb3VudCIsIkFycmF5IiwiZmlsbCIsIm1hcCIsIl8iLCJpbmRleCIsImZ1bGxOYW1lVG9Jbml0aWFscyIsIm5hbWUiLCJzcGxpdCIsIndvcmQiLCJqb2luIiwic2V0Q29udHJvbFN0eWxlcyIsImVsIiwiZmllbGQiLCJ4U2NhbGUiLCJ5U2NhbGUiLCJvcHRpb24iLCJzZXR0aW5ncyIsInNldHRpbmciLCJ4IiwieSIsIndpZHRoIiwiZGVmYXVsdFdpZHRoIiwidHlwZSIsImhlaWdodCIsImRlZmF1bHRIZWlnaHQiLCJvcHRpb25TZXR0aW5ncyIsInVuZGVmaW5lZCIsIm9wdGlvbnMiLCJzdHlsZSIsInBvc2l0aW9uIiwibGVmdCIsImJvdHRvbSIsInRyYW5zZm9ybSIsImdldEZpZWxkSWQiLCJnZXRGaWVsZE9wdGlvbklkIiwicmVuZGVyRG9jdW1lbnRGaWVsZCIsImRvY1BhZ2UiLCJmaWVsZE9wdGlvbnMiLCJkaXNhYmxlZCIsImVkaXRhYmxlIiwiZHJhZ2dhYmxlIiwiY29udHJvbHNEaXYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY29udGFpbmVySWQiLCJpZCIsImV4aXN0aW5nRmllbGQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJjaGVja2JveEluZGV4IiwiY2JFbCIsImJ1dHRvbkluZGV4IiwicmFkaW9FbCIsImNvbnNvbGUiLCJsb2ciLCJnZXRSb2xlSW5kZXgiLCJyb2xlcyIsInJvbGUiLCJpbmRleE9mIiwiZ2V0RmllbGRTZXR0aW5ncyIsInJlcXVpcmVkIiwicmVzdWx0IiwidmFsdWUiLCJ1cGRhdGVDc3NUcmFuc2Zvcm0iLCJrZXkiLCJjb21wb25lbnRzIiwibWF0Y2hBbGwiLCJmaWx0ZXIiLCJjb21wb25lbnQiLCJWZXJkb2NzU2VuZCIsImxldmVscyIsIlZlcmRvY3NFbmRwb2ludCIsImdldERlZmF1bHQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJ0aGlzIiwic2Vzc2lvbkNvbnRhY3RzIiwibG9hZFNlc3Npb24iLCJzZXNzaW9uIiwicHJvZmlsZSIsInB1c2giLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwidGVtcGxhdGUiLCJyb2xlc0F0TGV2ZWwiLCJmb3JFYWNoIiwibGV2ZWwiLCJzZXF1ZW5jZSIsImxlbmd0aCIsIk9iamVjdCIsImtleXMiLCJsZXZlbFN0ciIsInNvcnQiLCJhIiwiYiIsImdldExldmVsSWNvbiIsImgiLCJjbGFzcyIsImlubmVySFRNTCIsImhhbmRsZVNlbGVjdENvbnRhY3QiLCJlIiwicHJldmVudERlZmF1bHQiLCJyZWNpcGllbnRzQXNzaWduZWQiLCJkZXRhaWwiLCJzaG93UGlja2VyRm9ySWQiLCJoYW5kbGVDbGlja1JvbGUiLCJzdG9wUHJvcGFnYXRpb24iLCJoYW5kbGVTZW5kIiwic2VuZCIsImVtaXQiLCJ2YWx1ZXMiLCJoYW5kbGVDYW5jZWwiLCJjYW5jZWwiLCJyZW5kZXIiLCJyb2xlTmFtZXMiLCJhbGxSZWNpcGllbnRzQXNzaWduZWQiLCJyZWNpcGllbnQiLCJIb3N0IiwiYmFja2dyb3VuZENvbG9yIiwib25DbGljayIsImZ1bGxfbmFtZSIsIm9uQ2FuY2VsIiwib25OZXh0IiwiY29udGFjdFN1Z2dlc3Rpb25zIiwidGVtcGxhdGVSb2xlIiwib25TZWFyY2hDb250YWN0cyIsImxhYmVsIiwic2l6ZSIsInZhcmlhbnQiXSwibWFwcGluZ3MiOiI7Z0tBOEJPLFNBQVNBLFFBQVFDLFdBQ3BCLE9BQVFBLFVBQVksSUFDaEIsS0FBSyxFQUNELE9BQXFCLElBQWRBLFVBQWtCLHlCQUEyQiwyQkFDeEQsS0FBSyxFQUNELE1BQU8seUJBQ1gsS0FBSyxFQUNELE1BQU8seUJBQ1gsS0FBSyxFQUNELE1BQU8sMkJBQ1gsS0FBSyxFQUNELE1BQU8sMkJBQ1gsS0FBSyxFQUNELE1BQU8sMEJBQ1gsS0FBSyxFQUNELE1BQU8sMkJBQ1gsS0FBSyxFQUNELE1BQU8seUJBQ1gsS0FBSyxFQUNELE1BQU8sMkJBQ1gsS0FBSyxFQUNELE1BQU8seUJBQ1gsUUFDSSxNQUFPLDJCQUVuQixDQXZEQSwyRSwyR0NBQSxvUEFzRFUsSUFBQ0MsYUFBZSxTQUFmQSxhQUF5QkMsU0FBVUMsUUFDMUMsT0FBT0QsU0FBU0UsSUFDWEMsS0FBSyxhQUFjLENBQUVGLE9BQVFBLFNBQzdCRyxNQUFLLFNBQVVDLEdBQUssT0FBT0EsRUFBRUMsSUFBSyxHQUMzQyxFQVVXQyxZQUFjLFNBQWRBLFlBQXdCUCxTQUFVUSxXQUFZQyxL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QUUsSUFDaEdKLDZFQUFnQjhCLE1BQU0sT0FBT0MsS0FBSyxRQUFRNUYsVUFBV2dGLHNCQUF1QkksUUFBUyxpQkFBQW5CLEdBQUMsT0FBSSxNQUFLTyxXQUFXUCxFQUFFLEssS0FJbkgsWUEvS3FCLEcsa0JEakNELHM2RCIsImZpbGUiOiIxOC4zNzc2ZTNhYS5pZnJhbWUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBHaXZlbiBhIGByZ2JhKHIsZyxiLGEpYCBzdHJpbmcgdmFsdWUsIHJldHVybnMgdGhlIGhleCBlcXVpdmFsZW50LCBkcm9wcGluZyB0aGUgYWxwaGEgY2hhbm5lbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJHQihyZ2JhKSB7XG4gICAgdmFyIHJnYk51bWJlcnMgPSByZ2JhLnJlcGxhY2UoJ3JnYmEoJywgJycpLnJlcGxhY2UoJyknLCAnJykuc3BsaXQoJywnKTtcbiAgICB2YXIgcmdiT2JqZWN0ID0ge1xuICAgICAgICByZWQ6ICtyZ2JOdW1iZXJzWzBdLFxuICAgICAgICBncmVlbjogK3JnYk51bWJlcnNbMV0sXG4gICAgICAgIGJsdWU6ICtyZ2JOdW1iZXJzWzJdLFxuICAgICAgICBhbHBoYTogK3JnYk51bWJlcnNbM10sXG4gICAgfTtcbiAgICB2YXIgYWxwaGEgPSAxIC0gcmdiT2JqZWN0LmFscGhhO1xuICAgIHZhciByZWQgPSBNYXRoLnJvdW5kKChyZ2JPYmplY3QuYWxwaGEgKiAocmdiT2JqZWN0LnJlZCAvIDI1NSkgKyBhbHBoYSkgKiAyNTUpO1xuICAgIHZhciBncmVlbiA9IE1hdGgucm91bmQoKHJnYk9iamVjdC5hbHBoYSAqIChyZ2JPYmplY3QuZ3JlZW4gLyAyNTUpICsgYWxwaGEpICogMjU1KTtcbiAgICB2YXIgYmx1ZSA9IE1hdGgucm91bmQoKHJnYk9iamVjdC5hbHBoYSAqIChyZ2JPYmplY3QuYmx1ZSAvIDI1NSkgKyBhbHBoYSkgKiAyNTUpO1xuICAgIHJldHVybiAnIycgKyByZ2JUb0hleChyZWQpICsgcmdiVG9IZXgoZ3JlZW4pICsgcmdiVG9IZXgoYmx1ZSk7XG59XG4vKipcbiAqIEdpdmVuIGFuIFJHQiBzdHJpbmcgdmFsdWUsIHJldHVybnMgdGhlIGhleCBlcXVpdmFsZW50LlxuICovXG5mdW5jdGlvbiByZ2JUb0hleChyZ2IpIHtcbiAgICB2YXIgaGV4ID0gcmdiLnRvU3RyaW5nKDE2KTtcbiAgICBpZiAoaGV4Lmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuICcwJyArIGhleDtcbiAgICB9XG4gICAgcmV0dXJuIGhleDtcbn1cbi8qKlxuICogR2l2ZW4gYSBzaWduZXIgcm9sZSBpbmRleCwgcmV0dXJuIHRoZSBjb2xvciBjb2RlIGZvciB0aGF0IHNpZ25lci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJHQkEocm9sZUluZGV4KSB7XG4gICAgc3dpdGNoIChyb2xlSW5kZXggJSAxMCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gcm9sZUluZGV4ID09PSAwID8gJ3JnYmEoMjU1LCAxOTMsIDcsIDAuNCknIDogJ3JnYmEoMTM0LCAxMzQsIDEzNCwgMC4zKSc7IC8vICNGRkU2OUNcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDE1NiwgMzksIDE3NiwgLjQpJzsgLy8gJyNFM0MzRTknXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgzMywgMTUwLCAyNDMsIC40KSc7IC8vICcjQzFFMUZCJ1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMjIwLCAyMzEsIDExNywgMC4zKSc7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgxMjEsIDEzNCwgMjAzLCAwLjMpJztcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDc3LCAxODIsIDE3MiwgMC4zKSc7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgyNTUsIDIwMiwgMTY1LCAwLjMpJztcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDIsIDI0NywgMTkwLCAwLjMpJztcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDI1NSwgMTM4LCAxMDEsIDAuMyknO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoODIsIDI1NSwgNzksIDAuMyknO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDIyOSwgMTE1LCAxNTUsIDAuMyknO1xuICAgIH1cbn1cbi8qKlxuICogR2l2ZW4gYSByb2xlIG5hbWUsIHJldHVybiBhIGNvbG9yIGNvZGUgZm9yIGl0LiBUaGlzIHdvcmtzIGJ5IGNvbXB1dGluZyBhIGhhc2ggY29kZSBzbyB0aGUgc3BlY2lmaWMgY29sb3IgcmV0dXJuZWRcbiAqIGlzIG5vdCBzcGVjaWZpZWQgZXhwbGljaXRseSwgYnV0IHdpbGwgYmUgdGhlIHNhbWUgZm9yIGV2ZXJ5IGNhbGwgd2l0aCB0aGUgc2FtZSBpbnB1dCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5hbWVUb1JHQkEoc3RyKSB7XG4gICAgaWYgKCEhc3RyKSB7XG4gICAgICAgIHZhciB2YWxpZE51bSA9IHBhcnNlSW50KHN0ci5zbGljZSgtMSksIDEwKTtcbiAgICAgICAgaWYgKCFpc05hTih2YWxpZE51bSkpIHtcbiAgICAgICAgICAgIHN0ciArPSAodmFsaWROdW0gKiA5OSkudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaGFzaCA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBoYXNoID0gc3RyLmNoYXJDb2RlQXQoaSkgKyAoKGhhc2ggPDwgNSkgLSBoYXNoKTtcbiAgICAgICAgfVxuICAgICAgICBoYXNoID0gTWF0aC5yb3VuZChoYXNoIC8gMS4zKTtcbiAgICAgICAgdmFyIGMgPSAoaGFzaCAmIDB4MDBmZmZmMDgpLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB2YXIgaGV4ID0gJyMnICsgJzAwMDAwJy5zdWJzdHJpbmcoMCwgNiAtIGMubGVuZ3RoKSArIGM7XG4gICAgICAgIHZhciByZXN1bHQgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcbiAgICAgICAgdmFyIGNvbG9yID0ge1xuICAgICAgICAgICAgcjogcGFyc2VJbnQocmVzdWx0WzFdLCAxNiksXG4gICAgICAgICAgICBnOiBwYXJzZUludChyZXN1bHRbMl0sIDE2KSxcbiAgICAgICAgICAgIGI6IHBhcnNlSW50KHJlc3VsdFszXSwgMTYpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gXCJyZ2JhKFwiLmNvbmNhdChjb2xvci5yLCBcIiwgXCIpLmNvbmNhdChjb2xvci5nLCBcIiwgXCIpLmNvbmNhdChjb2xvci5iLCBcIiwgMC4yKVwiKTtcbiAgICB9XG59XG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBvYnRhaW4gYSBjb2xvciBjb2RlIGdpdmVuIGEgcm9sZSBuYW1lIGdpdmVuIHZhcmlvdXMgcG9zc2libGUgaW5wdXRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Um9sZUNvbG9yKG5hbWUsIHJvbGVzLCBpbmRleCkge1xuICAgIGlmIChpbmRleCkge1xuICAgICAgICByZXR1cm4gZ2V0UkdCQShpbmRleCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJvbGVzICYmIHJvbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIHJvbGVJbmRleCA9IHJvbGVzLmZpbmRJbmRleChmdW5jdGlvbiAocm9sZSkgeyByZXR1cm4gcm9sZS5uYW1lID09PSBuYW1lOyB9KTtcbiAgICAgICAgaWYgKHJvbGVJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gcm9sZXNbcm9sZUluZGV4XS5yZ2JhIHx8IGdldFJHQkEocm9sZUluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuYW1lVG9SR0JBKG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbmFtZVRvUkdCQShuYW1lKTtcbiAgICB9XG59XG4iLCIvKipcbiAqIEEgVGVtcGxhdGUgZGVmaW5lcyBob3cgYSBWZXJkb2NzIHNpZ25pbmcgZmxvdyB3aWxsIGJlIHBlcmZvcm1lZCwgaW5jbHVkaW5nIGF0dGFjaG1lbnRzLCBzaWduaW5nIGZpZWxkcywgYW5kXG4gKiByZWNpcGllbnRzLlxuICpcbiAqIEBtb2R1bGVcbiAqL1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbi8qKlxuICogR2V0IGFsbCB0ZW1wbGF0ZXMgYWNjZXNzaWJsZSBieSB0aGUgY2FsbGVyLCB3aXRoIG9wdGlvbmFsIGZpbHRlcnMuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZXMoKFZlcmRvY3NFbmRwb2ludC5nZXREZWZhdWx0KCkpO1xuICogYXdhaXQgVGVtcGxhdGVzLmdldFRlbXBsYXRlcygoVmVyZG9jc0VuZHBvaW50LmdldERlZmF1bHQoKSwgeyBpc19zdGFycmVkOiB0cnVlIH0pO1xuICogYXdhaXQgVGVtcGxhdGVzLmdldFRlbXBsYXRlcygoVmVyZG9jc0VuZHBvaW50LmdldERlZmF1bHQoKSwgeyBpc19jcmVhdG9yOiB0cnVlIH0pO1xuICogYXdhaXQgVGVtcGxhdGVzLmdldFRlbXBsYXRlcygoVmVyZG9jc0VuZHBvaW50LmdldERlZmF1bHQoKSwgeyBpc19vcmdhbml6YXRpb246IHRydWUgfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBnZXRUZW1wbGF0ZXMgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHBhcmFtcykge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLnBvc3QoJy90ZW1wbGF0ZXMnLCB7IHBhcmFtczogcGFyYW1zIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogR2V0IG9uZSB0ZW1wbGF0ZSBieSBpdHMgSUQuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGNvbnN0IHRlbXBsYXRlID0gYXdhaXQgVGVtcGxhdGVzLmdldFRlbXBsYXRlKChWZXJkb2NzRW5kcG9pbnQuZ2V0RGVmYXVsdCgpLCAnODNkYTNkNzAtNzg1Ny00MzkyLWI4NzYtYzQ1OTJhMzA0YmM5Jyk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBnZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uIChlbmRwb2ludCwgdGVtcGxhdGVJZCwgc3NyKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAuZ2V0KFwiL3RlbXBsYXRlcy9cIi5jb25jYXQodGVtcGxhdGVJZCkgKyAoc3NyID8gJz9zc3I9dHJ1ZScgOiAnJykpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogR2V0IG93bmVyIGluZm9ybWF0aW9uIGZvciBhIHRlbXBsYXRlLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBjb25zdCB0ZW1wbGF0ZSA9IGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZU93bmVySW5mbygoVmVyZG9jc0VuZHBvaW50LmdldERlZmF1bHQoKSwgJzgzZGEzZDcwLTc4NTctNDM5Mi1iODc2LWM0NTkyYTMwNGJjOScpO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VGVtcGxhdGVPd25lckluZm8gPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHRlbXBsYXRlSWQpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5nZXQoXCIvdGVtcGxhdGVzL1wiLmNvbmNhdCh0ZW1wbGF0ZUlkKSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xuLyoqXG4gKiBDcmVhdGUgYSB0ZW1wbGF0ZS5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1RlbXBsYXRlc30gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcyc7XG4gKlxuICogY29uc3QgbmV3VGVtcGxhdGUgPSBhd2FpdCBUZW1wbGF0ZXMuY3JlYXRlVGVtcGxhdGUoKFZlcmRvY3NFbmRwb2ludC5nZXREZWZhdWx0KCksIHsuLi59KTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGNyZWF0ZVRlbXBsYXRlID0gZnVuY3Rpb24gKGVuZHBvaW50LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5wb3N0KCcvdGVtcGxhdGVzLycsIHBhcmFtcylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xuLyoqXG4gKiBVcGRhdGUgYSB0ZW1wbGF0ZS5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1RlbXBsYXRlc30gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcyc7XG4gKlxuICogY29uc3QgdXBkYXRlZFRlbXBsYXRlID0gYXdhaXQgVGVtcGxhdGVzLnVwZGF0ZVRlbXBsYXRlKChWZXJkb2NzRW5kcG9pbnQuZ2V0RGVmYXVsdCgpLCAnODNkYTNkNzAtNzg1Ny00MzkyLWI4NzYtYzQ1OTJhMzA0YmM5JywgeyBuYW1lOiAnTmV3IE5hbWUnIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlVGVtcGxhdGUgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHRlbXBsYXRlSWQsIHBhcmFtcykge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLnB1dChcIi90ZW1wbGF0ZXMvXCIuY29uY2F0KHRlbXBsYXRlSWQpLCBwYXJhbXMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogRGVsZXRlIGEgdGVtcGxhdGUuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGF3YWl0IFRlbXBsYXRlcy5kZWxldGVUZW1wbGF0ZSgoVmVyZG9jc0VuZHBvaW50LmdldERlZmF1bHQoKSwgJzgzZGEzZDcwLTc4NTctNDM5Mi1iODc2LWM0NTkyYTMwNGJjOScpO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgZGVsZXRlVGVtcGxhdGUgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHRlbXBsYXRlSWQpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5kZWxldGUoXCIvdGVtcGxhdGVzL1wiLmNvbmNhdCh0ZW1wbGF0ZUlkKSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xuLyoqXG4gKiBTZWFyY2ggZm9yIHRlbXBsYXRlcyBtYXRjaGluZyB2YXJpb3VzIGNyaXRlcmlhLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBjb25zdCB7cmVzdWx0LCBwYWdlLCB0b3RhbH0gPSBhd2FpdCBUZW1wbGF0ZXMuc2VhcmNoKChWZXJkb2NzRW5kcG9pbnQuZ2V0RGVmYXVsdCgpLCB7IC4uLiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIHNlYXJjaFRlbXBsYXRlcyA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAgICAgICAgIC5wb3N0KCcvdGVtcGxhdGVzL3NlYXJjaCcsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KV07XG4gICAgfSk7XG59KTsgfTtcbi8qKlxuICogR2V0IGEgc3VtbWFyeSBvZiB0ZW1wbGF0ZSBkYXRhLCB0eXBpY2FsbHkgdXNlZCB0byBwb3B1bGF0ZSBhZG1pbiBwYW5lbCBkYXNoYm9hcmQgcGFnZXMuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGNvbnN0IHN1bW1hcnkgPSBhd2FpdCBUZW1wbGF0ZXMuZ2V0U3VtbWFyeSgoVmVyZG9jc0VuZHBvaW50LmdldERlZmF1bHQoKSwgMCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBnZXRTdW1tYXJ5ID0gZnVuY3Rpb24gKGVuZHBvaW50LCBwYXJhbXMpIHtcbiAgICBpZiAocGFyYW1zID09PSB2b2lkIDApIHsgcGFyYW1zID0ge307IH1cbiAgICByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAgICAgICAgICAgICAucG9zdCgnL3RlbXBsYXRlcy9zdW1tYXJ5JywgcGFyYW1zKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KV07XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcbiIsIi8qKlxuICogR2V0IGFsbCBkZWZpbmVkIHZhbGlkYXRvcnNcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge0RvY3VtZW50c30gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcyc7XG4gKlxuICogYXdhaXQgRG9jdW1lbnRzLmdldERvY3VtZW50cyh0ZW1wbGF0ZUlEKTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGdldFZhbGlkYXRvcnMgPSBmdW5jdGlvbiAoZW5kcG9pbnQpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5nZXQoJy92YWxpZGF0b3JzJylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xuZXhwb3J0IHZhciBnZXRWYWxpZGF0b3IgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHZhbGlkYXRvck5hbWUpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5nZXQoXCIvdmFsaWRhdG9ycy9cIi5jb25jYXQodmFsaWRhdG9yTmFtZSkpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbnZhciBFTUFJTF9SRUdFWCA9IC9eKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xuZXhwb3J0IHZhciBpc1ZhbGlkRW1haWwgPSBmdW5jdGlvbiAoZW1haWwpIHsgcmV0dXJuICEhZW1haWwgJiYgRU1BSUxfUkVHRVgudGVzdChlbWFpbCk7IH07XG4vLyBAc2VlIGh0dHBzOi8vd3d3LnJlZ2V4dGVzdGVyLmNvbS8xOTc4XG52YXIgUEhPTkVfUkVHRVggPSAvKCg/OlxcK3wwMClbMTddKD86IHxcXC0pP3woPzpcXCt8MDApWzEtOV1cXGR7MCwyfSg/OiB8XFwtKT98KD86XFwrfDAwKTFcXC1cXGR7M30oPzogfFxcLSk/KT8oMFxcZHxcXChbMC05XXszfVxcKXxbMS05XXswLDN9KSg/OigoPzogfFxcLSlbMC05XXsyfSl7NH18KCg/OlswLTldezJ9KXs0fSl8KCg/OiB8XFwtKVswLTldezN9KD86IHxcXC0pWzAtOV17NH0pfChbMC05XXs3fSkpLztcbmV4cG9ydCB2YXIgaXNWYWxpZFBob25lID0gZnVuY3Rpb24gKHBob25lKSB7IHJldHVybiAhIXBob25lICYmIFBIT05FX1JFR0VYLnRlc3QocGhvbmUpOyB9O1xuZXhwb3J0IHZhciBpc1ZhbGlkUm9sZU5hbWUgPSBmdW5jdGlvbiAodmFsdWUsIHJvbGVzKSB7IHJldHVybiByb2xlcy5maW5kSW5kZXgoZnVuY3Rpb24gKHJvbGUpIHsgcmV0dXJuIHJvbGUubmFtZSA9PT0gdmFsdWU7IH0pICE9PSAtMTsgfTtcbnZhciBUYWdSZWdFeCA9IC9eW2EtekEtWjAtOS1dezAsMzJ9JC87XG5leHBvcnQgdmFyIGlzVmFsaWRUYWcgPSBmdW5jdGlvbiAodmFsdWUsIHRhZ3MpIHsgcmV0dXJuIFRhZ1JlZ0V4LnRlc3QodmFsdWUpIHx8IHRhZ3MuZmluZEluZGV4KGZ1bmN0aW9uICh0YWcpIHsgcmV0dXJuIHRhZy5uYW1lID09PSB2YWx1ZTsgfSkgIT09IC0xOyB9O1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGdldFJUb3AoeSwgZmllbGRIZWlnaHQsIGlUZXh0SGVpZ2h0LCB5UmF0aW8pIHtcbiAgICByZXR1cm4gaVRleHRIZWlnaHQgLSAoeSArIGZpZWxkSGVpZ2h0KSAqIHlSYXRpbztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRSTGVmdCh4LCByYXRpbykge1xuICAgIHJldHVybiB4ICogcmF0aW87XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UlZhbHVlKHksIHJhdGlvKSB7XG4gICAgcmV0dXJuIHkgKiByYXRpbztcbn1cbmV4cG9ydCBmdW5jdGlvbiBibG9iVG9CYXNlNjQoaW1hZ2UpIHtcbiAgICB2YXIgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZmlsZVJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ1Byb2JsZW0gcmVhZGluZyBibG9iLicpKTtcbiAgICAgICAgfTtcbiAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNvbHZlKGZpbGVSZWFkZXIucmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKGltYWdlKTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXNjYWxlKHIsIG4pIHtcbiAgICByZXR1cm4gciAqIG47XG59XG4iLCIvLyBUaGVzZSBzaG91bGQgcHJvYmFibHkgYWxsIG1vdmUgdG8gSlMtU0RLXG5pbXBvcnQge3Jlc2NhbGV9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9VdGlscy9GaWVsZHMnO1xuLy8gaW1wb3J0IHtnZXRSR0JBfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVXRpbHMvQ29sb3JzJztcbmltcG9ydCB7SVRlbXBsYXRlRmllbGR9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMvVHlwZXMnO1xuaW1wb3J0IHtJRG9jdW1lbnRGaWVsZH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL0VudmVsb3Blcy9UeXBlcyc7XG5pbXBvcnQge0lEb2N1bWVudFBhZ2VJbmZvfSBmcm9tICcuL1R5cGVzJztcblxuZXhwb3J0IGNvbnN0IGludGVnZXJTZXF1ZW5jZSA9IChzdGFydDogbnVtYmVyLCBjb3VudDogbnVtYmVyKTogbnVtYmVyW10gPT5cbiAgQXJyYXkoY291bnQpXG4gICAgLmZpbGwoMSlcbiAgICAubWFwKChfLCBpbmRleCkgPT4gaW5kZXggKyBzdGFydCk7XG5cbmV4cG9ydCBjb25zdCBmdWxsTmFtZVRvSW5pdGlhbHMgPSAobmFtZTogc3RyaW5nKSA9PlxuICBuYW1lXG4gICAgLnNwbGl0KCcgJylcbiAgICAubWFwKHdvcmQgPT4gd29yZFswXSlcbiAgICAuam9pbignJyk7XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0V2lkdGggPSAoZmllbGQ6IElUZW1wbGF0ZUZpZWxkIHwgSURvY3VtZW50RmllbGQpID0+IHtcbiAgc3dpdGNoIChmaWVsZC50eXBlKSB7XG4gICAgY2FzZSAnYXR0YWNobWVudCc6XG4gICAgY2FzZSAncGF5bWVudCc6XG4gICAgICByZXR1cm4gMjQ7XG4gICAgY2FzZSAnY2hlY2tib3gnOlxuICAgIGNhc2UgJ2NoZWNrYm94X2dyb3VwJzpcbiAgICBjYXNlICdyYWRpb19idXR0b25fZ3JvdXAnOlxuICAgICAgcmV0dXJuIDE0O1xuICAgIGNhc2UgJ3NpZ25hdHVyZSc6XG4gICAgY2FzZSAnaW5pdGlhbCc6XG4gICAgICByZXR1cm4gODI7XG4gIH1cblxuICByZXR1cm4gMTUwO1xufTtcblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRIZWlnaHQgPSAoZmllbGQ6IElUZW1wbGF0ZUZpZWxkIHwgSURvY3VtZW50RmllbGQpID0+IHtcbiAgc3dpdGNoIChmaWVsZC50eXBlKSB7XG4gICAgY2FzZSAnYXR0YWNobWVudCc6XG4gICAgY2FzZSAncGF5bWVudCc6XG4gICAgICByZXR1cm4gMjQ7XG4gICAgY2FzZSAnY2hlY2tib3gnOlxuICAgIGNhc2UgJ2NoZWNrYm94X2dyb3VwJzpcbiAgICBjYXNlICdyYWRpb19idXR0b25fZ3JvdXAnOlxuICAgICAgcmV0dXJuIDE0O1xuICAgIGNhc2UgJ3NpZ25hdHVyZSc6XG4gICAgY2FzZSAnaW5pdGlhbCc6XG4gICAgICByZXR1cm4gNDE7XG4gIH1cblxuICByZXR1cm4gNTA7XG59O1xuXG5leHBvcnQgY29uc3Qgc2V0Q29udHJvbFN0eWxlcyA9IChlbDogSFRNTEVsZW1lbnQsIGZpZWxkOiBJVGVtcGxhdGVGaWVsZCB8IElEb2N1bWVudEZpZWxkLCB4U2NhbGU6IG51bWJlciwgeVNjYWxlOiBudW1iZXIsIG9wdGlvbj86IG51bWJlcikgPT4ge1xuICBjb25zdCBzZXR0aW5ncyA9IChmaWVsZCBhcyBJVGVtcGxhdGVGaWVsZCkuc2V0dGluZyB8fCAoZmllbGQgYXMgSURvY3VtZW50RmllbGQpLnNldHRpbmdzO1xuICBsZXQge3ggPSAwLCB5ID0gMCwgd2lkdGggPSBkZWZhdWx0V2lkdGgoZmllbGQpLCBoZWlnaHQgPSBkZWZhdWx0SGVpZ2h0KGZpZWxkKX0gPSBzZXR0aW5ncztcblxuICBjb25zdCBvcHRpb25TZXR0aW5ncyA9IG9wdGlvbiAhPT0gdW5kZWZpbmVkICYmIHNldHRpbmdzLm9wdGlvbnNbb3B0aW9uXSA/IHNldHRpbmdzLm9wdGlvbnNbb3B0aW9uXSA6IG51bGw7XG4gIGlmIChvcHRpb25TZXR0aW5ncykge1xuICAgIHggPSBvcHRpb25TZXR0aW5ncy54ID8/IHg7XG4gICAgeSA9IG9wdGlvblNldHRpbmdzLnkgPz8geTtcbiAgICB3aWR0aCA9IG9wdGlvblNldHRpbmdzLndpZHRoID8/IHdpZHRoO1xuICAgIGhlaWdodCA9IG9wdGlvblNldHRpbmdzLmhlaWdodCA/PyBoZWlnaHQ7XG4gIH1cblxuICBlbC5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDtcbiAgZWwuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcbiAgZWwuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICBlbC5zdHlsZS5sZWZ0ID0gYCR7cmVzY2FsZSh4U2NhbGUsIHgpfXB4YDtcbiAgZWwuc3R5bGUuYm90dG9tID0gYCR7cmVzY2FsZSh5U2NhbGUsIHkpfXB4YDtcbiAgZWwuc3R5bGUudHJhbnNmb3JtID0gYHNjYWxlKCR7eFNjYWxlfSwgJHt5U2NhbGV9KWA7XG4gIC8vIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGZpZWxkWydyZ2JhJ10gfHwgZ2V0UkdCQShyb2xlSW5kZXgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEZpZWxkSWQgPSAoZmllbGQ6IElUZW1wbGF0ZUZpZWxkIHwgSURvY3VtZW50RmllbGQpID0+IHtcbiAgcmV0dXJuIGB2ZXJkb2NzLWRvYy1mbGQtJHtmaWVsZC5uYW1lfWA7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0RmllbGRPcHRpb25JZCA9IChmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCwgaW5kZXg6IG51bWJlcikgPT4ge1xuICByZXR1cm4gYHZlcmRvY3MtZG9jLWZsZC0ke2ZpZWxkLm5hbWV9LSR7aW5kZXh9YDtcbn07XG5cbmludGVyZmFjZSBJRmllbGRPcHRpb25zIHtcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICBlZGl0YWJsZT86IGJvb2xlYW47XG4gIGRyYWdnYWJsZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCByZW5kZXJEb2N1bWVudEZpZWxkID0gKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCB8IElEb2N1bWVudEZpZWxkLCBkb2NQYWdlOiBJRG9jdW1lbnRQYWdlSW5mbywgcm9sZUluZGV4OiBudW1iZXIsIGZpZWxkT3B0aW9uczogSUZpZWxkT3B0aW9ucykgPT4ge1xuICBjb25zdCB7ZGlzYWJsZWQgPSBmYWxzZSwgZWRpdGFibGUgPSBmYWxzZSwgZHJhZ2dhYmxlID0gZmFsc2V9ID0gZmllbGRPcHRpb25zO1xuICBjb25zdCBjb250cm9sc0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRvY1BhZ2UuY29udGFpbmVySWQgKyAnLWNvbnRyb2xzJyk7XG4gIGlmICghY29udHJvbHNEaXYpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2l0Y2ggKGZpZWxkLnR5cGUpIHtcbiAgICBjYXNlICdhdHRhY2htZW50JzpcbiAgICBjYXNlICdkYXRlJzpcbiAgICBjYXNlICdkcm9wZG93bic6XG4gICAgY2FzZSAnaW5pdGlhbCc6XG4gICAgY2FzZSAncGF5bWVudCc6XG4gICAgY2FzZSAnc2lnbmF0dXJlJzpcbiAgICBjYXNlICd0aW1lc3RhbXAnOlxuICAgIGNhc2UgJ3RleHRhcmVhJzpcbiAgICBjYXNlICd0ZXh0Ym94Jzoge1xuICAgICAgY29uc3QgaWQgPSBnZXRGaWVsZElkKGZpZWxkKTtcbiAgICAgIGNvbnN0IGV4aXN0aW5nRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICBpZiAoZXhpc3RpbmdGaWVsZCkge1xuICAgICAgICBzZXRDb250cm9sU3R5bGVzKGV4aXN0aW5nRmllbGQsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVsOiBhbnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGB2ZXJkb2NzLWZpZWxkLSR7ZmllbGQudHlwZX1gKTtcbiAgICAgIGVsLmZpZWxkID0gZmllbGQ7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2lkJywgaWQpO1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdyb2xlSW5kZXgnLCByb2xlSW5kZXgpO1xuXG4gICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIC0xKTtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCd0YWJJbmRleCcsIDEpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZWRpdGFibGUpIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdlZGl0YWJsZScsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZHJhZ2dhYmxlKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBzZXRDb250cm9sU3R5bGVzKGVsLCBmaWVsZCwgZG9jUGFnZS54U2NhbGUsIGRvY1BhZ2UueVNjYWxlKTtcbiAgICAgIGNvbnRyb2xzRGl2LmFwcGVuZENoaWxkKGVsKTtcblxuICAgICAgcmV0dXJuIGVsO1xuICAgIH1cblxuICAgIGNhc2UgJ2NoZWNrYm94X2dyb3VwJzpcbiAgICAgIHJldHVybiAoKGZpZWxkIGFzIGFueSkuc2V0dGluZ3MgfHwgKGZpZWxkIGFzIGFueSkuc2V0dGluZyB8fCB7fSkub3B0aW9ucy5tYXAoKF8sIGNoZWNrYm94SW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBnZXRGaWVsZE9wdGlvbklkKGZpZWxkLCBjaGVja2JveEluZGV4KTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nRmllbGQpIHtcbiAgICAgICAgICBzZXRDb250cm9sU3R5bGVzKGV4aXN0aW5nRmllbGQsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNiRWw6IGFueSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYHZlcmRvY3MtZmllbGQtY2hlY2tib3hgKTtcbiAgICAgICAgY2JFbC5maWVsZCA9IGZpZWxkO1xuICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG4gICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdyb2xlSW5kZXgnLCByb2xlSW5kZXgpO1xuICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgnb3B0aW9uJywgY2hlY2tib3hJbmRleCk7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHNldENvbnRyb2xTdHlsZXMoY2JFbCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSwgY2hlY2tib3hJbmRleCk7XG4gICAgICAgIGNvbnRyb2xzRGl2LmFwcGVuZENoaWxkKGNiRWwpO1xuXG4gICAgICAgIHJldHVybiBjYkVsO1xuICAgICAgfSk7XG5cbiAgICBjYXNlICdyYWRpb19idXR0b25fZ3JvdXAnOlxuICAgICAgcmV0dXJuICgoZmllbGQgYXMgYW55KS5zZXR0aW5ncyB8fCAoZmllbGQgYXMgYW55KS5zZXR0aW5nIHx8IHt9KS5vcHRpb25zLm1hcCgoXywgYnV0dG9uSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBnZXRGaWVsZE9wdGlvbklkKGZpZWxkLCBidXR0b25JbmRleCk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICAgIGlmIChleGlzdGluZ0ZpZWxkKSB7XG4gICAgICAgICAgc2V0Q29udHJvbFN0eWxlcyhleGlzdGluZ0ZpZWxkLCBmaWVsZCwgZG9jUGFnZS54U2NhbGUsIGRvY1BhZ2UueVNjYWxlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByYWRpb0VsOiBhbnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGB2ZXJkb2NzLWZpZWxkLXJhZGlvLWJ1dHRvbmApO1xuICAgICAgICByYWRpb0VsLmZpZWxkID0gZmllbGQ7XG4gICAgICAgIHJhZGlvRWwuc2V0QXR0cmlidXRlKCdpZCcsIGlkKTtcbiAgICAgICAgcmFkaW9FbC5zZXRBdHRyaWJ1dGUoJ3JvbGVJbmRleCcsIHJvbGVJbmRleCk7XG4gICAgICAgIHJhZGlvRWwuc2V0QXR0cmlidXRlKCdvcHRpb24nLCBidXR0b25JbmRleCk7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgIHJhZGlvRWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHNldENvbnRyb2xTdHlsZXMocmFkaW9FbCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSwgYnV0dG9uSW5kZXgpO1xuICAgICAgICBjb250cm9sc0Rpdi5hcHBlbmRDaGlsZChyYWRpb0VsKTtcblxuICAgICAgICByZXR1cm4gcmFkaW9FbDtcbiAgICAgIH0pO1xuXG4gICAgLy8gY2FzZSAnYXR0YWNobWVudCc6XG4gICAgLy8gICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZlcmRvY3MtZmllbGQtYXR0YWNobWVudCcpO1xuICAgIC8vICAgZWwuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHJlc3VsdCB8fCAnJyk7XG4gICAgLy8gICBicmVhaztcbiAgICAvLyBjYXNlICdwYXltZW50JzpcbiAgICAvLyAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmVyZG9jcy1maWVsZC1wYXltZW50Jyk7XG4gICAgLy8gICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBTa2lwcGluZyB1bnN1cHBvcnRlZCBmaWVsZCB0eXBlJywgZmllbGQpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBnZXRSb2xlSW5kZXggPSAocm9sZXM6IHN0cmluZ1tdLCByb2xlOiBzdHJpbmcpID0+IHJvbGVzLmluZGV4T2Yocm9sZSkgfHwgMDtcblxuLy8gVE9ETzogV2UgY2FuIGNsZWFuIHRoaXMgdXAgYSBsb3QgaWYgd2UgYWx0ZXIgdGhlIEFQSSB0byBlbWl0IGJvdGggc2V0dGluZyBhbmQgc2V0dGluZ3MgcmVnYXJkbGVzcyBvZiB0aGUgc291cmNlIHR5cGUsXG4vLyAgIGJ1dCB0aGVuIG1lcmdlIHRoZSBTREsgdHlwZXMgdG8gZW5jb3VyYWdlIGRldmVsb3BlcnMgdG8gdXNlIGp1c3QgYHNldHRpbmdzYC5cbmV4cG9ydCBjb25zdCBnZXRGaWVsZFNldHRpbmdzID0gKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCB8IElEb2N1bWVudEZpZWxkKSA9PiB7XG4gIGlmICgoZmllbGQgYXMgSVRlbXBsYXRlRmllbGQpLnNldHRpbmcpIHtcbiAgICByZXR1cm4gKGZpZWxkIGFzIElUZW1wbGF0ZUZpZWxkKS5zZXR0aW5nO1xuICB9XG5cbiAgaWYgKChmaWVsZCBhcyBJRG9jdW1lbnRGaWVsZCkuc2V0dGluZ3MpIHtcbiAgICByZXR1cm4gKGZpZWxkIGFzIElEb2N1bWVudEZpZWxkKS5zZXR0aW5ncztcbiAgfVxuXG4gIHJldHVybiB7eDogMCwgeTogMCwgcmVxdWlyZWQ6IGZhbHNlLCBkaXNhYmxlZDogZmFsc2UsIHJlc3VsdDogJycsIHZhbHVlOiAnJ307XG59O1xuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBzYWZlbHkgc2V0L3VwZGF0ZSBjb21wb25lbnRzIGluIGEgQ1NTIHRyYW5zZm9ybSBhdHRyaWJ1dGUuIFRyYW5zZm9ybSBpcyBub3JtYWxseSBzZXQgYXMgYSBzdHJpbmcgb2ZcbiAqIGBvcGVyYXRpb24xKHBhcmFtKSBvcGVyYXRpb24yKHBhcmFtKSAuLi5gIGNvbXBvbmVudHMsIHdoaWNoIG1ha2VzIHVwZGF0aW5nIHRoZW0gYSBiaXQgb2YgYSBwYWluLiBUaGlzIHdpbGwgcmVtb3ZlIHRoZVxuICogc3BlY2lmaWVkIGNvbXBvbmVudCBpZiBpdCdzIGFscmVhZHkgc2V0IGFuZCByZXBsYWNlIGl0IHdpdGggdGhlIG5ldyB2YWx1ZSwgd2l0aG91dCB0b3VjaGluZyB0aGUgb3RoZXIgY29tcG9uZW50cyB0aGF0XG4gKiBtYXkgYWxyZWFkeSBiZSBzZXQuIE5vdGUgdGhhdCB0aGlzIG9wZXJhdGlvbiBtb3ZlcyB0aGUgY29tcG9uZW50IHRvIHRoZSBlbmQgb2YgdGhlIHRyYW5zZm9ybSBjaGFpbiBzbyBpdCdzIG5vdCBtZWFudFxuICogdG8gYmUgdXNlZCBmb3Igb3JkZXItc2Vuc2l0aXZlIGNvbXBvbmVudHMgZS5nLiB0cmFuc2xhdGUtdGhlbi1yb3RhdGUuXG4gKi9cbmV4cG9ydCBjb25zdCB1cGRhdGVDc3NUcmFuc2Zvcm0gPSAoZWw6IEhUTUxFbGVtZW50LCBrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4ge1xuICAvLyBlLmcuICdzY2FsZSgxLjg3OTA4LCAxLjg3OTA4KSB0cmFuc2xhdGUoMHB4LCAwcHgpOydcbiAgY29uc3QgY3VycmVudFRyYW5zZm9ybSA9IGVsLnN0eWxlLnRyYW5zZm9ybTtcbiAgLy8gZS5nLiBbJ3NjYWxlKDEuODc5MDgsIDEuODc5MDgpJywgJ3NjYWxlJywgJzEuODc5MDgsIDEuODc5MDgnLCAuLi5dLCBbICd0cmFuc2xhdGUoMHB4LCAwcHgpJywgJ3RyYW5zbGF0ZScsICcwcHgsIDBweCddXVxuICBjb25zdCBjb21wb25lbnRzID0gWy4uLmN1cnJlbnRUcmFuc2Zvcm0ubWF0Y2hBbGwoLyhcXHcrKVxcKChbXildKilcXCkvZ2kpXTtcbiAgZWwuc3R5bGUudHJhbnNmb3JtID0gW1xuICAgIGNvbXBvbmVudHMgLy9cbiAgICAgIC5maWx0ZXIoY29tcG9uZW50ID0+IGNvbXBvbmVudFsxXSAhPT0ga2V5KSAvLyBSZW1vdmUgdGhlIGVudHJ5IGlmIGl0J3MgYWxyZWFkeSBzZXRcbiAgICAgIC5tYXAoY29tcG9uZW50ID0+IGNvbXBvbmVudFswXSksIC8vIENvbnZlcnQgYmFjayB0aGUgcmVtYWluaW5nIGVudHJpZXNcbiAgICBgJHtrZXl9KCR7dmFsdWV9KWAsXG4gIF0uam9pbignICcpO1xufTtcbiIsIkBpbXBvcnQgJy4uLy4uLy4uL3RoZW1lLnNjc3MnO1xuXG52ZXJkb2NzLXNlbmQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBwYWRkaW5nOiAxMHB4O1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJhY2tncm91bmQ6ICNmZmZmZmY7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGZvbnQtZmFtaWx5OiAkdmVyZG9jcy1wcmltYXJ5LWZvbnQ7XG5cbiAgLnJlY2lwaWVudHMge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgfVxuXG4gIC8vIFRvIGF2b2lkIHRoZSBuZWVkIHRvIGNvbXB1dGUgdGhpbmdzIGxpa2UgaGVpZ2h0cywgdGhpcyBsYXllciBpcyBzaW1wbHkgZGlzcGxheWVkIFwib24gdG9wXCIgb2YgYWxsIHRoZSBsZXZlbCByb3dzLiBJdHNcbiAgLy8gYmFja2dyb3VuZCBvYnNjdXJlcyB0aGUgaG9yaXpvbnRhbCBsaW5lcy5cbiAgLmxlZnQtbGluZSB7XG4gICAgdG9wOiAzMnB4O1xuICAgIGxlZnQ6IDIwcHg7XG4gICAgei1pbmRleDogMTtcbiAgICB3aWR0aDogMTJweDtcbiAgICBib3R0b206IDMwcHg7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7XG4gICAgYm9yZGVyLWxlZnQ6IDNweCBkb3R0ZWQgIzliOWI5YjtcbiAgfVxuXG4gIC5sZXZlbCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBjb2x1bW4tZ2FwOiAxMHB4O1xuICAgIG1hcmdpbi1sZWZ0OiA1MHB4O1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgIHBhZGRpbmc6IDhweCAwIDRweCAwO1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjOTc5Nzk3NDQ7XG5cbiAgICAubGV2ZWwtaWNvbiB7XG4gICAgICB0b3A6IDE0cHg7XG4gICAgICB6LWluZGV4OiAyO1xuICAgICAgbGVmdDogLTQwcHg7XG4gICAgICB3aWR0aDogMjRweDtcbiAgICAgIGhlaWdodDogMjRweDtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGZpbGw6ICMwMDAwMDA4OTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAucmVjaXBpZW50IHtcbiAgICAgIGhlaWdodDogMzBweDtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4OiAwIDAgMzBweDtcbiAgICAgIGNvbG9yOiAjMDAwMDAwO1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDMwcHg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgYmFja2dyb3VuZDogI2RkZGRkZDtcbiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICBwYWRkaW5nOiAycHggMTBweCAycHggMTRweDtcblxuICAgICAgLmljb24ge1xuICAgICAgICB3aWR0aDogMjJweDtcbiAgICAgICAgaGVpZ2h0OiAyMnB4O1xuICAgICAgICBmbGV4OiAwIDAgMjJweDtcbiAgICAgICAgbWFyZ2luOiAwIDAgMCAxMHB4O1xuXG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgd2lkdGg6IDIycHg7XG4gICAgICAgICAgaGVpZ2h0OiAyMnB4O1xuICAgICAgICAgIGZpbGw6ICMzMzMzMzM7XG4gICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC5jb21wbGV0ZSB7XG4gICAgICBmbGV4OiAxO1xuICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGNvbG9yOiAjMDAwMDAwO1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICBwYWRkaW5nOiAzcHggMTBweCAzcHggMnB4O1xuICAgIH1cbiAgfVxuXG4gIC5idXR0b25zIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgY29sdW1uLWdhcDogMTVweDtcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICB9XG5cbiAgdmVyZG9jcy1jb250YWN0LXBpY2tlciB7XG4gICAgbGVmdDogMDtcbiAgICB0b3A6IDQxcHg7XG4gICAgei1pbmRleDogMTA7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGRkZGQ7XG4gICAgYm94LXNoYWRvdzogMCAwIDZweCAzcHggcmdiKDAgMCAwIC8gMTAlKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtWZXJkb2NzRW5kcG9pbnR9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkayc7XG5pbXBvcnQge2dldFJHQkF9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9VdGlscy9Db2xvcnMnO1xuaW1wb3J0IHtnZXRUZW1wbGF0ZX0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcy9UZW1wbGF0ZXMnO1xuaW1wb3J0IHtJUm9sZSwgSVRlbXBsYXRlfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzL1R5cGVzJztcbmltcG9ydCB7aXNWYWxpZEVtYWlsLCBpc1ZhbGlkUGhvbmV9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMvVmFsaWRhdG9ycyc7XG5pbXBvcnQge0NvbXBvbmVudCwgUHJvcCwgU3RhdGUsIGgsIEV2ZW50LCBFdmVudEVtaXR0ZXIsIEhvc3R9IGZyb20gJ0BzdGVuY2lsL2NvcmUnO1xuaW1wb3J0IHtnZXRSb2xlSW5kZXh9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCB7U0RLRXJyb3J9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2Vycm9ycyc7XG5cbi8vIFRPRE86IEV2YWx1YXRpbmcgdGhpcyBwYXR0ZXJuIGZvciBzaW1wbGUgaWNvbnMgdnMuIGltcG9ydGluZyBleHRlcm5hbCBTVkcgZmlsZXMuIFRyeSB0byBzdGFuZGFyZGl6ZSBvbiBhbiBhcHByb2FjaCBzb29uLlxuY29uc3QgZWRpdEljb24gPVxuICAnPHN2ZyBmb2N1c2FibGU9XCJmYWxzZVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB0YWJpbmRleD1cIi0xXCI+PHBhdGggZD1cIk0zIDE3LjI1VjIxaDMuNzVMMTcuODEgOS45NGwtMy43NS0zLjc1TDMgMTcuMjV6TTIwLjcxIDcuMDRjLjM5LS4zOS4zOS0xLjAyIDAtMS40MWwtMi4zNC0yLjM0YS45OTU5Ljk5NTkgMCAwIDAtMS40MSAwbC0xLjgzIDEuODMgMy43NSAzLjc1IDEuODMtMS44M3pcIj48L3BhdGg+PC9zdmc+JztcblxuY29uc3Qgc3RhcnRJY29uID1cbiAgJzxzdmcgZm9jdXNhYmxlPVwiZmFsc2VcIiBhcmlhLWhpZGRlbj1cInRydWVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgdGFiaW5kZXg9XCItMVwiPjxwYXRoIGQ9XCJNMiAxMkMyIDYuNDggNi40OCAyIDEyIDJzMTAgNC40OCAxMCAxMC00LjQ4IDEwLTEwIDEwUzIgMTcuNTIgMiAxMnptMTAgNmMzLjMxIDAgNi0yLjY5IDYtNnMtMi42OS02LTYtNi02IDIuNjktNiA2IDIuNjkgNiA2IDZ6XCI+PC9wYXRoPjwvc3ZnPic7XG5cbmNvbnN0IHN0ZXBJY29uID1cbiAgJzxzdmcgZm9jdXNhYmxlPVwiZmFsc2VcIiBhcmlhLWhpZGRlbj1cInRydWVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgdGFiaW5kZXg9XCItMVwiPjxwYXRoIGQ9XCJNMTIgMkM4LjEzIDIgNSA1LjEzIDUgOWMwIDUuMjUgNyAxMyA3IDEzczctNy43NSA3LTEzYzAtMy44Ny0zLjEzLTctNy03em0wIDkuNWMtMS4zOCAwLTIuNS0xLjEyLTIuNS0yLjVzMS4xMi0yLjUgMi41LTIuNSAyLjUgMS4xMiAyLjUgMi41LTEuMTIgMi41LTIuNSAyLjV6XCI+PC9wYXRoPjwvc3ZnPic7XG5cbmNvbnN0IGRvbmVJY29uID1cbiAgJzxzdmcgZm9jdXNhYmxlPVwiZmFsc2VcIiBhcmlhLWhpZGRlbj1cInRydWVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgdGFiaW5kZXg9XCItMVwiPjxwYXRoIGQ9XCJtMTggNy0xLjQxLTEuNDEtNi4zNCA2LjM0IDEuNDEgMS40MUwxOCA3em00LjI0LTEuNDFMMTEuNjYgMTYuMTcgNy40OCAxMmwtMS40MSAxLjQxTDExLjY2IDE5bDEyLTEyLTEuNDItMS40MXpNLjQxIDEzLjQxIDYgMTlsMS40MS0xLjQxTDEuODMgMTIgLjQxIDEzLjQxelwiPjwvcGF0aD48L3N2Zz4nO1xuXG50eXBlIFRBbm5vdGF0ZWRSb2xlID0gSVJvbGUgJiB7aWQ6IHN0cmluZ307XG5cbi8qKlxuICogRGlzcGxheSBhIGZvcm0gdG8gY29sbGVjdCByZWNpcGllbnQgaW5mb3JtYXRpb24gZm9yIGEgbmV3IERvY3VtZW50LiBJZiB1c2VkIGFub255bW91c2x5LCB0aGUgc3BlY2lmaWVkIGB0ZW1wbGF0ZUlkYCBtdXN0IGJlIHB1YmxpYy5cbiAqIElmIHRoZSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWRcbiAqL1xuQENvbXBvbmVudCh7XG4gIHRhZzogJ3ZlcmRvY3Mtc2VuZCcsXG4gIHN0eWxlVXJsOiAndmVyZG9jcy1zZW5kLnNjc3MnLFxuICBzaGFkb3c6IGZhbHNlLFxufSlcbmV4cG9ydCBjbGFzcyBWZXJkb2NzU2VuZCB7XG4gIC8qKlxuICAgKiBUaGUgZW5kcG9pbnQgdG8gdXNlIHRvIGNvbW11bmljYXRlIHdpdGggVmVyZG9jcy4gSWYgbm90IHNldCwgdGhlIGRlZmF1bHQgZW5kcG9pbnQgd2lsbCBiZSB1c2VkLlxuICAgKi9cbiAgQFByb3AoKSBlbmRwb2ludDogVmVyZG9jc0VuZHBvaW50ID0gVmVyZG9jc0VuZHBvaW50LmdldERlZmF1bHQoKTtcblxuICAvKipcbiAgICogVGhlIElEIG9mIHRoZSB0ZW1wbGF0ZSB0byBjcmVhdGUgdGhlIGRvY3VtZW50IGZyb20uXG4gICAqL1xuICBAUHJvcCgpIHRlbXBsYXRlSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgdXNlciBjb21wbGV0ZWQgdGhlIGZvcm0gYW5kIGNsaWNrZWQgc2VuZC5cbiAgICovXG4gIEBFdmVudCh7Y29tcG9zZWQ6IHRydWV9KSBzZW5kOiBFdmVudEVtaXR0ZXI8e3JlY2lwaWVudHNBc3NpZ25lZDogSVJvbGVbXX0+O1xuXG4gIC8qKlxuICAgKiBUaGUgdXNlciBjYW5jZWxlZCB0aGUgcHJvY2Vzcy5cbiAgICovXG4gIEBFdmVudCh7Y29tcG9zZWQ6IHRydWV9KSBjYW5jZWw6IEV2ZW50RW1pdHRlcjtcblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgaWYgYW4gZXJyb3Igb2NjdXJzLiBUaGUgZXZlbnQgZGV0YWlscyB3aWxsIGNvbnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIGVycm9yLiBNb3N0IGVycm9ycyB3aWxsXG4gICAqIHRlcm1pbmF0ZSB0aGUgcHJvY2VzcywgYW5kIHRoZSBjYWxsaW5nIGFwcGxpY2F0aW9uIHNob3VsZCBjb3JyZWN0IHRoZSBjb25kaXRpb24gYW5kIHJlLXJlbmRlciB0aGUgY29tcG9uZW50LlxuICAgKi9cbiAgQEV2ZW50KHtjb21wb3NlZDogdHJ1ZX0pIHNka0Vycm9yOiBFdmVudEVtaXR0ZXI8U0RLRXJyb3I+O1xuXG4gIEBTdGF0ZSgpIHRlbXBsYXRlOiBJVGVtcGxhdGUgfCBudWxsID0gbnVsbDtcblxuICBAU3RhdGUoKSBwZGZVcmwgPSBudWxsO1xuXG4gIEBTdGF0ZSgpIGNvbnRhaW5lcklkID0gYHZlcmRvY3Mtc2VuZC0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxMSl9YDtcblxuICBAU3RhdGUoKSByb2xlc0F0TGV2ZWw6IFJlY29yZDxudW1iZXIsIFRBbm5vdGF0ZWRSb2xlW10+ID0ge307XG5cbiAgQFN0YXRlKCkgc2hvd1BpY2tlckZvcklkID0gJyc7XG5cbiAgQFN0YXRlKCkgc2Vzc2lvbkNvbnRhY3RzID0gW107XG5cbiAgQFN0YXRlKCkgcmVjaXBpZW50c0Fzc2lnbmVkOiBSZWNvcmQ8c3RyaW5nLCBUQW5ub3RhdGVkUm9sZT4gPSB7fTtcblxuICBsZXZlbHM6IG51bWJlcltdID0gW107XG5cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgdGhpcy5zZXNzaW9uQ29udGFjdHMgPSBbXTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5lbmRwb2ludC5sb2FkU2Vzc2lvbigpO1xuXG4gICAgICBpZiAocmVzdWx0LnNlc3Npb24/LnByb2ZpbGUpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uQ29udGFjdHMucHVzaCh7XG4gICAgICAgICAgaWQ6IHJlc3VsdC5zZXNzaW9uLnByb2ZpbGUuaWQsXG4gICAgICAgICAgbmFtZTogYCR7cmVzdWx0LnNlc3Npb24ucHJvZmlsZS5maXJzdF9uYW1lfSAke3Jlc3VsdC5zZXNzaW9uLnByb2ZpbGUubGFzdF9uYW1lfWAsXG4gICAgICAgICAgZW1haWw6IHJlc3VsdC5zZXNzaW9uLnByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgcGhvbmU6IHJlc3VsdC5zZXNzaW9uLnByb2ZpbGUucGhvbmUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBsb2FkaW5nIHNlc3Npb24nLCBlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjb21wb25lbnREaWRMb2FkKCkge1xuICAgIGNvbnNvbGUubG9nKCdbU0VORF0gU2hvd2luZyB0ZW1wbGF0ZScsIHRoaXMudGVtcGxhdGVJZCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coYFtTRU5EXSBMb2FkaW5nIHRlbXBsYXRlICR7dGhpcy50ZW1wbGF0ZUlkfWApO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSBhd2FpdCBnZXRUZW1wbGF0ZSh0aGlzLmVuZHBvaW50LCB0aGlzLnRlbXBsYXRlSWQpO1xuXG4gICAgICBjb25zb2xlLmxvZygnW1NFTkRdIEdvdCB0ZW1wbGF0ZScsIHRlbXBsYXRlKTtcbiAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcblxuICAgICAgaWYgKHRlbXBsYXRlPy5yb2xlcykge1xuICAgICAgICBjb25zdCByb2xlc0F0TGV2ZWw6IFJlY29yZDxudW1iZXIsIFRBbm5vdGF0ZWRSb2xlW10+ID0ge307XG5cbiAgICAgICAgdGVtcGxhdGUucm9sZXMuZm9yRWFjaChyb2xlID0+IHtcbiAgICAgICAgICBjb25zdCBsZXZlbCA9IHJvbGUuc2VxdWVuY2UgLSAxO1xuICAgICAgICAgIHJvbGVzQXRMZXZlbFtsZXZlbF0gfHw9IFtdO1xuICAgICAgICAgIGNvbnN0IGlkID0gYHItJHtsZXZlbH0tJHtyb2xlc0F0TGV2ZWxbbGV2ZWxdLmxlbmd0aH1gO1xuICAgICAgICAgIHJvbGVzQXRMZXZlbFtsZXZlbF0ucHVzaCh7Li4ucm9sZSwgaWR9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yb2xlc0F0TGV2ZWwgPSByb2xlc0F0TGV2ZWw7XG4gICAgICAgIHRoaXMubGV2ZWxzID0gT2JqZWN0LmtleXMocm9sZXNBdExldmVsKS5tYXAobGV2ZWxTdHIgPT4gK2xldmVsU3RyKTtcbiAgICAgICAgdGhpcy5sZXZlbHMuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbU0VORF0gRXJyb3IgZ2V0dGluZyB0ZW1wbGF0ZScsIGUpO1xuICAgIH1cbiAgfVxuXG4gIGdldExldmVsSWNvbihsZXZlbDogbnVtYmVyKSB7XG4gICAgaWYgKGxldmVsIDwgMCkge1xuICAgICAgcmV0dXJuIDxkaXYgY2xhc3M9XCJsZXZlbC1pY29uXCIgaW5uZXJIVE1MPXtzdGFydEljb259IC8+O1xuICAgIH0gZWxzZSBpZiAobGV2ZWwgPj0gdGhpcy5sZXZlbHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gPGRpdiBjbGFzcz1cImxldmVsLWljb25cIiBpbm5lckhUTUw9e2RvbmVJY29ufSAvPjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDxkaXYgY2xhc3M9XCJsZXZlbC1pY29uXCIgaW5uZXJIVE1MPXtzdGVwSWNvbn0gLz47XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlU2VsZWN0Q29udGFjdChlOiBhbnksIHJvbGU6IFRBbm5vdGF0ZWRSb2xlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuZGV0YWlsOyAvLyBJQ29udGFjdFNlbGVjdEV2ZW50XG4gICAgdGhpcy5yZWNpcGllbnRzQXNzaWduZWRbcm9sZS5pZF0gPSB7Li4ucm9sZSwgLi4uZS5kZXRhaWx9O1xuICAgIHRoaXMuc2hvd1BpY2tlckZvcklkID0gJyc7XG4gIH1cblxuICBoYW5kbGVDbGlja1JvbGUoZTogYW55LCByb2xlOiBUQW5ub3RhdGVkUm9sZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5zaG93UGlja2VyRm9ySWQgPSByb2xlLmlkO1xuICB9XG5cbiAgaGFuZGxlU2VuZChlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLnNlbmQ/LmVtaXQoe3JlY2lwaWVudHNBc3NpZ25lZDogT2JqZWN0LnZhbHVlcyh0aGlzLnJlY2lwaWVudHNBc3NpZ25lZCl9KTtcbiAgfVxuXG4gIGhhbmRsZUNhbmNlbChlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLmNhbmNlbD8uZW1pdCgpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHJvbGVOYW1lcyA9IHRoaXMudGVtcGxhdGU/LnJvbGVzPy5tYXAocm9sZSA9PiByb2xlLm5hbWUpIHx8IFtdO1xuICAgIGNvbnN0IGFsbFJlY2lwaWVudHNBc3NpZ25lZCA9XG4gICAgICBPYmplY3QudmFsdWVzKHRoaXMucmVjaXBpZW50c0Fzc2lnbmVkKS5maWx0ZXIocmVjaXBpZW50ID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3ZhbGlkIGVtYWlsJywgaXNWYWxpZEVtYWlsKHJlY2lwaWVudC5lbWFpbCksIHJlY2lwaWVudC5lbWFpbCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd2YWxpZCBwaG9uZScsIGlzVmFsaWRQaG9uZShyZWNpcGllbnQucGhvbmUpLCByZWNpcGllbnQucGhvbmUpO1xuICAgICAgICByZXR1cm4gaXNWYWxpZEVtYWlsKHJlY2lwaWVudC5lbWFpbCkgfHwgaXNWYWxpZFBob25lKHJlY2lwaWVudC5waG9uZSk7XG4gICAgICB9KS5sZW5ndGggPj0gdGhpcy50ZW1wbGF0ZT8ucm9sZXMubGVuZ3RoO1xuICAgIGNvbnNvbGUubG9nKCdhc3NpZ25lZCcsIGFsbFJlY2lwaWVudHNBc3NpZ25lZCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEhvc3QgY2xhc3M9e3t9fT5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJlY2lwaWVudHNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibGVmdC1saW5lXCIgLz5cbiAgICAgICAgICA8ZGl2IGNsYXNzPXtgbGV2ZWwgbGV2ZWwtc3RhcnRgfT5cbiAgICAgICAgICAgIHt0aGlzLmdldExldmVsSWNvbigtMSl9XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29tcGxldGVcIj5TZW5kIERvY3VtZW50PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7dGhpcy5sZXZlbHMubWFwKGxldmVsID0+IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9e2BsZXZlbCBsZXZlbC0ke2xldmVsfWB9PlxuICAgICAgICAgICAgICB7dGhpcy5nZXRMZXZlbEljb24obGV2ZWwpfVxuXG4gICAgICAgICAgICAgIHt0aGlzLnJvbGVzQXRMZXZlbFtsZXZlbF0ubWFwKHJvbGUgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZWNpcGllbnRcIiBzdHlsZT17e2JhY2tncm91bmRDb2xvcjogZ2V0UkdCQShnZXRSb2xlSW5kZXgocm9sZU5hbWVzLCByb2xlLm5hbWUpKX19IG9uQ2xpY2s9e2UgPT4gdGhpcy5oYW5kbGVDbGlja1JvbGUoZSwgcm9sZSl9PlxuICAgICAgICAgICAgICAgICAge3RoaXMucmVjaXBpZW50c0Fzc2lnbmVkW3JvbGUuaWRdPy5mdWxsX25hbWUgPz8gcm9sZS5uYW1lfVxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImljb25cIiBpbm5lckhUTUw9e2VkaXRJY29ufSAvPlxuICAgICAgICAgICAgICAgICAge3RoaXMuc2hvd1BpY2tlckZvcklkID09PSByb2xlLmlkICYmIChcbiAgICAgICAgICAgICAgICAgICAgPHZlcmRvY3MtY29udGFjdC1waWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNhbmNlbD17KCkgPT4gKHRoaXMuc2hvd1BpY2tlckZvcklkID0gJycpfVxuICAgICAgICAgICAgICAgICAgICAgIG9uTmV4dD17ZSA9PiB0aGlzLmhhbmRsZVNlbGVjdENvbnRhY3QoZSwgcm9sZSl9XG4gICAgICAgICAgICAgICAgICAgICAgY29udGFjdFN1Z2dlc3Rpb25zPXt0aGlzLnNlc3Npb25Db250YWN0c31cbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJvbGU9e3RoaXMucmVjaXBpZW50c0Fzc2lnbmVkW3JvbGUuaWRdID8/IHJvbGV9XG4gICAgICAgICAgICAgICAgICAgICAgb25TZWFyY2hDb250YWN0cz17ZSA9PiBjb25zb2xlLmxvZygnU2VhcmNoJywgZS5kZXRhaWwpfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApKX1cblxuICAgICAgICAgIDxkaXYgY2xhc3M9e2BsZXZlbCBsZXZlbC1kb25lYH0+XG4gICAgICAgICAgICB7dGhpcy5nZXRMZXZlbEljb24odGhpcy5sZXZlbHMubGVuZ3RoKX1cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb21wbGV0ZVwiPkRvY3VtZW50IENvbXBsZXRlPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJidXR0b25zXCI+XG4gICAgICAgICAgPHZlcmRvY3MtYnV0dG9uIGxhYmVsPVwiQ2FuY2VsXCIgc2l6ZT1cInNtYWxsXCIgdmFyaWFudD1cIm91dGxpbmVcIiBvbkNsaWNrPXtlID0+IHRoaXMuaGFuZGxlQ2FuY2VsKGUpfSAvPlxuICAgICAgICAgIDx2ZXJkb2NzLWJ1dHRvbiBsYWJlbD1cIlNlbmRcIiBzaXplPVwic21hbGxcIiBkaXNhYmxlZD17IWFsbFJlY2lwaWVudHNBc3NpZ25lZH0gb25DbGljaz17ZSA9PiB0aGlzLmhhbmRsZVNlbmQoZSl9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Ib3N0PlxuICAgICk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=
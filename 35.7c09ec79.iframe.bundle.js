(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"./dist/esm/Token-54690789.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return decodeAccessTokenBody}));__webpack_require__("./node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.string.starts-with.js");var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,decodeJWTBody=function decodeJWTBody(token){return JSON.parse(function AtoB(str){if(str=String(str).replace(/[\t\n\f\r ]+/g,""),!b64re.test(str))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var bitmap;str+="==".slice(2-(3&str.length));for(var r1,r2,result="",i=0;i<str.length;)bitmap=b64.indexOf(str.charAt(i++))<<18|b64.indexOf(str.charAt(i++))<<12|(r1=b64.indexOf(str.charAt(i++)))<<6|(r2=b64.indexOf(str.charAt(i++))),result+=64===r1?String.fromCharCode(bitmap>>16&255):64===r2?String.fromCharCode(bitmap>>16&255,bitmap>>8&255):String.fromCharCode(bitmap>>16&255,bitmap>>8&255,255&bitmap);return result}((token||"").split(".")[1]||""))},decodeAccessTokenBody=function decodeAccessTokenBody(token){var decoded;try{if(null===(decoded=decodeJWTBody(token)))return null}catch(e){return null}return Object.keys(decoded).forEach((function(key){"string"==typeof key&&key.startsWith("https://verdocs.com/")&&(decoded[key.replace("https://verdocs.com/","")]=decoded[key],delete decoded[key])})),decoded}},"./dist/esm/errors-9b5498c8.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SDKError}));__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var SDKError=function(_Error){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(SDKError,_Error);var _super=function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}(SDKError);function SDKError(message,statusCode,response){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SDKError),(_this=_super.call(this,message||"SDK Error")).response=response,_this.statusCode=statusCode,Object.setPrototypeOf(_assertThisInitialized(_this),(this instanceof SDKError?this.constructor:void 0).prototype),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(SDKError)}(_wrapNativeSuper(Error))},"./dist/esm/verdocs-auth.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"verdocs_auth",(function(){return VerdocsAuth}));__webpack_require__("./node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var _index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/esm/index-f78d163d.js"),_VerdocsEndpoint_28ba21cc_js__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__("./dist/esm/Types-ab9f6af8.js"),__webpack_require__("./dist/esm/VerdocsEndpoint-28ba21cc.js")),_errors_9b5498c8_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./dist/esm/errors-9b5498c8.js");__webpack_require__("./dist/esm/Token-54690789.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var VerdocsAuth=function(){function VerdocsAuth(hostRef){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,VerdocsAuth),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.j)(this,hostRef),this.authenticated=Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.e)(this,"authenticated",7),this.sdkError=Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.e)(this,"sdkError",7),this.endpoint=_VerdocsEndpoint_28ba21cc_js__WEBPACK_IMPORTED_MODULE_9__.a.getDefault(),this.visible=!0,this.logo="https://verdocs.com/assets/blue-logo.svg",this.isAuthenticated=!1,this.displayMode="login",this.username="",this.password="",this.loggingIn=!1,this.activeSession=null,this.loginError=null}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(VerdocsAuth,[{key:"componentWillLoad",value:function componentWillLoad(){var _a,_b;this.endpoint.loadSession(),this.endpoint.session?(console.log("[AUTH] Authenticated"),this.isAuthenticated=!0,this.activeSession=this.endpoint.session,null===(_a=this.authenticated)||void 0===_a||_a.emit({authenticated:!0,session:this.endpoint.session})):(console.log("[AUTH] Anonymous"),null===(_b=this.authenticated)||void 0===_b||_b.emit({authenticated:!1,session:null}))}},{key:"handleLogin",value:function handleLogin(){var _this=this;this.loggingIn=!0,function authenticateUser(endpoint,params){return endpoint.api.post("/authentication/login",params).then((function(r){return r.data}))}(this.endpoint,{username:this.username,password:this.password}).then((function(r){var _a;_this.loggingIn=!1,_this.endpoint.setToken(r.accessToken),_this.activeSession=_this.endpoint.session,_this.isAuthenticated=!0,null===(_a=_this.authenticated)||void 0===_a||_a.emit({authenticated:!0,session:_this.endpoint.session})})).catch((function(e){var _a,_b,_c,_d,_e;console.log("[AUTH] Authentication error",e.response,JSON.stringify(e)),_this.loggingIn=!1,_this.activeSession=null,null===(_a=_this.authenticated)||void 0===_a||_a.emit({authenticated:!1,session:null}),null===(_b=_this.sdkError)||void 0===_b||_b.emit(new _errors_9b5498c8_js__WEBPACK_IMPORTED_MODULE_10__.a(e.message,null===(_c=e.response)||void 0===_c?void 0:_c.status,null===(_d=e.response)||void 0===_d?void 0:_d.data)),403===(null===(_e=null==e?void 0:e.response)||void 0===_e?void 0:_e.status)&&(_this.loginError="Please check your username and password and try again.")}))}},{key:"handleLogout",value:function handleLogout(){var _a;this.endpoint.clearSession(),this.isAuthenticated=!1,null===(_a=this.authenticated)||void 0===_a||_a.emit({authenticated:!1,session:null})}},{key:"handleClearError",value:function handleClearError(){this.loginError=null}},{key:"render",value:function render(){var _this2=this;return this.visible?this.isAuthenticated?Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{class:"status-result"},"Authenticated"):"signup"===this.displayMode?Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{class:"signup-form"},Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("img",{src:this.logo,alt:"Verdocs Logo",class:"logo"}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("h3",null,"Sign up for an account"),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("h4",null,"Already have an account?",Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-button",{label:"Log In",variant:"text",onClick:function onClick(){return _this2.displayMode="login"},disabled:this.loggingIn})),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("form",{onSubmit:function onSubmit(){return _this2.handleLogin()}},Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-text-input",{label:"Email",autocomplete:"username",value:this.username,onInput:function onInput(e){return _this2.username=e.target.value},disabled:this.loggingIn}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-text-input",{label:"Password",type:"password",autocomplete:"current-password",value:this.password,onInput:function onInput(e){return _this2.password=e.target.value},disabled:this.loggingIn}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-button",{label:"Signup",disabled:this.loggingIn,onClick:function onClick(){return _this2.handleLogin()},style:{display:"flex",justifyContent:"center",margin:"30px auto 0"}}))):Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{class:"login-form"},Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("img",{src:this.logo,alt:"Verdocs Logo",class:"logo"}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("h3",null,"Log in to your account"),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("h4",null,"Don't have an account?",Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-button",{label:"Sign Up",variant:"text",onClick:function onClick(){return _this2.displayMode="signup"},disabled:this.loggingIn})),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("form",{onSubmit:function onSubmit(){return _this2.handleLogin()}},Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-text-input",{label:"Email",autocomplete:"username",value:this.username,onInput:function onInput(e){return _this2.username=e.target.value},disabled:this.loggingIn}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-text-input",{label:"Password",type:"password",autocomplete:"current-password",value:this.password,onInput:function onInput(e){return _this2.password=e.target.value},disabled:this.loggingIn}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-button",{label:"Forgot Your Password?",variant:"text",onClick:function onClick(){return _this2.displayMode="signup"},disabled:this.loggingIn,style:{display:"flex",justifyContent:"center",margin:"10px auto 20px"}}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-button",{label:"Login",disabled:this.loggingIn,onClick:function onClick(){return _this2.handleLogin()},style:{display:"flex",justifyContent:"center",margin:"10px auto 0"}})),this.loginError?Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-ok-dialog",{heading:"Login Error",message:this.loginError,onNext:function onNext(){return _this2.handleClearError()}}):Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",null)):Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{style:{display:"none"}},"Verdocs Auth Placeholder")}}]),VerdocsAuth}();VerdocsAuth.style='verdocs-auth{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}verdocs-auth .login-form,verdocs-auth .signup-form{background:#ffffff;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-ms-flex-direction:column;flex-direction:column;display:-ms-flexbox;display:flex;padding:20px;width:300px;max-width:100%}verdocs-auth .logo{margin:20px 0 30px;width:128px;max-width:100%}verdocs-auth h3{text-align:center;font-weight:400;font-size:16px;line-height:1.75;margin:0}verdocs-auth h4{text-align:center;font-weight:400;font-size:14px;line-height:1.43;margin:0}verdocs-auth .status-result{display:none}verdocs-auth .status-result.debug{white-space:pre-wrap;font-size:14px;background:#fff;padding:10px;display:block;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:center;justify-content:center}verdocs-auth form{width:100%}verdocs-auth verdocs-text-input{margin-bottom:10px}'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9VdGlscy9Ub2tlbi5qcyIsIndlYnBhY2s6Ly8vc3JjL3V0aWxzL2Vycm9ycy50cyIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9Vc2Vycy9BdXRoLmpzIiwid2VicGFjazovLy9zcmMvY29tcG9uZW50cy9lbWJlZHMvdmVyZG9jcy1hdXRoL3ZlcmRvY3MtYXV0aC50c3giLCJ3ZWJwYWNrOi8vL3NyYy9jb21wb25lbnRzL2VtYmVkcy92ZXJkb2NzLWF1dGgvdmVyZG9jcy1hdXRoLnNjc3MiXSwibmFtZXMiOlsiYjY0IiwiYjY0cmUiLCJkZWNvZGVKV1RCb2R5IiwidG9rZW4iLCJKU09OIiwicGFyc2UiLCJBdG9CIiwic3RyIiwiU3RyaW5nIiwicmVwbGFjZSIsInRlc3QiLCJUeXBlRXJyb3IiLCJiaXRtYXAiLCJzbGljZSIsImxlbmd0aCIsInIxIiwicjIiLCJyZXN1bHQiLCJpIiwiaW5kZXhPZiIsImNoYXJBdCIsImZyb21DaGFyQ29kZSIsInNwbGl0IiwiZGVjb2RlQWNjZXNzVG9rZW5Cb2R5IiwiZGVjb2RlZCIsImUiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsInN0YXJ0c1dpdGgiLCJTREtFcnJvciIsIm1lc3NhZ2UiLCJzdGF0dXNDb2RlIiwicmVzcG9uc2UiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIkVycm9yIiwiVmVyZG9jc0F1dGgiLCJWZXJkb2NzRW5kcG9pbnQiLCJnZXREZWZhdWx0IiwiY29tcG9uZW50V2lsbExvYWQiLCJ0aGlzIiwiZW5kcG9pbnQiLCJsb2FkU2Vzc2lvbiIsInNlc3Npb24iLCJjb25zb2xlIiwibG9nIiwiaXNBdXRoZW50aWNhdGVkIiwiYWN0aXZlU2Vzc2lvbiIsImF1dGhlbnRpY2F0ZWQiLCJlbWl0IiwiaGFuZGxlTG9naW4iLCJsb2dnaW5nSW4iLCJhdXRoZW50aWNhdGVVc2VyIiwicGFyYW1zIiwiYXBpIiwicG9zdCIsInRoZW4iLCJyIiwiZGF0YSIsIkF1dGguYXV0aGVudGljYXRlVXNlciIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJzZXRUb2tlbiIsImFjY2Vzc1Rva2VuIiwic3RyaW5naWZ5Iiwic2RrRXJyb3IiLCJzdGF0dXMiLCJsb2dpbkVycm9yIiwiaGFuZGxlTG9nb3V0IiwiY2xlYXJTZXNzaW9uIiwiaGFuZGxlQ2xlYXJFcnJvciIsInJlbmRlciIsInZpc2libGUiLCJoIiwiY2xhc3MiLCJkaXNwbGF5TW9kZSIsInNyYyIsImxvZ28iLCJhbHQiLCJsYWJlbCIsInZhcmlhbnQiLCJvbkNsaWNrIiwiZGlzYWJsZWQiLCJvblN1Ym1pdCIsImF1dG9jb21wbGV0ZSIsInZhbHVlIiwib25JbnB1dCIsInRhcmdldCIsInR5cGUiLCJzdHlsZSIsImRpc3BsYXkiLCJqdXN0aWZ5Q29udGVudCIsIm1hcmdpbiIsImhlYWRpbmciLCJvbk5leHQiXSwibWFwcGluZ3MiOiJpeEJBQ0lBLElBQU0sb0VBRU5DLE1BQVEsMEVBcUNEQyxjQUFnQixTQUFoQkEsY0FBMEJDLE9BQVMsT0FBT0MsS0FBS0MsTUFoQ3hDLFNBQVBDLEtBQWlCQyxLQUl4QixHQURBQSxJQUFNQyxPQUFPRCxLQUFLRSxRQUFRLGdCQUFpQixLQUN0Q1IsTUFBTVMsS0FBS0gsS0FDWixNQUFNLElBQUlJLFVBQVUsNEZBR3hCLElBQUlDLE9BREpMLEtBQU8sS0FBS00sTUFBTSxHQUFrQixFQUFiTixJQUFJTyxTQU0zQixJQUpBLElBQ0lDLEdBQ0FDLEdBRkFDLE9BQVMsR0FHVEMsRUFBSSxFQUNEQSxFQUFJWCxJQUFJTyxRQUNYRixPQUNLWixJQUFJbUIsUUFBUVosSUFBSWEsT0FBT0YsT0FBUyxHQUM1QmxCLElBQUltQixRQUFRWixJQUFJYSxPQUFPRixPQUFTLElBQy9CSCxHQUFLZixJQUFJbUIsUUFBUVosSUFBSWEsT0FBT0YsUUFBVSxHQUN2Q0YsR0FBS2hCLElBQUltQixRQUFRWixJQUFJYSxPQUFPRixPQUNyQ0QsUUFD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QyxZQWxLcUIsRyxrQkM1Q0QsdWxDIiwiZmlsZSI6IjM1LjdjMDllYzc5LmlmcmFtZS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiB0c2xpbnQ6ZGlzYWJsZTpuby1iaXR3aXNlICovXG52YXIgYjY0ID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Jztcbi8vIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBjaGVjayBmb3JtYWwgY29ycmVjdG5lc3Mgb2YgYmFzZTY0IGVuY29kZWQgc3RyaW5nc1xudmFyIGI2NHJlID0gL14oPzpbQS1aYS16XFxkK1xcL117NH0pKj8oPzpbQS1aYS16XFxkK1xcL117Mn0oPzo9PSk/fFtBLVphLXpcXGQrXFwvXXszfT0/KT8kLztcbi8qKlxuICogU2ltcGxpZmllZCwgTm9kZS9Ccm93c2VyLXNhZmUgYWx0ZXJuYXRpdmUgdG8gYXRvYigpIGZvciBiYXNlNjQgZGVjb2RpbmcuXG4gKiBNb2RpZmllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9NYXhBcnQyNTAxL2Jhc2U2NC1qcy9ibG9iL21hc3Rlci9iYXNlNjQuanNcbiAqL1xuZXhwb3J0IHZhciBBdG9CID0gZnVuY3Rpb24gKHN0cikge1xuICAgIC8vIGF0b2IgY2FuIHdvcmsgd2l0aCBzdHJpbmdzIHdpdGggd2hpdGVzcGFjZXMsIGV2ZW4gaW5zaWRlIHRoZSBlbmNvZGVkIHBhcnQsXG4gICAgLy8gYnV0IG9ubHkgXFx0LCBcXG4sIFxcZiwgXFxyIGFuZCAnICcsIHdoaWNoIGNhbiBiZSBzdHJpcHBlZC5cbiAgICBzdHIgPSBTdHJpbmcoc3RyKS5yZXBsYWNlKC9bXFx0XFxuXFxmXFxyIF0rL2csICcnKTtcbiAgICBpZiAoIWI2NHJlLnRlc3Qoc3RyKSlcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBleGVjdXRlICdhdG9iJyBvbiAnV2luZG93JzogVGhlIHN0cmluZyB0byBiZSBkZWNvZGVkIGlzIG5vdCBjb3JyZWN0bHkgZW5jb2RlZC5cIik7XG4gICAgLy8gQWRkaW5nIHRoZSBwYWRkaW5nIGlmIG1pc3NpbmcsIGZvciBzZW1wbGljaXR5XG4gICAgc3RyICs9ICc9PScuc2xpY2UoMiAtIChzdHIubGVuZ3RoICYgMykpO1xuICAgIHZhciBiaXRtYXA7XG4gICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgIHZhciByMTtcbiAgICB2YXIgcjI7XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAoOyBpIDwgc3RyLmxlbmd0aDspIHtcbiAgICAgICAgYml0bWFwID1cbiAgICAgICAgICAgIChiNjQuaW5kZXhPZihzdHIuY2hhckF0KGkrKykpIDw8IDE4KSB8XG4gICAgICAgICAgICAgICAgKGI2NC5pbmRleE9mKHN0ci5jaGFyQXQoaSsrKSkgPDwgMTIpIHxcbiAgICAgICAgICAgICAgICAoKHIxID0gYjY0LmluZGV4T2Yoc3RyLmNoYXJBdChpKyspKSkgPDwgNikgfFxuICAgICAgICAgICAgICAgIChyMiA9IGI2NC5pbmRleE9mKHN0ci5jaGFyQXQoaSsrKSkpO1xuICAgICAgICByZXN1bHQgKz1cbiAgICAgICAgICAgIHIxID09PSA2NFxuICAgICAgICAgICAgICAgID8gU3RyaW5nLmZyb21DaGFyQ29kZSgoYml0bWFwID4+IDE2KSAmIDI1NSlcbiAgICAgICAgICAgICAgICA6IHIyID09PSA2NFxuICAgICAgICAgICAgICAgICAgICA/IFN0cmluZy5mcm9tQ2hhckNvZGUoKGJpdG1hcCA+PiAxNikgJiAyNTUsIChiaXRtYXAgPj4gOCkgJiAyNTUpXG4gICAgICAgICAgICAgICAgICAgIDogU3RyaW5nLmZyb21DaGFyQ29kZSgoYml0bWFwID4+IDE2KSAmIDI1NSwgKGJpdG1hcCA+PiA4KSAmIDI1NSwgYml0bWFwICYgMjU1KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG4vKipcbiAqIERlY29kZSB0aGUgYm9keSBvZiBhIEpXVC4gVGhpcyBoZWxwZXIgbWF5IGFsbG93IGZyb250LWVuZCBhcHBsaWNhdGlvbnMgdG8gYXZvaWQgYSBkZXBlbmRlbmN5IG9uIGBqc29ud2VidG9rZW5gIGluXG4gKiBtYW55IGNhc2VzLiBOb3RlIHRoYXQgdGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGZvciB0cnVlIEpXVHMuIE9wYXF1ZSB0b2tlbnMgd2lsbCBjYXVzZSB0aGlzIHRvIHRocm93LlxuICovXG5leHBvcnQgdmFyIGRlY29kZUpXVEJvZHkgPSBmdW5jdGlvbiAodG9rZW4pIHsgcmV0dXJuIEpTT04ucGFyc2UoQXRvQigodG9rZW4gfHwgJycpLnNwbGl0KCcuJylbMV0gfHwgJycpKTsgfTtcbi8qKlxuICogRGVjb2RlIHRoZSBib2R5IG9mIGFuIFZlcmRvY3MgYWNjZXNzIHRva2VuLiBOb3RlIHRoYXQgcmF3IHRva2VucyBjb250YWluIG5hbWVzcGFjZWQgZmllbGRzLCBlLmcuXG4gKiBgaHR0cHM6Ly92ZXJkb2NzLmNvbS9wcm9maWxlX2lkYC4gVG8gbWFrZSB0aGVzZSB0b2tlbnMgZWFzaWVyIHRvIHVzZSBpbiBmcm9udC1lbmQgY29kZSwgdGhpcyBuYW1lLXNwYWNpbmdcbiAqIHdpbGwgYmUgcmVtb3ZlZC4gTm90ZSB0aGF0IHVzZXIgYW5kIHNpZ25pbmcgc2Vzc2lvbnMgaGF2ZSBkaWZmZXJlbnQgYWNjZXNzIHRva2VuIGZvcm1hdHMuIFRoZSBjYWxsaW5nXG4gKiBhcHBsaWNhdGlvbiBzaG91bGQgZGlzdGluZ3Vpc2ggYmV0d2VlbiB0aGUgdHdvIGJhc2VkIG9uIHRoZSBjb250ZXh0IG9mIHRoZSBhdXRoZW50aWNhdGVkIHNlc3Npb24sIG9yIGJ5XG4gKiB0aGUgcHJlc2VuY2Ugb2YgdGhlIGBkb2N1bWVudF9pZGAgZmllbGQsIHdoaWNoIHdpbGwgb25seSBiZSBwcmVzZW50IGZvciBzaWduaW5nIHNlc3Npb25zLlxuICovXG5leHBvcnQgdmFyIGRlY29kZUFjY2Vzc1Rva2VuQm9keSA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgIHZhciBkZWNvZGVkO1xuICAgIHRyeSB7XG4gICAgICAgIGRlY29kZWQgPSBkZWNvZGVKV1RCb2R5KHRva2VuKTtcbiAgICAgICAgaWYgKGRlY29kZWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBPYmplY3Qua2V5cyhkZWNvZGVkKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnICYmIGtleS5zdGFydHNXaXRoKCdodHRwczovL3ZlcmRvY3MuY29tLycpKSB7XG4gICAgICAgICAgICBkZWNvZGVkW2tleS5yZXBsYWNlKCdodHRwczovL3ZlcmRvY3MuY29tLycsICcnKV0gPSBkZWNvZGVkW2tleV07XG4gICAgICAgICAgICBkZWxldGUgZGVjb2RlZFtrZXldO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlY29kZWQ7XG59O1xuIiwiLyoqXG4gKiBQYXNzZWQgdG8gcGFyZW50IGNvbXBvbmVudHMgaW4gY2VydGFpbiBjYWxsYmFja3Mgd2l0aCB0aGUgbG93ZXItbGV2ZWwgSlMtU0RLIGVtaXRzIGFuIGVycm9yXG4gKi9cbmV4cG9ydCBjbGFzcyBTREtFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29kZTtcbiAgc3RhdHVzQ29kZTtcbiAgcmVzcG9uc2U7XG5cbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGF0dXNDb2RlOiBudW1iZXIsIHJlc3BvbnNlOiBhbnkpIHtcbiAgICBzdXBlcihtZXNzYWdlIHx8ICdTREsgRXJyb3InKTtcbiAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuICB9XG59XG4iLCIvKipcbiAqIEF1dGhlbnRpY2F0ZSB0byBWZXJkb2NzIHZpYSB1c2VyL3Bhc3N3b3JkIGF1dGhlbnRpY2F0aW9uXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtBdXRofSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvQXV0aCc7XG4gKiBpbXBvcnQge1RyYW5zcG9ydH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL0hUVFAnO1xuICpcbiAqIGNvbnN0IHthY2Nlc3NUb2tlbn0gPSBhd2FpdCBBdXRoLmF1dGhlbnRpY2F0ZVVzZXIoeyB1c2VybmFtZTogJ3Rlc3RAdGVzdC5jb20nLCBwYXNzd29yZDogJ1BBU1NXT1JEJyB9KTtcbiAqIFRyYW5zcG9ydC5zZXRBdXRoVG9rZW4oYWNjZXNzVG9rZW4pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgYXV0aGVudGljYXRlVXNlciA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAucG9zdCgnL2F1dGhlbnRpY2F0aW9uL2xvZ2luJywgcGFyYW1zKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIEF1dGhlbnRpY2F0ZSB0byBWZXJkb2NzIHZpYSBjbGllbnQgSUQgLyBTZWNyZXQgYXV0aGVudGljYXRpb24uICoqTk9URTogVGhpcyBpcyBvbmx5IHN1aXRhYmxlIGZvclxuICogTm9kZUpTIHNlcnZlci1zaWRlIGFwcGxpY2F0aW9ucy4gTmV2ZXIgZXhwb3NlIHlvdXIgQ2xpZW50IFNlY3JldCBpbiBhIFdlYiBvciBNb2JpbGUgYXBwISoqIEFsc28gbm90ZVxuICogdGhhdCBhY2Nlc3MgdG9rZW5zIG1heSBiZSBjYWNoZWQgYnkgc2VydmVyLXNpZGUgYXBwcyAoYW5kIHRoaXMgaXMgcmVjb21tZW5kZWQpIGJ1dCBkbyBleHBpcmUgYWZ0ZXIgMlxuICogaG91cnMuIFRoaXMgZXhwaXJhdGlvbiBtYXkgY2hhbmdlIGJhc2VkIG9uIGZ1dHVyZSBzZWN1cml0eSBuZWVkcy4gQXBwbGljYXRpb24gZGV2ZWxvcGVycyBhcmUgZW5jb3VyYWdlZFxuICogdG8gY2hlY2sgdGhlIGBleHBgIGV4cGlyYXRpb24gZmllbGQgaW4gdGhlIHJlc3BvbnNlIGFjY2Vzc1Rva2VuIGFuZCByZW5ldyB0b2tlbnMgYWZ0ZXIgdGhleSBleHBpcmUuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtBdXRofSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvQXV0aCc7XG4gKiBpbXBvcnQge1RyYW5zcG9ydH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL0hUVFAnO1xuICpcbiAqIGNvbnN0IHthY2Nlc3NUb2tlbn0gPSBhd2FpdCBBdXRoLmF1dGhlbnRpY2F0ZUFwcCh7IGNsaWVudF9pZDogJ0NMSUVOVElEJywgY2xpZW50X3NlY3JldDogJ1NFQ1JFVCcgfSk7XG4gKiBUcmFuc3BvcnQuc2V0QXV0aFRva2VuKGFjY2Vzc1Rva2VuKTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGF1dGhlbnRpY2F0ZUFwcCA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAucG9zdCgnL2F1dGhlbnRpY2F0aW9uL2xvZ2luX2NsaWVudCcsIHt9LCB7IGhlYWRlcnM6IHBhcmFtcyB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIFZhbGlkYXRlIGEgdG9rZW4uIE9ubHkgVmVyZG9jcyB0b2tlbnMgd2lsbCBiZSBhY2NlcHRlZC4gTW9zdCBhcHBsaWNhdGlvbnMgY2FuIGRlY29kZSB0b2tlbnMgbG9jYWxseSxcbiAqIGJlY2F1c2UgdG9rZW5zIHdpbGwgYmUgdmFsaWRhdGVkIHdoZW4gQVBJIGNhbGxzIGFyZSBtYWRlIGFueXdheS4gSG93ZXZlciwgaGlnaC1zZWN1cml0eSBhcHBsaWNhdGlvbnNcbiAqIG1heSB1c2UgdGhpcyBlbmRwb2ludCB0byBjaGVjayBpZiBhIHRva2VuIGhhcyBiZWVuIHJldm9rZWQuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtBdXRofSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvQXV0aCc7XG4gKlxuICogY29uc3Qge3ZhbGlkfSA9IGF3YWl0IEF1dGgudmFsaWRhdGVUb2tlbih7IHRva2VuIH0pO1xuICogaWYgKCF2YWxpZCkge1xuICogICB3aW5kb3cuYWxlcnQoJ1Nlc3Npb24gaW52YWxpZCBvciBleHBpcmVkLiBQbGVhc2UgcmUtYXV0aGVudGljYXRlLicpO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgdmFsaWRhdGVUb2tlbiA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAucG9zdCgnL3Rva2VuL2lzVmFsaWQnLCBwYXJhbXMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogSWYgY2FsbGVkIGJlZm9yZSB0aGUgc2Vzc2lvbiBleHBpcmVzLCB0aGlzIHdpbGwgcmVmcmVzaCB0aGUgY2FsbGVyJ3Mgc2Vzc2lvbiBhbmQgdG9rZW5zLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7QXV0aH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL0F1dGgnO1xuICogaW1wb3J0IHtUcmFuc3BvcnR9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9IVFRQJztcbiAqXG4gKiBjb25zdCB7YWNjZXNzVG9rZW59ID0gYXdhaXQgQXV0aC5yZWZyZXNoVG9rZW5zKCk7XG4gKiBUcmFuc3BvcnQuc2V0QXV0aFRva2VuKGFjY2Vzc1Rva2VuKTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIHJlZnJlc2hUb2tlbnMgPSBmdW5jdGlvbiAoZW5kcG9pbnQpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5nZXQoJy90b2tlbicpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogVXBkYXRlIHRoZSBjYWxsZXIncyBwYXNzd29yZC4gVG8gaGVscCBwcmV2ZW50IENTUkYgYXR0YWNrIHZlY3RvcnMsIHRoZSB1c2VyJ3Mgb2xkIHBhc3N3b3JkIGFuZCBlbWFpbCBhZGRyZXNzIGFyZSByZXF1aXJlZC5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge0F1dGh9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9BdXRoJztcbiAqXG4gKiBjb25zdCB7c3RhdHVzLCBtZXNzYWdlfSA9IGF3YWl0IEF1dGgudXBkYXRlUGFzc3dvcmQoeyBlbWFpbCwgb2xkUGFzc3dvcmQsIG5ld1Bhc3N3b3JkIH0pO1xuICogaWYgKHN0YXR1cyAhPT0gJ09LJykge1xuICogICB3aW5kb3cuYWxlcnQoYFBhc3N3b3JkIHJlc2V0IGVycm9yOiAke21lc3NhZ2V9YCk7XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVQYXNzd29yZCA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAucHV0KCcvdXNlci91cGRhdGVfcGFzc3dvcmQnLCBwYXJhbXMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogVXBkYXRlIHRoZSBjYWxsZXIncyBlbWFpbCBhZGRyZXNzLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7QXV0aH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL0F1dGgnO1xuICpcbiAqIGNvbnN0IHtwcm9maWxlc30gPSBhd2FpdCBBdXRoLnVwZGF0ZUVtYWlsKHsgZW1haWw6IG5ld0VtYWlsIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlRW1haWwgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHBhcmFtcykge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLnB1dCgnL3VzZXIvdXBkYXRlX2VtYWlsJywgcGFyYW1zKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4iLCJpbXBvcnQge0F1dGh9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9Vc2Vycyc7XG5pbXBvcnQge1ZlcmRvY3NFbmRwb2ludH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrJztcbmltcG9ydCB7VFNlc3Npb259IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9TZXNzaW9ucy9UeXBlcyc7XG5pbXBvcnQge0NvbXBvbmVudCwgUHJvcCwgU3RhdGUsIGgsIEV2ZW50LCBFdmVudEVtaXR0ZXJ9IGZyb20gJ0BzdGVuY2lsL2NvcmUnO1xuaW1wb3J0IHtTREtFcnJvcn0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvZXJyb3JzJztcblxuZXhwb3J0IGludGVyZmFjZSBJQXV0aFN0YXR1cyB7XG4gIGF1dGhlbnRpY2F0ZWQ6IGJvb2xlYW47XG4gIHNlc3Npb246IFRTZXNzaW9uO1xufVxuXG4vKipcbiAqIERpc3BsYXkgYW4gYXV0aGVudGljYXRpb24gZGlhbG9nIHRoYXQgYWxsb3dzIHRoZSB1c2VyIHRvIGxvZ2luIG9yIHNpZ24gdXAuIENhbGxiYWNrcyBhcmUgcHJvdmlkZWQgZm9yIGV2ZW50cyB0aGF0XG4gKiBvY2N1ciBkdXJpbmcgdGhlIHByb2Nlc3MgKGVzcGVjaWFsbHkgc3VjY2Vzc2Z1bCBjb21wbGV0aW9uKS4gVGhlIHN1Y2Nlc3MgY2FsbGJhY2sgd2lsbCBiZSBmaXJlZCBpbW1lZGlhdGVseSBpZiB0aGVcbiAqIHVzZXIgaXMgYWxyZWFkeSBhdXRoZW50aWNhdGVkIHdpdGggYSB2YWxpZCBzZXNzaW9uLCBzbyB0aGlzIGNvbXBvbmVudCBtYXkgbm90IGFsd2F5cyBkaXNwbGF5IHZpc2libHkuXG4gKlxuICogVG8gc2ltcGxpZnkgc29tZSB0eXBlcyBvZiBhdXRoZW50aWNhdGlvbiBmbG93cywgYSB2aXNpYmlsaXR5IGZsYWcgY2FuIGZvcmNlIHRoaXMgY29tcG9uZW50IHRvIG5ldmVyIGRpc3BsYXkuIFRoaXNcbiAqIGFsbG93cyB5b3UgdG8gc3VzYmNyaWJlIHRvIG5vdGlmaWNhdGlvbnMgZnJvbSB0aGVcbiAqXG4gKiBUaGlzIGVtYmVkIGlzIHJlc3BvbnNpdmUgLyBtb2JpbGUtZnJpZW5kbHksIGJ1dCB0aGUgY2FsbGluZyBhcHBsaWNhdGlvbiBzaG91bGQgcHJvdmlkZSBhdCBsZWFzdCBhIDMwMHB4IHdpZGVcbiAqIGNvbnRhaW5lciB0byBhbGxvdyBzdWZmaWNpZW50IHNwYWNlIGZvciB0aGUgcmVxdWlyZWQgZm9ybXMuXG4gKlxuICogQXMgbm90ZWQgYmVsb3csIHRoZSBwcmltYXJ5IGV2ZW50IGlzIGBhdXRoZW50aWNhdGVkYC4gVGhpcyB3aWxsIGFsd2F5cyBiZSBmaXJlZCBhdCBsZWFzdCBvbmNlLCBpbW1lZGlhdGVseSBhZnRlclxuICogdGhlIHdpZGdldCBpcyByZW5kZXJlZCBhbmQgdGhlIHVzZXIncyBzdGF0dXMgaGFzIGJlZW4gY2hlY2tlZC4gSXQgbWF5IGJlIGZpcmVkIGFnYWluIGFzIHRoZSB1c2VyIGNvbXBsZXRlcyAob3JcbiAqIGNhbmNlbHMpIGF1dGhlbnRpY2F0aW9uIHN0ZXBzLlxuICpcbiAqIEF1dGhlbnRpY2F0aW9uIGlzIHJlcXVpcmVkIHRvIGRlbW9uc3RyYXRlIHRoaXMgRWxlbWVudC4gWW91IG1heSBkbyB0aGlzIGluIFN0b3J5Ym9vayBieSB1c2luZyB0aGUgQXV0aFxuICogZW1iZWQuIFRoaXMgRWxlbWVudCB3aWxsIHJldXNlIHRoZSBzYW1lIHNlc3Npb24gcHJvZHVjZWQgYnkgbG9nZ2luZyBpbiB2aWEgdGhhdCBFbWJlZC5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbnRlcmZhY2UgSUF1dGhTdGF0dXMge1xuICogICAvLyBJZiB0cnVlLCB0aGUgdXNlciBpcyBhdXRoZW50aWNhdGVkIHdpdGggYSB2YWxpZCBzZXNzaW9uXG4gKiAgIGF1dGhlbnRpY2F0ZWQ6IGJvb2xlYW47XG4gKlxuICogICAvLyBEZXRhaWxzIGZvciB0aGUgdXNlcidzIHNlc3Npb25cbiAqICAgc2Vzc2lvbjogSUFjdGl2ZVNlc3Npb24gfCBudWxsO1xuICogfVxuICogYGBgXG4gKi9cbkBDb21wb25lbnQoe1xuICB0YWc6ICd2ZXJkb2NzLWF1dGgnLFxuICBzdHlsZVVybDogJ3ZlcmRvY3MtYXV0aC5zY3NzJyxcbiAgc2hhZG93OiBmYWxzZSxcbn0pXG5leHBvcnQgY2xhc3MgVmVyZG9jc0F1dGgge1xuICAvKipcbiAgICogVGhlIGVuZHBvaW50IHRvIHVzZSB0byBjb21tdW5pY2F0ZSB3aXRoIFZlcmRvY3MuIElmIG5vdCBzZXQsIHRoZSBkZWZhdWx0IGVuZHBvaW50IHdpbGwgYmUgdXNlZC5cbiAgICovXG4gIEBQcm9wKCkgZW5kcG9pbnQ6IFZlcmRvY3NFbmRwb2ludCA9IFZlcmRvY3NFbmRwb2ludC5nZXREZWZhdWx0KCk7XG5cbiAgLyoqXG4gICAqIE5vcm1hbGx5LCBpZiB0aGUgdXNlciBoYXMgYSB2YWxpZCBzZXNzaW9uLCB0aGlzIGVtYmVkIHdpbGwgYmUgaW52aXNpYmxlLCBvdGhlcndpc2UgaXQgd2lsbCBkaXNwbGF5XG4gICAqIGxvZ2luIC8gc2lnbnVwIGZvcm1zLiBJZiB0aGlzIGlzIHNldCB0byBmYWxzZSwgdGhpcyBlbWJlZCB3aWxsIGJlIGludmlzaWJsZSBpbiBib3RoIGNhc2VzLiBBcHBzIG1heVxuICAgKiB1c2UgdGhpcyB0byB2ZXJpZnkgaWYgYSB1c2VyIGhhcyBhIHZhbGlkIHNlc3Npb24gd2l0aG91dCBuZWVkaW5nIGEgc2VwYXJhdGUgY2FsbCB0byBWZXJkb2NzIEpTIFNESy5cbiAgICovXG4gIEBQcm9wKCkgdmlzaWJsZTogYm9vbGVhbiA9IHRydWU7XG5cbiAgLyoqXG4gICAqIEJ5IGRlZmF1bHQsIGEgVmVyZG9jcyBsb2dvIHdpbGwgYmUgZGlzcGxheWVkIGFib3ZlIHRoZSBsb2dpbi9zaWdudXAgZm9ybXMuIFRoaXMgbWF5IGJlIHVzZWQgdG9cbiAgICogb3ZlcnJpZGUgaXRzIHNvdXJjZS4gKEFsdGVybmF0aXZlbHksIHlvdSBtYXkgc2ltcGx5IGhpZGUgaXQgdmlhIENTUyBvdmVycmlkZXMuKSBMb2dvcyBzaG91bGQgYmVcbiAgICogaW4gU1ZHIGZvcm1hdCBmb3IgYmVzdCByZXN1bHRzLlxuICAgKi9cbiAgQFByb3AoKSBsb2dvOiBzdHJpbmcgPSAnaHR0cHM6Ly92ZXJkb2NzLmNvbS9hc3NldHMvYmx1ZS1sb2dvLnN2Zyc7XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIHdoZW4gc2Vzc2lvbiBhdXRoZW50aWNhdGlvbiBwcm9jZXNzIGhhcyBjb21wbGV0ZWQuIENoZWNrIHRoZSBldmVudCBjb250ZW50cyBmb3IgY29tcGxldGlvbiBzdGF0dXMuXG4gICAqL1xuICBARXZlbnQoe2NvbXBvc2VkOiB0cnVlfSkgYXV0aGVudGljYXRlZDogRXZlbnRFbWl0dGVyPElBdXRoU3RhdHVzPjtcblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgaWYgYW4gZXJyb3Igb2NjdXJzLiBUaGUgZXZlbnQgZGV0YWlscyB3aWxsIGNvbnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIGVycm9yLiBNb3N0IGVycm9ycyB3aWxsXG4gICAqIHRlcm1pbmF0ZSB0aGUgcHJvY2VzcywgYW5kIHRoZSBjYWxsaW5nIGFwcGxpY2F0aW9uIHNob3VsZCBjb3JyZWN0IHRoZSBjb25kaXRpb24gYW5kIHJlLXJlbmRlciB0aGUgY29tcG9uZW50LlxuICAgKi9cbiAgQEV2ZW50KHtjb21wb3NlZDogdHJ1ZX0pIHNka0Vycm9yOiBFdmVudEVtaXR0ZXI8U0RLRXJyb3I+O1xuXG4gIEBTdGF0ZSgpIGlzQXV0aGVudGljYXRlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBAU3RhdGUoKSBkaXNwbGF5TW9kZTogc3RyaW5nID0gJ2xvZ2luJztcbiAgQFN0YXRlKCkgdXNlcm5hbWU6IHN0cmluZyA9ICcnO1xuICBAU3RhdGUoKSBwYXNzd29yZDogc3RyaW5nID0gJyc7XG4gIEBTdGF0ZSgpIGxvZ2dpbmdJbjogYm9vbGVhbiA9IGZhbHNlO1xuICBAU3RhdGUoKSBhY3RpdmVTZXNzaW9uOiBUU2Vzc2lvbiA9IG51bGw7XG4gIEBTdGF0ZSgpIGxvZ2luRXJyb3I6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIHRoaXMuZW5kcG9pbnQubG9hZFNlc3Npb24oKTtcbiAgICBpZiAodGhpcy5lbmRwb2ludC5zZXNzaW9uKSB7XG4gICAgICBjb25zb2xlLmxvZygnW0FVVEhdIEF1dGhlbnRpY2F0ZWQnKTtcbiAgICAgIHRoaXMuaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuYWN0aXZlU2Vzc2lvbiA9IHRoaXMuZW5kcG9pbnQuc2Vzc2lvbjtcbiAgICAgIHRoaXMuYXV0aGVudGljYXRlZD8uZW1pdCh7YXV0aGVudGljYXRlZDogdHJ1ZSwgc2Vzc2lvbjogdGhpcy5lbmRwb2ludC5zZXNzaW9ufSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbQVVUSF0gQW5vbnltb3VzJyk7XG4gICAgICB0aGlzLmF1dGhlbnRpY2F0ZWQ/LmVtaXQoe2F1dGhlbnRpY2F0ZWQ6IGZhbHNlLCBzZXNzaW9uOiBudWxsfSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlTG9naW4oKSB7XG4gICAgdGhpcy5sb2dnaW5nSW4gPSB0cnVlO1xuICAgIEF1dGguYXV0aGVudGljYXRlVXNlcih0aGlzLmVuZHBvaW50LCB7dXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkfSlcbiAgICAgIC50aGVuKHIgPT4ge1xuICAgICAgICB0aGlzLmxvZ2dpbmdJbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVuZHBvaW50LnNldFRva2VuKHIuYWNjZXNzVG9rZW4pO1xuICAgICAgICB0aGlzLmFjdGl2ZVNlc3Npb24gPSB0aGlzLmVuZHBvaW50LnNlc3Npb247XG4gICAgICAgIHRoaXMuaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hdXRoZW50aWNhdGVkPy5lbWl0KHthdXRoZW50aWNhdGVkOiB0cnVlLCBzZXNzaW9uOiB0aGlzLmVuZHBvaW50LnNlc3Npb259KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQVVUSF0gQXV0aGVudGljYXRpb24gZXJyb3InLCBlLnJlc3BvbnNlLCBKU09OLnN0cmluZ2lmeShlKSk7XG4gICAgICAgIHRoaXMubG9nZ2luZ0luID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWN0aXZlU2Vzc2lvbiA9IG51bGw7XG4gICAgICAgIHRoaXMuYXV0aGVudGljYXRlZD8uZW1pdCh7YXV0aGVudGljYXRlZDogZmFsc2UsIHNlc3Npb246IG51bGx9KTtcbiAgICAgICAgdGhpcy5zZGtFcnJvcj8uZW1pdChuZXcgU0RLRXJyb3IoZS5tZXNzYWdlLCBlLnJlc3BvbnNlPy5zdGF0dXMsIGUucmVzcG9uc2U/LmRhdGEpKTtcblxuICAgICAgICBpZiAoZT8ucmVzcG9uc2U/LnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgICAgdGhpcy5sb2dpbkVycm9yID0gJ1BsZWFzZSBjaGVjayB5b3VyIHVzZXJuYW1lIGFuZCBwYXNzd29yZCBhbmQgdHJ5IGFnYWluLic7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlTG9nb3V0KCkge1xuICAgIHRoaXMuZW5kcG9pbnQuY2xlYXJTZXNzaW9uKCk7XG4gICAgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmF1dGhlbnRpY2F0ZWQ/LmVtaXQoe2F1dGhlbnRpY2F0ZWQ6IGZhbHNlLCBzZXNzaW9uOiBudWxsfSk7XG4gIH1cblxuICBoYW5kbGVDbGVhckVycm9yKCkge1xuICAgIHRoaXMubG9naW5FcnJvciA9IG51bGw7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKCF0aGlzLnZpc2libGUpIHtcbiAgICAgIHJldHVybiA8ZGl2IHN0eWxlPXt7ZGlzcGxheTogJ25vbmUnfX0+VmVyZG9jcyBBdXRoIFBsYWNlaG9sZGVyPC9kaXY+O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzQXV0aGVudGljYXRlZCkge1xuICAgICAgcmV0dXJuIDxkaXYgY2xhc3M9XCJzdGF0dXMtcmVzdWx0XCI+QXV0aGVudGljYXRlZDwvZGl2PjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kaXNwbGF5TW9kZSA9PT0gJ3NpZ251cCcpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzaWdudXAtZm9ybVwiPlxuICAgICAgICAgIDxpbWcgc3JjPXt0aGlzLmxvZ299IGFsdD1cIlZlcmRvY3MgTG9nb1wiIGNsYXNzPVwibG9nb1wiIC8+XG5cbiAgICAgICAgICA8aDM+U2lnbiB1cCBmb3IgYW4gYWNjb3VudDwvaDM+XG4gICAgICAgICAgPGg0PlxuICAgICAgICAgICAgQWxyZWFkeSBoYXZlIGFuIGFjY291bnQ/XG4gICAgICAgICAgICA8dmVyZG9jcy1idXR0b24gbGFiZWw9XCJMb2cgSW5cIiB2YXJpYW50PVwidGV4dFwiIG9uQ2xpY2s9eygpID0+ICh0aGlzLmRpc3BsYXlNb2RlID0gJ2xvZ2luJyl9IGRpc2FibGVkPXt0aGlzLmxvZ2dpbmdJbn0gLz5cbiAgICAgICAgICA8L2g0PlxuXG4gICAgICAgICAgPGZvcm0gb25TdWJtaXQ9eygpID0+IHRoaXMuaGFuZGxlTG9naW4oKX0+XG4gICAgICAgICAgICA8dmVyZG9jcy10ZXh0LWlucHV0IGxhYmVsPVwiRW1haWxcIiBhdXRvY29tcGxldGU9XCJ1c2VybmFtZVwiIHZhbHVlPXt0aGlzLnVzZXJuYW1lfSBvbklucHV0PXsoZTogYW55KSA9PiAodGhpcy51c2VybmFtZSA9IGUudGFyZ2V0LnZhbHVlKX0gZGlzYWJsZWQ9e3RoaXMubG9nZ2luZ0lufSAvPlxuICAgICAgICAgICAgPHZlcmRvY3MtdGV4dC1pbnB1dFxuICAgICAgICAgICAgICBsYWJlbD1cIlBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgdHlwZT1cInBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlPVwiY3VycmVudC1wYXNzd29yZFwiXG4gICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnBhc3N3b3JkfVxuICAgICAgICAgICAgICBvbklucHV0PXsoZTogYW55KSA9PiAodGhpcy5wYXNzd29yZCA9IGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMubG9nZ2luZ0lufVxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgPHZlcmRvY3MtYnV0dG9uXG4gICAgICAgICAgICAgIGxhYmVsPVwiU2lnbnVwXCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMubG9nZ2luZ0lufVxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLmhhbmRsZUxvZ2luKCl9XG4gICAgICAgICAgICAgIHN0eWxlPXt7ZGlzcGxheTogJ2ZsZXgnLCBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsIG1hcmdpbjogJzMwcHggYXV0byAwJ319XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzPVwibG9naW4tZm9ybVwiPlxuICAgICAgICA8aW1nIHNyYz17dGhpcy5sb2dvfSBhbHQ9XCJWZXJkb2NzIExvZ29cIiBjbGFzcz1cImxvZ29cIiAvPlxuXG4gICAgICAgIDxoMz5Mb2cgaW4gdG8geW91ciBhY2NvdW50PC9oMz5cbiAgICAgICAgPGg0PlxuICAgICAgICAgIERvbid0IGhhdmUgYW4gYWNjb3VudD9cbiAgICAgICAgICA8dmVyZG9jcy1idXR0b24gbGFiZWw9XCJTaWduIFVwXCIgdmFyaWFudD1cInRleHRcIiBvbkNsaWNrPXsoKSA9PiAodGhpcy5kaXNwbGF5TW9kZSA9ICdzaWdudXAnKX0gZGlzYWJsZWQ9e3RoaXMubG9nZ2luZ0lufSAvPlxuICAgICAgICA8L2g0PlxuXG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXsoKSA9PiB0aGlzLmhhbmRsZUxvZ2luKCl9PlxuICAgICAgICAgIDx2ZXJkb2NzLXRleHQtaW5wdXQgbGFiZWw9XCJFbWFpbFwiIGF1dG9jb21wbGV0ZT1cInVzZXJuYW1lXCIgdmFsdWU9e3RoaXMudXNlcm5hbWV9IG9uSW5wdXQ9eyhlOiBhbnkpID0+ICh0aGlzLnVzZXJuYW1lID0gZS50YXJnZXQudmFsdWUpfSBkaXNhYmxlZD17dGhpcy5sb2dnaW5nSW59IC8+XG4gICAgICAgICAgPHZlcmRvY3MtdGV4dC1pbnB1dFxuICAgICAgICAgICAgbGFiZWw9XCJQYXNzd29yZFwiXG4gICAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxuICAgICAgICAgICAgYXV0b2NvbXBsZXRlPVwiY3VycmVudC1wYXNzd29yZFwiXG4gICAgICAgICAgICB2YWx1ZT17dGhpcy5wYXNzd29yZH1cbiAgICAgICAgICAgIG9uSW5wdXQ9eyhlOiBhbnkpID0+ICh0aGlzLnBhc3N3b3JkID0gZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMubG9nZ2luZ0lufVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICA8dmVyZG9jcy1idXR0b25cbiAgICAgICAgICAgIGxhYmVsPVwiRm9yZ290IFlvdXIgUGFzc3dvcmQ/XCJcbiAgICAgICAgICAgIHZhcmlhbnQ9XCJ0ZXh0XCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+ICh0aGlzLmRpc3BsYXlNb2RlID0gJ3NpZ251cCcpfVxuICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMubG9nZ2luZ0lufVxuICAgICAgICAgICAgc3R5bGU9e3tkaXNwbGF5OiAnZmxleCcsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgbWFyZ2luOiAnMTBweCBhdXRvIDIwcHgnfX1cbiAgICAgICAgICAvPlxuXG4gICAgICAgICAgPHZlcmRvY3MtYnV0dG9uIGxhYmVsPVwiTG9naW5cIiBkaXNhYmxlZD17dGhpcy5sb2dnaW5nSW59IG9uQ2xpY2s9eygpID0+IHRoaXMuaGFuZGxlTG9naW4oKX0gc3R5bGU9e3tkaXNwbGF5OiAnZmxleCcsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgbWFyZ2luOiAnMTBweCBhdXRvIDAnfX0gLz5cbiAgICAgICAgPC9mb3JtPlxuXG4gICAgICAgIHt0aGlzLmxvZ2luRXJyb3IgPyA8dmVyZG9jcy1vay1kaWFsb2cgaGVhZGluZz1cIkxvZ2luIEVycm9yXCIgbWVzc2FnZT17dGhpcy5sb2dpbkVycm9yfSBvbk5leHQ9eygpID0+IHRoaXMuaGFuZGxlQ2xlYXJFcnJvcigpfSAvPiA6IDxkaXYgLz59XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG4iLCJAaW1wb3J0ICcuLi8uLi8uLi90aGVtZS5zY3NzJztcblxudmVyZG9jcy1hdXRoIHtcbiAgZm9udC1mYW1pbHk6ICR2ZXJkb2NzLXByaW1hcnktZm9udDtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cbiAgLmxvZ2luLWZvcm0sXG4gIC5zaWdudXAtZm9ybSB7XG4gICAgYmFja2dyb3VuZDogJHZlcmRvY3MtZ3JleS00O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgd2lkdGg6IDMwMHB4O1xuICAgIG1heC13aWR0aDogMTAwJTtcbiAgfVxuXG4gIC5sb2dvIHtcbiAgICBtYXJnaW46IDIwcHggMCAzMHB4O1xuICAgIHdpZHRoOiAxMjhweDtcbiAgICBtYXgtd2lkdGg6IDEwMCU7XG4gIH1cblxuICBoMyB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgZm9udC1zaXplOiAxNnB4O1xuICAgIGxpbmUtaGVpZ2h0OiAxLjc1O1xuICAgIG1hcmdpbjogMDtcbiAgfVxuXG4gIGg0IHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgbGluZS1oZWlnaHQ6IDEuNDM7XG4gICAgbWFyZ2luOiAwO1xuICB9XG5cbiAgLnN0YXR1cy1yZXN1bHQge1xuICAgIGRpc3BsYXk6IG5vbmU7XG5cbiAgICAmLmRlYnVnIHtcbiAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIGJhY2tncm91bmQ6ICNmZmY7XG4gICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgfVxuICB9XG5cbiAgZm9ybSB7XG4gICAgd2lkdGg6IDEwMCU7XG4gIH1cblxuICB2ZXJkb2NzLXRleHQtaW5wdXQge1xuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=
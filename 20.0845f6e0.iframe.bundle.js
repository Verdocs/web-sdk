/*! For license information please see 20.0845f6e0.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"./dist/esm/Templates-22116158.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getTemplates})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getTemplate}));var getTemplates=function getTemplates(endpoint,params){return endpoint.api.get("/templates",{params:params}).then((function(r){return r.data}))},getTemplate=function getTemplate(endpoint,templateId){return endpoint.api.get("/templates/".concat(templateId)).then((function(r){return r.data}))}},"./dist/esm/utils-74227747.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getRoleIndex})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getRGBA})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getFieldId})),__webpack_require__.d(__webpack_exports__,"d",(function(){return rescale})),__webpack_require__.d(__webpack_exports__,"e",(function(){return fullNameToInitials})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getFieldSettings})),__webpack_require__.d(__webpack_exports__,"g",(function(){return integerSequence})),__webpack_require__.d(__webpack_exports__,"h",(function(){return renderDocumentField})),__webpack_require__.d(__webpack_exports__,"i",(function(){return setControlStyles}));__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js");function getRGBA(roleIndex){switch(roleIndex%10){case 0:return 0===roleIndex?"rgba(255, 193, 7, 0.4)":"rgba(134, 134, 134, 0.3)";case 1:return"rgba(156, 39, 176, .4)";case 2:return"rgba(33, 150, 243, .4)";case 3:return"rgba(220, 231, 117, 0.3)";case 4:return"rgba(121, 134, 203, 0.3)";case 5:return"rgba(77, 182, 172, 0.3)";case 6:return"rgba(255, 202, 165, 0.3)";case 7:return"rgba(2, 247, 190, 0.3)";case 8:return"rgba(255, 138, 101, 0.3)";case 9:return"rgba(82, 255, 79, 0.3)";default:return"rgba(229, 115, 155, 0.3)"}}function rescale(r,n){return r*n}var integerSequence=function integerSequence(start,count){return Array(count).fill(1).map((function(_,index){return index+start}))},fullNameToInitials=function fullNameToInitials(name){return name.split(" ").map((function(word){return word[0]})).join("")},setControlStyles=function setControlStyles(el,field,xScale,yScale,roleIndex,option){var _a,_b,_c,_d,settings=field.setting||field.settings,_settings$x=settings.x,x=void 0===_settings$x?0:_settings$x,_settings$y=settings.y,y=void 0===_settings$y?0:_settings$y,_settings$width=settings.width,width=void 0===_settings$width?function defaultWidth(field){switch(field.type){case"attachment":case"payment":return 24;case"checkbox":case"checkbox_group":case"radio_button_group":return 14;case"signature":case"initial":return 82}return 150}(field):_settings$width,_settings$height=settings.height,height=void 0===_settings$height?function defaultHeight(field){switch(field.type){case"attachment":case"payment":return 24;case"checkbox":case"checkbox_group":case"radio_button_group":return 14;case"signature":case"initial":return 41}return 50}(field):_settings$height,optionSettings=void 0!==option&&settings.options[option]?settings.options[option]:null;optionSettings&&(x=null!==(_a=optionSettings.x)&&void 0!==_a?_a:x,y=null!==(_b=optionSettings.y)&&void 0!==_b?_b:y,width=null!==(_c=optionSettings.width)&&void 0!==_c?_c:width,height=null!==(_d=optionSettings.height)&&void 0!==_d?_d:height),el.style.width=width+"px",el.style.height=height+"px",el.style.position="absolute",el.style.left=rescale(xScale,x)+"px",el.style.bottom=rescale(yScale,y)+"px",el.style.transform="scale("+xScale+", "+yScale+")",el.style.backgroundColor=field.rgba||getRGBA(roleIndex)},getFieldId=function getFieldId(field){return"verdocs-doc-fld-"+field.name},getFieldOptionId=function getFieldOptionId(field,index){return"verdocs-doc-fld-"+field.name+"-"+index},renderDocumentField=function renderDocumentField(field,docPage,roleIndex,handleFieldChange,disabled){var controlsDiv=document.getElementById(docPage.containerId+"-controls");if(controlsDiv)switch(field.type){case"attachment":case"date":case"dropdown":case"initial":case"payment":case"signature":case"timestamp":case"textarea":case"textbox":var id=getFieldId(field),existingField=document.getElementById(id);if(existingField)return void setControlStyles(existingField,field,docPage.xScale,docPage.yScale,roleIndex);var el=document.createElement("verdocs-field-"+field.type);el.field=field,el.setAttribute("id",id),disabled&&el.setAttribute("disabled",!0),el.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(el,field,docPage.xScale,docPage.yScale,roleIndex),controlsDiv.appendChild(el);break;case"checkbox_group":field.setting.options.forEach((function(option,checkboxIndex){var id=getFieldOptionId(field,checkboxIndex),existingField=document.getElementById(id);if(existingField)setControlStyles(existingField,field,docPage.xScale,docPage.yScale,roleIndex,checkboxIndex);else{console.log("Adding checkbox",option);var cbEl=document.createElement("verdocs-field-checkbox");cbEl.field=field,cbEl.setAttribute("id",id),cbEl.setAttribute("option",checkboxIndex),disabled&&cbEl.setAttribute("disabled",!0),cbEl.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(cbEl,field,docPage.xScale,docPage.yScale,roleIndex,checkboxIndex),controlsDiv.appendChild(cbEl)}}));break;case"radio_button_group":field.setting.options.forEach((function(option,buttonIndex){var id=getFieldOptionId(field,buttonIndex),existingField=document.getElementById(id);if(existingField)setControlStyles(existingField,field,docPage.xScale,docPage.yScale,roleIndex,buttonIndex);else{console.log("Adding radio button",option);var cbEl=document.createElement("verdocs-field-radio-button");cbEl.field=field,cbEl.setAttribute("id",id),cbEl.setAttribute("option",buttonIndex),disabled&&cbEl.setAttribute("disabled",!0),cbEl.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(cbEl,field,docPage.xScale,docPage.yScale,roleIndex,buttonIndex),controlsDiv.appendChild(cbEl)}}));break;default:console.log("[PREVIEW] Skipping unsupported field type",field)}},getRoleIndex=function getRoleIndex(roles,role){return roles.indexOf(role)||0},getFieldSettings=function getFieldSettings(field){return field.setting?field.setting:field.settings?field.settings:{x:0,y:0,required:!1,disabled:!1,result:"",value:""}}},"./dist/esm/verdocs-template-fields.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"verdocs_template_fields",(function(){return VerdocsTemplateFields}));__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js");var _index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./dist/esm/index-43893f54.js"),_Templates_22116158_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./dist/esm/Templates-22116158.js"),_utils_74227747_js__WEBPACK_IMPORTED_MODULE_28__=(__webpack_require__("./dist/esm/Types-ab9f6af8.js"),__webpack_require__("./dist/esm/utils-74227747.js")),_VerdocsEndpoint_9db225a3_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./dist/esm/VerdocsEndpoint-9db225a3.js");function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var VerdocsTemplateFields=function(){function VerdocsTemplateFields(hostRef){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,VerdocsTemplateFields),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.h)(this,hostRef),this.save=Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.d)(this,"save",7),this.cancel=Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.d)(this,"cancel",7),this.sdkError=Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.d)(this,"sdkError",7),this.endpoint=_VerdocsEndpoint_9db225a3_js__WEBPACK_IMPORTED_MODULE_29__.a.getDefault(),this.templateId=null,this.pdfUrl=null,this.template=null,this.roles=[],this.fields=[]}var _handleFieldChange,_componentWillLoad;return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(VerdocsTemplateFields,[{key:"componentWillLoad",value:(_componentWillLoad=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var _a,template,_this=this;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,console.log("[PREVIEW] Loading template "+this.templateId),_context.next=4,Object(_Templates_22116158_js__WEBPACK_IMPORTED_MODULE_26__.b)(this.endpoint,this.templateId);case 4:template=_context.sent,console.log("[PREVIEW] Got template",this.template),this.template=template,this.pdfUrl=this.endpoint.getBaseURL()+"/templates/"+this.templateId+"/documents/"+(null===(_a=template.template_document)||void 0===_a?void 0:_a.id)+"?file=true",this.roles=template.roles.map((function(role){return role.name})),console.log("[PREVIEW] Loaded roles",this.roles),this.fields=[],template.roles.forEach((function(role){var _this$fields;(_this$fields=_this.fields).push.apply(_this$fields,_toConsumableArray(role.fields))})),console.log("[PREVIEW] Loaded fields",this.fields),_context.next=18;break;case 15:_context.prev=15,_context.t0=_context.catch(0),console.log("[PREVIEW] Error with preview session",_context.t0);case 18:case"end":return _context.stop()}}),_callee,this,[[0,15]])}))),function componentWillLoad(){return _componentWillLoad.apply(this,arguments)})},{key:"handleFieldChange",value:(_handleFieldChange=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(field,e,optionId){return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:console.log("[PREVIEW] handleFieldChange",field,e,optionId);case 1:case"end":return _context2.stop()}}),_callee2)}))),function handleFieldChange(_x,_x2,_x3){return _handleFieldChange.apply(this,arguments)})},{key:"handlePageRendered",value:function handlePageRendered(e){var _this2=this,pageInfo=e.detail;console.log("[PREVIEW] Page rendered",pageInfo);var fields=this.fields.filter((function(field){return field.page_sequence===pageInfo.renderedPage.pageNumber}));console.log("[PREVIEW] Fields on page",fields),fields.forEach((function(field){return Object(_utils_74227747_js__WEBPACK_IMPORTED_MODULE_28__.h)(field,pageInfo.renderedPage,Object(_utils_74227747_js__WEBPACK_IMPORTED_MODULE_28__.a)(_this2.roles,field.role_name),_this2.handleFieldChange,!0)}))}},{key:"render",value:function render(){var _this3=this;return Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.b,{class:{storybook:!!(null===window||void 0===window?void 0:window.STORYBOOK_ENV)}},Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"document"},this.pdfUrl?Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"inner"},Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"fields-bar"},Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"label"},"Drag to Add Field:"),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"icon",innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M3.425 16.15V13h11.15v3.15Zm0-5.15V7.85h17.15V11Z"/></svg>',title:"Single-line Text"}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"icon",innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M3.225 20.725v-3.15h11.55v3.15Zm0-4.775V12.8h17.55v3.15Zm0-4.75V8.05h17.55v3.15Zm0-4.775v-3.15h17.55v3.15Z"/></svg>',title:"Multi-line Text"}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"icon",innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" height="40" width="40"><path d="m17.417 27.625 12.458-12.5L27 12.208l-9.583 9.542-4.459-4.458-2.916 2.916Zm-9.209 8.542q-1.833 0-3.104-1.271-1.271-1.271-1.271-3.104V8.208q0-1.833 1.271-3.125 1.271-1.291 3.104-1.291h23.584q1.833 0 3.125 1.291 1.291 1.292 1.291 3.125v23.584q0 1.833-1.291 3.104-1.292 1.271-3.125 1.271Zm0-4.375h23.584V8.208H8.208v23.584Zm0-23.584v23.584V8.208Z"/></svg>',title:"Checkbox"}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"icon",innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M12 17q2.075 0 3.538-1.463Q17 14.075 17 12t-1.462-3.538Q14.075 7 12 7 9.925 7 8.463 8.462 7 9.925 7 12q0 2.075 1.463 3.537Q9.925 17 12 17Zm0 5.85q-2.275 0-4.25-.85t-3.438-2.312Q2.85 18.225 2 16.25q-.85-1.975-.85-4.25T2 7.75q.85-1.975 2.312-3.438Q5.775 2.85 7.75 2q1.975-.85 4.25-.85t4.25.85q1.975.85 3.438 2.312Q21.15 5.775 22 7.75q.85 1.975.85 4.25T22 16.25q-.85 1.975-2.312 3.438Q18.225 21.15 16.25 22q-1.975.85-4.25.85Zm0-3.15q3.25 0 5.475-2.225Q19.7 15.25 19.7 12q0-3.25-2.225-5.475Q15.25 4.3 12 4.3q-3.25 0-5.475 2.225Q4.3 8.75 4.3 12q0 3.25 2.225 5.475Q8.75 19.7 12 19.7Zm0-7.7Z"/></svg>',title:"Radio Button"}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"icon",innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M7.6 13.925q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375Zm4.4 0q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375Zm4.4 0q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375ZM5.3 22.85q-1.325 0-2.238-.912-.912-.913-.912-2.238V6.3q0-1.325.912-2.238.913-.912 2.238-.912H6v-2h2.575v2h6.85v-2H18v2h.7q1.325 0 2.238.912.912.913.912 2.238v13.4q0 1.325-.912 2.238-.913.912-2.238.912Zm0-3.15h13.4V10H5.3v9.7ZM5.3 8h13.4V6.3H5.3Zm0 0V6.3 8Z"/></svg>',title:"Date Picker"}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"icon",innerHTML:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"  fit="" preserveAspectRatio="xMidYMid meet" focusable="false">      <defs></defs>      <g id="Material-Design-Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">          <g id="signer-signature">              <g id="ic_gesture_black_24px">                  <polygon id="Shape" points="0 0 24 0 24 24 0 24"></polygon>                  <polygon id="Shape" fill="#000000" fill-rule="nonzero" points="4 17 20 17 20 19 4 19"></polygon>                  <path d="M6,13.6367319 L6,16 L8.36326806,16 L15.3333333,9.02993473 L12.9700653,6.66666667 L6,13.6367319 Z M17.8007663,6.75351213 C18.0664112,6.48786718 18.0664112,6.0587484 17.8007663,5.79310345 L16.2068966,4.19923372 C15.9412516,3.93358876 15.5121328,3.93358876 15.2464879,4.19923372 L14,5.44572158 L16.5542784,8 L17.8007663,6.75351213 Z" id="Shape" fill="#000000" fill-rule="nonzero"></path>              </g>          </g>      </g>    </svg>',title:"Signature"}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"icon",innerHTML:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false">      <defs></defs>      <g id="Material-Design-Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">          <g id="signer-intial">              <g id="ic_gesture_black_24px">                  <polygon id="Shape" points="0 0 24 0 24 24 0 24"></polygon>                  <polygon id="Shape" fill="#000000" fill-rule="nonzero" points="4 17 20 17 20 19 4 19"></polygon>                  <path d="M5,12.3087071 L7.27440633,12.1662269 C7.323659,12.5356219 7.42392185,12.8170615 7.57519789,13.0105541 C7.82146121,13.3236603 8.17326069,13.4802111 8.63060686,13.4802111 C8.97185747,13.4802111 9.23482757,13.4001767 9.41952507,13.2401055 C9.60422256,13.0800344 9.69656992,12.8944602 9.69656992,12.6833773 C9.69656992,12.4828486 9.60862005,12.3034309 9.43271768,12.1451187 C9.2568153,11.9868066 8.84872792,11.8372918 8.20844327,11.6965699 C7.16006512,11.4608607 6.41249124,11.1477592 5.96569921,10.7572559 C5.51538913,10.3667527 5.29023747,9.86895641 5.29023747,9.26385224 C5.29023747,8.86631288 5.40545179,8.49076694 5.63588391,8.13720317 C5.86631602,7.78363939 6.2128385,7.50571781 6.67546174,7.30343008 C7.13808499,7.10114235 7.77220354,7 8.57783641,7 C9.56640776,7 10.3201381,7.18381522 10.8390501,7.55145119 C11.3579621,7.91908715 11.6666662,8.50395377 11.7651715,9.3060686 L9.51187335,9.43799472 C9.45206654,9.08970802 9.32629823,8.8364124 9.13456464,8.67810026 C8.94283106,8.51978813 8.67810195,8.44063325 8.34036939,8.44063325 C8.06244364,8.44063325 7.85312296,8.49955966 7.71240106,8.61741425 C7.57167916,8.73526884 7.50131926,8.87862712 7.50131926,9.0474934 C7.50131926,9.17062507 7.55936617,9.2814419 7.67546174,9.37994723 C7.78803926,9.48197061 8.05540686,9.57695646 8.47757256,9.66490765 C9.52243266,9.89006269 10.270886,10.1178528 10.7229551,10.348285 C11.1750242,10.5787171 11.5039568,10.8645541 11.7097625,11.2058047 C11.9155683,11.5470554 12.0184697,11.9287578 12.0184697,12.3509235 C12.0184697,12.8469682 11.8812679,13.3043075 11.6068602,13.7229551 C11.3324525,14.1416028 10.948991,14.4591018 10.4564644,14.6754617 C9.96393773,14.8918217 9.34301166,15 8.59366755,15 C7.27791778,15 6.36675715,14.7467044 5.86015831,14.2401055 C5.35355947,13.7335067 5.0668429,13.0897137 5,12.3087071 Z M13.364493,7.13192612 L15.7549943,7.13192612 L15.7549943,12.9630607 L19.4858651,12.9630607 L19.4858651,14.8680739 L13.364493,14.8680739 L13.364493,7.13192612 Z" id="SL" fill="#000000"></path>              </g>          </g>      </g>    </svg>',title:"Initials"})),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"page-0"},Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"user-placed-fields"},Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"title"},"User-Placed Fields"),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("verdocs-field-signature",{field:{template_id:"",name:"test",role_name:"Recipient 1",type:"textbox",required:!0,setting:{x:0,y:0},page_sequence:0},style:{width:"82px",height:"41px",left:"20px",top:"40px",transform:"scale(1,1)",backgroundColor:Object(_utils_74227747_js__WEBPACK_IMPORTED_MODULE_28__.b)(0)}}))),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("verdocs-view",{source:this.pdfUrl,endpoint:this.endpoint,onPageRendered:function onPageRendered(e){return _this3.handlePageRendered(e)},pageLayers:[{name:"page",type:"canvas"},{name:"controls",type:"div"}]}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("verdocs-dropdown",{options:[{label:"Option 1"},{label:"Disabled Option",disabled:!0},{label:"Option 2"}]})):Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_25__.f)("verdocs-loader",null)))}}]),VerdocsTemplateFields}();VerdocsTemplateFields.style='verdocs-template-fields{position:relative;font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-template-fields .page-0{padding:55px 15px 0 15px}verdocs-template-fields .page-0 .user-placed-fields{height:100px;position:relative;background:#ffffff;-webkit-box-shadow:0 0 10px 5px #0000000f;box-shadow:0 0 10px 5px #0000000f}verdocs-template-fields .page-0 .user-placed-fields .title{top:0;left:0;color:#ffffff;font-size:12px;padding:3px 6px;font-weight:bold;position:absolute;background:#46497d}verdocs-template-fields .fields-bar{width:91%;height:30px;display:-ms-flexbox;display:flex;z-index:10000;position:fixed;padding:5px 20px;line-height:28px;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;background:#46497d}verdocs-template-fields .fields-bar .label{color:#ffffff;font-size:14px;font-weight:bold;margin-right:8px}verdocs-template-fields .fields-bar .icon{margin:0 4px;display:-ms-flexbox;display:flex;-webkit-transform:scale(0.8, 0.8);transform:scale(0.8, 0.8)}verdocs-template-fields .fields-bar .icon svg{fill:#ffffff}'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMvVGVtcGxhdGVzLmpzIiwid2VicGFjazovLy9ub2RlX21vZHVsZXMvQHZlcmRvY3MvanMtc2RrL1V0aWxzL0NvbG9ycy5qcyIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9VdGlscy9GaWVsZHMuanMiLCJ3ZWJwYWNrOi8vL3NyYy91dGlscy91dGlscy50cyIsIndlYnBhY2s6Ly8vc3JjL2NvbXBvbmVudHMvZWxlbWVudHMvdmVyZG9jcy10ZW1wbGF0ZS1maWVsZHMvdmVyZG9jcy10ZW1wbGF0ZS1maWVsZHMuc2NzcyIsIndlYnBhY2s6Ly8vc3JjL2NvbXBvbmVudHMvZWxlbWVudHMvdmVyZG9jcy10ZW1wbGF0ZS1maWVsZHMvdmVyZG9jcy10ZW1wbGF0ZS1maWVsZHMudHN4Il0sIm5hbWVzIjpbImdldFRlbXBsYXRlcyIsImVuZHBvaW50IiwicGFyYW1zIiwiYXBpIiwiZ2V0IiwidGhlbiIsInIiLCJkYXRhIiwiZ2V0VGVtcGxhdGUiLCJ0ZW1wbGF0ZUlkIiwiY29uY2F0IiwiZ2V0UkdCQSIsInJvbGVJbmRleCIsInJlc2NhbGUiLCJuIiwiaW50ZWdlclNlcXVlbmNlIiwic3RhcnQiLCJjb3VudCIsIkFycmF5IiwiZmlsbCIsIm1hcCIsIl8iLCJpbmRleCIsImZ1bGxOYW1lVG9Jbml0aWFscyIsIm5hbWUiLCJzcGxpdCIsIndvcmQiLCJqb2luIiwic2V0Q29udHJvbFN0eWxlcyIsImVsIiwiZmllbGQiLCJ4U2NhbGUiLCJ5U2NhbGUiLCJvcHRpb24iLCJzZXR0aW5ncyIsInNldHRpbmciLCJ4IiwieSIsIndpZHRoIiwiZGVmYXVsdFdpZHRoIiwidHlwZSIsImhlaWdodCIsImRlZmF1bHRIZWlnaHQiLCJvcHRpb25TZXR0aW5ncyIsInVuZGVmaW5lZCIsIm9wdGlvbnMiLCJfYSIsIl9iIiwiX2MiLCJfZCIsInN0eWxlIiwicG9zaXRpb24iLCJsZWZ0IiwiYm90dG9tIiwidHJhbnNmb3JtIiwiYmFja2dyb3VuZENvbG9yIiwiZ2V0RmllbGRJZCIsImdldEZpZWxkT3B0aW9uSWQiLCJyZW5kZXJEb2N1bWVudEZpZWxkIiwiZG9jUGFnZSIsImhhbmRsZUZpZWxkQ2hhbmdlIiwiZGlzYWJsZWQiLCJjb250cm9sc0RpdiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250YWluZXJJZCIsImlkIiwiZXhpc3RpbmdGaWVsZCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImFwcGVuZENoaWxkIiwiZm9yRWFjaCIsImNoZWNrYm94SW5kZXgiLCJjb25zb2xlIiwibG9nIiwiY2JFbCIsImJ1dHRvbkluZGV4IiwiZ2V0Um9sZUluZGV4Iiwicm9sZXMiLCJyb2xlIiwiaW5kZXhPZiIsImdldEZpZWxkU2V0dGluZ3MiLCJyZXF1aXJlZCIsInJlc3VsdCIsInZhbHVlIiwiVmVyZG9jc1RlbXBsYXRlRmllbGRzIiwiVmVyZG9jc0VuZHBvaW50IiwiZ2V0RGVmYXVsdCIsInBkZlVybCIsInRlbXBsYXRlIiwiZmllbGRzIiwidGhpcyIsImdldEJhc2VVUkwiLCJ0ZW1wbGF0ZV9kb2N1bWVudCIsInB1c2giLCJvcHRpb25JZCIsImhhbmRsZVBhZ2VSZW5kZXJlZCIsInBhZ2VJbmZvIiwiZGV0YWlsIiwiZmlsdGVyIiwicGFnZV9zZXF1ZW5jZSIsInJlbmRlcmVkUGFnZSIsInBhZ2VOdW1iZXIiLCJyb2xlX25hbWUiLCJyZW5kZXIiLCJoIiwiSG9zdCIsImNsYXNzIiwic3Rvcnlib29rIiwid2luZG93IiwiaW5uZXJIVE1MIiwidGl0bGUiLCJ0ZW1wbGF0ZV9pZCIsInRvcCIsInNvdXJjZSIsIm9uUGFnZVJlbmRlcmVkIiwicGFnZUxheWVycyIsImxhYmVsIl0sIm1hcHBpbmdzIjoiO21LQUFBLGlLQXNEVSxJQUFDQSxhQUFlLFNBQWZBLGFBQXlCQyxTQUFVQyxRQUMxQyxPQUFPRCxTQUFTRSxJQUNY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YUFDOUNOLGtFQUFLRSxNQUFNLE9BQU9HLFVBeEloQyw0cEJBd0lzREMsTUFBTSxpQkFDOUNOLGtFQUFLRSxNQUFNLE9BQU9HLFVBdEloQywyc0JBc0kyREMsTUFBTSxnQkFDbkROLGtFQUFLRSxNQUFNLE9BQU9HLFVBcEloQyxrOUJBb0kwREMsTUFBTSxjQUNsRE4sa0VBQUtFLE1BQU0sT0FBT0csVUF2SGhDLG9oRkF1SHdEQyxNQUFNLGNBR2xETixrRUFBS0UsTUFBTSxVQUNURixrRUFBS0UsTUFBTSxzQkFDVEYsa0VBQUtFLE1BQU0sU0FBTyxzQkFDbEJGLHNGQUNFN0UsTUFqQ2tCLENBQ2hDb0YsWUFBYSxHQUNiMUYsS0FBTSxPQUNOaUYsVUFBVyxjQUNYakUsS0FBTSxVQUNONEMsVUFBVSxFQUNWakQsUUFBUyxDQUNQQyxFQUFHLEVBQ0hDLEVBQUcsR0FFTGlFLGNBQWUsR0F3QkRwRCxNQUFPLENBQUNaLE1BQU8sT0FBUUcsT0FBUSxPQUFRVyxLQUFNLE9BQVErRCxJQUFLLE9BQVE3RCxVQUFXLGFBQWNDLGdCQUFpQjVDLDJEQUFRLFFBSzFIZ0csMkVBQ0VTLE9BQVF2QixLQUFLSCxPQUNiekYsU0FBVTRGLEtBQUs1RixTQUNmb0gsZUFBZ0Isd0JBQUE5QyxHQUFDLE9BQUksT0FBSzJCLG1CQUFtQjNCLEVBQTVCLEVBQ2pCK0MsV0FBWSxDQUNWLENBQUM5RixLQUFNLE9BQVFnQixLQUFNLFVBQ3JCLENBQUNoQixLQUFNLFdBQVlnQixLQUFNLFVBSTdCbUUsK0VBQWtCOUQsUUFBUyxDQUFDLENBQUMwRSxNQUFPLFlBQWEsQ0FBQ0EsTUFBTyxrQkFBbUIxRCxVQUFVLEdBQU8sQ0FBQzBELE1BQU8sZ0JBR3ZHWixtRkFLVCxLQWhJK0IseUIsNEJENURELGtsQyIsImZpbGUiOiIyMC4wODQ1ZjZlMC5pZnJhbWUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBIFRlbXBsYXRlIGRlZmluZXMgaG93IGEgVmVyZG9jcyBzaWduaW5nIGZsb3cgd2lsbCBiZSBwZXJmb3JtZWQsIGluY2x1ZGluZyBhdHRhY2htZW50cywgc2lnbmluZyBmaWVsZHMsIGFuZFxuICogcmVjaXBpZW50cy5cbiAqXG4gKiBAbW9kdWxlXG4gKi9cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG4vKipcbiAqIEdldCBhbGwgdGVtcGxhdGVzIGFjY2Vzc2libGUgYnkgdGhlIGNhbGxlciwgd2l0aCBvcHRpb25hbCBmaWx0ZXJzLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBhd2FpdCBUZW1wbGF0ZXMuZ2V0VGVtcGxhdGVzKCk7XG4gKiBhd2FpdCBUZW1wbGF0ZXMuZ2V0VGVtcGxhdGVzKHsgaXNfc3RhcnJlZDogdHJ1ZSB9KTtcbiAqIGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZXMoeyBpc19jcmVhdG9yOiB0cnVlIH0pO1xuICogYXdhaXQgVGVtcGxhdGVzLmdldFRlbXBsYXRlcyh7IGlzX29yZ2FuaXphdGlvbjogdHJ1ZSB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGdldFRlbXBsYXRlcyA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAuZ2V0KCcvdGVtcGxhdGVzJywgeyBwYXJhbXM6IHBhcmFtcyB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIEdldCBvbmUgdGVtcGxhdGUgYnkgaXRzIElELlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBjb25zdCB0ZW1wbGF0ZSA9IGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZSgnODNkYTNkNzAtNzg1Ny00MzkyLWI4NzYtYzQ1OTJhMzA0YmM5Jyk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBnZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uIChlbmRwb2ludCwgdGVtcGxhdGVJZCkge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLmdldChcIi90ZW1wbGF0ZXMvXCIuY29uY2F0KHRlbXBsYXRlSWQpKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIEdldCBvd25lciBpbmZvcm1hdGlvbiBmb3IgYSB0ZW1wbGF0ZS5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1RlbXBsYXRlc30gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcyc7XG4gKlxuICogY29uc3QgdGVtcGxhdGUgPSBhd2FpdCBUZW1wbGF0ZXMuZ2V0VGVtcGxhdGVPd25lckluZm8oJzgzZGEzZDcwLTc4NTctNDM5Mi1iODc2LWM0NTkyYTMwNGJjOScpO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VGVtcGxhdGVPd25lckluZm8gPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHRlbXBsYXRlSWQpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5nZXQoXCIvdGVtcGxhdGVzL1wiLmNvbmNhdCh0ZW1wbGF0ZUlkKSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xuLyoqXG4gKiBDcmVhdGUgYSB0ZW1wbGF0ZS5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1RlbXBsYXRlc30gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcyc7XG4gKlxuICogY29uc3QgbmV3VGVtcGxhdGUgPSBhd2FpdCBUZW1wbGF0ZXMuY3JlYXRlVGVtcGxhdGUoey4uLn0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgY3JlYXRlVGVtcGxhdGUgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHBhcmFtcykge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLnBvc3QoJy90ZW1wbGF0ZXMvJywgcGFyYW1zKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIFVwZGF0ZSBhIHRlbXBsYXRlLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBjb25zdCB1cGRhdGVkVGVtcGxhdGUgPSBhd2FpdCBUZW1wbGF0ZXMudXBkYXRlVGVtcGxhdGUoJzgzZGEzZDcwLTc4NTctNDM5Mi1iODc2LWM0NTkyYTMwNGJjOScsIHsgbmFtZTogJ05ldyBOYW1lJyB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIHVwZGF0ZVRlbXBsYXRlID0gZnVuY3Rpb24gKGVuZHBvaW50LCB0ZW1wbGF0ZUlkLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5wdXQoXCIvdGVtcGxhdGVzL1wiLmNvbmNhdCh0ZW1wbGF0ZUlkKSwgcGFyYW1zKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIFNlYXJjaCBmb3IgdGVtcGxhdGVzIG1hdGNoaW5nIHZhcmlvdXMgY3JpdGVyaWEuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGNvbnN0IHtyZXN1bHQsIHBhZ2UsIHRvdGFsfSA9IGF3YWl0IFRlbXBsYXRlcy5zZWFyY2goeyAuLi4gfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBzZWFyY2hUZW1wbGF0ZXMgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHBhcmFtcykgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgICAgICAgICAucG9zdCgnL3RlbXBsYXRlcy9zZWFyY2gnLCBwYXJhbXMpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSldO1xuICAgIH0pO1xufSk7IH07XG4vKipcbiAqIEdldCBhIHN1bW1hcnkgb2YgdGVtcGxhdGUgZGF0YSwgdHlwaWNhbGx5IHVzZWQgdG8gcG9wdWxhdGUgYWRtaW4gcGFuZWwgZGFzaGJvYXJkIHBhZ2VzLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBjb25zdCBzdW1tYXJ5ID0gYXdhaXQgVGVtcGxhdGVzLmdldFN1bW1hcnkoMCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBnZXRTdW1tYXJ5ID0gZnVuY3Rpb24gKGVuZHBvaW50LCBwYWdlKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAgICAgICAgIC5wb3N0KCcvdGVtcGxhdGVzL3N1bW1hcnknLCB7IHBhZ2U6IHBhZ2UgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KV07XG4gICAgfSk7XG59KTsgfTtcbiIsIi8qKlxuICogR2l2ZW4gYSBgcmdiYShyLGcsYixhKWAgc3RyaW5nIHZhbHVlLCByZXR1cm5zIHRoZSBoZXggZXF1aXZhbGVudCwgZHJvcHBpbmcgdGhlIGFscGhhIGNoYW5uZWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSR0IocmdiYSkge1xuICAgIHZhciByZ2JOdW1iZXJzID0gcmdiYS5yZXBsYWNlKCdyZ2JhKCcsICcnKS5yZXBsYWNlKCcpJywgJycpLnNwbGl0KCcsJyk7XG4gICAgdmFyIHJnYk9iamVjdCA9IHtcbiAgICAgICAgcmVkOiArcmdiTnVtYmVyc1swXSxcbiAgICAgICAgZ3JlZW46ICtyZ2JOdW1iZXJzWzFdLFxuICAgICAgICBibHVlOiArcmdiTnVtYmVyc1syXSxcbiAgICAgICAgYWxwaGE6ICtyZ2JOdW1iZXJzWzNdLFxuICAgIH07XG4gICAgdmFyIGFscGhhID0gMSAtIHJnYk9iamVjdC5hbHBoYTtcbiAgICB2YXIgcmVkID0gTWF0aC5yb3VuZCgocmdiT2JqZWN0LmFscGhhICogKHJnYk9iamVjdC5yZWQgLyAyNTUpICsgYWxwaGEpICogMjU1KTtcbiAgICB2YXIgZ3JlZW4gPSBNYXRoLnJvdW5kKChyZ2JPYmplY3QuYWxwaGEgKiAocmdiT2JqZWN0LmdyZWVuIC8gMjU1KSArIGFscGhhKSAqIDI1NSk7XG4gICAgdmFyIGJsdWUgPSBNYXRoLnJvdW5kKChyZ2JPYmplY3QuYWxwaGEgKiAocmdiT2JqZWN0LmJsdWUgLyAyNTUpICsgYWxwaGEpICogMjU1KTtcbiAgICByZXR1cm4gJyMnICsgcmdiVG9IZXgocmVkKSArIHJnYlRvSGV4KGdyZWVuKSArIHJnYlRvSGV4KGJsdWUpO1xufVxuLyoqXG4gKiBHaXZlbiBhbiBSR0Igc3RyaW5nIHZhbHVlLCByZXR1cm5zIHRoZSBoZXggZXF1aXZhbGVudC5cbiAqL1xuZnVuY3Rpb24gcmdiVG9IZXgocmdiKSB7XG4gICAgdmFyIGhleCA9IHJnYi50b1N0cmluZygxNik7XG4gICAgaWYgKGhleC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiAnMCcgKyBoZXg7XG4gICAgfVxuICAgIHJldHVybiBoZXg7XG59XG4vKipcbiAqIEdpdmVuIGEgc2lnbmVyIHJvbGUgaW5kZXgsIHJldHVybiB0aGUgY29sb3IgY29kZSBmb3IgdGhhdCBzaWduZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSR0JBKHJvbGVJbmRleCkge1xuICAgIHN3aXRjaCAocm9sZUluZGV4ICUgMTApIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIHJvbGVJbmRleCA9PT0gMCA/ICdyZ2JhKDI1NSwgMTkzLCA3LCAwLjQpJyA6ICdyZ2JhKDEzNCwgMTM0LCAxMzQsIDAuMyknOyAvLyAjRkZFNjlDXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgxNTYsIDM5LCAxNzYsIC40KSc7IC8vICcjRTNDM0U5J1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMzMsIDE1MCwgMjQzLCAuNCknOyAvLyAnI0MxRTFGQidcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDIyMCwgMjMxLCAxMTcsIDAuMyknO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMTIxLCAxMzQsIDIwMywgMC4zKSc7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSg3NywgMTgyLCAxNzIsIDAuMyknO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMjU1LCAyMDIsIDE2NSwgMC4zKSc7XG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgyLCAyNDcsIDE5MCwgMC4zKSc7XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgyNTUsIDEzOCwgMTAxLCAwLjMpJztcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDgyLCAyNTUsIDc5LCAwLjMpJztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgyMjksIDExNSwgMTU1LCAwLjMpJztcbiAgICB9XG59XG4vKipcbiAqIEdpdmVuIGEgcm9sZSBuYW1lLCByZXR1cm4gYSBjb2xvciBjb2RlIGZvciBpdC4gVGhpcyB3b3JrcyBieSBjb21wdXRpbmcgYSBoYXNoIGNvZGUgc28gdGhlIHNwZWNpZmljIGNvbG9yIHJldHVybmVkXG4gKiBpcyBub3Qgc3BlY2lmaWVkIGV4cGxpY2l0bHksIGJ1dCB3aWxsIGJlIHRoZSBzYW1lIGZvciBldmVyeSBjYWxsIHdpdGggdGhlIHNhbWUgaW5wdXQgdmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBuYW1lVG9SR0JBKHN0cikge1xuICAgIGlmICghIXN0cikge1xuICAgICAgICB2YXIgdmFsaWROdW0gPSBwYXJzZUludChzdHIuc2xpY2UoLTEpLCAxMCk7XG4gICAgICAgIGlmICghaXNOYU4odmFsaWROdW0pKSB7XG4gICAgICAgICAgICBzdHIgKz0gKHZhbGlkTnVtICogOTkpLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhhc2ggPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaGFzaCA9IHN0ci5jaGFyQ29kZUF0KGkpICsgKChoYXNoIDw8IDUpIC0gaGFzaCk7XG4gICAgICAgIH1cbiAgICAgICAgaGFzaCA9IE1hdGgucm91bmQoaGFzaCAvIDEuMyk7XG4gICAgICAgIHZhciBjID0gKGhhc2ggJiAweDAwZmZmZjA4KS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgdmFyIGhleCA9ICcjJyArICcwMDAwMCcuc3Vic3RyaW5nKDAsIDYgLSBjLmxlbmd0aCkgKyBjO1xuICAgICAgICB2YXIgcmVzdWx0ID0gL14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaS5leGVjKGhleCk7XG4gICAgICAgIHZhciBjb2xvciA9IHtcbiAgICAgICAgICAgIHI6IHBhcnNlSW50KHJlc3VsdFsxXSwgMTYpLFxuICAgICAgICAgICAgZzogcGFyc2VJbnQocmVzdWx0WzJdLCAxNiksXG4gICAgICAgICAgICBiOiBwYXJzZUludChyZXN1bHRbM10sIDE2KSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFwicmdiYShcIi5jb25jYXQoY29sb3IuciwgXCIsIFwiKS5jb25jYXQoY29sb3IuZywgXCIsIFwiKS5jb25jYXQoY29sb3IuYiwgXCIsIDAuMilcIik7XG4gICAgfVxufVxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gb2J0YWluIGEgY29sb3IgY29kZSBnaXZlbiBhIHJvbGUgbmFtZSBnaXZlbiB2YXJpb3VzIHBvc3NpYmxlIGlucHV0cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJvbGVDb2xvcihuYW1lLCByb2xlcywgaW5kZXgpIHtcbiAgICBpZiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGdldFJHQkEoaW5kZXgpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyb2xlcyAmJiByb2xlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciByb2xlSW5kZXggPSByb2xlcy5maW5kSW5kZXgoZnVuY3Rpb24gKHJvbGUpIHsgcmV0dXJuIHJvbGUubmFtZSA9PT0gbmFtZTsgfSk7XG4gICAgICAgIGlmIChyb2xlSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHJvbGVzW3JvbGVJbmRleF0ucmdiYSB8fCBnZXRSR0JBKHJvbGVJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmFtZVRvUkdCQShuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5hbWVUb1JHQkEobmFtZSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGdldFJUb3AoeSwgZmllbGRIZWlnaHQsIGlUZXh0SGVpZ2h0LCB5UmF0aW8pIHtcbiAgICByZXR1cm4gaVRleHRIZWlnaHQgLSAoeSArIGZpZWxkSGVpZ2h0KSAqIHlSYXRpbztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRSTGVmdCh4LCByYXRpbykge1xuICAgIHJldHVybiB4ICogcmF0aW87XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UlZhbHVlKHksIHJhdGlvKSB7XG4gICAgcmV0dXJuIHkgKiByYXRpbztcbn1cbmV4cG9ydCBmdW5jdGlvbiBibG9iVG9CYXNlNjQoaW1hZ2UpIHtcbiAgICB2YXIgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZmlsZVJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ1Byb2JsZW0gcmVhZGluZyBibG9iLicpKTtcbiAgICAgICAgfTtcbiAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNvbHZlKGZpbGVSZWFkZXIucmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKGltYWdlKTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXNjYWxlKHIsIG4pIHtcbiAgICByZXR1cm4gciAqIG47XG59XG4iLCIvLyBUaGVzZSBzaG91bGQgcHJvYmFibHkgYWxsIG1vdmUgdG8gSlMtU0RLXG5pbXBvcnQge3Jlc2NhbGV9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9VdGlscy9GaWVsZHMnO1xuaW1wb3J0IHtnZXRSR0JBfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVXRpbHMvQ29sb3JzJztcbmltcG9ydCB7SVRlbXBsYXRlRmllbGR9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMvVHlwZXMnO1xuaW1wb3J0IHtJRG9jdW1lbnRGaWVsZH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL0RvY3VtZW50cy9UeXBlcyc7XG5pbXBvcnQge0lEb2N1bWVudFBhZ2VJbmZvfSBmcm9tICcuL1R5cGVzJztcblxuZXhwb3J0IGNvbnN0IGludGVnZXJTZXF1ZW5jZSA9IChzdGFydDogbnVtYmVyLCBjb3VudDogbnVtYmVyKTogbnVtYmVyW10gPT5cbiAgQXJyYXkoY291bnQpXG4gICAgLmZpbGwoMSlcbiAgICAubWFwKChfLCBpbmRleCkgPT4gaW5kZXggKyBzdGFydCk7XG5cbmV4cG9ydCBjb25zdCBmdWxsTmFtZVRvSW5pdGlhbHMgPSAobmFtZTogc3RyaW5nKSA9PlxuICBuYW1lXG4gICAgLnNwbGl0KCcgJylcbiAgICAubWFwKHdvcmQgPT4gd29yZFswXSlcbiAgICAuam9pbignJyk7XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0V2lkdGggPSAoZmllbGQ6IElUZW1wbGF0ZUZpZWxkIHwgSURvY3VtZW50RmllbGQpID0+IHtcbiAgc3dpdGNoIChmaWVsZC50eXBlKSB7XG4gICAgY2FzZSAnYXR0YWNobWVudCc6XG4gICAgY2FzZSAncGF5bWVudCc6XG4gICAgICByZXR1cm4gMjQ7XG4gICAgY2FzZSAnY2hlY2tib3gnOlxuICAgIGNhc2UgJ2NoZWNrYm94X2dyb3VwJzpcbiAgICBjYXNlICdyYWRpb19idXR0b25fZ3JvdXAnOlxuICAgICAgcmV0dXJuIDE0O1xuICAgIGNhc2UgJ3NpZ25hdHVyZSc6XG4gICAgY2FzZSAnaW5pdGlhbCc6XG4gICAgICByZXR1cm4gODI7XG4gIH1cblxuICByZXR1cm4gMTUwO1xufTtcblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRIZWlnaHQgPSAoZmllbGQ6IElUZW1wbGF0ZUZpZWxkIHwgSURvY3VtZW50RmllbGQpID0+IHtcbiAgc3dpdGNoIChmaWVsZC50eXBlKSB7XG4gICAgY2FzZSAnYXR0YWNobWVudCc6XG4gICAgY2FzZSAncGF5bWVudCc6XG4gICAgICByZXR1cm4gMjQ7XG4gICAgY2FzZSAnY2hlY2tib3gnOlxuICAgIGNhc2UgJ2NoZWNrYm94X2dyb3VwJzpcbiAgICBjYXNlICdyYWRpb19idXR0b25fZ3JvdXAnOlxuICAgICAgcmV0dXJuIDE0O1xuICAgIGNhc2UgJ3NpZ25hdHVyZSc6XG4gICAgY2FzZSAnaW5pdGlhbCc6XG4gICAgICByZXR1cm4gNDE7XG4gIH1cblxuICByZXR1cm4gNTA7XG59O1xuXG5leHBvcnQgY29uc3Qgc2V0Q29udHJvbFN0eWxlcyA9IChlbDogSFRNTEVsZW1lbnQsIGZpZWxkOiBJVGVtcGxhdGVGaWVsZCB8IElEb2N1bWVudEZpZWxkLCB4U2NhbGU6IG51bWJlciwgeVNjYWxlOiBudW1iZXIsIHJvbGVJbmRleDogbnVtYmVyLCBvcHRpb24/OiBudW1iZXIpID0+IHtcbiAgY29uc3Qgc2V0dGluZ3MgPSAoZmllbGQgYXMgSVRlbXBsYXRlRmllbGQpLnNldHRpbmcgfHwgKGZpZWxkIGFzIElEb2N1bWVudEZpZWxkKS5zZXR0aW5ncztcbiAgbGV0IHt4ID0gMCwgeSA9IDAsIHdpZHRoID0gZGVmYXVsdFdpZHRoKGZpZWxkKSwgaGVpZ2h0ID0gZGVmYXVsdEhlaWdodChmaWVsZCl9ID0gc2V0dGluZ3M7XG5cbiAgY29uc3Qgb3B0aW9uU2V0dGluZ3MgPSBvcHRpb24gIT09IHVuZGVmaW5lZCAmJiBzZXR0aW5ncy5vcHRpb25zW29wdGlvbl0gPyBzZXR0aW5ncy5vcHRpb25zW29wdGlvbl0gOiBudWxsO1xuICBpZiAob3B0aW9uU2V0dGluZ3MpIHtcbiAgICB4ID0gb3B0aW9uU2V0dGluZ3MueCA/PyB4O1xuICAgIHkgPSBvcHRpb25TZXR0aW5ncy55ID8/IHk7XG4gICAgd2lkdGggPSBvcHRpb25TZXR0aW5ncy53aWR0aCA/PyB3aWR0aDtcbiAgICBoZWlnaHQgPSBvcHRpb25TZXR0aW5ncy5oZWlnaHQgPz8gaGVpZ2h0O1xuICB9XG5cbiAgZWwuc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGA7XG4gIGVsLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG4gIGVsLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgZWwuc3R5bGUubGVmdCA9IGAke3Jlc2NhbGUoeFNjYWxlLCB4KX1weGA7XG4gIGVsLnN0eWxlLmJvdHRvbSA9IGAke3Jlc2NhbGUoeVNjYWxlLCB5KX1weGA7XG4gIGVsLnN0eWxlLnRyYW5zZm9ybSA9IGBzY2FsZSgke3hTY2FsZX0sICR7eVNjYWxlfSlgO1xuICBlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBmaWVsZFsncmdiYSddIHx8IGdldFJHQkEocm9sZUluZGV4KTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRGaWVsZElkID0gKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCB8IElEb2N1bWVudEZpZWxkKSA9PiB7XG4gIHJldHVybiBgdmVyZG9jcy1kb2MtZmxkLSR7ZmllbGQubmFtZX1gO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEZpZWxkT3B0aW9uSWQgPSAoZmllbGQ6IElUZW1wbGF0ZUZpZWxkLCBpbmRleDogbnVtYmVyKSA9PiB7XG4gIHJldHVybiBgdmVyZG9jcy1kb2MtZmxkLSR7ZmllbGQubmFtZX0tJHtpbmRleH1gO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlbmRlckRvY3VtZW50RmllbGQgPSAoXG4gIGZpZWxkOiBJVGVtcGxhdGVGaWVsZCxcbiAgZG9jUGFnZTogSURvY3VtZW50UGFnZUluZm8sXG4gIHJvbGVJbmRleDogbnVtYmVyLFxuICBoYW5kbGVGaWVsZENoYW5nZTogKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCwgZTogYW55LCBvcHRpb25JZD86IHN0cmluZykgPT4gdm9pZCxcbiAgZGlzYWJsZWQ6IGJvb2xlYW4sXG4pID0+IHtcbiAgY29uc3QgY29udHJvbHNEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkb2NQYWdlLmNvbnRhaW5lcklkICsgJy1jb250cm9scycpO1xuICBpZiAoIWNvbnRyb2xzRGl2KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3dpdGNoIChmaWVsZC50eXBlKSB7XG4gICAgY2FzZSAnYXR0YWNobWVudCc6XG4gICAgY2FzZSAnZGF0ZSc6XG4gICAgY2FzZSAnZHJvcGRvd24nOlxuICAgIGNhc2UgJ2luaXRpYWwnOlxuICAgIGNhc2UgJ3BheW1lbnQnOlxuICAgIGNhc2UgJ3NpZ25hdHVyZSc6XG4gICAgY2FzZSAndGltZXN0YW1wJzpcbiAgICBjYXNlICd0ZXh0YXJlYSc6XG4gICAgY2FzZSAndGV4dGJveCc6XG4gICAgICB7XG4gICAgICAgIGNvbnN0IGlkID0gZ2V0RmllbGRJZChmaWVsZCk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICAgIGlmIChleGlzdGluZ0ZpZWxkKSB7XG4gICAgICAgICAgc2V0Q29udHJvbFN0eWxlcyhleGlzdGluZ0ZpZWxkLCBmaWVsZCwgZG9jUGFnZS54U2NhbGUsIGRvY1BhZ2UueVNjYWxlLCByb2xlSW5kZXgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVsOiBhbnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGB2ZXJkb2NzLWZpZWxkLSR7ZmllbGQudHlwZX1gKTtcbiAgICAgICAgZWwuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdpZCcsIGlkKTtcbiAgICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZpZWxkQ2hhbmdlJywgZSA9PiBoYW5kbGVGaWVsZENoYW5nZShmaWVsZCwgZSkpO1xuICAgICAgICBzZXRDb250cm9sU3R5bGVzKGVsLCBmaWVsZCwgZG9jUGFnZS54U2NhbGUsIGRvY1BhZ2UueVNjYWxlLCByb2xlSW5kZXgpO1xuICAgICAgICBjb250cm9sc0Rpdi5hcHBlbmRDaGlsZChlbCk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2NoZWNrYm94X2dyb3VwJzpcbiAgICAgIGZpZWxkLnNldHRpbmcub3B0aW9ucy5mb3JFYWNoKChvcHRpb24sIGNoZWNrYm94SW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBnZXRGaWVsZE9wdGlvbklkKGZpZWxkLCBjaGVja2JveEluZGV4KTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nRmllbGQpIHtcbiAgICAgICAgICBzZXRDb250cm9sU3R5bGVzKGV4aXN0aW5nRmllbGQsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUsIHJvbGVJbmRleCwgY2hlY2tib3hJbmRleCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0FkZGluZyBjaGVja2JveCcsIG9wdGlvbik7XG4gICAgICAgIGNvbnN0IGNiRWw6IGFueSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYHZlcmRvY3MtZmllbGQtY2hlY2tib3hgKTtcbiAgICAgICAgY2JFbC5maWVsZCA9IGZpZWxkO1xuICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG4gICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdvcHRpb24nLCBjaGVja2JveEluZGV4KTtcbiAgICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgICAgY2JFbC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2JFbC5hZGRFdmVudExpc3RlbmVyKCdmaWVsZENoYW5nZScsIGUgPT4gaGFuZGxlRmllbGRDaGFuZ2UoZmllbGQsIGUpKTtcbiAgICAgICAgc2V0Q29udHJvbFN0eWxlcyhjYkVsLCBmaWVsZCwgZG9jUGFnZS54U2NhbGUsIGRvY1BhZ2UueVNjYWxlLCByb2xlSW5kZXgsIGNoZWNrYm94SW5kZXgpO1xuICAgICAgICBjb250cm9sc0Rpdi5hcHBlbmRDaGlsZChjYkVsKTtcbiAgICAgIH0pO1xuXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3JhZGlvX2J1dHRvbl9ncm91cCc6XG4gICAgICBmaWVsZC5zZXR0aW5nLm9wdGlvbnMuZm9yRWFjaCgob3B0aW9uLCBidXR0b25JbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpZCA9IGdldEZpZWxkT3B0aW9uSWQoZmllbGQsIGJ1dHRvbkluZGV4KTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nRmllbGQpIHtcbiAgICAgICAgICBzZXRDb250cm9sU3R5bGVzKGV4aXN0aW5nRmllbGQsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUsIHJvbGVJbmRleCwgYnV0dG9uSW5kZXgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdBZGRpbmcgcmFkaW8gYnV0dG9uJywgb3B0aW9uKTtcbiAgICAgICAgY29uc3QgY2JFbDogYW55ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgdmVyZG9jcy1maWVsZC1yYWRpby1idXR0b25gKTtcbiAgICAgICAgY2JFbC5maWVsZCA9IGZpZWxkO1xuICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG4gICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdvcHRpb24nLCBidXR0b25JbmRleCk7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGNiRWwuYWRkRXZlbnRMaXN0ZW5lcignZmllbGRDaGFuZ2UnLCBlID0+IGhhbmRsZUZpZWxkQ2hhbmdlKGZpZWxkLCBlKSk7XG4gICAgICAgIHNldENvbnRyb2xTdHlsZXMoY2JFbCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSwgcm9sZUluZGV4LCBidXR0b25JbmRleCk7XG4gICAgICAgIGNvbnRyb2xzRGl2LmFwcGVuZENoaWxkKGNiRWwpO1xuICAgICAgfSk7XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gY2FzZSAnYXR0YWNobWVudCc6XG4gICAgLy8gICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZlcmRvY3MtZmllbGQtYXR0YWNobWVudCcpO1xuICAgIC8vICAgZWwuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHJlc3VsdCB8fCAnJyk7XG4gICAgLy8gICBicmVhaztcbiAgICAvLyBjYXNlICdwYXltZW50JzpcbiAgICAvLyAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmVyZG9jcy1maWVsZC1wYXltZW50Jyk7XG4gICAgLy8gICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBTa2lwcGluZyB1bnN1cHBvcnRlZCBmaWVsZCB0eXBlJywgZmllbGQpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Um9sZUluZGV4ID0gKHJvbGVzOiBzdHJpbmdbXSwgcm9sZTogc3RyaW5nKSA9PiByb2xlcy5pbmRleE9mKHJvbGUpIHx8IDA7XG5cbi8vIFRPRE86IFdlIGNhbiBjbGVhbiB0aGlzIHVwIGEgbG90IGlmIHdlIGFsdGVyIHRoZSBBUEkgdG8gZW1pdCBib3RoIHNldHRpbmcgYW5kIHNldHRpbmdzIHJlZ2FyZGxlc3Mgb2YgdGhlIHNvdXJjZSB0eXBlLFxuLy8gICBidXQgdGhlbiBtZXJnZSB0aGUgU0RLIHR5cGVzIHRvIGVuY291cmFnZSBkZXZlbG9wZXJzIHRvIHVzZSBqdXN0IGBzZXR0aW5nc2AuXG5leHBvcnQgY29uc3QgZ2V0RmllbGRTZXR0aW5ncyA9IChmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCkgPT4ge1xuICBpZiAoKGZpZWxkIGFzIElUZW1wbGF0ZUZpZWxkKS5zZXR0aW5nKSB7XG4gICAgcmV0dXJuIChmaWVsZCBhcyBJVGVtcGxhdGVGaWVsZCkuc2V0dGluZztcbiAgfVxuXG4gIGlmICgoZmllbGQgYXMgSURvY3VtZW50RmllbGQpLnNldHRpbmdzKSB7XG4gICAgcmV0dXJuIChmaWVsZCBhcyBJRG9jdW1lbnRGaWVsZCkuc2V0dGluZ3M7XG4gIH1cblxuICByZXR1cm4ge3g6IDAsIHk6IDAsIHJlcXVpcmVkOiBmYWxzZSwgZGlzYWJsZWQ6IGZhbHNlLCByZXN1bHQ6ICcnLCB2YWx1ZTogJyd9O1xufTtcbiIsIkBpbXBvcnQgJy4uLy4uLy4uL3RoZW1lLnNjc3MnO1xuXG52ZXJkb2NzLXRlbXBsYXRlLWZpZWxkcyB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgZm9udC1mYW1pbHk6ICR2ZXJkb2NzLXByaW1hcnktZm9udDtcblxuICAucGFnZS0wIHtcbiAgICBwYWRkaW5nOiA1NXB4IDE1cHggMCAxNXB4O1xuXG4gICAgLnVzZXItcGxhY2VkLWZpZWxkcyB7XG4gICAgICBoZWlnaHQ6IDEwMHB4O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjtcbiAgICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4IDVweCAjMDAwMDAwMGY7XG5cbiAgICAgIC50aXRsZSB7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgY29sb3I6ICNmZmZmZmY7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgcGFkZGluZzogM3B4IDZweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgYmFja2dyb3VuZDogJHZlcmRvY3MtZ3JleS1ibHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5maWVsZHMtYmFyIHtcbiAgICB3aWR0aDogOTElO1xuICAgIGhlaWdodDogMzBweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIHotaW5kZXg6IDEwMDAwO1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICBwYWRkaW5nOiA1cHggMjBweDtcbiAgICBsaW5lLWhlaWdodDogMjhweDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgYmFja2dyb3VuZDogJHZlcmRvY3MtZ3JleS1ibHVlO1xuXG4gICAgLmxhYmVsIHtcbiAgICAgIGNvbG9yOiAjZmZmZmZmO1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICB9XG5cbiAgICAuaWNvbiB7XG4gICAgICBtYXJnaW46IDAgNHB4O1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC44LCAwLjgpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBmaWxsOiAjZmZmZmZmO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHtWZXJkb2NzRW5kcG9pbnR9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkayc7XG5pbXBvcnQge2dldFJHQkF9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9VdGlscy9Db2xvcnMnO1xuaW1wb3J0IHtJVGVtcGxhdGUsIElUZW1wbGF0ZUZpZWxkfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzL1R5cGVzJztcbmltcG9ydCB7Q29tcG9uZW50LCBoLCBFdmVudCwgRXZlbnRFbWl0dGVyLCBQcm9wLCBTdGF0ZSwgSG9zdH0gZnJvbSAnQHN0ZW5jaWwvY29yZSc7XG5pbXBvcnQge0lQYWdlUmVuZGVyRXZlbnR9IGZyb20gJy4uLy4uL2VtYmVkcy92ZXJkb2NzLXZpZXcvdmVyZG9jcy12aWV3JztcbmltcG9ydCB7Z2V0Um9sZUluZGV4LCByZW5kZXJEb2N1bWVudEZpZWxkfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQge2dldFRlbXBsYXRlfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzL1RlbXBsYXRlcyc7XG5pbXBvcnQge1NES0Vycm9yfSBmcm9tICcuLi8uLi8uLi91dGlscy9lcnJvcnMnO1xuXG5jb25zdCBpY29uU2luZ2xlbGluZSA9ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBoZWlnaHQ9XCIyNFwiIHdpZHRoPVwiMjRcIj48cGF0aCBkPVwiTTMuNDI1IDE2LjE1VjEzaDExLjE1djMuMTVabTAtNS4xNVY3Ljg1aDE3LjE1VjExWlwiLz48L3N2Zz4nO1xuXG5jb25zdCBpY29uTXVsdGlsaW5lID1cbiAgJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGhlaWdodD1cIjI0XCIgd2lkdGg9XCIyNFwiPjxwYXRoIGQ9XCJNMy4yMjUgMjAuNzI1di0zLjE1aDExLjU1djMuMTVabTAtNC43NzVWMTIuOGgxNy41NXYzLjE1Wm0wLTQuNzVWOC4wNWgxNy41NXYzLjE1Wm0wLTQuNzc1di0zLjE1aDE3LjU1djMuMTVaXCIvPjwvc3ZnPic7XG5cbmNvbnN0IGljb25DaGVjayA9XG4gICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBoZWlnaHQ9XCI0MFwiIHdpZHRoPVwiNDBcIj48cGF0aCBkPVwibTE3LjQxNyAyNy42MjUgMTIuNDU4LTEyLjVMMjcgMTIuMjA4bC05LjU4MyA5LjU0Mi00LjQ1OS00LjQ1OC0yLjkxNiAyLjkxNlptLTkuMjA5IDguNTQycS0xLjgzMyAwLTMuMTA0LTEuMjcxLTEuMjcxLTEuMjcxLTEuMjcxLTMuMTA0VjguMjA4cTAtMS44MzMgMS4yNzEtMy4xMjUgMS4yNzEtMS4yOTEgMy4xMDQtMS4yOTFoMjMuNTg0cTEuODMzIDAgMy4xMjUgMS4yOTEgMS4yOTEgMS4yOTIgMS4yOTEgMy4xMjV2MjMuNTg0cTAgMS44MzMtMS4yOTEgMy4xMDQtMS4yOTIgMS4yNzEtMy4xMjUgMS4yNzFabTAtNC4zNzVoMjMuNTg0VjguMjA4SDguMjA4djIzLjU4NFptMC0yMy41ODR2MjMuNTg0VjguMjA4WlwiLz48L3N2Zz4nO1xuXG5jb25zdCBpY29uUmFkaW8gPVxuICAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgaGVpZ2h0PVwiMjRcIiB3aWR0aD1cIjI0XCI+PHBhdGggZD1cIk0xMiAxN3EyLjA3NSAwIDMuNTM4LTEuNDYzUTE3IDE0LjA3NSAxNyAxMnQtMS40NjItMy41MzhRMTQuMDc1IDcgMTIgNyA5LjkyNSA3IDguNDYzIDguNDYyIDcgOS45MjUgNyAxMnEwIDIuMDc1IDEuNDYzIDMuNTM3UTkuOTI1IDE3IDEyIDE3Wm0wIDUuODVxLTIuMjc1IDAtNC4yNS0uODV0LTMuNDM4LTIuMzEyUTIuODUgMTguMjI1IDIgMTYuMjVxLS44NS0xLjk3NS0uODUtNC4yNVQyIDcuNzVxLjg1LTEuOTc1IDIuMzEyLTMuNDM4UTUuNzc1IDIuODUgNy43NSAycTEuOTc1LS44NSA0LjI1LS44NXQ0LjI1Ljg1cTEuOTc1Ljg1IDMuNDM4IDIuMzEyUTIxLjE1IDUuNzc1IDIyIDcuNzVxLjg1IDEuOTc1Ljg1IDQuMjVUMjIgMTYuMjVxLS44NSAxLjk3NS0yLjMxMiAzLjQzOFExOC4yMjUgMjEuMTUgMTYuMjUgMjJxLTEuOTc1Ljg1LTQuMjUuODVabTAtMy4xNXEzLjI1IDAgNS40NzUtMi4yMjVRMTkuNyAxNS4yNSAxOS43IDEycTAtMy4yNS0yLjIyNS01LjQ3NVExNS4yNSA0LjMgMTIgNC4zcS0zLjI1IDAtNS40NzUgMi4yMjVRNC4zIDguNzUgNC4zIDEycTAgMy4yNSAyLjIyNSA1LjQ3NVE4Ljc1IDE5LjcgMTIgMTkuN1ptMC03LjdaXCIvPjwvc3ZnPic7XG5cbmNvbnN0IGljb25EYXRlcGlja2VyID1cbiAgJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGhlaWdodD1cIjI0XCIgd2lkdGg9XCIyNFwiPjxwYXRoIGQ9XCJNNy42IDEzLjkyNXEtLjU1IDAtLjkyNS0uMzc1dC0uMzc1LS45MjVxMC0uNTUuMzc1LS45MzcuMzc1LS4zODguOTI1LS4zODh0LjkyNS4zODhxLjM3NS4zODcuMzc1LjkzN3QtLjM3NS45MjVxLS4zNzUuMzc1LS45MjUuMzc1Wm00LjQgMHEtLjU1IDAtLjkyNS0uMzc1dC0uMzc1LS45MjVxMC0uNTUuMzc1LS45MzcuMzc1LS4zODguOTI1LS4zODh0LjkyNS4zODhxLjM3NS4zODcuMzc1LjkzN3QtLjM3NS45MjVxLS4zNzUuMzc1LS45MjUuMzc1Wm00LjQgMHEtLjU1IDAtLjkyNS0uMzc1dC0uMzc1LS45MjVxMC0uNTUuMzc1LS45MzcuMzc1LS4zODguOTI1LS4zODh0LjkyNS4zODhxLjM3NS4zODcuMzc1LjkzN3QtLjM3NS45MjVxLS4zNzUuMzc1LS45MjUuMzc1Wk01LjMgMjIuODVxLTEuMzI1IDAtMi4yMzgtLjkxMi0uOTEyLS45MTMtLjkxMi0yLjIzOFY2LjNxMC0xLjMyNS45MTItMi4yMzguOTEzLS45MTIgMi4yMzgtLjkxMkg2di0yaDIuNTc1djJoNi44NXYtMkgxOHYyaC43cTEuMzI1IDAgMi4yMzguOTEyLjkxMi45MTMuOTEyIDIuMjM4djEzLjRxMCAxLjMyNS0uOTEyIDIuMjM4LS45MTMuOTEyLTIuMjM4LjkxMlptMC0zLjE1aDEzLjRWMTBINS4zdjkuN1pNNS4zIDhoMTMuNFY2LjNINS4zWm0wIDBWNi4zIDhaXCIvPjwvc3ZnPic7XG5cbmNvbnN0IGljb25TaWduYXR1cmUgPVxuICAnPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiICBmaXQ9XCJcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pZFlNaWQgbWVldFwiIGZvY3VzYWJsZT1cImZhbHNlXCI+JyArXG4gICcgICAgICA8ZGVmcz48L2RlZnM+JyArXG4gICcgICAgICA8ZyBpZD1cIk1hdGVyaWFsLURlc2lnbi1TeW1ib2xzXCIgc3Ryb2tlPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjFcIiBmaWxsPVwibm9uZVwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIj4nICtcbiAgJyAgICAgICAgICA8ZyBpZD1cInNpZ25lci1zaWduYXR1cmVcIj4nICtcbiAgJyAgICAgICAgICAgICAgPGcgaWQ9XCJpY19nZXN0dXJlX2JsYWNrXzI0cHhcIj4nICtcbiAgJyAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPVwiU2hhcGVcIiBwb2ludHM9XCIwIDAgMjQgMCAyNCAyNCAwIDI0XCI+PC9wb2x5Z29uPicgK1xuICAnICAgICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9XCJTaGFwZVwiIGZpbGw9XCIjMDAwMDAwXCIgZmlsbC1ydWxlPVwibm9uemVyb1wiIHBvaW50cz1cIjQgMTcgMjAgMTcgMjAgMTkgNCAxOVwiPjwvcG9seWdvbj4nICtcbiAgJyAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNNiwxMy42MzY3MzE5IEw2LDE2IEw4LjM2MzI2ODA2LDE2IEwxNS4zMzMzMzMzLDkuMDI5OTM0NzMgTDEyLjk3MDA2NTMsNi42NjY2NjY2NyBMNiwxMy42MzY3MzE5IFogTTE3LjgwMDc2NjMsNi43NTM1MTIxMyBDMTguMDY2NDExMiw2LjQ4Nzg2NzE4IDE4LjA2NjQxMTIsNi4wNTg3NDg0IDE3LjgwMDc2NjMsNS43OTMxMDM0NSBMMTYuMjA2ODk2Niw0LjE5OTIzMzcyIEMxNS45NDEyNTE2LDMuOTMzNTg4NzYgMTUuNTEyMTMyOCwzLjkzMzU4ODc2IDE1LjI0NjQ4NzksNC4xOTkyMzM3MiBMMTQsNS40NDU3MjE1OCBMMTYuNTU0Mjc4NCw4IEwxNy44MDA3NjYzLDYuNzUzNTEyMTMgWlwiIGlkPVwiU2hhcGVcIiBmaWxsPVwiIzAwMDAwMFwiIGZpbGwtcnVsZT1cIm5vbnplcm9cIj48L3BhdGg+JyArXG4gICcgICAgICAgICAgICAgIDwvZz4nICtcbiAgJyAgICAgICAgICA8L2c+JyArXG4gICcgICAgICA8L2c+JyArXG4gICcgICAgPC9zdmc+JztcblxuY29uc3QgaWNvbkluaXRpYWwgPVxuICAnPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpdD1cIlwiIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWlkWU1pZCBtZWV0XCIgZm9jdXNhYmxlPVwiZmFsc2VcIj4nICtcbiAgJyAgICAgIDxkZWZzPjwvZGVmcz4nICtcbiAgJyAgICAgIDxnIGlkPVwiTWF0ZXJpYWwtRGVzaWduLVN5bWJvbHNcIiBzdHJva2U9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIGZpbGw9XCJub25lXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiPicgK1xuICAnICAgICAgICAgIDxnIGlkPVwic2lnbmVyLWludGlhbFwiPicgK1xuICAnICAgICAgICAgICAgICA8ZyBpZD1cImljX2dlc3R1cmVfYmxhY2tfMjRweFwiPicgK1xuICAnICAgICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9XCJTaGFwZVwiIHBvaW50cz1cIjAgMCAyNCAwIDI0IDI0IDAgMjRcIj48L3BvbHlnb24+JyArXG4gICcgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD1cIlNoYXBlXCIgZmlsbD1cIiMwMDAwMDBcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCIgcG9pbnRzPVwiNCAxNyAyMCAxNyAyMCAxOSA0IDE5XCI+PC9wb2x5Z29uPicgK1xuICAnICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIk01LDEyLjMwODcwNzEgTDcuMjc0NDA2MzMsMTIuMTY2MjI2OSBDNy4zMjM2NTksMTIuNTM1NjIxOSA3LjQyMzkyMTg1LDEyLjgxNzA2MTUgNy41NzUxOTc4OSwxMy4wMTA1NTQxIEM3LjgyMTQ2MTIxLDEzLjMyMzY2MDMgOC4xNzMyNjA2OSwxMy40ODAyMTExIDguNjMwNjA2ODYsMTMuNDgwMjExMSBDOC45NzE4NTc0NywxMy40ODAyMTExIDkuMjM0ODI3NTcsMTMuNDAwMTc2NyA5LjQxOTUyNTA3LDEzLjI0MDEwNTUgQzkuNjA0MjIyNTYsMTMuMDgwMDM0NCA5LjY5NjU2OTkyLDEyLjg5NDQ2MDIgOS42OTY1Njk5MiwxMi42ODMzNzczIEM5LjY5NjU2OTkyLDEyLjQ4Mjg0ODYgOS42MDg2MjAwNSwxMi4zMDM0MzA5IDkuNDMyNzE3NjgsMTIuMTQ1MTE4NyBDOS4yNTY4MTUzLDExLjk4NjgwNjYgOC44NDg3Mjc5MiwxMS44MzcyOTE4IDguMjA4NDQzMjcsMTEuNjk2NTY5OSBDNy4xNjAwNjUxMiwxMS40NjA4NjA3IDYuNDEyNDkxMjQsMTEuMTQ3NzU5MiA1Ljk2NTY5OTIxLDEwLjc1NzI1NTkgQzUuNTE1Mzg5MTMsMTAuMzY2NzUyNyA1LjI5MDIzNzQ3LDkuODY4OTU2NDEgNS4yOTAyMzc0Nyw5LjI2Mzg1MjI0IEM1LjI5MDIzNzQ3LDguODY2MzEyODggNS40MDU0NTE3OSw4LjQ5MDc2Njk0IDUuNjM1ODgzOTEsOC4xMzcyMDMxNyBDNS44NjYzMTYwMiw3Ljc4MzYzOTM5IDYuMjEyODM4NSw3LjUwNTcxNzgxIDYuNjc1NDYxNzQsNy4zMDM0MzAwOCBDNy4xMzgwODQ5OSw3LjEwMTE0MjM1IDcuNzcyMjAzNTQsNyA4LjU3NzgzNjQxLDcgQzkuNTY2NDA3NzYsNyAxMC4zMjAxMzgxLDcuMTgzODE1MjIgMTAuODM5MDUwMSw3LjU1MTQ1MTE5IEMxMS4zNTc5NjIxLDcuOTE5MDg3MTUgMTEuNjY2NjY2Miw4LjUwMzk1Mzc3IDExLjc2NTE3MTUsOS4zMDYwNjg2IEw5LjUxMTg3MzM1LDkuNDM3OTk0NzIgQzkuNDUyMDY2NTQsOS4wODk3MDgwMiA5LjMyNjI5ODIzLDguODM2NDEyNCA5LjEzNDU2NDY0LDguNjc4MTAwMjYgQzguOTQyODMxMDYsOC41MTk3ODgxMyA4LjY3ODEwMTk1LDguNDQwNjMzMjUgOC4zNDAzNjkzOSw4LjQ0MDYzMzI1IEM4LjA2MjQ0MzY0LDguNDQwNjMzMjUgNy44NTMxMjI5Niw4LjQ5OTU1OTY2IDcuNzEyNDAxMDYsOC42MTc0MTQyNSBDNy41NzE2NzkxNiw4LjczNTI2ODg0IDcuNTAxMzE5MjYsOC44Nzg2MjcxMiA3LjUwMTMxOTI2LDkuMDQ3NDkzNCBDNy41MDEzMTkyNiw5LjE3MDYyNTA3IDcuNTU5MzY2MTcsOS4yODE0NDE5IDcuNjc1NDYxNzQsOS4zNzk5NDcyMyBDNy43ODgwMzkyNiw5LjQ4MTk3MDYxIDguMDU1NDA2ODYsOS41NzY5NTY0NiA4LjQ3NzU3MjU2LDkuNjY0OTA3NjUgQzkuNTIyNDMyNjYsOS44OTAwNjI2OSAxMC4yNzA4ODYsMTAuMTE3ODUyOCAxMC43MjI5NTUxLDEwLjM0ODI4NSBDMTEuMTc1MDI0MiwxMC41Nzg3MTcxIDExLjUwMzk1NjgsMTAuODY0NTU0MSAxMS43MDk3NjI1LDExLjIwNTgwNDcgQzExLjkxNTU2ODMsMTEuNTQ3MDU1NCAxMi4wMTg0Njk3LDExLjkyODc1NzggMTIuMDE4NDY5NywxMi4zNTA5MjM1IEMxMi4wMTg0Njk3LDEyLjg0Njk2ODIgMTEuODgxMjY3OSwxMy4zMDQzMDc1IDExLjYwNjg2MDIsMTMuNzIyOTU1MSBDMTEuMzMyNDUyNSwxNC4xNDE2MDI4IDEwLjk0ODk5MSwxNC40NTkxMDE4IDEwLjQ1NjQ2NDQsMTQuNjc1NDYxNyBDOS45NjM5Mzc3MywxNC44OTE4MjE3IDkuMzQzMDExNjYsMTUgOC41OTM2Njc1NSwxNSBDNy4yNzc5MTc3OCwxNSA2LjM2Njc1NzE1LDE0Ljc0NjcwNDQgNS44NjAxNTgzMSwxNC4yNDAxMDU1IEM1LjM1MzU1OTQ3LDEzLjczMzUwNjcgNS4wNjY4NDI5LDEzLjA4OTcxMzcgNSwxMi4zMDg3MDcxIFogTTEzLjM2NDQ5Myw3LjEzMTkyNjEyIEwxNS43NTQ5OTQzLDcuMTMxOTI2MTIgTDE1Ljc1NDk5NDMsMTIuOTYzMDYwNyBMMTkuNDg1ODY1MSwxMi45NjMwNjA3IEwxOS40ODU4NjUxLDE0Ljg2ODA3MzkgTDEzLjM2NDQ5MywxNC44NjgwNzM5IEwxMy4zNjQ0OTMsNy4xMzE5MjYxMiBaXCIgaWQ9XCJTTFwiIGZpbGw9XCIjMDAwMDAwXCI+PC9wYXRoPicgK1xuICAnICAgICAgICAgICAgICA8L2c+JyArXG4gICcgICAgICAgICAgPC9nPicgK1xuICAnICAgICAgPC9nPicgK1xuICAnICAgIDwvc3ZnPic7XG5cbi8qKlxuICogRGlzcGxheXMgYSBidWlsZGVyIGV4cGVyaWVuY2UgZm9yIGxheWluZyBvdXQgZmllbGRzIGluIGEgdGVtcGxhdGUuIE5vdGUgdGhhdCB0aGlzIGV4cGVyaWVuY2UgcmVxdWlyZXMgYSBsYXJnZSBkaXNwbGF5IGFyZWEgdG9cbiAqIHByZXNlbnQgYWxsIG9mIHRoZSByZXF1aXJlZCBjb250cm9scywgc28gaXQgaXMgcHJpbWFyaWx5IGludGVuZGVkIHRvIGJlIHVzZWQgaW4gZGVza3RvcCBlbnZpcm9ubWVudHMuXG4gKi9cbkBDb21wb25lbnQoe1xuICB0YWc6ICd2ZXJkb2NzLXRlbXBsYXRlLWZpZWxkcycsXG4gIHN0eWxlVXJsOiAndmVyZG9jcy10ZW1wbGF0ZS1maWVsZHMuc2NzcycsXG4gIHNoYWRvdzogZmFsc2UsXG59KVxuZXhwb3J0IGNsYXNzIFZlcmRvY3NUZW1wbGF0ZUZpZWxkcyB7XG4gIC8qKlxuICAgKiBUaGUgZW5kcG9pbnQgdG8gdXNlIHRvIGNvbW11bmljYXRlIHdpdGggVmVyZG9jcy4gSWYgbm90IHNldCwgdGhlIGRlZmF1bHQgZW5kcG9pbnQgd2lsbCBiZSB1c2VkLlxuICAgKi9cbiAgQFByb3AoKSBlbmRwb2ludDogVmVyZG9jc0VuZHBvaW50ID0gVmVyZG9jc0VuZHBvaW50LmdldERlZmF1bHQoKTtcblxuICAvKipcbiAgICogVGhlIElEIG9mIHRoZSB0ZW1wbGF0ZSB0byBjcmVhdGUgdGhlIGRvY3VtZW50IGZyb20uXG4gICAqL1xuICBAUHJvcCgpIHRlbXBsYXRlSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBFdmVudCBmaXJlZCB3aGVuIHRoZSBmaWVsZHMgYXJlIHNhdmVkLlxuICAgKi9cbiAgQEV2ZW50KHtjb21wb3NlZDogdHJ1ZX0pIHNhdmU6IEV2ZW50RW1pdHRlcjtcblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgd2hlbiB0aGUgdXNlciBjYW5jZWxzIHRoZSBkaWFsb2cuXG4gICAqL1xuICBARXZlbnQoe2NvbXBvc2VkOiB0cnVlfSkgY2FuY2VsOiBFdmVudEVtaXR0ZXI7XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIGlmIGFuIGVycm9yIG9jY3Vycy4gVGhlIGV2ZW50IGRldGFpbHMgd2lsbCBjb250YWluIGluZm9ybWF0aW9uIGFib3V0IHRoZSBlcnJvci4gTW9zdCBlcnJvcnMgd2lsbFxuICAgKiB0ZXJtaW5hdGUgdGhlIHByb2Nlc3MsIGFuZCB0aGUgY2FsbGluZyBhcHBsaWNhdGlvbiBzaG91bGQgY29ycmVjdCB0aGUgY29uZGl0aW9uIGFuZCByZS1yZW5kZXIgdGhlIGNvbXBvbmVudC5cbiAgICovXG4gIEBFdmVudCh7Y29tcG9zZWQ6IHRydWV9KSBzZGtFcnJvcjogRXZlbnRFbWl0dGVyPFNES0Vycm9yPjtcblxuICBAU3RhdGUoKSBwZGZVcmwgPSBudWxsO1xuICBAU3RhdGUoKSB0ZW1wbGF0ZTogSVRlbXBsYXRlIHwgbnVsbCA9IG51bGw7XG5cbiAgcm9sZXM6IHN0cmluZ1tdID0gW107XG4gIGZpZWxkczogSVRlbXBsYXRlRmllbGRbXSA9IFtdO1xuXG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhgW1BSRVZJRVddIExvYWRpbmcgdGVtcGxhdGUgJHt0aGlzLnRlbXBsYXRlSWR9YCk7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGF3YWl0IGdldFRlbXBsYXRlKHRoaXMuZW5kcG9pbnQsIHRoaXMudGVtcGxhdGVJZCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdbUFJFVklFV10gR290IHRlbXBsYXRlJywgdGhpcy50ZW1wbGF0ZSk7XG4gICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cbiAgICAgIHRoaXMucGRmVXJsID0gYCR7dGhpcy5lbmRwb2ludC5nZXRCYXNlVVJMKCl9L3RlbXBsYXRlcy8ke3RoaXMudGVtcGxhdGVJZH0vZG9jdW1lbnRzLyR7dGVtcGxhdGUudGVtcGxhdGVfZG9jdW1lbnQ/LmlkfT9maWxlPXRydWVgO1xuXG4gICAgICB0aGlzLnJvbGVzID0gdGVtcGxhdGUucm9sZXMubWFwKHJvbGUgPT4gcm9sZS5uYW1lKTtcbiAgICAgIGNvbnNvbGUubG9nKCdbUFJFVklFV10gTG9hZGVkIHJvbGVzJywgdGhpcy5yb2xlcyk7XG5cbiAgICAgIHRoaXMuZmllbGRzID0gW107XG4gICAgICB0ZW1wbGF0ZS5yb2xlcy5mb3JFYWNoKHJvbGUgPT4ge1xuICAgICAgICB0aGlzLmZpZWxkcy5wdXNoKC4uLnJvbGUuZmllbGRzKTtcbiAgICAgIH0pO1xuICAgICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBMb2FkZWQgZmllbGRzJywgdGhpcy5maWVsZHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbUFJFVklFV10gRXJyb3Igd2l0aCBwcmV2aWV3IHNlc3Npb24nLCBlKTtcbiAgICAgIC8vIHRoaXMuc2RrRXJyb3I/LmVtaXQobmV3IFNES0Vycm9yKGUubWVzc2FnZSwgZS5yZXNwb25zZT8uc3RhdHVzLCBlLnJlc3BvbnNlPy5kYXRhKSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgaGFuZGxlRmllbGRDaGFuZ2UoZmllbGQ6IElUZW1wbGF0ZUZpZWxkLCBlOiBhbnksIG9wdGlvbklkPzogc3RyaW5nKSB7XG4gICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBoYW5kbGVGaWVsZENoYW5nZScsIGZpZWxkLCBlLCBvcHRpb25JZCk7XG4gIH1cblxuICBoYW5kbGVQYWdlUmVuZGVyZWQoZSkge1xuICAgIGNvbnN0IHBhZ2VJbmZvID0gZS5kZXRhaWwgYXMgSVBhZ2VSZW5kZXJFdmVudDtcbiAgICBjb25zb2xlLmxvZygnW1BSRVZJRVddIFBhZ2UgcmVuZGVyZWQnLCBwYWdlSW5mbyk7XG5cbiAgICBjb25zdCBmaWVsZHMgPSB0aGlzLmZpZWxkcy5maWx0ZXIoZmllbGQgPT4gZmllbGQucGFnZV9zZXF1ZW5jZSA9PT0gcGFnZUluZm8ucmVuZGVyZWRQYWdlLnBhZ2VOdW1iZXIpO1xuICAgIGNvbnNvbGUubG9nKCdbUFJFVklFV10gRmllbGRzIG9uIHBhZ2UnLCBmaWVsZHMpO1xuICAgIGZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHJlbmRlckRvY3VtZW50RmllbGQoZmllbGQsIHBhZ2VJbmZvLnJlbmRlcmVkUGFnZSwgZ2V0Um9sZUluZGV4KHRoaXMucm9sZXMsIGZpZWxkLnJvbGVfbmFtZSksIHRoaXMuaGFuZGxlRmllbGRDaGFuZ2UsIHRydWUpKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB0ZXN0RmllbGQ6IElUZW1wbGF0ZUZpZWxkID0ge1xuICAgICAgdGVtcGxhdGVfaWQ6ICcnLFxuICAgICAgbmFtZTogJ3Rlc3QnLFxuICAgICAgcm9sZV9uYW1lOiAnUmVjaXBpZW50IDEnLFxuICAgICAgdHlwZTogJ3RleHRib3gnLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICBzZXR0aW5nOiB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDAsXG4gICAgICB9LFxuICAgICAgcGFnZV9zZXF1ZW5jZTogMCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxIb3N0IGNsYXNzPXt7c3Rvcnlib29rOiAhIXdpbmRvdz8uWydTVE9SWUJPT0tfRU5WJ119fT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRvY3VtZW50XCI+XG4gICAgICAgICAge3RoaXMucGRmVXJsID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlubmVyXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmaWVsZHMtYmFyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxhYmVsXCI+RHJhZyB0byBBZGQgRmllbGQ6PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImljb25cIiBpbm5lckhUTUw9e2ljb25TaW5nbGVsaW5lfSB0aXRsZT1cIlNpbmdsZS1saW5lIFRleHRcIiAvPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpY29uXCIgaW5uZXJIVE1MPXtpY29uTXVsdGlsaW5lfSB0aXRsZT1cIk11bHRpLWxpbmUgVGV4dFwiIC8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImljb25cIiBpbm5lckhUTUw9e2ljb25DaGVja30gdGl0bGU9XCJDaGVja2JveFwiIC8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImljb25cIiBpbm5lckhUTUw9e2ljb25SYWRpb30gdGl0bGU9XCJSYWRpbyBCdXR0b25cIiAvPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpY29uXCIgaW5uZXJIVE1MPXtpY29uRGF0ZXBpY2tlcn0gdGl0bGU9XCJEYXRlIFBpY2tlclwiIC8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImljb25cIiBpbm5lckhUTUw9e2ljb25TaWduYXR1cmV9IHRpdGxlPVwiU2lnbmF0dXJlXCIgLz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaWNvblwiIGlubmVySFRNTD17aWNvbkluaXRpYWx9IHRpdGxlPVwiSW5pdGlhbHNcIiAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFnZS0wXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVzZXItcGxhY2VkLWZpZWxkc1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRpdGxlXCI+VXNlci1QbGFjZWQgRmllbGRzPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8dmVyZG9jcy1maWVsZC1zaWduYXR1cmVcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ9e3Rlc3RGaWVsZH1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDogJzgycHgnLCBoZWlnaHQ6ICc0MXB4JywgbGVmdDogJzIwcHgnLCB0b3A6ICc0MHB4JywgdHJhbnNmb3JtOiAnc2NhbGUoMSwxKScsIGJhY2tncm91bmRDb2xvcjogZ2V0UkdCQSgwKX19XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICA8dmVyZG9jcy12aWV3XG4gICAgICAgICAgICAgICAgc291cmNlPXt0aGlzLnBkZlVybH1cbiAgICAgICAgICAgICAgICBlbmRwb2ludD17dGhpcy5lbmRwb2ludH1cbiAgICAgICAgICAgICAgICBvblBhZ2VSZW5kZXJlZD17ZSA9PiB0aGlzLmhhbmRsZVBhZ2VSZW5kZXJlZChlKX1cbiAgICAgICAgICAgICAgICBwYWdlTGF5ZXJzPXtbXG4gICAgICAgICAgICAgICAgICB7bmFtZTogJ3BhZ2UnLCB0eXBlOiAnY2FudmFzJ30sXG4gICAgICAgICAgICAgICAgICB7bmFtZTogJ2NvbnRyb2xzJywgdHlwZTogJ2Rpdid9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgPHZlcmRvY3MtZHJvcGRvd24gb3B0aW9ucz17W3tsYWJlbDogJ09wdGlvbiAxJ30sIHtsYWJlbDogJ0Rpc2FibGVkIE9wdGlvbicsIGRpc2FibGVkOiB0cnVlfSwge2xhYmVsOiAnT3B0aW9uIDInfV19IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPHZlcmRvY3MtbG9hZGVyIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0hvc3Q+XG4gICAgKTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==
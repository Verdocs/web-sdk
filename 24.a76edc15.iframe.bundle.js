(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"./dist/esm/utils-74227747.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getRoleIndex})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getRGBA})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getFieldId})),__webpack_require__.d(__webpack_exports__,"d",(function(){return rescale})),__webpack_require__.d(__webpack_exports__,"e",(function(){return fullNameToInitials})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getFieldSettings})),__webpack_require__.d(__webpack_exports__,"g",(function(){return integerSequence})),__webpack_require__.d(__webpack_exports__,"h",(function(){return renderDocumentField})),__webpack_require__.d(__webpack_exports__,"i",(function(){return setControlStyles}));__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js");function getRGBA(roleIndex){switch(roleIndex%10){case 0:return 0===roleIndex?"rgba(255, 193, 7, 0.4)":"rgba(134, 134, 134, 0.3)";case 1:return"rgba(156, 39, 176, .4)";case 2:return"rgba(33, 150, 243, .4)";case 3:return"rgba(220, 231, 117, 0.3)";case 4:return"rgba(121, 134, 203, 0.3)";case 5:return"rgba(77, 182, 172, 0.3)";case 6:return"rgba(255, 202, 165, 0.3)";case 7:return"rgba(2, 247, 190, 0.3)";case 8:return"rgba(255, 138, 101, 0.3)";case 9:return"rgba(82, 255, 79, 0.3)";default:return"rgba(229, 115, 155, 0.3)"}}function rescale(r,n){return r*n}var integerSequence=function integerSequence(start,count){return Array(count).fill(1).map((function(_,index){return index+start}))},fullNameToInitials=function fullNameToInitials(name){return name.split(" ").map((function(word){return word[0]})).join("")},setControlStyles=function setControlStyles(el,field,xScale,yScale,roleIndex,option){var _a,_b,_c,_d,settings=field.setting||field.settings,_settings$x=settings.x,x=void 0===_settings$x?0:_settings$x,_settings$y=settings.y,y=void 0===_settings$y?0:_settings$y,_settings$width=settings.width,width=void 0===_settings$width?function defaultWidth(field){switch(field.type){case"attachment":case"payment":return 24;case"checkbox":case"checkbox_group":case"radio_button_group":return 14;case"signature":case"initial":return 82}return 150}(field):_settings$width,_settings$height=settings.height,height=void 0===_settings$height?function defaultHeight(field){switch(field.type){case"attachment":case"payment":return 24;case"checkbox":case"checkbox_group":case"radio_button_group":return 14;case"signature":case"initial":return 41}return 50}(field):_settings$height,optionSettings=void 0!==option&&settings.options[option]?settings.options[option]:null;optionSettings&&(x=null!==(_a=optionSettings.x)&&void 0!==_a?_a:x,y=null!==(_b=optionSettings.y)&&void 0!==_b?_b:y,width=null!==(_c=optionSettings.width)&&void 0!==_c?_c:width,height=null!==(_d=optionSettings.height)&&void 0!==_d?_d:height),el.style.width=width+"px",el.style.height=height+"px",el.style.position="absolute",el.style.left=rescale(xScale,x)+"px",el.style.bottom=rescale(yScale,y)+"px",el.style.transform="scale("+xScale+", "+yScale+")",el.style.backgroundColor=field.rgba||getRGBA(roleIndex)},getFieldId=function getFieldId(field){return"verdocs-doc-fld-"+field.name},getFieldOptionId=function getFieldOptionId(field,index){return"verdocs-doc-fld-"+field.name+"-"+index},renderDocumentField=function renderDocumentField(field,docPage,roleIndex,handleFieldChange,disabled){var controlsDiv=document.getElementById(docPage.containerId+"-controls");if(controlsDiv)switch(field.type){case"attachment":case"date":case"dropdown":case"initial":case"payment":case"signature":case"timestamp":case"textarea":case"textbox":var id=getFieldId(field),existingField=document.getElementById(id);if(existingField)return void setControlStyles(existingField,field,docPage.xScale,docPage.yScale,roleIndex);var el=document.createElement("verdocs-field-"+field.type);el.field=field,el.setAttribute("id",id),disabled&&el.setAttribute("disabled",!0),el.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(el,field,docPage.xScale,docPage.yScale,roleIndex),controlsDiv.appendChild(el);break;case"checkbox_group":field.setting.options.forEach((function(option,checkboxIndex){var id=getFieldOptionId(field,checkboxIndex),existingField=document.getElementById(id);if(existingField)setControlStyles(existingField,field,docPage.xScale,docPage.yScale,roleIndex,checkboxIndex);else{console.log("Adding checkbox",option);var cbEl=document.createElement("verdocs-field-checkbox");cbEl.field=field,cbEl.setAttribute("id",id),cbEl.setAttribute("option",checkboxIndex),disabled&&cbEl.setAttribute("disabled",!0),cbEl.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(cbEl,field,docPage.xScale,docPage.yScale,roleIndex,checkboxIndex),controlsDiv.appendChild(cbEl)}}));break;case"radio_button_group":field.setting.options.forEach((function(option,buttonIndex){var id=getFieldOptionId(field,buttonIndex),existingField=document.getElementById(id);if(existingField)setControlStyles(existingField,field,docPage.xScale,docPage.yScale,roleIndex,buttonIndex);else{console.log("Adding radio button",option);var cbEl=document.createElement("verdocs-field-radio-button");cbEl.field=field,cbEl.setAttribute("id",id),cbEl.setAttribute("option",buttonIndex),disabled&&cbEl.setAttribute("disabled",!0),cbEl.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(cbEl,field,docPage.xScale,docPage.yScale,roleIndex,buttonIndex),controlsDiv.appendChild(cbEl)}}));break;default:console.log("[PREVIEW] Skipping unsupported field type",field)}},getRoleIndex=function getRoleIndex(roles,role){return roles.indexOf(role)||0},getFieldSettings=function getFieldSettings(field){return field.setting?field.setting:field.settings?field.settings:{x:0,y:0,required:!1,disabled:!1,result:"",value:""}}},"./dist/esm/verdocs-field-checkbox_2.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"verdocs_field_checkbox",(function(){return VerdocsFieldCheckbox})),__webpack_require__.d(__webpack_exports__,"verdocs_field_radio_button",(function(){return VerdocsFieldRadioButton}));__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var _index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/esm/index-43893f54.js"),_utils_74227747_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/esm/utils-74227747.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}var VerdocsFieldCheckbox=function(){function VerdocsFieldCheckbox(hostRef){_classCallCheck(this,VerdocsFieldCheckbox),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.h)(this,hostRef),this.fieldChange=Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.d)(this,"fieldChange",7),this.field=null,this.option=0,this.disabled=!1}return _createClass(VerdocsFieldCheckbox,[{key:"handleChange",value:function handleChange(e){this.fieldChange.emit({option:this.option,value:e.target.checked})}},{key:"render",value:function render(){var _a,_b,_c,_d,_this=this,settings=Object(_utils_74227747_js__WEBPACK_IMPORTED_MODULE_3__.f)(this.field),option=null!==(_b=null===(_a=settings.options)||void 0===_a?void 0:_a[this.option])&&void 0!==_b?_b:{checked:!1},disabled=null!==(_d=null!==(_c=this.disabled)&&void 0!==_c?_c:settings.disabled)&&void 0!==_d&&_d;return Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.f)(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.b,{class:{required:settings.required,disabled:disabled}},Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.f)("label",null,Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.f)("input",{type:"checkbox",tabIndex:settings.order,checked:option.checked,disabled:disabled,required:settings.required,onChange:function onChange(e){return _this.handleChange(e)}}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.f)("span",null)))}}]),VerdocsFieldCheckbox}();VerdocsFieldCheckbox.style='@charset "UTF-8";verdocs-field-checkbox{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;font-size:11px;position:relative;background-color:transparent;-webkit-transform-origin:bottom left;transform-origin:bottom left}verdocs-field-checkbox.disabled{opacity:0.5}verdocs-field-checkbox label>input[type=checkbox]{display:none}verdocs-field-checkbox label>input[type=checkbox]+*::before{content:"";position:absolute;display:block;top:1px;left:1px;width:10px;height:10px;border-radius:2px;background:#f5f5fa;border:1px solid rgba(0, 0, 0, 0.7)}verdocs-field-checkbox label>input[type=checkbox]:checked+*{color:#55bc81}verdocs-field-checkbox label>input[type=checkbox]:checked+*::before{content:"âœ“";color:white;text-align:center;background:#55bc81;border-color:#55bc81}verdocs-field-checkbox.required label>input[type=checkbox]+*::before{border:1px solid #cc0000}verdocs-field-checkbox.hide{display:none}verdocs-field-checkbox.focused{-webkit-animation:verdocs-field-pulse 0.75s 2;animation:verdocs-field-pulse 0.75s 2}';var VerdocsFieldRadioButton=function(){function VerdocsFieldRadioButton(hostRef){_classCallCheck(this,VerdocsFieldRadioButton),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.h)(this,hostRef),this.fieldChange=Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.d)(this,"fieldChange",7),this.field=null,this.option=0,this.disabled=!1}return _createClass(VerdocsFieldRadioButton,[{key:"handleChange",value:function handleChange(e){console.log("changed",e),this.fieldChange.emit({option:this.option,value:e.target.checked})}},{key:"render",value:function render(){var _a,_b,_this2=this,settings=Object(_utils_74227747_js__WEBPACK_IMPORTED_MODULE_3__.f)(this.field),disabled=null!==(_b=null!==(_a=this.disabled)&&void 0!==_a?_a:settings.disabled)&&void 0!==_b&&_b;return Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.f)(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.b,{class:{required:settings.required,disabled:disabled}},Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.f)("input",{type:"radio",tabIndex:settings.order,value:settings.value,name:settings.name,id:settings.name+"="+settings.value,checked:settings.checked,disabled:disabled,required:settings.required,onChange:function onChange(e){return _this2.handleChange(e)}}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_2__.f)("label",{htmlFor:settings.name+"="+settings.value}))}}]),VerdocsFieldRadioButton}();VerdocsFieldRadioButton.style='verdocs-field-radio-button{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;width:14px;height:14px;display:block;font-size:11px;position:relative;background-color:transparent;-webkit-transform-origin:bottom left;transform-origin:bottom left;border-radius:100%}verdocs-field-radio-button.disabled{opacity:0.5}verdocs-field-radio-button input[type=radio]{position:absolute;opacity:0}verdocs-field-radio-button input[type=radio]+label:before{content:"";background:#f5f5fa;border-radius:100%;border:1px solid rgba(0, 0, 0, 0.6);display:inline-block;width:10px;height:10px;position:absolute;left:1px;top:1px;cursor:pointer;text-align:center;-webkit-transition:all 250ms ease;transition:all 250ms ease}verdocs-field-radio-button input[type=radio]:checked+label:before{background-color:#55bc81;-webkit-box-shadow:inset 0 0 0 2px #f5f5fa;box-shadow:inset 0 0 0 2px #f5f5fa}verdocs-field-radio-button input[type=radio]:focus+label:before{outline:none;border-color:#55bc81}verdocs-field-radio-button input[type=radio]:disabled+label:before{-webkit-box-shadow:inset 0 0 0 4px #f5f5fa;box-shadow:inset 0 0 0 4px #f5f5fa;border-color:#a0a0d0;background:#a0a0d0}verdocs-field-radio-button input[type=radio]+label:empty:before{margin-right:0}verdocs-field-radio-button.required input[type=radio]+label:before{border:1px solid #cc0000}verdocs-field-radio-button.hide{display:none}verdocs-field-radio-button.focused{-webkit-animation:verdocs-field-pulse 0.75s 2;animation:verdocs-field-pulse 0.75s 2}'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9VdGlscy9Db2xvcnMuanMiLCJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy9AdmVyZG9jcy9qcy1zZGsvVXRpbHMvRmllbGRzLmpzIiwid2VicGFjazovLy9zcmMvdXRpbHMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vL3NyYy9jb21wb25lbnRzL2VsZW1lbnRzL3ZlcmRvY3MtZmllbGQtY2hlY2tib3gtZ3JvdXAvdmVyZG9jcy1maWVsZC1jaGVja2JveC5zY3NzIiwid2VicGFjazovLy9zcmMvY29tcG9uZW50cy9lbGVtZW50cy92ZXJkb2NzLWZpZWxkLWNoZWNrYm94LWdyb3VwL3ZlcmRvY3MtZmllbGQtY2hlY2tib3gudHN4Iiwid2VicGFjazovLy9zcmMvY29tcG9uZW50cy9lbGVtZW50cy92ZXJkb2NzLWZpZWxkLXJhZGlvLWJ1dHRvbi1ncm91cC92ZXJkb2NzLWZpZWxkLXJhZGlvLWJ1dHRvbi5zY3NzIiwid2VicGFjazovLy9zcmMvY29tcG9uZW50cy9lbGVtZW50cy92ZXJkb2NzLWZpZWxkLXJhZGlvLWJ1dHRvbi1ncm91cC92ZXJkb2NzLWZpZWxkLXJhZGlvLWJ1dHRvbi50c3giXSwibmFtZXMiOlsiZ2V0UkdCQSIsInJvbGVJbmRleCIsInJlc2NhbGUiLCJyIiwibiIsImludGVnZXJTZXF1ZW5jZSIsInN0YXJ0IiwiY291bnQiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJfIiwiaW5kZXgiLCJmdWxsTmFtZVRvSW5pdGlhbHMiLCJuYW1lIiwic3BsaXQiLCJ3b3JkIiwiam9pbiIsInNldENvbnRyb2xTdHlsZXMiLCJlbCIsImZpZWxkIiwieFNjYWxlIiwieVNjYWxlIiwib3B0aW9uIiwic2V0dGluZ3MiLCJzZXR0aW5nIiwieCIsInkiLCJ3aWR0aCIsImRlZmF1bHRXaWR0aCIsInR5cGUiLCJoZWlnaHQiLCJkZWZhdWx0SGVpZ2h0Iiwib3B0aW9uU2V0dGluZ3MiLCJ1bmRlZmluZWQiLCJvcHRpb25zIiwiX2EiLCJfYiIsIl9jIiwiX2QiLCJzdHlsZSIsInBvc2l0aW9uIiwibGVmdCIsImJvdHRvbSIsInRyYW5zZm9ybSIsImJhY2tncm91bmRDb2xvciIsImdldEZpZWxkSWQiLCJnZXRGaWVsZE9wdGlvbklkIiwicmVuZGVyRG9jdW1lbnRGaWVsZCIsImRvY1BhZ2UiLCJoYW5kbGVGaWVsZENoYW5nZSIsImRpc2FibGVkIiwiY29udHJvbHNEaXYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY29udGFpbmVySWQiLCJpZCIsImV4aXN0aW5nRmllbGQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJhcHBlbmRDaGlsZCIsImZvckVhY2giLCJjaGVja2JveEluZGV4IiwiY29uc29sZSIsImxvZyIsImNiRWwiLCJidXR0b25JbmRleCIsImdldFJvbGVJbmRleCIsInJvbGVzIiwicm9sZSIsImluZGV4T2YiLCJnZXRGaWVsZFNldHRpbmdzIiwicmVxdWlyZWQiLCJyZXN1bHQiLCJ2YWx1ZSIsIlZlcmRvY3NGaWVsZENoZWNrYm94IiwiaGFuZGxlQ2hhbmdlIiwidGhpcyIsImZpZWxkQ2hhbmdlIiwiZW1pdCIsInRhcmdldCIsImNoZWNrZWQiLCJyZW5kZXIiLCJoIiwiSG9zdCIsImNsYXNzIiwidGFiSW5kZXgiLCJvcmRlciIsIm9uQ2hhbmdlIiwiVmVyZG9jc0ZpZWxkUmFkaW9CdXR0b24iLCJodG1sRm9yIl0sIm1hcHBpbmdzIjoiK2hEQThCTyxTQUFTQSxRQUFRQyxXQUNwQixPQUFRQSxVQUFZLElBQ2hCLEtBQUssRUFDRCxPQUFxQixJQUFkQSxVQUFrQix5QkFBMkIsMkJBQ3hELEtBQUssRUFDRCxNQUFPLHlCQUNYLEtBQUssRUFDRCxNQUFPLHlCQUNYLEtBQUssRUFDRCxNQUFPLDJCQUNYLEtBQUssRUFDRCxNQUFPLDJCQUNYLEtBQUssRUFDRCxNQUFPLDBCQUNYLEtBQUssRUFDRCxNQUFPLDJCQUNYLEtBQUssRUFDRCxN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NEIsS0FBSzVCLGdCQUFRZixVQUFJWixTQUFTMkIsZ0JBQVFkLFdBQ25ELE9BQ0VnRCwwREFBQ0Msa0RBQUksQ0FBQ0MsTUFBTyxDQUFDYixTQUFVbEQsU0FBU2tELFNBQVV2QixvQkFDekNrQyxtRUFDRXZELEtBQUssUUFDTDBELFNBQVVoRSxTQUFTaUUsTUFDbkJiLE1BQU9wRCxTQUFTb0QsTUFDaEI5RCxLQUFNVSxTQUFTVixLQUNmMEMsR0FBT2hDLFNBQVNWLEtBQWQsSUFBc0JVLFNBQVNvRCxNQUNqQ08sUUFBUzNELFNBQVMyRCxRQUNsQmhDLFNBQVVBLFNBQ1Z1QixTQUFVbEQsU0FBU2tELFNBQ25CZ0IsU0FBVSxrQkFBQTdCLEdBQUMsT0FBSSxPQUFLaUIsYUFBYWpCLEVBQXRCLElBRWJ3QixtRUFBT08sUUFBWXBFLFNBQVNWLEtBQWQsSUFBc0JVLFNBQVNvRCxRQUdsRCxLQXBEaUMsMkIsOEJEYkQsbS9DIiwiZmlsZSI6IjI0LmE3NmVkYzE1LmlmcmFtZS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEdpdmVuIGEgYHJnYmEocixnLGIsYSlgIHN0cmluZyB2YWx1ZSwgcmV0dXJucyB0aGUgaGV4IGVxdWl2YWxlbnQsIGRyb3BwaW5nIHRoZSBhbHBoYSBjaGFubmVsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UkdCKHJnYmEpIHtcbiAgICB2YXIgcmdiTnVtYmVycyA9IHJnYmEucmVwbGFjZSgncmdiYSgnLCAnJykucmVwbGFjZSgnKScsICcnKS5zcGxpdCgnLCcpO1xuICAgIHZhciByZ2JPYmplY3QgPSB7XG4gICAgICAgIHJlZDogK3JnYk51bWJlcnNbMF0sXG4gICAgICAgIGdyZWVuOiArcmdiTnVtYmVyc1sxXSxcbiAgICAgICAgYmx1ZTogK3JnYk51bWJlcnNbMl0sXG4gICAgICAgIGFscGhhOiArcmdiTnVtYmVyc1szXSxcbiAgICB9O1xuICAgIHZhciBhbHBoYSA9IDEgLSByZ2JPYmplY3QuYWxwaGE7XG4gICAgdmFyIHJlZCA9IE1hdGgucm91bmQoKHJnYk9iamVjdC5hbHBoYSAqIChyZ2JPYmplY3QucmVkIC8gMjU1KSArIGFscGhhKSAqIDI1NSk7XG4gICAgdmFyIGdyZWVuID0gTWF0aC5yb3VuZCgocmdiT2JqZWN0LmFscGhhICogKHJnYk9iamVjdC5ncmVlbiAvIDI1NSkgKyBhbHBoYSkgKiAyNTUpO1xuICAgIHZhciBibHVlID0gTWF0aC5yb3VuZCgocmdiT2JqZWN0LmFscGhhICogKHJnYk9iamVjdC5ibHVlIC8gMjU1KSArIGFscGhhKSAqIDI1NSk7XG4gICAgcmV0dXJuICcjJyArIHJnYlRvSGV4KHJlZCkgKyByZ2JUb0hleChncmVlbikgKyByZ2JUb0hleChibHVlKTtcbn1cbi8qKlxuICogR2l2ZW4gYW4gUkdCIHN0cmluZyB2YWx1ZSwgcmV0dXJucyB0aGUgaGV4IGVxdWl2YWxlbnQuXG4gKi9cbmZ1bmN0aW9uIHJnYlRvSGV4KHJnYikge1xuICAgIHZhciBoZXggPSByZ2IudG9TdHJpbmcoMTYpO1xuICAgIGlmIChoZXgubGVuZ3RoIDwgMikge1xuICAgICAgICByZXR1cm4gJzAnICsgaGV4O1xuICAgIH1cbiAgICByZXR1cm4gaGV4O1xufVxuLyoqXG4gKiBHaXZlbiBhIHNpZ25lciByb2xlIGluZGV4LCByZXR1cm4gdGhlIGNvbG9yIGNvZGUgZm9yIHRoYXQgc2lnbmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UkdCQShyb2xlSW5kZXgpIHtcbiAgICBzd2l0Y2ggKHJvbGVJbmRleCAlIDEwKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiByb2xlSW5kZXggPT09IDAgPyAncmdiYSgyNTUsIDE5MywgNywgMC40KScgOiAncmdiYSgxMzQsIDEzNCwgMTM0LCAwLjMpJzsgLy8gI0ZGRTY5Q1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMTU2LCAzOSwgMTc2LCAuNCknOyAvLyAnI0UzQzNFOSdcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDMzLCAxNTAsIDI0MywgLjQpJzsgLy8gJyNDMUUxRkInXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgyMjAsIDIzMSwgMTE3LCAwLjMpJztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDEyMSwgMTM0LCAyMDMsIDAuMyknO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoNzcsIDE4MiwgMTcyLCAwLjMpJztcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDI1NSwgMjAyLCAxNjUsIDAuMyknO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMiwgMjQ3LCAxOTAsIDAuMyknO1xuICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMjU1LCAxMzgsIDEwMSwgMC4zKSc7XG4gICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSg4MiwgMjU1LCA3OSwgMC4zKSc7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMjI5LCAxMTUsIDE1NSwgMC4zKSc7XG4gICAgfVxufVxuLyoqXG4gKiBHaXZlbiBhIHJvbGUgbmFtZSwgcmV0dXJuIGEgY29sb3IgY29kZSBmb3IgaXQuIFRoaXMgd29ya3MgYnkgY29tcHV0aW5nIGEgaGFzaCBjb2RlIHNvIHRoZSBzcGVjaWZpYyBjb2xvciByZXR1cm5lZFxuICogaXMgbm90IHNwZWNpZmllZCBleHBsaWNpdGx5LCBidXQgd2lsbCBiZSB0aGUgc2FtZSBmb3IgZXZlcnkgY2FsbCB3aXRoIHRoZSBzYW1lIGlucHV0IHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbmFtZVRvUkdCQShzdHIpIHtcbiAgICBpZiAoISFzdHIpIHtcbiAgICAgICAgdmFyIHZhbGlkTnVtID0gcGFyc2VJbnQoc3RyLnNsaWNlKC0xKSwgMTApO1xuICAgICAgICBpZiAoIWlzTmFOKHZhbGlkTnVtKSkge1xuICAgICAgICAgICAgc3RyICs9ICh2YWxpZE51bSAqIDk5KS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBoYXNoID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGhhc2ggPSBzdHIuY2hhckNvZGVBdChpKSArICgoaGFzaCA8PCA1KSAtIGhhc2gpO1xuICAgICAgICB9XG4gICAgICAgIGhhc2ggPSBNYXRoLnJvdW5kKGhhc2ggLyAxLjMpO1xuICAgICAgICB2YXIgYyA9IChoYXNoICYgMHgwMGZmZmYwOCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIHZhciBoZXggPSAnIycgKyAnMDAwMDAnLnN1YnN0cmluZygwLCA2IC0gYy5sZW5ndGgpICsgYztcbiAgICAgICAgdmFyIHJlc3VsdCA9IC9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2kuZXhlYyhoZXgpO1xuICAgICAgICB2YXIgY29sb3IgPSB7XG4gICAgICAgICAgICByOiBwYXJzZUludChyZXN1bHRbMV0sIDE2KSxcbiAgICAgICAgICAgIGc6IHBhcnNlSW50KHJlc3VsdFsyXSwgMTYpLFxuICAgICAgICAgICAgYjogcGFyc2VJbnQocmVzdWx0WzNdLCAxNiksXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBcInJnYmEoXCIuY29uY2F0KGNvbG9yLnIsIFwiLCBcIikuY29uY2F0KGNvbG9yLmcsIFwiLCBcIikuY29uY2F0KGNvbG9yLmIsIFwiLCAwLjIpXCIpO1xuICAgIH1cbn1cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIG9idGFpbiBhIGNvbG9yIGNvZGUgZ2l2ZW4gYSByb2xlIG5hbWUgZ2l2ZW4gdmFyaW91cyBwb3NzaWJsZSBpbnB1dHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSb2xlQ29sb3IobmFtZSwgcm9sZXMsIGluZGV4KSB7XG4gICAgaWYgKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBnZXRSR0JBKGluZGV4KTtcbiAgICB9XG4gICAgZWxzZSBpZiAocm9sZXMgJiYgcm9sZXMubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgcm9sZUluZGV4ID0gcm9sZXMuZmluZEluZGV4KGZ1bmN0aW9uIChyb2xlKSB7IHJldHVybiByb2xlLm5hbWUgPT09IG5hbWU7IH0pO1xuICAgICAgICBpZiAocm9sZUluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiByb2xlc1tyb2xlSW5kZXhdLnJnYmEgfHwgZ2V0UkdCQShyb2xlSW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5hbWVUb1JHQkEobmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBuYW1lVG9SR0JBKG5hbWUpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBnZXRSVG9wKHksIGZpZWxkSGVpZ2h0LCBpVGV4dEhlaWdodCwgeVJhdGlvKSB7XG4gICAgcmV0dXJuIGlUZXh0SGVpZ2h0IC0gKHkgKyBmaWVsZEhlaWdodCkgKiB5UmF0aW87XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UkxlZnQoeCwgcmF0aW8pIHtcbiAgICByZXR1cm4geCAqIHJhdGlvO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFJWYWx1ZSh5LCByYXRpbykge1xuICAgIHJldHVybiB5ICogcmF0aW87XG59XG5leHBvcnQgZnVuY3Rpb24gYmxvYlRvQmFzZTY0KGltYWdlKSB7XG4gICAgdmFyIGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZpbGVSZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdQcm9ibGVtIHJlYWRpbmcgYmxvYi4nKSk7XG4gICAgICAgIH07XG4gICAgICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVzb2x2ZShmaWxlUmVhZGVyLnJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIGZpbGVSZWFkZXIucmVhZEFzRGF0YVVSTChpbWFnZSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzY2FsZShyLCBuKSB7XG4gICAgcmV0dXJuIHIgKiBuO1xufVxuIiwiLy8gVGhlc2Ugc2hvdWxkIHByb2JhYmx5IGFsbCBtb3ZlIHRvIEpTLVNES1xuaW1wb3J0IHtyZXNjYWxlfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVXRpbHMvRmllbGRzJztcbmltcG9ydCB7Z2V0UkdCQX0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1V0aWxzL0NvbG9ycyc7XG5pbXBvcnQge0lUZW1wbGF0ZUZpZWxkfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzL1R5cGVzJztcbmltcG9ydCB7SURvY3VtZW50RmllbGR9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9Eb2N1bWVudHMvVHlwZXMnO1xuaW1wb3J0IHtJRG9jdW1lbnRQYWdlSW5mb30gZnJvbSAnLi9UeXBlcyc7XG5cbmV4cG9ydCBjb25zdCBpbnRlZ2VyU2VxdWVuY2UgPSAoc3RhcnQ6IG51bWJlciwgY291bnQ6IG51bWJlcik6IG51bWJlcltdID0+XG4gIEFycmF5KGNvdW50KVxuICAgIC5maWxsKDEpXG4gICAgLm1hcCgoXywgaW5kZXgpID0+IGluZGV4ICsgc3RhcnQpO1xuXG5leHBvcnQgY29uc3QgZnVsbE5hbWVUb0luaXRpYWxzID0gKG5hbWU6IHN0cmluZykgPT5cbiAgbmFtZVxuICAgIC5zcGxpdCgnICcpXG4gICAgLm1hcCh3b3JkID0+IHdvcmRbMF0pXG4gICAgLmpvaW4oJycpO1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdFdpZHRoID0gKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCB8IElEb2N1bWVudEZpZWxkKSA9PiB7XG4gIHN3aXRjaCAoZmllbGQudHlwZSkge1xuICAgIGNhc2UgJ2F0dGFjaG1lbnQnOlxuICAgIGNhc2UgJ3BheW1lbnQnOlxuICAgICAgcmV0dXJuIDI0O1xuICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICBjYXNlICdjaGVja2JveF9ncm91cCc6XG4gICAgY2FzZSAncmFkaW9fYnV0dG9uX2dyb3VwJzpcbiAgICAgIHJldHVybiAxNDtcbiAgICBjYXNlICdzaWduYXR1cmUnOlxuICAgIGNhc2UgJ2luaXRpYWwnOlxuICAgICAgcmV0dXJuIDgyO1xuICB9XG5cbiAgcmV0dXJuIDE1MDtcbn07XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0SGVpZ2h0ID0gKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCB8IElEb2N1bWVudEZpZWxkKSA9PiB7XG4gIHN3aXRjaCAoZmllbGQudHlwZSkge1xuICAgIGNhc2UgJ2F0dGFjaG1lbnQnOlxuICAgIGNhc2UgJ3BheW1lbnQnOlxuICAgICAgcmV0dXJuIDI0O1xuICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICBjYXNlICdjaGVja2JveF9ncm91cCc6XG4gICAgY2FzZSAncmFkaW9fYnV0dG9uX2dyb3VwJzpcbiAgICAgIHJldHVybiAxNDtcbiAgICBjYXNlICdzaWduYXR1cmUnOlxuICAgIGNhc2UgJ2luaXRpYWwnOlxuICAgICAgcmV0dXJuIDQxO1xuICB9XG5cbiAgcmV0dXJuIDUwO1xufTtcblxuZXhwb3J0IGNvbnN0IHNldENvbnRyb2xTdHlsZXMgPSAoZWw6IEhUTUxFbGVtZW50LCBmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCwgeFNjYWxlOiBudW1iZXIsIHlTY2FsZTogbnVtYmVyLCByb2xlSW5kZXg6IG51bWJlciwgb3B0aW9uPzogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHNldHRpbmdzID0gKGZpZWxkIGFzIElUZW1wbGF0ZUZpZWxkKS5zZXR0aW5nIHx8IChmaWVsZCBhcyBJRG9jdW1lbnRGaWVsZCkuc2V0dGluZ3M7XG4gIGxldCB7eCA9IDAsIHkgPSAwLCB3aWR0aCA9IGRlZmF1bHRXaWR0aChmaWVsZCksIGhlaWdodCA9IGRlZmF1bHRIZWlnaHQoZmllbGQpfSA9IHNldHRpbmdzO1xuXG4gIGNvbnN0IG9wdGlvblNldHRpbmdzID0gb3B0aW9uICE9PSB1bmRlZmluZWQgJiYgc2V0dGluZ3Mub3B0aW9uc1tvcHRpb25dID8gc2V0dGluZ3Mub3B0aW9uc1tvcHRpb25dIDogbnVsbDtcbiAgaWYgKG9wdGlvblNldHRpbmdzKSB7XG4gICAgeCA9IG9wdGlvblNldHRpbmdzLnggPz8geDtcbiAgICB5ID0gb3B0aW9uU2V0dGluZ3MueSA/PyB5O1xuICAgIHdpZHRoID0gb3B0aW9uU2V0dGluZ3Mud2lkdGggPz8gd2lkdGg7XG4gICAgaGVpZ2h0ID0gb3B0aW9uU2V0dGluZ3MuaGVpZ2h0ID8/IGhlaWdodDtcbiAgfVxuXG4gIGVsLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgO1xuICBlbC5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuICBlbC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gIGVsLnN0eWxlLmxlZnQgPSBgJHtyZXNjYWxlKHhTY2FsZSwgeCl9cHhgO1xuICBlbC5zdHlsZS5ib3R0b20gPSBgJHtyZXNjYWxlKHlTY2FsZSwgeSl9cHhgO1xuICBlbC5zdHlsZS50cmFuc2Zvcm0gPSBgc2NhbGUoJHt4U2NhbGV9LCAke3lTY2FsZX0pYDtcbiAgZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZmllbGRbJ3JnYmEnXSB8fCBnZXRSR0JBKHJvbGVJbmRleCk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0RmllbGRJZCA9IChmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCkgPT4ge1xuICByZXR1cm4gYHZlcmRvY3MtZG9jLWZsZC0ke2ZpZWxkLm5hbWV9YDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRGaWVsZE9wdGlvbklkID0gKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCwgaW5kZXg6IG51bWJlcikgPT4ge1xuICByZXR1cm4gYHZlcmRvY3MtZG9jLWZsZC0ke2ZpZWxkLm5hbWV9LSR7aW5kZXh9YDtcbn07XG5cbmV4cG9ydCBjb25zdCByZW5kZXJEb2N1bWVudEZpZWxkID0gKFxuICBmaWVsZDogSVRlbXBsYXRlRmllbGQsXG4gIGRvY1BhZ2U6IElEb2N1bWVudFBhZ2VJbmZvLFxuICByb2xlSW5kZXg6IG51bWJlcixcbiAgaGFuZGxlRmllbGRDaGFuZ2U6IChmaWVsZDogSVRlbXBsYXRlRmllbGQsIGU6IGFueSwgb3B0aW9uSWQ/OiBzdHJpbmcpID0+IHZvaWQsXG4gIGRpc2FibGVkOiBib29sZWFuLFxuKSA9PiB7XG4gIGNvbnN0IGNvbnRyb2xzRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZG9jUGFnZS5jb250YWluZXJJZCArICctY29udHJvbHMnKTtcbiAgaWYgKCFjb250cm9sc0Rpdikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN3aXRjaCAoZmllbGQudHlwZSkge1xuICAgIGNhc2UgJ2F0dGFjaG1lbnQnOlxuICAgIGNhc2UgJ2RhdGUnOlxuICAgIGNhc2UgJ2Ryb3Bkb3duJzpcbiAgICBjYXNlICdpbml0aWFsJzpcbiAgICBjYXNlICdwYXltZW50JzpcbiAgICBjYXNlICdzaWduYXR1cmUnOlxuICAgIGNhc2UgJ3RpbWVzdGFtcCc6XG4gICAgY2FzZSAndGV4dGFyZWEnOlxuICAgIGNhc2UgJ3RleHRib3gnOlxuICAgICAge1xuICAgICAgICBjb25zdCBpZCA9IGdldEZpZWxkSWQoZmllbGQpO1xuICAgICAgICBjb25zdCBleGlzdGluZ0ZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICBpZiAoZXhpc3RpbmdGaWVsZCkge1xuICAgICAgICAgIHNldENvbnRyb2xTdHlsZXMoZXhpc3RpbmdGaWVsZCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSwgcm9sZUluZGV4KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbDogYW55ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgdmVyZG9jcy1maWVsZC0ke2ZpZWxkLnR5cGV9YCk7XG4gICAgICAgIGVsLmZpZWxkID0gZmllbGQ7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdmaWVsZENoYW5nZScsIGUgPT4gaGFuZGxlRmllbGRDaGFuZ2UoZmllbGQsIGUpKTtcbiAgICAgICAgc2V0Q29udHJvbFN0eWxlcyhlbCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSwgcm9sZUluZGV4KTtcbiAgICAgICAgY29udHJvbHNEaXYuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdjaGVja2JveF9ncm91cCc6XG4gICAgICBmaWVsZC5zZXR0aW5nLm9wdGlvbnMuZm9yRWFjaCgob3B0aW9uLCBjaGVja2JveEluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlkID0gZ2V0RmllbGRPcHRpb25JZChmaWVsZCwgY2hlY2tib3hJbmRleCk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICAgIGlmIChleGlzdGluZ0ZpZWxkKSB7XG4gICAgICAgICAgc2V0Q29udHJvbFN0eWxlcyhleGlzdGluZ0ZpZWxkLCBmaWVsZCwgZG9jUGFnZS54U2NhbGUsIGRvY1BhZ2UueVNjYWxlLCByb2xlSW5kZXgsIGNoZWNrYm94SW5kZXgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdBZGRpbmcgY2hlY2tib3gnLCBvcHRpb24pO1xuICAgICAgICBjb25zdCBjYkVsOiBhbnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGB2ZXJkb2NzLWZpZWxkLWNoZWNrYm94YCk7XG4gICAgICAgIGNiRWwuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgY2JFbC5zZXRBdHRyaWJ1dGUoJ2lkJywgaWQpO1xuICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgnb3B0aW9uJywgY2hlY2tib3hJbmRleCk7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGNiRWwuYWRkRXZlbnRMaXN0ZW5lcignZmllbGRDaGFuZ2UnLCBlID0+IGhhbmRsZUZpZWxkQ2hhbmdlKGZpZWxkLCBlKSk7XG4gICAgICAgIHNldENvbnRyb2xTdHlsZXMoY2JFbCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSwgcm9sZUluZGV4LCBjaGVja2JveEluZGV4KTtcbiAgICAgICAgY29udHJvbHNEaXYuYXBwZW5kQ2hpbGQoY2JFbCk7XG4gICAgICB9KTtcblxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdyYWRpb19idXR0b25fZ3JvdXAnOlxuICAgICAgZmllbGQuc2V0dGluZy5vcHRpb25zLmZvckVhY2goKG9wdGlvbiwgYnV0dG9uSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBnZXRGaWVsZE9wdGlvbklkKGZpZWxkLCBidXR0b25JbmRleCk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICAgIGlmIChleGlzdGluZ0ZpZWxkKSB7XG4gICAgICAgICAgc2V0Q29udHJvbFN0eWxlcyhleGlzdGluZ0ZpZWxkLCBmaWVsZCwgZG9jUGFnZS54U2NhbGUsIGRvY1BhZ2UueVNjYWxlLCByb2xlSW5kZXgsIGJ1dHRvbkluZGV4KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZygnQWRkaW5nIHJhZGlvIGJ1dHRvbicsIG9wdGlvbik7XG4gICAgICAgIGNvbnN0IGNiRWw6IGFueSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYHZlcmRvY3MtZmllbGQtcmFkaW8tYnV0dG9uYCk7XG4gICAgICAgIGNiRWwuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgY2JFbC5zZXRBdHRyaWJ1dGUoJ2lkJywgaWQpO1xuICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgnb3B0aW9uJywgYnV0dG9uSW5kZXgpO1xuICAgICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZpZWxkQ2hhbmdlJywgZSA9PiBoYW5kbGVGaWVsZENoYW5nZShmaWVsZCwgZSkpO1xuICAgICAgICBzZXRDb250cm9sU3R5bGVzKGNiRWwsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUsIHJvbGVJbmRleCwgYnV0dG9uSW5kZXgpO1xuICAgICAgICBjb250cm9sc0Rpdi5hcHBlbmRDaGlsZChjYkVsKTtcbiAgICAgIH0pO1xuXG4gICAgICBicmVhaztcblxuICAgIC8vIGNhc2UgJ2F0dGFjaG1lbnQnOlxuICAgIC8vICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2ZXJkb2NzLWZpZWxkLWF0dGFjaG1lbnQnKTtcbiAgICAvLyAgIGVsLnNldEF0dHJpYnV0ZSgndmFsdWUnLCByZXN1bHQgfHwgJycpO1xuICAgIC8vICAgYnJlYWs7XG4gICAgLy8gY2FzZSAncGF5bWVudCc6XG4gICAgLy8gICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZlcmRvY3MtZmllbGQtcGF5bWVudCcpO1xuICAgIC8vICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGNvbnNvbGUubG9nKCdbUFJFVklFV10gU2tpcHBpbmcgdW5zdXBwb3J0ZWQgZmllbGQgdHlwZScsIGZpZWxkKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldFJvbGVJbmRleCA9IChyb2xlczogc3RyaW5nW10sIHJvbGU6IHN0cmluZykgPT4gcm9sZXMuaW5kZXhPZihyb2xlKSB8fCAwO1xuXG4vLyBUT0RPOiBXZSBjYW4gY2xlYW4gdGhpcyB1cCBhIGxvdCBpZiB3ZSBhbHRlciB0aGUgQVBJIHRvIGVtaXQgYm90aCBzZXR0aW5nIGFuZCBzZXR0aW5ncyByZWdhcmRsZXNzIG9mIHRoZSBzb3VyY2UgdHlwZSxcbi8vICAgYnV0IHRoZW4gbWVyZ2UgdGhlIFNESyB0eXBlcyB0byBlbmNvdXJhZ2UgZGV2ZWxvcGVycyB0byB1c2UganVzdCBgc2V0dGluZ3NgLlxuZXhwb3J0IGNvbnN0IGdldEZpZWxkU2V0dGluZ3MgPSAoZmllbGQ6IElUZW1wbGF0ZUZpZWxkIHwgSURvY3VtZW50RmllbGQpID0+IHtcbiAgaWYgKChmaWVsZCBhcyBJVGVtcGxhdGVGaWVsZCkuc2V0dGluZykge1xuICAgIHJldHVybiAoZmllbGQgYXMgSVRlbXBsYXRlRmllbGQpLnNldHRpbmc7XG4gIH1cblxuICBpZiAoKGZpZWxkIGFzIElEb2N1bWVudEZpZWxkKS5zZXR0aW5ncykge1xuICAgIHJldHVybiAoZmllbGQgYXMgSURvY3VtZW50RmllbGQpLnNldHRpbmdzO1xuICB9XG5cbiAgcmV0dXJuIHt4OiAwLCB5OiAwLCByZXF1aXJlZDogZmFsc2UsIGRpc2FibGVkOiBmYWxzZSwgcmVzdWx0OiAnJywgdmFsdWU6ICcnfTtcbn07XG4iLCJAaW1wb3J0ICcuLi8uLi8uLi90aGVtZS5zY3NzJztcblxuLy8gU2VlIGh0dHBzOi8vd3d3LmthbGxtYW5hdGlvbi5jb20vc3R5bGluZy1hLWNoZWNrYm94LXdpdGgtb25seS1jc3NcbnZlcmRvY3MtZmllbGQtY2hlY2tib3gge1xuICBmb250LWZhbWlseTogJHZlcmRvY3MtcHJpbWFyeS1mb250O1xuICBmb250LXNpemU6IDExcHg7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIHRyYW5zZm9ybS1vcmlnaW46IGJvdHRvbSBsZWZ0O1xuXG4gICYuZGlzYWJsZWQge1xuICAgIG9wYWNpdHk6IDAuNTtcbiAgfVxuXG4gIGxhYmVsID4gaW5wdXRbdHlwZT0nY2hlY2tib3gnXSB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxuXG4gIGxhYmVsID4gaW5wdXRbdHlwZT0nY2hlY2tib3gnXSArICo6OmJlZm9yZSB7XG4gICAgY29udGVudDogJyc7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIHRvcDogMXB4O1xuICAgIGxlZnQ6IDFweDtcbiAgICB3aWR0aDogMTBweDtcbiAgICBoZWlnaHQ6IDEwcHg7XG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xuICAgIGJhY2tncm91bmQ6ICR2ZXJkb2NzLWdyZXktMztcbiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuNyk7XG4gIH1cblxuICBsYWJlbCA+IGlucHV0W3R5cGU9J2NoZWNrYm94J106Y2hlY2tlZCArICoge1xuICAgIGNvbG9yOiAkdmVyZG9jcy1ncmVlbjtcbiAgfVxuXG4gIGxhYmVsID4gaW5wdXRbdHlwZT0nY2hlY2tib3gnXTpjaGVja2VkICsgKjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiAn4pyTJztcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGJhY2tncm91bmQ6ICR2ZXJkb2NzLWdyZWVuO1xuICAgIGJvcmRlci1jb2xvcjogJHZlcmRvY3MtZ3JlZW47XG4gIH1cblxuICAmLnJlcXVpcmVkIHtcbiAgICBsYWJlbCA+IGlucHV0W3R5cGU9J2NoZWNrYm94J10gKyAqOjpiZWZvcmUge1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgJHZlcmRvY3MtcmVkLTE7XG4gICAgfVxuICB9XG5cbiAgJi5oaWRlIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG5cbiAgJi5mb2N1c2VkIHtcbiAgICBhbmltYXRpb246IHZlcmRvY3MtZmllbGQtcHVsc2UgMC43NXMgMjtcbiAgfVxufVxuIiwiaW1wb3J0IHtJVGVtcGxhdGVGaWVsZH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcy9UeXBlcyc7XG5pbXBvcnQge0lEb2N1bWVudEZpZWxkLCBJUmVjaXBpZW50fSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvRG9jdW1lbnRzL1R5cGVzJztcbmltcG9ydCB7Q29tcG9uZW50LCBoLCBIb3N0LCBQcm9wLCBFdmVudCwgRXZlbnRFbWl0dGVyfSBmcm9tICdAc3RlbmNpbC9jb3JlJztcbmltcG9ydCB7Z2V0RmllbGRTZXR0aW5nc30gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xuXG4vKipcbiAqIERpc3BsYXlzIGEgc2lnbmF0dXJlIGZpZWxkLiBWYXJpb3VzIGZpZWxkIHR5cGVzIGFyZSBzdXBwb3J0ZWQsIGluY2x1ZGluZyB0cmFkaXRpb25hbCBTaWduYXR1cmUgYW5kIEluaXRpYWxzIHR5cGVzIGFzIHdlbGwgYXNcbiAqIGlucHV0IHR5cGVzIGxpa2UgdGV4dCBhbmQgY2hlY2tib3guXG4gKi9cbkBDb21wb25lbnQoe1xuICB0YWc6ICd2ZXJkb2NzLWZpZWxkLWNoZWNrYm94JyxcbiAgc3R5bGVVcmw6ICd2ZXJkb2NzLWZpZWxkLWNoZWNrYm94LnNjc3MnLFxuICBzaGFkb3c6IGZhbHNlLFxufSlcbmV4cG9ydCBjbGFzcyBWZXJkb2NzRmllbGRDaGVja2JveCB7XG4gIC8qKlxuICAgKiBUaGUgZG9jdW1lbnQgb3IgdGVtcGxhdGUgZmllbGQgdG8gZGlzcGxheS5cbiAgICovXG4gIEBQcm9wKCkgZmllbGQ6IElEb2N1bWVudEZpZWxkIHwgSVRlbXBsYXRlRmllbGQgfCBudWxsID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIHJlY2lwaWVudCBjb21wbGV0aW5nIHRoZSBmb3JtLCBpZiBrbm93bi5cbiAgICovXG4gIEBQcm9wKCkgcmVjaXBpZW50PzogSVJlY2lwaWVudDtcblxuICAvKipcbiAgICogVGhlIGluZGV4IG9mIHRoZSBzZXR0aW5ncyBvcHRpb24gdGhpcyBwYXJ0aWN1bGFyIGNoZWNrYm94IGlzIGZvclxuICAgKi9cbiAgQFByb3AoKSBvcHRpb246IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIElmIHNldCwgb3ZlcnJpZGVzIHRoZSBmaWVsZCdzIHNldHRpbmdzIG9iamVjdC4gUHJpbWFyaWx5IHVzZWQgdG8gc3VwcG9ydCBcInByZXZpZXdcIiBtb2RlcyB3aGVyZSBhbGwgZmllbGRzIGFyZSBkaXNhYmxlZC5cbiAgICovXG4gIEBQcm9wKCkgZGlzYWJsZWQ/OiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIHdoZW4gdGhlIGlucHV0IGZpZWxkIHZhbHVlIGNoYW5nZXMuIE5vdGUgdGhhdCB0aGlzIHdpbGwgb25seSBiZSBmaXJlZCBvbiBibHVyLCB0YWItb3V0LCBFTlRFUiBrZXkgcHJlc3MsIGV0Yy5cbiAgICogSXQgaXMgZ2VuZXJhbGx5IHRoZSBiZXN0IGV2ZW50IHRvIHN1YnNjcmliZSB0byB0aGFuIGBpbnB1dGAgZm9yIG1vc3QgY2FzZXMgRVhDRVBUIGF1dG9jb21wbGV0ZSBmaWVsZHMgdGhhdCBuZWVkIHRvIHNlZSBldmVyeVxuICAgKiBrZXlwcmVzcy5cbiAgICovXG4gIEBFdmVudCh7Y29tcG9zZWQ6IHRydWV9KSBmaWVsZENoYW5nZTogRXZlbnRFbWl0dGVyPHtvcHRpb246IG51bWJlcjsgdmFsdWU6IGJvb2xlYW59PjtcblxuICBoYW5kbGVDaGFuZ2UoZTogYW55KSB7XG4gICAgdGhpcy5maWVsZENoYW5nZS5lbWl0KHtvcHRpb246IHRoaXMub3B0aW9uLCB2YWx1ZTogZS50YXJnZXQuY2hlY2tlZH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHNldHRpbmdzID0gZ2V0RmllbGRTZXR0aW5ncyh0aGlzLmZpZWxkKTtcbiAgICBjb25zdCBvcHRpb24gPSBzZXR0aW5ncy5vcHRpb25zPy5bdGhpcy5vcHRpb25dID8/IHtjaGVja2VkOiBmYWxzZX07XG5cbiAgICBjb25zdCBkaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQgPz8gc2V0dGluZ3MuZGlzYWJsZWQgPz8gZmFsc2U7XG4gICAgcmV0dXJuIChcbiAgICAgIDxIb3N0IGNsYXNzPXt7cmVxdWlyZWQ6IHNldHRpbmdzLnJlcXVpcmVkLCBkaXNhYmxlZH19PlxuICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIHRhYkluZGV4PXtzZXR0aW5ncy5vcmRlcn0gY2hlY2tlZD17b3B0aW9uLmNoZWNrZWR9IGRpc2FibGVkPXtkaXNhYmxlZH0gcmVxdWlyZWQ9e3NldHRpbmdzLnJlcXVpcmVkfSBvbkNoYW5nZT17ZSA9PiB0aGlzLmhhbmRsZUNoYW5nZShlKX0gLz5cbiAgICAgICAgICA8c3BhbiAvPlxuICAgICAgICA8L2xhYmVsPlxuICAgICAgPC9Ib3N0PlxuICAgICk7XG4gIH1cbn1cbiIsIkBpbXBvcnQgJy4uLy4uLy4uL3RoZW1lLnNjc3MnO1xuXG4vLyBTZWUgaHR0cHM6Ly93d3cuc2xpZGVycmV2b2x1dGlvbi5jb20vcmVzb3VyY2VzL3N0eWxpbmctcmFkaW8tYnV0dG9ucy9cbnZlcmRvY3MtZmllbGQtcmFkaW8tYnV0dG9uIHtcbiAgZm9udC1mYW1pbHk6ICR2ZXJkb2NzLXByaW1hcnktZm9udDtcbiAgd2lkdGg6IDE0cHg7XG4gIGhlaWdodDogMTRweDtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGZvbnQtc2l6ZTogMTFweDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgdHJhbnNmb3JtLW9yaWdpbjogYm90dG9tIGxlZnQ7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG5cbiAgJi5kaXNhYmxlZCB7XG4gICAgb3BhY2l0eTogMC41O1xuICB9XG5cbiAgaW5wdXRbdHlwZT0ncmFkaW8nXSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIG9wYWNpdHk6IDA7XG5cbiAgICArIGxhYmVsIHtcbiAgICAgICY6YmVmb3JlIHtcbiAgICAgICAgY29udGVudDogJyc7XG4gICAgICAgIGJhY2tncm91bmQ6ICR2ZXJkb2NzLWdyZXktMztcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjYpO1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgIHdpZHRoOiAxMHB4O1xuICAgICAgICBoZWlnaHQ6IDEwcHg7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgbGVmdDogMXB4O1xuICAgICAgICB0b3A6IDFweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAyNTBtcyBlYXNlO1xuICAgICAgfVxuICAgIH1cblxuICAgICY6Y2hlY2tlZCB7XG4gICAgICArIGxhYmVsIHtcbiAgICAgICAgJjpiZWZvcmUge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR2ZXJkb2NzLWdyZWVuO1xuICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDJweCAkdmVyZG9jcy1ncmV5LTM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAmOmZvY3VzIHtcbiAgICAgICsgbGFiZWwge1xuICAgICAgICAmOmJlZm9yZSB7XG4gICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICBib3JkZXItY29sb3I6ICR2ZXJkb2NzLWdyZWVuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJjpkaXNhYmxlZCB7XG4gICAgICArIGxhYmVsIHtcbiAgICAgICAgJjpiZWZvcmUge1xuICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDRweCAkdmVyZG9jcy1ncmV5LTM7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiBkYXJrZW4oJHZlcmRvY3MtZ3JleS0zLCAyNSUpO1xuICAgICAgICAgIGJhY2tncm91bmQ6IGRhcmtlbigkdmVyZG9jcy1ncmV5LTMsIDI1JSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICArIGxhYmVsIHtcbiAgICAgICY6ZW1wdHkge1xuICAgICAgICAmOmJlZm9yZSB7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgJi5yZXF1aXJlZCB7XG4gICAgaW5wdXRbdHlwZT0ncmFkaW8nXSB7XG4gICAgICArIGxhYmVsIHtcbiAgICAgICAgJjpiZWZvcmUge1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICR2ZXJkb2NzLXJlZC0xO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgJi5oaWRlIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG5cbiAgJi5mb2N1c2VkIHtcbiAgICBhbmltYXRpb246IHZlcmRvY3MtZmllbGQtcHVsc2UgMC43NXMgMjtcbiAgfVxufVxuIiwiaW1wb3J0IHtJVGVtcGxhdGVGaWVsZH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcy9UeXBlcyc7XG5pbXBvcnQge0lEb2N1bWVudEZpZWxkLCBJUmVjaXBpZW50fSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvRG9jdW1lbnRzL1R5cGVzJztcbmltcG9ydCB7Q29tcG9uZW50LCBoLCBIb3N0LCBQcm9wLCBFdmVudCwgRXZlbnRFbWl0dGVyfSBmcm9tICdAc3RlbmNpbC9jb3JlJztcbmltcG9ydCB7Z2V0RmllbGRTZXR0aW5nc30gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xuXG4vKipcbiAqIERpc3BsYXlzIGEgcmFkaW8gYnV0dG9uLlxuICovXG5AQ29tcG9uZW50KHtcbiAgdGFnOiAndmVyZG9jcy1maWVsZC1yYWRpby1idXR0b24nLFxuICBzdHlsZVVybDogJ3ZlcmRvY3MtZmllbGQtcmFkaW8tYnV0dG9uLnNjc3MnLFxuICBzaGFkb3c6IGZhbHNlLFxufSlcbmV4cG9ydCBjbGFzcyBWZXJkb2NzRmllbGRSYWRpb0J1dHRvbiB7XG4gIC8qKlxuICAgKiBUaGUgZG9jdW1lbnQgb3IgdGVtcGxhdGUgZmllbGQgdG8gZGlzcGxheS5cbiAgICovXG4gIEBQcm9wKCkgZmllbGQ6IElEb2N1bWVudEZpZWxkIHwgSVRlbXBsYXRlRmllbGQgfCBudWxsID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIHJlY2lwaWVudCBjb21wbGV0aW5nIHRoZSBmb3JtLCBpZiBrbm93bi5cbiAgICovXG4gIEBQcm9wKCkgcmVjaXBpZW50PzogSVJlY2lwaWVudDtcblxuICAvKipcbiAgICogVGhlIGluZGV4IG9mIHRoZSBzZXR0aW5ncyBvcHRpb24gdGhpcyBwYXJ0aWN1bGFyIGNoZWNrYm94IGlzIGZvclxuICAgKi9cbiAgQFByb3AoKSBvcHRpb246IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIElmIHNldCwgb3ZlcnJpZGVzIHRoZSBmaWVsZCdzIHNldHRpbmdzIG9iamVjdC4gUHJpbWFyaWx5IHVzZWQgdG8gc3VwcG9ydCBcInByZXZpZXdcIiBtb2RlcyB3aGVyZSBhbGwgZmllbGRzIGFyZSBkaXNhYmxlZC5cbiAgICovXG4gIEBQcm9wKCkgZGlzYWJsZWQ/OiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIHdoZW4gdGhlIGlucHV0IGZpZWxkIHZhbHVlIGNoYW5nZXMuIE5vdGUgdGhhdCB0aGlzIHdpbGwgb25seSBiZSBmaXJlZCBvbiBibHVyLCB0YWItb3V0LCBFTlRFUiBrZXkgcHJlc3MsIGV0Yy5cbiAgICogSXQgaXMgZ2VuZXJhbGx5IHRoZSBiZXN0IGV2ZW50IHRvIHN1YnNjcmliZSB0byB0aGFuIGBpbnB1dGAgZm9yIG1vc3QgY2FzZXMgRVhDRVBUIGF1dG9jb21wbGV0ZSBmaWVsZHMgdGhhdCBuZWVkIHRvIHNlZSBldmVyeVxuICAgKiBrZXlwcmVzcy5cbiAgICovXG4gIEBFdmVudCh7Y29tcG9zZWQ6IHRydWV9KSBmaWVsZENoYW5nZTogRXZlbnRFbWl0dGVyPHtvcHRpb246IG51bWJlcjsgdmFsdWU6IGJvb2xlYW59PjtcblxuICBoYW5kbGVDaGFuZ2UoZTogYW55KSB7XG4gICAgY29uc29sZS5sb2coJ2NoYW5nZWQnLCBlKTtcbiAgICB0aGlzLmZpZWxkQ2hhbmdlLmVtaXQoe29wdGlvbjogdGhpcy5vcHRpb24sIHZhbHVlOiBlLnRhcmdldC5jaGVja2VkfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSBnZXRGaWVsZFNldHRpbmdzKHRoaXMuZmllbGQpO1xuICAgIGNvbnN0IGRpc2FibGVkID0gdGhpcy5kaXNhYmxlZCA/PyBzZXR0aW5ncy5kaXNhYmxlZCA/PyBmYWxzZTtcbiAgICByZXR1cm4gKFxuICAgICAgPEhvc3QgY2xhc3M9e3tyZXF1aXJlZDogc2V0dGluZ3MucmVxdWlyZWQsIGRpc2FibGVkfX0+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIHR5cGU9XCJyYWRpb1wiXG4gICAgICAgICAgdGFiSW5kZXg9e3NldHRpbmdzLm9yZGVyfVxuICAgICAgICAgIHZhbHVlPXtzZXR0aW5ncy52YWx1ZX1cbiAgICAgICAgICBuYW1lPXtzZXR0aW5ncy5uYW1lfVxuICAgICAgICAgIGlkPXtgJHtzZXR0aW5ncy5uYW1lfT0ke3NldHRpbmdzLnZhbHVlfWB9XG4gICAgICAgICAgY2hlY2tlZD17c2V0dGluZ3MuY2hlY2tlZH1cbiAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgcmVxdWlyZWQ9e3NldHRpbmdzLnJlcXVpcmVkfVxuICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHRoaXMuaGFuZGxlQ2hhbmdlKGUpfVxuICAgICAgICAvPlxuICAgICAgICA8bGFiZWwgaHRtbEZvcj17YCR7c2V0dGluZ3MubmFtZX09JHtzZXR0aW5ncy52YWx1ZX1gfSAvPlxuICAgICAgPC9Ib3N0PlxuICAgICk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=
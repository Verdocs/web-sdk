/*! For license information please see 22.a4b5fb38.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"./dist/esm/Colors-1b298092.js":function(module,__webpack_exports__,__webpack_require__){"use strict";function getRGBA(roleIndex){switch(roleIndex%10){case 0:return 0===roleIndex?"rgba(255, 193, 7, 0.4)":"rgba(134, 134, 134, 0.3)";case 1:return"rgba(156, 39, 176, .4)";case 2:return"rgba(33, 150, 243, .4)";case 3:return"rgba(220, 231, 117, 0.3)";case 4:return"rgba(121, 134, 203, 0.3)";case 5:return"rgba(77, 182, 172, 0.3)";case 6:return"rgba(255, 202, 165, 0.3)";case 7:return"rgba(2, 247, 190, 0.3)";case 8:return"rgba(255, 138, 101, 0.3)";case 9:return"rgba(82, 255, 79, 0.3)";default:return"rgba(229, 115, 155, 0.3)"}}__webpack_require__.d(__webpack_exports__,"a",(function(){return getRGBA}))},"./dist/esm/utils-3f23facc.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getRoleIndex})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getFieldId})),__webpack_require__.d(__webpack_exports__,"c",(function(){return rescale})),__webpack_require__.d(__webpack_exports__,"d",(function(){return fullNameToInitials})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getFieldSettings})),__webpack_require__.d(__webpack_exports__,"f",(function(){return integerSequence})),__webpack_require__.d(__webpack_exports__,"g",(function(){return renderDocumentField})),__webpack_require__.d(__webpack_exports__,"h",(function(){return setControlStyles}));__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js");function rescale(r,n){return r*n}var integerSequence=function integerSequence(start,count){return Array(count).fill(1).map((function(_,index){return index+start}))},fullNameToInitials=function fullNameToInitials(name){return name.split(" ").map((function(word){return word[0]})).join("")},setControlStyles=function setControlStyles(el,field,xScale,yScale,option){var _a,_b,_c,_d,settings=field.setting||field.settings,_settings$x=settings.x,x=void 0===_settings$x?0:_settings$x,_settings$y=settings.y,y=void 0===_settings$y?0:_settings$y,_settings$width=settings.width,width=void 0===_settings$width?function defaultWidth(field){switch(field.type){case"attachment":case"payment":return 24;case"checkbox":case"checkbox_group":case"radio_button_group":return 14;case"signature":case"initial":return 82}return 150}(field):_settings$width,_settings$height=settings.height,height=void 0===_settings$height?function defaultHeight(field){switch(field.type){case"attachment":case"payment":return 24;case"checkbox":case"checkbox_group":case"radio_button_group":return 14;case"signature":case"initial":return 41}return 50}(field):_settings$height,optionSettings=void 0!==option&&settings.options[option]?settings.options[option]:null;optionSettings&&(x=null!==(_a=optionSettings.x)&&void 0!==_a?_a:x,y=null!==(_b=optionSettings.y)&&void 0!==_b?_b:y,width=null!==(_c=optionSettings.width)&&void 0!==_c?_c:width,height=null!==(_d=optionSettings.height)&&void 0!==_d?_d:height),el.style.width=width+"px",el.style.height=height+"px",el.style.position="absolute",el.style.left=rescale(xScale,x)+"px",el.style.bottom=rescale(yScale,y)+"px",el.style.transform="scale("+xScale+", "+yScale+")"},getFieldId=function getFieldId(field){return"verdocs-doc-fld-"+field.name},getFieldOptionId=function getFieldOptionId(field,index){return"verdocs-doc-fld-"+field.name+"-"+index},renderDocumentField=function renderDocumentField(field,docPage,roleIndex,handleFieldChange,disabled){var editable=arguments.length>5&&void 0!==arguments[5]&&arguments[5],draggable=arguments.length>6&&void 0!==arguments[6]&&arguments[6],controlsDiv=document.getElementById(docPage.containerId+"-controls");if(controlsDiv)switch(field.type){case"attachment":case"date":case"dropdown":case"initial":case"payment":case"signature":case"timestamp":case"textarea":case"textbox":var id=getFieldId(field),existingField=document.getElementById(id);if(existingField)return void setControlStyles(existingField,field,docPage.xScale,docPage.yScale);var el=document.createElement("verdocs-field-"+field.type);return el.field=field,el.setAttribute("id",id),el.setAttribute("roleindex",roleIndex),disabled&&el.setAttribute("disabled",!0),editable&&el.setAttribute("editable",!0),draggable&&el.setAttribute("draggable",!0),el.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(el,field,docPage.xScale,docPage.yScale),controlsDiv.appendChild(el),el;case"checkbox_group":field.setting.options.forEach((function(_,checkboxIndex){var id=getFieldOptionId(field,checkboxIndex),existingField=document.getElementById(id);if(!existingField){var cbEl=document.createElement("verdocs-field-checkbox");return cbEl.field=field,cbEl.setAttribute("id",id),cbEl.setAttribute("roleindex",roleIndex),cbEl.setAttribute("option",checkboxIndex),disabled&&cbEl.setAttribute("disabled",!0),cbEl.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(cbEl,field,docPage.xScale,docPage.yScale),controlsDiv.appendChild(cbEl),cbEl}setControlStyles(existingField,field,docPage.xScale,docPage.yScale)}));break;case"radio_button_group":field.setting.options.forEach((function(_,buttonIndex){var id=getFieldOptionId(field,buttonIndex),existingField=document.getElementById(id);if(!existingField){var cbEl=document.createElement("verdocs-field-radio-button");return cbEl.field=field,cbEl.setAttribute("id",id),cbEl.setAttribute("roleindex",roleIndex),cbEl.setAttribute("option",buttonIndex),disabled&&cbEl.setAttribute("disabled",!0),cbEl.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(cbEl,field,docPage.xScale,docPage.yScale,buttonIndex),controlsDiv.appendChild(cbEl),cbEl}setControlStyles(existingField,field,docPage.xScale,docPage.yScale)}));break;default:return console.log("[PREVIEW] Skipping unsupported field type",field),null}},getRoleIndex=function getRoleIndex(roles,role){return roles.indexOf(role)||0},getFieldSettings=function getFieldSettings(field){return field.setting?field.setting:field.settings?field.settings:{x:0,y:0,required:!1,disabled:!1,result:"",value:""}}},"./dist/esm/verdocs-field-initial.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"verdocs_field_initial",(function(){return VerdocsFieldInitial}));__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js");var _index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./dist/esm/index-275ee459.js"),_utils_3f23facc_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./dist/esm/utils-3f23facc.js"),_Colors_1b298092_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./dist/esm/Colors-1b298092.js");function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var VerdocsFieldInitial=function(){function VerdocsFieldInitial(hostRef){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,VerdocsFieldInitial),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.j)(this,hostRef),this.adopt=Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.e)(this,"adopt",7),this.cancel=Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.e)(this,"cancel",7),this.fieldChange=Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.e)(this,"fieldChange",7),this.settingsPress=Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.e)(this,"settingsPress",7),this.field=null,this.disabled=!1,this.initials="",this.editable=!1,this.moveable=!1,this.roleindex=0,this.tempInitials=""}var _focusField;return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(VerdocsFieldInitial,[{key:"focusField",value:(_focusField=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(){return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:this.handleShow();case 1:case"end":return _context.stop()}}),_callee,this)}))),function focusField(){return _focusField.apply(this,arguments)})},{key:"hideDialog",value:function hideDialog(){var _a;null===(_a=this.dialog)||void 0===_a||_a.remove(),this.dialog=null}},{key:"handleAdopt",value:function handleAdopt(e){var _a;console.log("[INITIAL] Adopted initials"),this.tempInitials=e.detail,null===(_a=this.fieldChange)||void 0===_a||_a.emit(this.tempInitials),this.hideDialog()}},{key:"handleShow",value:function handleShow(){var _this=this;this.dialog=document.createElement("verdocs-initial-dialog"),this.dialog.open=!0,this.dialog.initials=this.recipient?Object(_utils_3f23facc_js__WEBPACK_IMPORTED_MODULE_22__.d)(this.recipient.full_name):this.initials,this.dialog.addEventListener("cancel",(function(){return _this.hideDialog()})),this.dialog.addEventListener("adopt",(function(e){return _this.handleAdopt(e)})),document.body.append(this.dialog)}},{key:"render",value:function render(){var _a,_b,_this2=this,settings=Object(_utils_3f23facc_js__WEBPACK_IMPORTED_MODULE_22__.e)(this.field),value=this.tempInitials||settings.base64,disabled=null!==(_b=null!==(_a=this.disabled)&&void 0!==_a?_a:settings.disabled)&&void 0!==_b&&_b,backgroundColor=this.field.rgba||Object(_Colors_1b298092_js__WEBPACK_IMPORTED_MODULE_23__.a)(this.roleindex);return Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.h)(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.b,{class:{required:settings.required,disabled:disabled},style:{backgroundColor:backgroundColor}},value?Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.h)("img",{src:this.tempInitials||settings.base64,alt:"Initials"}):Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.h)("button",{class:{},onClick:function onClick(){return!disabled&&_this2.handleShow()}},"Initials"),this.editable&&Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.h)("verdocs-button-panel",{icon:'<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20"><path d="m7.5 18.5-.312-2.667q-.188-.125-.396-.25-.209-.125-.396-.229l-2.479 1.063-2.521-4.334 2.125-1.625q.021-.104.021-.229v-.458q0-.125-.021-.229L1.396 7.917l2.521-4.313 2.5 1.042q.166-.104.375-.229.208-.125.396-.229L7.5 1.5h5l.312 2.688q.188.104.396.229.209.125.396.229l2.479-1.042 2.521 4.313-2.125 1.625v.916l2.125 1.625-2.521 4.334-2.5-1.063q-.166.104-.375.229-.208.125-.396.25L12.5 18.5Zm2.479-5.521q1.229 0 2.104-.875T12.958 10q0-1.229-.875-2.104t-2.104-.875q-1.208 0-2.094.875Q7 8.771 7 10t.885 2.104q.886.875 2.094.875Zm0-1.75q-.5 0-.864-.364Q8.75 10.5 8.75 10t.365-.865q.364-.364.864-.364t.865.364q.364.365.364.865t-.364.865q-.365.364-.865.364ZM10.021 10Zm-.792 6.521h1.542l.25-2.146q.625-.167 1.198-.51.573-.344 1.031-.823l2.021.854.771-1.271-1.771-1.354q.104-.292.156-.615.052-.323.052-.656 0-.292-.052-.604-.052-.313-.135-.646l1.77-1.375-.77-1.271-2.021.875q-.479-.5-1.042-.833-.562-.334-1.187-.5l-.271-2.167H9.208l-.25 2.167q-.625.166-1.187.5-.563.333-1.042.812l-2-.854-.771 1.271 1.73 1.354q-.084.333-.136.656Q5.5 9.708 5.5 10t.052.604q.052.313.136.667l-1.73 1.354.771 1.271 2-.834q.479.459 1.042.792.562.334 1.187.5Z"/></svg>'},Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.h)("h6",null,"Field Settings"),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.h)("form",null,Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.h)("verdocs-select-input",{label:"Recipient",options:[{label:"Buyer",value:"Buyer"},{label:"Seller",value:"Seller"}]}),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.h)("verdocs-text-input",{label:"Field Name",value:"",placeholder:"Stored field name...",onInput:function onInput(e){return console.log("ipt",e)}}),Object(_index_275ee459_js__WEBPACK_IMPORTED_MODULE_21__.h)("verdocs-text-input",{label:"Placeholder",value:"",placeholder:"Placeholder text...",onInput:function onInput(e){return console.log("ipt",e)}}))))}}]),VerdocsFieldInitial}();VerdocsFieldInitial.style='verdocs-field-initial{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;width:83px;height:36px;display:block;font-size:11px;letter-spacing:0.3px;background-color:transparent;-webkit-transform-origin:bottom left;transform-origin:bottom left;border:1px solid rgba(0, 0, 0, 0.2)}verdocs-field-initial.disabled{opacity:0.5}verdocs-field-initial img{display:block;max-width:100%;max-height:100%}verdocs-field-initial button{-webkit-box-sizing:border-box;box-sizing:border-box;border:none;color:rgba(0, 0, 0, 0.87);font-weight:500;-webkit-transform-origin:0 0;transform-origin:0 0;height:100%;width:100%;background:none;font-size:11px}verdocs-field-initial button.hide{display:none}verdocs-field-initial.required{border:1px solid #cc0000}verdocs-field-initial.focused{-webkit-animation:verdocs-field-pulse 0.75s 2;animation:verdocs-field-pulse 0.75s 2}verdocs-field-initial verdocs-button-panel{top:-3px;left:-2px;opacity:0.5;z-index:1000;cursor:pointer;position:absolute;-webkit-transform:scale(0.6);transform:scale(0.6)}verdocs-field-initial verdocs-button-panel[data-active],verdocs-field-initial verdocs-button-panel:hover{opacity:1}verdocs-field-initial verdocs-button-panel .icon svg{fill:#333333}verdocs-field-initial verdocs-button-panel .icon:hover svg{fill:#000000}'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9VdGlscy9Db2xvcnMuanMiLCJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy9AdmVyZG9jcy9qcy1zZGsvVXRpbHMvRmllbGRzLmpzIiwid2VicGFjazovLy9zcmMvdXRpbHMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vL3NyYy9jb21wb25lbnRzL2VsZW1lbnRzL3ZlcmRvY3MtZmllbGQtaW5pdGlhbC92ZXJkb2NzLWZpZWxkLWluaXRpYWwuc2NzcyIsIndlYnBhY2s6Ly8vc3JjL2NvbXBvbmVudHMvZWxlbWVudHMvdmVyZG9jcy1maWVsZC1pbml0aWFsL3ZlcmRvY3MtZmllbGQtaW5pdGlhbC50c3giXSwibmFtZXMiOlsiZ2V0UkdCQSIsInJvbGVJbmRleCIsInJlc2NhbGUiLCJyIiwibiIsImludGVnZXJTZXF1ZW5jZSIsInN0YXJ0IiwiY291bnQiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJfIiwiaW5kZXgiLCJmdWxsTmFtZVRvSW5pdGlhbHMiLCJuYW1lIiwic3BsaXQiLCJ3b3JkIiwiam9pbiIsInNldENvbnRyb2xTdHlsZXMiLCJlbCIsImZpZWxkIiwieFNjYWxlIiwieVNjYWxlIiwib3B0aW9uIiwic2V0dGluZ3MiLCJzZXR0aW5nIiwieCIsInkiLCJ3aWR0aCIsImRlZmF1bHRXaWR0aCIsInR5cGUiLCJoZWlnaHQiLCJkZWZhdWx0SGVpZ2h0Iiwib3B0aW9uU2V0dGluZ3MiLCJ1bmRlZmluZWQiLCJvcHRpb25zIiwiX2EiLCJfYiIsIl9jIiwiX2QiLCJzdHlsZSIsInBvc2l0aW9uIiwibGVmdCIsImJvdHRvbSIsInRyYW5zZm9ybSIsImdldEZpZWxkSWQiLCJnZXRGaWVsZE9wdGlvbklkIiwicmVuZGVyRG9jdW1lbnRGaWVsZCIsImRvY1BhZ2UiLCJoYW5kbGVGaWVsZENoYW5nZSIsImRpc2FibGVkIiwiZWRpdGFibGUiLCJkcmFnZ2FibGUiLCJjb250cm9sc0RpdiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250YWluZXJJZCIsImlkIiwiZXhpc3RpbmdGaWVsZCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImFwcGVuZENoaWxkIiwiZm9yRWFjaCIsImNoZWNrYm94SW5kZXgiLCJjYkVsIiwiYnV0dG9uSW5kZXgiLCJjb25zb2xlIiwibG9nIiwiZ2V0Um9sZUluZGV4Iiwicm9sZXMiLCJyb2xlIiwiaW5kZXhPZiIsImdldEZpZWxkU2V0dGluZ3MiLCJyZXF1aXJlZCIsInJlc3VsdCIsInZhbHVlIiwiVmVyZG9jc0ZpZWxkSW5pdGlhbCIsImluaXRpYWxzIiwibW92ZWFibGUiLCJyb2xlaW5kZXgiLCJ0ZW1wSW5pdGlhbHMiLCJ0aGlzIiwiaGFuZGxlU2hvdyIsImhpZGVEaWFsb2ciLCJkaWFsb2ciLCJyZW1vdmUiLCJoYW5kbGVBZG9wdCIsImRldGFpbCIsImZpZWxkQ2hhbmdlIiwiZW1pdCIsIm9wZW4iLCJyZWNpcGllbnQiLCJmdWxsX25hbWUiLCJib2R5IiwiYXBwZW5kIiwicmVuZGVyIiwiYmFzZTY0IiwiYmFja2dyb3VuZENvbG9yIiwiaCIsIkhvc3QiLCJjbGFzcyIsInNyYyIsImFsdCIsIm9uQ2xpY2siLCJpY29uIiwibGFiZWwiLCJwbGFjZWhvbGRlciIsIm9uSW5wdXQiXSwibWFwcGluZ3MiOiI7Z0tBOEJPLFNBQVNBLFFBQVFDLFdBQ3BCLE9BQVFBLFVBQVksSUFDaEIsS0FBSyxFQUNELE9BQXFCLElBQWRBLFVBQWtCLHlCQUEyQiwyQkFDeEQsS0FBSyxFQUNELE1BQU8seUJBQ1gsS0FBSyxFQUNELE1BQU8seUJBQ1gsS0FBSyxFQUNELE1BQU8sMkJBQ1gsS0FBSyxFQUNELE1BQU8sMkJBQ1gsS0FBSyxFQUNELE1BQU8sMEJBQ1gsS0FBSyxFQUNELE1BQU8sMkJBQ1gsS0FBSyxFQUNELE1BQU8seUJBQ1gsS0FBSyxFQUNELE1BQU8sMkJBQ1gsS0FBSyxFQUNELE1BQU8seUJBQ1gsUUFDSSxNQUFPLDJC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LE1BQU8sQ0FBQzNCLFNBQVVuRCxTQUFTbUQsU0FBVXpCLG1CQUFXVixNQUFPLENBQUMyRCxrQ0FDM0R0QixNQUNDdUIsa0VBQUtHLElBQUtwQixLQUFLRCxjQUFnQjFELFNBQVMwRSxPQUFRTSxJQUFJLGFBRXBESixxRUFBUUUsTUFBTyxDQUFDLEVBQUdHLFFBQVMsMEJBQU92RCxVQUFZLE9BQUtrQyxZQUF4QixHQUFvQyxZQUtqRUQsS0FBS2hDLFVBQ0ppRCxtRkFBc0JNLEtBckg5QiwwckNBc0hVTix1RkFDQUEsdUVBQ0VBLG1GQUNFTyxNQUFNLFlBQ054RSxRQUFTLENBQ1AsQ0FBQ3dFLE1BQU8sUUFBUzlCLE1BQU8sU0FDeEIsQ0FBQzhCLE1BQU8sU0FBVTlCLE1BQU8sYUFJN0J1QixpRkFBb0JPLE1BQU0sYUFBYTlCLE1BQU0sR0FBRytCLFlBQVksdUJBQXVCQyxRQUFTLGlCQUFBL0MsR0FBQyxPQUFJTSxRQUFRQyxJQUFJLE1BQU9QLEVBQXZCLElBQzdGc0MsaUZBQW9CTyxNQUFNLGNBQWM5QixNQUFNLEdBQUcrQixZQUFZLHNCQUFzQkMsUUFBUyxpQkFBQS9DLEdBQUMsT0FBSU0sUUFBUUMsSUFBSSxNQUFPUCxFQUF2QixNQU14RyxLQTVINkIsdUIsMEJEbEJELDR4QyIsImZpbGUiOiIyMi5hNGI1ZmIzOC5pZnJhbWUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBHaXZlbiBhIGByZ2JhKHIsZyxiLGEpYCBzdHJpbmcgdmFsdWUsIHJldHVybnMgdGhlIGhleCBlcXVpdmFsZW50LCBkcm9wcGluZyB0aGUgYWxwaGEgY2hhbm5lbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJHQihyZ2JhKSB7XG4gICAgdmFyIHJnYk51bWJlcnMgPSByZ2JhLnJlcGxhY2UoJ3JnYmEoJywgJycpLnJlcGxhY2UoJyknLCAnJykuc3BsaXQoJywnKTtcbiAgICB2YXIgcmdiT2JqZWN0ID0ge1xuICAgICAgICByZWQ6ICtyZ2JOdW1iZXJzWzBdLFxuICAgICAgICBncmVlbjogK3JnYk51bWJlcnNbMV0sXG4gICAgICAgIGJsdWU6ICtyZ2JOdW1iZXJzWzJdLFxuICAgICAgICBhbHBoYTogK3JnYk51bWJlcnNbM10sXG4gICAgfTtcbiAgICB2YXIgYWxwaGEgPSAxIC0gcmdiT2JqZWN0LmFscGhhO1xuICAgIHZhciByZWQgPSBNYXRoLnJvdW5kKChyZ2JPYmplY3QuYWxwaGEgKiAocmdiT2JqZWN0LnJlZCAvIDI1NSkgKyBhbHBoYSkgKiAyNTUpO1xuICAgIHZhciBncmVlbiA9IE1hdGgucm91bmQoKHJnYk9iamVjdC5hbHBoYSAqIChyZ2JPYmplY3QuZ3JlZW4gLyAyNTUpICsgYWxwaGEpICogMjU1KTtcbiAgICB2YXIgYmx1ZSA9IE1hdGgucm91bmQoKHJnYk9iamVjdC5hbHBoYSAqIChyZ2JPYmplY3QuYmx1ZSAvIDI1NSkgKyBhbHBoYSkgKiAyNTUpO1xuICAgIHJldHVybiAnIycgKyByZ2JUb0hleChyZWQpICsgcmdiVG9IZXgoZ3JlZW4pICsgcmdiVG9IZXgoYmx1ZSk7XG59XG4vKipcbiAqIEdpdmVuIGFuIFJHQiBzdHJpbmcgdmFsdWUsIHJldHVybnMgdGhlIGhleCBlcXVpdmFsZW50LlxuICovXG5mdW5jdGlvbiByZ2JUb0hleChyZ2IpIHtcbiAgICB2YXIgaGV4ID0gcmdiLnRvU3RyaW5nKDE2KTtcbiAgICBpZiAoaGV4Lmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuICcwJyArIGhleDtcbiAgICB9XG4gICAgcmV0dXJuIGhleDtcbn1cbi8qKlxuICogR2l2ZW4gYSBzaWduZXIgcm9sZSBpbmRleCwgcmV0dXJuIHRoZSBjb2xvciBjb2RlIGZvciB0aGF0IHNpZ25lci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJHQkEocm9sZUluZGV4KSB7XG4gICAgc3dpdGNoIChyb2xlSW5kZXggJSAxMCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gcm9sZUluZGV4ID09PSAwID8gJ3JnYmEoMjU1LCAxOTMsIDcsIDAuNCknIDogJ3JnYmEoMTM0LCAxMzQsIDEzNCwgMC4zKSc7IC8vICNGRkU2OUNcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDE1NiwgMzksIDE3NiwgLjQpJzsgLy8gJyNFM0MzRTknXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgzMywgMTUwLCAyNDMsIC40KSc7IC8vICcjQzFFMUZCJ1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMjIwLCAyMzEsIDExNywgMC4zKSc7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgxMjEsIDEzNCwgMjAzLCAwLjMpJztcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDc3LCAxODIsIDE3MiwgMC4zKSc7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgyNTUsIDIwMiwgMTY1LCAwLjMpJztcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDIsIDI0NywgMTkwLCAwLjMpJztcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDI1NSwgMTM4LCAxMDEsIDAuMyknO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoODIsIDI1NSwgNzksIDAuMyknO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDIyOSwgMTE1LCAxNTUsIDAuMyknO1xuICAgIH1cbn1cbi8qKlxuICogR2l2ZW4gYSByb2xlIG5hbWUsIHJldHVybiBhIGNvbG9yIGNvZGUgZm9yIGl0LiBUaGlzIHdvcmtzIGJ5IGNvbXB1dGluZyBhIGhhc2ggY29kZSBzbyB0aGUgc3BlY2lmaWMgY29sb3IgcmV0dXJuZWRcbiAqIGlzIG5vdCBzcGVjaWZpZWQgZXhwbGljaXRseSwgYnV0IHdpbGwgYmUgdGhlIHNhbWUgZm9yIGV2ZXJ5IGNhbGwgd2l0aCB0aGUgc2FtZSBpbnB1dCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5hbWVUb1JHQkEoc3RyKSB7XG4gICAgaWYgKCEhc3RyKSB7XG4gICAgICAgIHZhciB2YWxpZE51bSA9IHBhcnNlSW50KHN0ci5zbGljZSgtMSksIDEwKTtcbiAgICAgICAgaWYgKCFpc05hTih2YWxpZE51bSkpIHtcbiAgICAgICAgICAgIHN0ciArPSAodmFsaWROdW0gKiA5OSkudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaGFzaCA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBoYXNoID0gc3RyLmNoYXJDb2RlQXQoaSkgKyAoKGhhc2ggPDwgNSkgLSBoYXNoKTtcbiAgICAgICAgfVxuICAgICAgICBoYXNoID0gTWF0aC5yb3VuZChoYXNoIC8gMS4zKTtcbiAgICAgICAgdmFyIGMgPSAoaGFzaCAmIDB4MDBmZmZmMDgpLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB2YXIgaGV4ID0gJyMnICsgJzAwMDAwJy5zdWJzdHJpbmcoMCwgNiAtIGMubGVuZ3RoKSArIGM7XG4gICAgICAgIHZhciByZXN1bHQgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcbiAgICAgICAgdmFyIGNvbG9yID0ge1xuICAgICAgICAgICAgcjogcGFyc2VJbnQocmVzdWx0WzFdLCAxNiksXG4gICAgICAgICAgICBnOiBwYXJzZUludChyZXN1bHRbMl0sIDE2KSxcbiAgICAgICAgICAgIGI6IHBhcnNlSW50KHJlc3VsdFszXSwgMTYpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gXCJyZ2JhKFwiLmNvbmNhdChjb2xvci5yLCBcIiwgXCIpLmNvbmNhdChjb2xvci5nLCBcIiwgXCIpLmNvbmNhdChjb2xvci5iLCBcIiwgMC4yKVwiKTtcbiAgICB9XG59XG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBvYnRhaW4gYSBjb2xvciBjb2RlIGdpdmVuIGEgcm9sZSBuYW1lIGdpdmVuIHZhcmlvdXMgcG9zc2libGUgaW5wdXRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Um9sZUNvbG9yKG5hbWUsIHJvbGVzLCBpbmRleCkge1xuICAgIGlmIChpbmRleCkge1xuICAgICAgICByZXR1cm4gZ2V0UkdCQShpbmRleCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJvbGVzICYmIHJvbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIHJvbGVJbmRleCA9IHJvbGVzLmZpbmRJbmRleChmdW5jdGlvbiAocm9sZSkgeyByZXR1cm4gcm9sZS5uYW1lID09PSBuYW1lOyB9KTtcbiAgICAgICAgaWYgKHJvbGVJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gcm9sZXNbcm9sZUluZGV4XS5yZ2JhIHx8IGdldFJHQkEocm9sZUluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuYW1lVG9SR0JBKG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbmFtZVRvUkdCQShuYW1lKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZ2V0UlRvcCh5LCBmaWVsZEhlaWdodCwgaVRleHRIZWlnaHQsIHlSYXRpbykge1xuICAgIHJldHVybiBpVGV4dEhlaWdodCAtICh5ICsgZmllbGRIZWlnaHQpICogeVJhdGlvO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFJMZWZ0KHgsIHJhdGlvKSB7XG4gICAgcmV0dXJuIHggKiByYXRpbztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRSVmFsdWUoeSwgcmF0aW8pIHtcbiAgICByZXR1cm4geSAqIHJhdGlvO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJsb2JUb0Jhc2U2NChpbWFnZSkge1xuICAgIHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmaWxlUmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZWplY3QobmV3IERPTUV4Y2VwdGlvbignUHJvYmxlbSByZWFkaW5nIGJsb2IuJykpO1xuICAgICAgICB9O1xuICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc29sdmUoZmlsZVJlYWRlci5yZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2UpO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc2NhbGUociwgbikge1xuICAgIHJldHVybiByICogbjtcbn1cbiIsIi8vIFRoZXNlIHNob3VsZCBwcm9iYWJseSBhbGwgbW92ZSB0byBKUy1TREtcbmltcG9ydCB7cmVzY2FsZX0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1V0aWxzL0ZpZWxkcyc7XG4vLyBpbXBvcnQge2dldFJHQkF9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9VdGlscy9Db2xvcnMnO1xuaW1wb3J0IHtJVGVtcGxhdGVGaWVsZH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcy9UeXBlcyc7XG5pbXBvcnQge0lEb2N1bWVudEZpZWxkfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvRG9jdW1lbnRzL1R5cGVzJztcbmltcG9ydCB7SURvY3VtZW50UGFnZUluZm99IGZyb20gJy4vVHlwZXMnO1xuXG5leHBvcnQgY29uc3QgaW50ZWdlclNlcXVlbmNlID0gKHN0YXJ0OiBudW1iZXIsIGNvdW50OiBudW1iZXIpOiBudW1iZXJbXSA9PlxuICBBcnJheShjb3VudClcbiAgICAuZmlsbCgxKVxuICAgIC5tYXAoKF8sIGluZGV4KSA9PiBpbmRleCArIHN0YXJ0KTtcblxuZXhwb3J0IGNvbnN0IGZ1bGxOYW1lVG9Jbml0aWFscyA9IChuYW1lOiBzdHJpbmcpID0+XG4gIG5hbWVcbiAgICAuc3BsaXQoJyAnKVxuICAgIC5tYXAod29yZCA9PiB3b3JkWzBdKVxuICAgIC5qb2luKCcnKTtcblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRXaWR0aCA9IChmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCkgPT4ge1xuICBzd2l0Y2ggKGZpZWxkLnR5cGUpIHtcbiAgICBjYXNlICdhdHRhY2htZW50JzpcbiAgICBjYXNlICdwYXltZW50JzpcbiAgICAgIHJldHVybiAyNDtcbiAgICBjYXNlICdjaGVja2JveCc6XG4gICAgY2FzZSAnY2hlY2tib3hfZ3JvdXAnOlxuICAgIGNhc2UgJ3JhZGlvX2J1dHRvbl9ncm91cCc6XG4gICAgICByZXR1cm4gMTQ7XG4gICAgY2FzZSAnc2lnbmF0dXJlJzpcbiAgICBjYXNlICdpbml0aWFsJzpcbiAgICAgIHJldHVybiA4MjtcbiAgfVxuXG4gIHJldHVybiAxNTA7XG59O1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdEhlaWdodCA9IChmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCkgPT4ge1xuICBzd2l0Y2ggKGZpZWxkLnR5cGUpIHtcbiAgICBjYXNlICdhdHRhY2htZW50JzpcbiAgICBjYXNlICdwYXltZW50JzpcbiAgICAgIHJldHVybiAyNDtcbiAgICBjYXNlICdjaGVja2JveCc6XG4gICAgY2FzZSAnY2hlY2tib3hfZ3JvdXAnOlxuICAgIGNhc2UgJ3JhZGlvX2J1dHRvbl9ncm91cCc6XG4gICAgICByZXR1cm4gMTQ7XG4gICAgY2FzZSAnc2lnbmF0dXJlJzpcbiAgICBjYXNlICdpbml0aWFsJzpcbiAgICAgIHJldHVybiA0MTtcbiAgfVxuXG4gIHJldHVybiA1MDtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRDb250cm9sU3R5bGVzID0gKGVsOiBIVE1MRWxlbWVudCwgZmllbGQ6IElUZW1wbGF0ZUZpZWxkIHwgSURvY3VtZW50RmllbGQsIHhTY2FsZTogbnVtYmVyLCB5U2NhbGU6IG51bWJlciwgb3B0aW9uPzogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHNldHRpbmdzID0gKGZpZWxkIGFzIElUZW1wbGF0ZUZpZWxkKS5zZXR0aW5nIHx8IChmaWVsZCBhcyBJRG9jdW1lbnRGaWVsZCkuc2V0dGluZ3M7XG4gIGxldCB7eCA9IDAsIHkgPSAwLCB3aWR0aCA9IGRlZmF1bHRXaWR0aChmaWVsZCksIGhlaWdodCA9IGRlZmF1bHRIZWlnaHQoZmllbGQpfSA9IHNldHRpbmdzO1xuXG4gIGNvbnN0IG9wdGlvblNldHRpbmdzID0gb3B0aW9uICE9PSB1bmRlZmluZWQgJiYgc2V0dGluZ3Mub3B0aW9uc1tvcHRpb25dID8gc2V0dGluZ3Mub3B0aW9uc1tvcHRpb25dIDogbnVsbDtcbiAgaWYgKG9wdGlvblNldHRpbmdzKSB7XG4gICAgeCA9IG9wdGlvblNldHRpbmdzLnggPz8geDtcbiAgICB5ID0gb3B0aW9uU2V0dGluZ3MueSA/PyB5O1xuICAgIHdpZHRoID0gb3B0aW9uU2V0dGluZ3Mud2lkdGggPz8gd2lkdGg7XG4gICAgaGVpZ2h0ID0gb3B0aW9uU2V0dGluZ3MuaGVpZ2h0ID8/IGhlaWdodDtcbiAgfVxuXG4gIGVsLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgO1xuICBlbC5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuICBlbC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gIGVsLnN0eWxlLmxlZnQgPSBgJHtyZXNjYWxlKHhTY2FsZSwgeCl9cHhgO1xuICBlbC5zdHlsZS5ib3R0b20gPSBgJHtyZXNjYWxlKHlTY2FsZSwgeSl9cHhgO1xuICBlbC5zdHlsZS50cmFuc2Zvcm0gPSBgc2NhbGUoJHt4U2NhbGV9LCAke3lTY2FsZX0pYDtcbiAgLy8gZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZmllbGRbJ3JnYmEnXSB8fCBnZXRSR0JBKHJvbGVJbmRleCk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0RmllbGRJZCA9IChmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCkgPT4ge1xuICByZXR1cm4gYHZlcmRvY3MtZG9jLWZsZC0ke2ZpZWxkLm5hbWV9YDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRGaWVsZE9wdGlvbklkID0gKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCwgaW5kZXg6IG51bWJlcikgPT4ge1xuICByZXR1cm4gYHZlcmRvY3MtZG9jLWZsZC0ke2ZpZWxkLm5hbWV9LSR7aW5kZXh9YDtcbn07XG5cbmV4cG9ydCBjb25zdCByZW5kZXJEb2N1bWVudEZpZWxkID0gKFxuICBmaWVsZDogSVRlbXBsYXRlRmllbGQsXG4gIGRvY1BhZ2U6IElEb2N1bWVudFBhZ2VJbmZvLFxuICByb2xlSW5kZXg6IG51bWJlcixcbiAgaGFuZGxlRmllbGRDaGFuZ2U6IChmaWVsZDogSVRlbXBsYXRlRmllbGQsIGU6IGFueSwgb3B0aW9uSWQ/OiBzdHJpbmcpID0+IHZvaWQsXG4gIGRpc2FibGVkOiBib29sZWFuLFxuICBlZGl0YWJsZTogYm9vbGVhbiA9IGZhbHNlLFxuICBkcmFnZ2FibGU6IGJvb2xlYW4gPSBmYWxzZSxcbikgPT4ge1xuICBjb25zdCBjb250cm9sc0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRvY1BhZ2UuY29udGFpbmVySWQgKyAnLWNvbnRyb2xzJyk7XG4gIGlmICghY29udHJvbHNEaXYpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2l0Y2ggKGZpZWxkLnR5cGUpIHtcbiAgICBjYXNlICdhdHRhY2htZW50JzpcbiAgICBjYXNlICdkYXRlJzpcbiAgICBjYXNlICdkcm9wZG93bic6XG4gICAgY2FzZSAnaW5pdGlhbCc6XG4gICAgY2FzZSAncGF5bWVudCc6XG4gICAgY2FzZSAnc2lnbmF0dXJlJzpcbiAgICBjYXNlICd0aW1lc3RhbXAnOlxuICAgIGNhc2UgJ3RleHRhcmVhJzpcbiAgICBjYXNlICd0ZXh0Ym94Jzoge1xuICAgICAgY29uc3QgaWQgPSBnZXRGaWVsZElkKGZpZWxkKTtcbiAgICAgIGNvbnN0IGV4aXN0aW5nRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICBpZiAoZXhpc3RpbmdGaWVsZCkge1xuICAgICAgICBzZXRDb250cm9sU3R5bGVzKGV4aXN0aW5nRmllbGQsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVsOiBhbnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGB2ZXJkb2NzLWZpZWxkLSR7ZmllbGQudHlwZX1gKTtcbiAgICAgIGVsLmZpZWxkID0gZmllbGQ7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2lkJywgaWQpO1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdyb2xlaW5kZXgnLCByb2xlSW5kZXgpO1xuICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChlZGl0YWJsZSkge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2VkaXRhYmxlJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoZHJhZ2dhYmxlKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdmaWVsZENoYW5nZScsIGUgPT4gaGFuZGxlRmllbGRDaGFuZ2UoZmllbGQsIGUpKTtcbiAgICAgIHNldENvbnRyb2xTdHlsZXMoZWwsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUpO1xuICAgICAgY29udHJvbHNEaXYuYXBwZW5kQ2hpbGQoZWwpO1xuXG4gICAgICByZXR1cm4gZWw7XG4gICAgfVxuXG4gICAgY2FzZSAnY2hlY2tib3hfZ3JvdXAnOlxuICAgICAgZmllbGQuc2V0dGluZy5vcHRpb25zLmZvckVhY2goKF8sIGNoZWNrYm94SW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBnZXRGaWVsZE9wdGlvbklkKGZpZWxkLCBjaGVja2JveEluZGV4KTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nRmllbGQpIHtcbiAgICAgICAgICBzZXRDb250cm9sU3R5bGVzKGV4aXN0aW5nRmllbGQsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNiRWw6IGFueSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYHZlcmRvY3MtZmllbGQtY2hlY2tib3hgKTtcbiAgICAgICAgY2JFbC5maWVsZCA9IGZpZWxkO1xuICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG4gICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdyb2xlaW5kZXgnLCByb2xlSW5kZXgpO1xuICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgnb3B0aW9uJywgY2hlY2tib3hJbmRleCk7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGNiRWwuYWRkRXZlbnRMaXN0ZW5lcignZmllbGRDaGFuZ2UnLCBlID0+IGhhbmRsZUZpZWxkQ2hhbmdlKGZpZWxkLCBlKSk7XG4gICAgICAgIHNldENvbnRyb2xTdHlsZXMoY2JFbCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSk7XG4gICAgICAgIGNvbnRyb2xzRGl2LmFwcGVuZENoaWxkKGNiRWwpO1xuXG4gICAgICAgIHJldHVybiBjYkVsO1xuICAgICAgfSk7XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAncmFkaW9fYnV0dG9uX2dyb3VwJzpcbiAgICAgIGZpZWxkLnNldHRpbmcub3B0aW9ucy5mb3JFYWNoKChfLCBidXR0b25JbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpZCA9IGdldEZpZWxkT3B0aW9uSWQoZmllbGQsIGJ1dHRvbkluZGV4KTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nRmllbGQpIHtcbiAgICAgICAgICBzZXRDb250cm9sU3R5bGVzKGV4aXN0aW5nRmllbGQsIGZpZWxkLCBkb2NQYWdlLnhTY2FsZSwgZG9jUGFnZS55U2NhbGUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNiRWw6IGFueSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYHZlcmRvY3MtZmllbGQtcmFkaW8tYnV0dG9uYCk7XG4gICAgICAgIGNiRWwuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgY2JFbC5zZXRBdHRyaWJ1dGUoJ2lkJywgaWQpO1xuICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgncm9sZWluZGV4Jywgcm9sZUluZGV4KTtcbiAgICAgICAgY2JFbC5zZXRBdHRyaWJ1dGUoJ29wdGlvbicsIGJ1dHRvbkluZGV4KTtcbiAgICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgICAgY2JFbC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2JFbC5hZGRFdmVudExpc3RlbmVyKCdmaWVsZENoYW5nZScsIGUgPT4gaGFuZGxlRmllbGRDaGFuZ2UoZmllbGQsIGUpKTtcbiAgICAgICAgc2V0Q29udHJvbFN0eWxlcyhjYkVsLCBmaWVsZCwgZG9jUGFnZS54U2NhbGUsIGRvY1BhZ2UueVNjYWxlLCBidXR0b25JbmRleCk7XG4gICAgICAgIGNvbnRyb2xzRGl2LmFwcGVuZENoaWxkKGNiRWwpO1xuXG4gICAgICAgIHJldHVybiBjYkVsO1xuICAgICAgfSk7XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gY2FzZSAnYXR0YWNobWVudCc6XG4gICAgLy8gICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZlcmRvY3MtZmllbGQtYXR0YWNobWVudCcpO1xuICAgIC8vICAgZWwuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHJlc3VsdCB8fCAnJyk7XG4gICAgLy8gICBicmVhaztcbiAgICAvLyBjYXNlICdwYXltZW50JzpcbiAgICAvLyAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmVyZG9jcy1maWVsZC1wYXltZW50Jyk7XG4gICAgLy8gICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBTa2lwcGluZyB1bnN1cHBvcnRlZCBmaWVsZCB0eXBlJywgZmllbGQpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBnZXRSb2xlSW5kZXggPSAocm9sZXM6IHN0cmluZ1tdLCByb2xlOiBzdHJpbmcpID0+IHJvbGVzLmluZGV4T2Yocm9sZSkgfHwgMDtcblxuLy8gVE9ETzogV2UgY2FuIGNsZWFuIHRoaXMgdXAgYSBsb3QgaWYgd2UgYWx0ZXIgdGhlIEFQSSB0byBlbWl0IGJvdGggc2V0dGluZyBhbmQgc2V0dGluZ3MgcmVnYXJkbGVzcyBvZiB0aGUgc291cmNlIHR5cGUsXG4vLyAgIGJ1dCB0aGVuIG1lcmdlIHRoZSBTREsgdHlwZXMgdG8gZW5jb3VyYWdlIGRldmVsb3BlcnMgdG8gdXNlIGp1c3QgYHNldHRpbmdzYC5cbmV4cG9ydCBjb25zdCBnZXRGaWVsZFNldHRpbmdzID0gKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCB8IElEb2N1bWVudEZpZWxkKSA9PiB7XG4gIGlmICgoZmllbGQgYXMgSVRlbXBsYXRlRmllbGQpLnNldHRpbmcpIHtcbiAgICByZXR1cm4gKGZpZWxkIGFzIElUZW1wbGF0ZUZpZWxkKS5zZXR0aW5nO1xuICB9XG5cbiAgaWYgKChmaWVsZCBhcyBJRG9jdW1lbnRGaWVsZCkuc2V0dGluZ3MpIHtcbiAgICByZXR1cm4gKGZpZWxkIGFzIElEb2N1bWVudEZpZWxkKS5zZXR0aW5ncztcbiAgfVxuXG4gIHJldHVybiB7eDogMCwgeTogMCwgcmVxdWlyZWQ6IGZhbHNlLCBkaXNhYmxlZDogZmFsc2UsIHJlc3VsdDogJycsIHZhbHVlOiAnJ307XG59O1xuIiwiQGltcG9ydCAnLi4vLi4vLi4vdGhlbWUuc2Nzcyc7XG5cbnZlcmRvY3MtZmllbGQtaW5pdGlhbCB7XG4gIGZvbnQtZmFtaWx5OiAkdmVyZG9jcy1wcmltYXJ5LWZvbnQ7XG4gIHdpZHRoOiA4M3B4O1xuICBoZWlnaHQ6IDM2cHg7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBmb250LXNpemU6IDExcHg7XG4gIGxldHRlci1zcGFjaW5nOiAwLjNweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIHRyYW5zZm9ybS1vcmlnaW46IGJvdHRvbSBsZWZ0O1xuICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7XG5cbiAgJi5kaXNhYmxlZCB7XG4gICAgb3BhY2l0eTogMC41O1xuICB9XG5cbiAgaW1nIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgbWF4LWhlaWdodDogMTAwJTtcbiAgfVxuXG4gIGJ1dHRvbiB7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44Nyk7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICB0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgZm9udC1zaXplOiAxMXB4O1xuXG4gICAgJi5oaWRlIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICB9XG5cbiAgJi5yZXF1aXJlZCB7XG4gICAgYm9yZGVyOiAxcHggc29saWQgJHZlcmRvY3MtcmVkLTE7XG4gIH1cblxuICAmLmZvY3VzZWQge1xuICAgIGFuaW1hdGlvbjogdmVyZG9jcy1maWVsZC1wdWxzZSAwLjc1cyAyO1xuICB9XG5cbiAgdmVyZG9jcy1idXR0b24tcGFuZWwge1xuICAgIHRvcDogLTNweDtcbiAgICBsZWZ0OiAtMnB4O1xuICAgIG9wYWNpdHk6IDAuNTtcbiAgICB6LWluZGV4OiAxMDAwO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdHJhbnNmb3JtOiBzY2FsZSgwLjYpO1xuXG4gICAgJltkYXRhLWFjdGl2ZV0sXG4gICAgJjpob3ZlciB7XG4gICAgICBvcGFjaXR5OiAxO1xuICAgIH1cblxuICAgIC5pY29uIHtcbiAgICAgIHN2ZyB7XG4gICAgICAgIGZpbGw6ICMzMzMzMzM7XG4gICAgICB9XG5cbiAgICAgICY6aG92ZXIge1xuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6ICMwMDAwMDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7SVRlbXBsYXRlRmllbGR9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMvVHlwZXMnO1xuaW1wb3J0IHtJRG9jdW1lbnRGaWVsZCwgSVJlY2lwaWVudH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL0RvY3VtZW50cy9UeXBlcyc7XG5pbXBvcnQge0NvbXBvbmVudCwgRXZlbnQsIEV2ZW50RW1pdHRlciwgaCwgSG9zdCwgTWV0aG9kLCBQcm9wLCBTdGF0ZX0gZnJvbSAnQHN0ZW5jaWwvY29yZSc7XG5pbXBvcnQge2Z1bGxOYW1lVG9Jbml0aWFscywgZ2V0RmllbGRTZXR0aW5nc30gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHsgZ2V0UkdCQSB9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9VdGlscy9Db2xvcnMnO1xuXG5jb25zdCBzZXR0aW5nc0ljb24gPVxuICAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgaGVpZ2h0PVwiMjBcIiB3aWR0aD1cIjIwXCI+PHBhdGggZD1cIm03LjUgMTguNS0uMzEyLTIuNjY3cS0uMTg4LS4xMjUtLjM5Ni0uMjUtLjIwOS0uMTI1LS4zOTYtLjIyOWwtMi40NzkgMS4wNjMtMi41MjEtNC4zMzQgMi4xMjUtMS42MjVxLjAyMS0uMTA0LjAyMS0uMjI5di0uNDU4cTAtLjEyNS0uMDIxLS4yMjlMMS4zOTYgNy45MTdsMi41MjEtNC4zMTMgMi41IDEuMDQycS4xNjYtLjEwNC4zNzUtLjIyOS4yMDgtLjEyNS4zOTYtLjIyOUw3LjUgMS41aDVsLjMxMiAyLjY4OHEuMTg4LjEwNC4zOTYuMjI5LjIwOS4xMjUuMzk2LjIyOWwyLjQ3OS0xLjA0MiAyLjUyMSA0LjMxMy0yLjEyNSAxLjYyNXYuOTE2bDIuMTI1IDEuNjI1LTIuNTIxIDQuMzM0LTIuNS0xLjA2M3EtLjE2Ni4xMDQtLjM3NS4yMjktLjIwOC4xMjUtLjM5Ni4yNUwxMi41IDE4LjVabTIuNDc5LTUuNTIxcTEuMjI5IDAgMi4xMDQtLjg3NVQxMi45NTggMTBxMC0xLjIyOS0uODc1LTIuMTA0dC0yLjEwNC0uODc1cS0xLjIwOCAwLTIuMDk0Ljg3NVE3IDguNzcxIDcgMTB0Ljg4NSAyLjEwNHEuODg2Ljg3NSAyLjA5NC44NzVabTAtMS43NXEtLjUgMC0uODY0LS4zNjRROC43NSAxMC41IDguNzUgMTB0LjM2NS0uODY1cS4zNjQtLjM2NC44NjQtLjM2NHQuODY1LjM2NHEuMzY0LjM2NS4zNjQuODY1dC0uMzY0Ljg2NXEtLjM2NS4zNjQtLjg2NS4zNjRaTTEwLjAyMSAxMFptLS43OTIgNi41MjFoMS41NDJsLjI1LTIuMTQ2cS42MjUtLjE2NyAxLjE5OC0uNTEuNTczLS4zNDQgMS4wMzEtLjgyM2wyLjAyMS44NTQuNzcxLTEuMjcxLTEuNzcxLTEuMzU0cS4xMDQtLjI5Mi4xNTYtLjYxNS4wNTItLjMyMy4wNTItLjY1NiAwLS4yOTItLjA1Mi0uNjA0LS4wNTItLjMxMy0uMTM1LS42NDZsMS43Ny0xLjM3NS0uNzctMS4yNzEtMi4wMjEuODc1cS0uNDc5LS41LTEuMDQyLS44MzMtLjU2Mi0uMzM0LTEuMTg3LS41bC0uMjcxLTIuMTY3SDkuMjA4bC0uMjUgMi4xNjdxLS42MjUuMTY2LTEuMTg3LjUtLjU2My4zMzMtMS4wNDIuODEybC0yLS44NTQtLjc3MSAxLjI3MSAxLjczIDEuMzU0cS0uMDg0LjMzMy0uMTM2LjY1NlE1LjUgOS43MDggNS41IDEwdC4wNTIuNjA0cS4wNTIuMzEzLjEzNi42NjdsLTEuNzMgMS4zNTQuNzcxIDEuMjcxIDItLjgzNHEuNDc5LjQ1OSAxLjA0Mi43OTIuNTYyLjMzNCAxLjE4Ny41WlwiLz48L3N2Zz4nO1xuXG4vKipcbiAqIERpc3BsYXlzIGFuIGluaXRpYWwgZmllbGQuIElmIGFuIGluaXRpYWwgYWxyZWFkeSBleGlzdHMsIGl0IHdpbGwgYmUgZGlzcGxheWVkIGFuZCB0aGUgZmllbGQgd2lsbCBiZSBkaXNhYmxlZC4gT3RoZXJ3aXNlLCBhIHBsYWNlaG9sZGVyXG4gKiBidXR0b24gd2lsbCBiZSBzaG93bi4gQ2xpY2tpbmcgdGhlIGJ1dHRvbiB3aWxsIHNob3cgYSBkaWFsb2cgdG8gYWRvcHQgYW4gaW5pdGlhbC5cbiAqL1xuQENvbXBvbmVudCh7XG4gIHRhZzogJ3ZlcmRvY3MtZmllbGQtaW5pdGlhbCcsXG4gIHN0eWxlVXJsOiAndmVyZG9jcy1maWVsZC1pbml0aWFsLnNjc3MnLFxuICBzaGFkb3c6IGZhbHNlLFxufSlcbmV4cG9ydCBjbGFzcyBWZXJkb2NzRmllbGRJbml0aWFsIHtcbiAgLyoqXG4gICAqIFRoZSBkb2N1bWVudCBvciB0ZW1wbGF0ZSBmaWVsZCB0byBkaXNwbGF5LlxuICAgKi9cbiAgQFByb3AoKSBmaWVsZDogSURvY3VtZW50RmllbGQgfCBJVGVtcGxhdGVGaWVsZCB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgcmVjaXBpZW50IGNvbXBsZXRpbmcgdGhlIGZvcm0sIGlmIGtub3duLlxuICAgKi9cbiAgQFByb3AoKSByZWNpcGllbnQ/OiBJUmVjaXBpZW50O1xuXG4gIC8qKlxuICAgKiBJZiBzZXQsIG92ZXJyaWRlcyB0aGUgZmllbGQncyBzZXR0aW5ncyBvYmplY3QuIFByaW1hcmlseSB1c2VkIHRvIHN1cHBvcnQgXCJwcmV2aWV3XCIgbW9kZXMgd2hlcmUgYWxsIGZpZWxkcyBhcmUgZGlzYWJsZWQuXG4gICAqL1xuICBAUHJvcCgpIGRpc2FibGVkPzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBUaGUgZG9jdW1lbnQgb3IgdGVtcGxhdGUgZmllbGQgdG8gZGlzcGxheS5cbiAgICovXG4gIEBQcm9wKCkgaW5pdGlhbHM6IHN0cmluZyA9ICcnO1xuXG4gIC8qKlxuICAgKiBJZiBzZXQsIGEgc2V0dGluZ3MgaWNvbiB3aWxsIGJlIGRpc3BsYXllZCBvbiBob3Zlci4gVGhlIHNldHRpbmdzIHNob3duIGFsbG93IHRoZSBmaWVsZCdzIHJlY2lwaWVudCBhbmQgb3RoZXIgc2V0dGluZ3MgdG8gYmVcbiAgICogY2hhbmdlZCwgc28gaXQgc2hvdWxkIHR5cGljYWxseSBvbmx5IGJlIGVuYWJsZWQgaW4gdGhlIEJ1aWxkZXIuXG4gICAqL1xuICBAUHJvcCgpIGVkaXRhYmxlPzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBJZiBzZXQsIHRoZSBmaWVsZCBtYXkgYmUgZHJhZ2dlZCB0byBhIG5ldyBsb2NhdGlvbi4gVGhpcyBzaG91bGQgb25seSBiZSBlbmFibGVkIGluIHRoZSBCdWlsZGVyLCBvciBmb3Igc2VsZi1wbGFjZWQgZmllbGRzLlxuICAgKi9cbiAgQFByb3AoKSBtb3ZlYWJsZT86IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvKipcbiAgICogSWYgc2V0LCB0aGUgZmllbGQgd2lsbCBiZSBjb2xvcmVkIHVzaW5nIHRoaXMgaW5kZXggdmFsdWUgdG8gc2VsZWN0IHRoZSBiYWNrZ3JvdW5kIGNvbG9yLlxuICAgKi9cbiAgQFByb3AoKSByb2xlaW5kZXg/OiBudW1iZXIgPSAwO1xuXG4gIC8qKlxuICAgKiBFdmVudCBlbWl0dGVkIHdoZW4gYW4gaW5pdGlhbCBibG9jayBpcyBhZG9wdGVkIGJ5IHRoZSB1c2VyLiBUaGUgZXZlbnQgZGV0YWlsIHdpbGwgY29udGFpbiB0aGUgYmFzZTY0IHN0cmluZyBvZiB0aGUgaW5pdGlhbCBpbWFnZS5cbiAgICovXG4gIEBFdmVudCh7Y29tcG9zZWQ6IHRydWV9KSBhZG9wdDogRXZlbnRFbWl0dGVyPHN0cmluZz47XG5cbiAgLyoqXG4gICAqIEV2ZW50IGVtaXR0ZWQgd2hlbiB0aGUgdXNlciBjYW5jZWxzIHRoZSBwcm9jZXNzLlxuICAgKi9cbiAgQEV2ZW50KHtjb21wb3NlZDogdHJ1ZX0pIGNhbmNlbDogRXZlbnRFbWl0dGVyO1xuXG4gIC8qKlxuICAgKiBFdmVudCBmaXJlZCB3aGVuIHRoZSBpbnB1dCBmaWVsZCB2YWx1ZSBjaGFuZ2VzLiBOb3RlIHRoYXQgdGhpcyB3aWxsIG9ubHkgYmUgZmlyZWQgb24gYmx1ciwgdGFiLW91dCwgRU5URVIga2V5IHByZXNzLCBldGMuXG4gICAqIEl0IGlzIGdlbmVyYWxseSB0aGUgYmVzdCBldmVudCB0byBzdWJzY3JpYmUgdG8gdGhhbiBgaW5wdXRgIGZvciBtb3N0IGNhc2VzIEVYQ0VQVCBhdXRvY29tcGxldGUgZmllbGRzIHRoYXQgbmVlZCB0byBzZWUgZXZlcnlcbiAgICoga2V5cHJlc3MuXG4gICAqL1xuICBARXZlbnQoe2NvbXBvc2VkOiB0cnVlfSkgZmllbGRDaGFuZ2U6IEV2ZW50RW1pdHRlcjxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBFdmVudCBmaXJlZCBvbiBldmVyeSBjaGFyYWN0ZXIgZW50ZXJlZCBpbnRvIC8gZGVsZXRlZCBmcm9tIHRoZSBmaWVsZC5cbiAgICovXG4gIEBFdmVudCh7Y29tcG9zZWQ6IHRydWV9KSBzZXR0aW5nc1ByZXNzOiBFdmVudEVtaXR0ZXI7XG5cbiAgQE1ldGhvZCgpIGFzeW5jIGZvY3VzRmllbGQoKSB7XG4gICAgdGhpcy5oYW5kbGVTaG93KCk7XG4gIH1cblxuICBAU3RhdGUoKVxuICB0ZW1wSW5pdGlhbHM6IHN0cmluZyA9ICcnO1xuXG4gIHByaXZhdGUgZGlhbG9nPzogYW55O1xuXG4gIGhpZGVEaWFsb2coKSB7XG4gICAgdGhpcy5kaWFsb2c/LnJlbW92ZSgpO1xuICAgIHRoaXMuZGlhbG9nID0gbnVsbDtcbiAgfVxuXG4gIGhhbmRsZUFkb3B0KGU6IGFueSkge1xuICAgIGNvbnNvbGUubG9nKCdbSU5JVElBTF0gQWRvcHRlZCBpbml0aWFscycpO1xuICAgIHRoaXMudGVtcEluaXRpYWxzID0gZS5kZXRhaWw7XG4gICAgdGhpcy5maWVsZENoYW5nZT8uZW1pdCh0aGlzLnRlbXBJbml0aWFscyk7XG4gICAgdGhpcy5oaWRlRGlhbG9nKCk7XG4gIH1cblxuICBoYW5kbGVTaG93KCkge1xuICAgIHRoaXMuZGlhbG9nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmVyZG9jcy1pbml0aWFsLWRpYWxvZycpO1xuICAgIHRoaXMuZGlhbG9nLm9wZW4gPSB0cnVlO1xuICAgIHRoaXMuZGlhbG9nLmluaXRpYWxzID0gdGhpcy5yZWNpcGllbnQgPyBmdWxsTmFtZVRvSW5pdGlhbHModGhpcy5yZWNpcGllbnQuZnVsbF9uYW1lKSA6IHRoaXMuaW5pdGlhbHM7XG4gICAgdGhpcy5kaWFsb2cuYWRkRXZlbnRMaXN0ZW5lcignY2FuY2VsJywgKCkgPT4gdGhpcy5oaWRlRGlhbG9nKCkpO1xuICAgIHRoaXMuZGlhbG9nLmFkZEV2ZW50TGlzdGVuZXIoJ2Fkb3B0JywgZSA9PiB0aGlzLmhhbmRsZUFkb3B0KGUpKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh0aGlzLmRpYWxvZyk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSBnZXRGaWVsZFNldHRpbmdzKHRoaXMuZmllbGQpO1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy50ZW1wSW5pdGlhbHMgfHwgc2V0dGluZ3MuYmFzZTY0O1xuICAgIGNvbnN0IGRpc2FibGVkID0gdGhpcy5kaXNhYmxlZCA/PyBzZXR0aW5ncy5kaXNhYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCBiYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmZpZWxkWydyZ2JhJ10gfHwgZ2V0UkdCQSh0aGlzLnJvbGVpbmRleCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEhvc3QgY2xhc3M9e3tyZXF1aXJlZDogc2V0dGluZ3MucmVxdWlyZWQsIGRpc2FibGVkfX0gc3R5bGU9e3tiYWNrZ3JvdW5kQ29sb3J9fT5cbiAgICAgICAge3ZhbHVlID8gKFxuICAgICAgICAgIDxpbWcgc3JjPXt0aGlzLnRlbXBJbml0aWFscyB8fCBzZXR0aW5ncy5iYXNlNjR9IGFsdD1cIkluaXRpYWxzXCIgLz5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPXt7fX0gb25DbGljaz17KCkgPT4gIWRpc2FibGVkICYmIHRoaXMuaGFuZGxlU2hvdygpfT5cbiAgICAgICAgICAgIEluaXRpYWxzXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICl9XG5cbiAgICAgICAge3RoaXMuZWRpdGFibGUgJiYgKFxuICAgICAgICAgIDx2ZXJkb2NzLWJ1dHRvbi1wYW5lbCBpY29uPXtzZXR0aW5nc0ljb259PlxuICAgICAgICAgICAgPGg2PkZpZWxkIFNldHRpbmdzPC9oNj5cbiAgICAgICAgICAgIDxmb3JtPlxuICAgICAgICAgICAgICA8dmVyZG9jcy1zZWxlY3QtaW5wdXRcbiAgICAgICAgICAgICAgICBsYWJlbD1cIlJlY2lwaWVudFwiXG4gICAgICAgICAgICAgICAgb3B0aW9ucz17W1xuICAgICAgICAgICAgICAgICAge2xhYmVsOiAnQnV5ZXInLCB2YWx1ZTogJ0J1eWVyJ30sXG4gICAgICAgICAgICAgICAgICB7bGFiZWw6ICdTZWxsZXInLCB2YWx1ZTogJ1NlbGxlcid9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgPHZlcmRvY3MtdGV4dC1pbnB1dCBsYWJlbD1cIkZpZWxkIE5hbWVcIiB2YWx1ZT1cIlwiIHBsYWNlaG9sZGVyPVwiU3RvcmVkIGZpZWxkIG5hbWUuLi5cIiBvbklucHV0PXtlID0+IGNvbnNvbGUubG9nKCdpcHQnLCBlKX0gLz5cbiAgICAgICAgICAgICAgPHZlcmRvY3MtdGV4dC1pbnB1dCBsYWJlbD1cIlBsYWNlaG9sZGVyXCIgdmFsdWU9XCJcIiBwbGFjZWhvbGRlcj1cIlBsYWNlaG9sZGVyIHRleHQuLi5cIiBvbklucHV0PXtlID0+IGNvbnNvbGUubG9nKCdpcHQnLCBlKX0gLz5cbiAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICA8L3ZlcmRvY3MtYnV0dG9uLXBhbmVsPlxuICAgICAgICApfVxuICAgICAgPC9Ib3N0PlxuICAgICk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=
import{m as i,H as w,F as P,o as ie,r as q,n as f}from"./components-BUY51Sj4.js";import{i as J,O as se,F as re,E as ne,v as _,P as le,Q as ae,R as de,S as ce,T as pe,U as ee,W as ue,X as me,Y as he,Z as ve,_ as fe,V as L}from"./index-FOFzXDN2.js";import{g as te,u as ge}from"./TemplateFieldStore-d7516adf-DcKvNlmt.js";import{g as A,b as be,a as V,u as xe}from"./TemplateRoleStore-ddc3b96f-B5kZ-UY0.js";import{g as S}from"./TemplateStore-df5484bb-DdHXR8_e.js";import{r as we,g as ye,b as ke,c as Se,d as Ce,e as Q,f as j}from"./utils-61c1093b-BdPfu6ZN.js";import{S as I}from"./errors-887f1e88-DR85jTO9.js";import{D as Ie,P as Ee,J as qe,a as Le,F as Te,b as Re,T as ze}from"./Icons-faf0377f-C-oEEYb8.js";import{i as z}from"./interact.min-b055a9b6-gdScmyHb.js";import{V as De}from"./Toast-b71de686-BSDPq5kl.js";import"./index-7456b04f-WYt0v2to.js";import"./index-CDs2tPxN.js";import"./index-BXagdh-V.js";import"./iframe-BIHgOnMp.js";import"../sb-preview/runtime.js";import"./index-296aabaf-RiVWanv8.js";import"./Types-e4a6eba5-DhtnXEHy.js";import"./index-0329eed3-CmPFFxNR.js";var E=function(){return E=Object.assign||function(c){for(var e,t=1,s=arguments.length;t<s;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(c[o]=e[o])}return c},E.apply(this,arguments)},y=function(c,e,t,s){function o(r){return r instanceof t?r:new t(function(n){n(r)})}return new(t||(t=Promise))(function(r,n){function l(p){try{a(s.next(p))}catch(b){n(b)}}function d(p){try{a(s.throw(p))}catch(b){n(b)}}function a(p){p.done?r(p.value):o(p.value).then(l,d)}a((s=s.apply(c,e||[])).next())})},k=function(c,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,o,r,n;return n={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function l(a){return function(p){return d([a,p])}}function d(a){if(s)throw new TypeError("Generator is already executing.");for(;n&&(n=0,a[0]&&(t=0)),t;)try{if(s=1,o&&(r=a[0]&2?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(c,t)}catch(p){a=[6,p],o=0}finally{s=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},H=function(c,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,r;s<o;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return c.concat(r||Array.prototype.slice.call(e))},Me='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-preview{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;display:-ms-flexbox;display:flex;padding:15px;row-gap:15px;min-height:200px;position:relative;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-direction:column;flex-direction:column}verdocs-preview div,verdocs-preview canvas{-webkit-box-sizing:border-box;box-sizing:border-box}',Pe=Me,_e=function(){function c(e){q(this,e),this.sdkError=f(this,"sdkError",7),this.templateStore=null,this.fieldStore=null,this.roleStore=null,this.endpoint=L.getDefault(),this.templateId=null,this.loading=!0}return c.prototype.componentWillLoad=function(){return y(this,void 0,void 0,function(){var e,t,s,o=this;return k(this,function(r){try{if(this.endpoint.loadSession(),!this.templateId)return console.log("[PREVIEW] Missing required template ID ".concat(this.templateId)),[2];if(!this.endpoint.session)return console.log("[PREVIEW] Unable to start builder session, must be authenticated"),[2];S(this.endpoint,this.templateId,!0).then(function(n){o.templateStore=n,console.log("[PREVIEW] Loaded Template Store",n.state),o.fieldStore=te(o.templateId),o.roleStore=A(o.templateId),console.log("[PREVIEW] Loaded template",o.templateStore.state,o.roleStore.get("roles"),o.fieldStore.get("fields")),o.loading=!1}).catch(function(n){console.log(n)})}catch(n){console.log("[PREVIEW] Error with preview session",n),(e=this.sdkError)===null||e===void 0||e.emit(new I(n.message,(t=n.response)===null||t===void 0?void 0:t.status,(s=n.response)===null||s===void 0?void 0:s.data))}return[2]})})},c.prototype.handlePageRendered=function(e){var t,s,o=e.detail,r=(s=(t=this.templateStore)===null||t===void 0?void 0:t.state)===null||s===void 0?void 0:s.fields.filter(function(n){return n.page===o.pageNumber});console.log("[PREVIEW] Page rendered",o,r),r.forEach(function(n){return we(n,o,{disabled:!0,editable:!1,draggable:!1})})},c.prototype.render=function(){var e=this,t,s;return this.loading?i(w,null,i("verdocs-loader",null)):i(w,null,(((s=(t=this.templateStore)===null||t===void 0?void 0:t.state)===null||s===void 0?void 0:s.documents)||[]).map(function(o){var r=J(1,o.pages);return i(P,null,r.map(function(n){return i("verdocs-template-document-page",{templateId:o.template_id,documentId:o.id,pageNumber:n,disabled:!0,editable:!0,done:!1,virtualWidth:612,virtualHeight:792,onPageRendered:function(l){return e.handlePageRendered(l)},layers:[{name:"page",type:"canvas"},{name:"controls",type:"div"}]})}))}))},c}();_e.style=Pe;var Ve='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-send{padding:10px;position:relative;background:#ffffff;-ms-flex-direction:column;flex-direction:column;font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;display:none}verdocs-send.sendable{display:-ms-flexbox;display:flex}verdocs-send .recipients{position:relative}verdocs-send .left-line{top:32px;left:20px;z-index:1;width:12px;bottom:30px;position:absolute;background:#ffffff;border-left:3px dotted #9b9b9b}verdocs-send .level{display:-ms-flexbox;display:flex;-webkit-column-gap:10px;-moz-column-gap:10px;column-gap:10px;margin-left:50px;position:relative;-ms-flex-direction:row;flex-direction:row;padding:8px 0 4px 0;border-bottom:1px solid rgba(151, 151, 151, 0.2666666667)}verdocs-send .level .level-icon{top:14px;z-index:2;left:-40px;width:24px;height:24px;position:absolute;background:#ffffff}verdocs-send .level .level-icon svg{fill:rgba(0, 0, 0, 0.537254902)}verdocs-send .level .recipient{height:30px;display:-ms-flexbox;display:flex;-ms-flex:0 0 30px;flex:0 0 30px;color:#000000;cursor:pointer;font-size:14px;-ms-flex-align:center;align-items:center;border-radius:30px;-ms-flex-direction:row;flex-direction:row;background:#dddddd;white-space:nowrap;border:2px solid #dddddd;padding:2px 10px 2px 14px}verdocs-send .level .recipient .icon{width:22px;height:22px;-ms-flex:0 0 22px;flex:0 0 22px;margin:0 0 0 10px}verdocs-send .level .recipient .icon svg{width:22px;height:22px;fill:#333333;outline:none}verdocs-send .level .complete{-ms-flex:1;flex:1;height:30px;display:-ms-flexbox;display:flex;color:#000000;font-size:14px;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;padding:3px 10px 3px 2px}verdocs-send .buttons{display:-ms-flexbox;display:flex;margin-top:10px;-webkit-column-gap:15px;-moz-column-gap:15px;column-gap:15px;-ms-flex-direction:row;flex-direction:row}verdocs-send verdocs-contact-picker{left:0;top:41px;z-index:10;position:absolute;border:1px solid #dddddd;-webkit-box-shadow:0 0 6px 3px rgba(0, 0, 0, 0.1);box-shadow:0 0 6px 3px rgba(0, 0, 0, 0.1)}',He=Ve,Y='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg>',Ae='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="M2 12C2 6.48 6.48 2 12 2s10 4.48 10 10-4.48 10-10 10S2 17.52 2 12zm10 6c3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6 2.69 6 6 6z"></path></svg>',Ze='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></svg>',Ne='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="m18 7-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41 6 19l1.41-1.41L1.83 12 .41 13.41z"></path></svg>',Ue=function(){function c(e){q(this,e),this.sendingEnvelope=f(this,"sendingEnvelope",7),this.send=f(this,"send",7),this.exit=f(this,"exit",7),this.sdkError=f(this,"sdkError",7),this.searchContacts=f(this,"searchContacts",7),this.levels=[],this.templateStore=null,this.roleStore=null,this.endpoint=L.getDefault(),this.templateId=null,this.environment="web",this.containerId="verdocs-send-".concat(Math.random().toString(36).substring(2,11)),this.rolesAtLevel={},this.showPickerForId="",this.sessionContacts=[],this.sending=!1,this.rolesCompleted={}}return c.prototype.reset=function(){return y(this,void 0,void 0,function(){return k(this,function(e){return this.rolesCompleted={},[2]})})},c.prototype.componentWillLoad=function(){return y(this,void 0,void 0,function(){var e,t,s,o,r,n,l,d,a,p,b=this;return k(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),l=this.endpoint.loadSession(),this.templateId?this.endpoint.session?(d=this,[4,S(this.endpoint,this.templateId,!1)]):(console.log("[SEND] Unable to start builder session, must be authenticated"),[2]):(console.log("[SEND] Missing required template ID ".concat(this.templateId)),[2]);case 1:return d.templateStore=x.sent(),this.roleStore=A(this.templateId),!((t=(e=this.templateStore)===null||e===void 0?void 0:e.state)===null||t===void 0)&&t.is_sendable||console.warn("[SEND] Template is not sendable",this.templateId),this.roleStore.get("roles")&&(a={},this.rolesCompleted={},this.roleStore.get("roles").forEach(function(m){var h=m.sequence-1;a[h]||(a[h]=[]);var g="r-".concat(h,"-").concat(a[h].length);a[h].push(E(E({},m),{id:g})),m.full_name&&(m.email||m.phone)&&(b.rolesCompleted[g]=E(E({},m),{id:g}))}),this.rolesAtLevel=a,this.levels=Object.keys(a).map(function(m){return+m}),this.levels.sort(function(m,h){return m-h})),!((s=l==null?void 0:l.session)===null||s===void 0)&&s.profile&&this.sessionContacts.push({id:l.session.profile.id,name:"".concat(l.session.profile.first_name," ").concat(l.session.profile.last_name),email:l.session.profile.email,phone:l.session.profile.phone}),[3,3];case 2:return p=x.sent(),console.log("[SEND] Error with preview session",p),(o=this.sdkError)===null||o===void 0||o.emit(new I(p.message,(r=p.response)===null||r===void 0?void 0:r.status,(n=p.response)===null||n===void 0?void 0:n.data)),[3,3];case 3:return[2]}})})},c.prototype.getLevelIcon=function(e){return e<0?i("div",{class:"level-icon",innerHTML:Ae}):e>=this.levels.length?i("div",{class:"level-icon",innerHTML:Ne}):i("div",{class:"level-icon",innerHTML:Ze})},c.prototype.handleSelectContact=function(e,t){e.preventDefault(),this.rolesCompleted[t.id]=E(E({},t),e.detail),this.showPickerForId=""},c.prototype.handleClickRole=function(e,t){e.stopPropagation(),this.showPickerForId=t.id},c.prototype.handleSend=function(e){var t=this,s,o,r;if(this.sending){console.log("Skipping duplicate send",e);return}console.log("Sending",e),e.preventDefault(),e.stopPropagation(),this.sending=!0,(s=this.sendingEnvelope)===null||s===void 0||s.emit({sending:!0});var n={template_id:this.templateId,name:(r=(o=this.templateStore)===null||o===void 0?void 0:o.state)===null||r===void 0?void 0:r.name,environment:this.environment,roles:Object.values(this.rolesCompleted),prepared_fields:[]};console.log("[SEND] Creating envelope",n),se(this.endpoint,n).then(function(l){var d,a;console.log("[SEND] Send envelope",l),t.reset().catch(function(p){return console.log("Unknown Error",p)}),t.sending=!1,(d=t.sendingEnvelope)===null||d===void 0||d.emit({sending:!1}),(a=t.send)===null||a===void 0||a.emit(E(E({},n),{envelope_id:l.id,envelope:l}))}).catch(function(l){var d;console.log("Send error",l),t.sending=!1,(d=t.sendingEnvelope)===null||d===void 0||d.emit({sending:!1})})},c.prototype.handleCancel=function(e){var t;e.stopPropagation(),(t=this.exit)===null||t===void 0||t.emit()},c.prototype.render=function(){var e=this,t,s,o=be(this.roleStore),r=Object.values(this.rolesCompleted).filter(function(l){return re(l.email)||ne(l.phone)}),n=r.length>=o.length;return i(w,{key:"d0bd3f9d7ef226896f095059203280e1c1e71265",class:{sendable:(s=(t=this.templateStore)===null||t===void 0?void 0:t.state)===null||s===void 0?void 0:s.is_sendable}},i("div",{key:"1d4fdeda91a23a81bb1c72a4200de76e36ba74c8",class:"recipients"},i("div",{key:"9bb72122ba245dd95c3f2ffb0c1768764c2f2da7",class:"left-line"}),i("div",{key:"c2056047a4bf20612fb83693fcf279a1354c98e0",class:"level level-start"},this.getLevelIcon(-1),i("div",{key:"0220edca79c791bdd561d0ff92cfad3236dd7800",class:"complete"},"Send Envelope")),this.levels.map(function(l){return i("div",{class:"level level-".concat(l)},e.getLevelIcon(l),e.rolesAtLevel[l].map(function(d){var a,p,b,x,m,h,g=!d.email,v="verdocs-send-recipient-".concat(d.name);return g?i("div",{class:"recipient",style:{backgroundColor:_(V(e.roleStore,d.name))},onClick:function(u){return e.handleClickRole(u,d)},id:v},(p=(a=e.rolesCompleted[d.id])===null||a===void 0?void 0:a.full_name)!==null&&p!==void 0?p:d.name,i("div",{class:"icon",innerHTML:Y}),e.showPickerForId===d.id&&i("verdocs-portal",{anchor:v,onClickAway:function(){return e.showPickerForId=""}},i("verdocs-contact-picker",{onExit:function(){return e.showPickerForId=""},onNext:function(u){return e.handleSelectContact(u,d)},contactSuggestions:e.sessionContacts,templateRole:(b=e.rolesCompleted[d.id])!==null&&b!==void 0?b:d,onSearchContacts:function(u){var C;return(C=e.searchContacts)===null||C===void 0?void 0:C.emit(u.detail)}}))):i("div",{class:"recipient",style:{borderColor:_(V(e.roleStore,d.name))},onClick:function(u){return e.handleClickRole(u,d)},id:v},(m=(x=e.rolesCompleted[d.id])===null||x===void 0?void 0:x.full_name)!==null&&m!==void 0?m:d.full_name,i("div",{class:"icon",innerHTML:Y}),e.showPickerForId===d.id&&i("verdocs-portal",{anchor:v,onClickAway:function(){return e.showPickerForId=""}},i("verdocs-contact-picker",{onExit:function(){return e.showPickerForId=""},onNext:function(u){return e.handleSelectContact(u,d)},contactSuggestions:e.sessionContacts,templateRole:(h=e.rolesCompleted[d.id])!==null&&h!==void 0?h:d,onSearchContacts:function(u){var C;return(C=e.searchContacts)===null||C===void 0?void 0:C.emit(u.detail)}})))}))}),i("div",{key:"16fba92b62896c3368d54743c9ae5c79b7558f16",class:"level level-done"},this.getLevelIcon(this.levels.length),i("div",{key:"0cae926609fc5c2a10387bee716d49c98a8ebcf6",class:"complete"},"Signing Complete"))),i("div",{key:"f8457f0c451cc70a096e46447395186aca90169f",class:"buttons"},i("verdocs-button",{key:"2be6f8c3cfb4c2ec8c010c4cba79855f20e5461d",label:"Cancel",size:"small",variant:"outline",onClick:function(l){return e.handleCancel(l)},disabled:this.sending}),i("verdocs-button",{key:"b34393a6e3197acd0143161c71a43420f45302be",label:"Send",size:"small",disabled:!n||this.sending,onClick:function(l){return e.handleSend(l)}}),this.sending&&i("verdocs-spinner",{key:"8e26caa183719e765c771921d365e39ec4916be4"})))},c}();Ue.style=He;var Fe='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-template-attachments{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-template-attachments h5{font-size:16px;font-weight:bold;margin:0 0 10px 0;color:#46497d}verdocs-template-attachments .attachments{margin:0 0 40px 0}verdocs-template-attachments .attachment{display:-ms-flexbox;display:flex;padding:5px 0;-webkit-column-gap:15px;-moz-column-gap:15px;column-gap:15px;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;color:#33364b}verdocs-template-attachments .attachment:hover .trash-icon{display:-ms-flexbox;display:flex}verdocs-template-attachments .attachment:hover .pages{display:none}verdocs-template-attachments svg{width:28px;height:28px;fill:#5c6575;margin:2px 0 0 0}verdocs-template-attachments .file-icon{-ms-flex:0;flex:0}verdocs-template-attachments .pages{width:24px;height:24px;-ms-flex:0 0 24px;flex:0 0 24px;padding-left:4px;position:relative;margin:-10px 0 0 0}verdocs-template-attachments .pages .pages-icon{top:0;left:0;width:24px;height:24px;position:absolute}verdocs-template-attachments .pages .count{top:11px;left:7px;z-index:1;width:18px;font-size:12px;font-weight:500;position:absolute;text-align:center;letter-spacing:-2px}verdocs-template-attachments .filename{-ms-flex:1;flex:1;display:block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;border-bottom:1px dotted #cccccc}verdocs-template-attachments .trash-icon{-ms-flex:0;flex:0;display:none}verdocs-template-attachments .trash-icon:hover{cursor:pointer}verdocs-template-attachments verdocs-file-chooser{margin:10px 0;border:2px dashed #979797}verdocs-template-attachments .loader-wrapper{background-color:#ffffff;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;width:320px;height:320px;text-align:center;border:2px dashed #979797;-ms-flex-pack:end;justify-content:flex-end}verdocs-template-attachments .progress-wrapper{padding:20px}verdocs-template-attachments .buttons{display:-ms-flexbox;display:flex;-webkit-column-gap:8px;-moz-column-gap:8px;column-gap:8px;margin-top:16px;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:end;justify-content:flex-end}verdocs-template-attachments .buttons .flex-fill{-ms-flex:1;flex:1}verdocs-template-attachments ::-webkit-input-placeholder{color:#aaaaaa}verdocs-template-attachments ::-moz-placeholder{color:#aaaaaa}verdocs-template-attachments :-ms-input-placeholder{color:#aaaaaa}verdocs-template-attachments ::-ms-input-placeholder{color:#aaaaaa}verdocs-template-attachments ::placeholder{color:#aaaaaa}',Be=Fe,Oe=function(){function c(e){q(this,e),this.exit=f(this,"exit",7),this.next=f(this,"next",7),this.templateUpdated=f(this,"templateUpdated",7),this.sdkError=f(this,"sdkError",7),this.endpoint=L.getDefault(),this.templateId="",this.uploading=!1,this.progressLabel="Uploading...",this.progressPercent=0,this.showDeleteError=!1,this.confirmDeleteDocument=null,this.store=null}return c.prototype.componentWillLoad=function(){return y(this,void 0,void 0,function(){var e,t,s,o,r;return k(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.endpoint.loadSession(),this.templateId?this.endpoint.session?(o=this,[4,S(this.endpoint,this.templateId,!1)]):(console.log("[ROLES] Unable to start builder session, must be authenticated"),[2]):(console.log("[ROLES] Missing required template ID ".concat(this.templateId)),[2]);case 1:return o.store=n.sent(),[3,3];case 2:return r=n.sent(),console.log("[TEMPLATE ATTACHMENTS] Error loading template",r),(e=this.sdkError)===null||e===void 0||e.emit(new I(r.message,(t=r.response)===null||t===void 0?void 0:t.status,(s=r.response)===null||s===void 0?void 0:s.data)),[3,3];case 3:return[2]}})})},c.prototype.handleCancel=function(e){e.stopPropagation(),this.exit.emit()},c.prototype.handleUploadProgress=function(e){e>=99?(this.progressPercent=100,this.progressLabel="Processing..."):this.progressPercent=e},c.prototype.handleUpload=function(e){return y(this,void 0,void 0,function(){var t,s,o,r,n,l,d,a;return k(this,function(p){switch(p.label){case 0:if(e.stopPropagation(),n=e.detail.file,!n)return[2];console.log("[ATTACHMENTS] Uploading...",n),this.uploading=!0,this.progressLabel="Uploading...",p.label=1;case 1:return p.trys.push([1,4,,5]),[4,le(this.endpoint,this.templateId,n,this.handleUploadProgress.bind(this))];case 2:return l=p.sent(),console.log("[ATTACHMENTS] Created attachment",l),d=this,[4,S(this.endpoint,this.templateId,!1)];case 3:return d.store=p.sent(),console.log("[ATTACHMENTS] Updated template",this.store.state),(t=this.templateUpdated)===null||t===void 0||t.emit({endpoint:this.endpoint,template:this.store.state,event:"attachments"}),this.uploading=!1,this.progressLabel="",this.progressPercent=0,[3,5];case 4:return a=p.sent(),console.log("[ATTACHMENTS] Error creating template",a),(s=this.sdkError)===null||s===void 0||s.emit(new I(a.message,(o=a.response)===null||o===void 0?void 0:o.status,(r=a.response)===null||r===void 0?void 0:r.data)),this.uploading=!1,[3,5];case 5:return[2]}})})},c.prototype.handleNext=function(e){var t;e.stopPropagation(),this.uploading=!1,this.progressLabel="",this.progressPercent=0,(t=this.next)===null||t===void 0||t.emit({template:this.store.state})},c.prototype.confirmDelete=function(){return y(this,void 0,void 0,function(){var e;return k(this,function(t){switch(t.label){case 0:return[4,ae(this.endpoint,this.templateId,this.confirmDeleteDocument.id)];case 1:return t.sent(),e=this,[4,S(this.endpoint,this.templateId,!1)];case 2:return e.store=t.sent(),console.log("[ATTACHMENTS] New template",this.store.state),this.confirmDeleteDocument=null,[2]}})})},c.prototype.handleDelete=function(e){return y(this,void 0,void 0,function(){var t;return k(this,function(s){return((t=this.store.state)===null||t===void 0?void 0:t.documents.length)>1?this.confirmDeleteDocument=e:this.showDeleteError=!0,[2]})})},c.prototype.getFileIcon=function(e){switch(e.mime){case"application/pdf":return Le;case"image/jpeg":return qe;case"image/png":return Ee;case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return Ie}return Te},c.prototype.render=function(){var e=this,t,s,o;if(!this.endpoint.session)return i(w,null,i("verdocs-component-error",{message:"You must be authenticated to use this module."}));var r=(t=this.store)===null||t===void 0?void 0:t.state;return r.isLoaded?!this.endpoint.session||!r.profile_id?i(w,{class:"empty"}):i(w,null,i("h5",null,"Existing Attachments"),i("div",{class:"attachments"},(s=this.store)===null||s===void 0?void 0:s.state.documents.map(function(n){return i("div",{class:"attachment"},i("div",{class:"file-icon",innerHTML:e.getFileIcon(n)}),i("div",{class:"filename",title:n.name},n.name),i("div",{class:"pages"},i("div",{class:"count"},n.pages),i("div",{class:"pages-icon",innerHTML:Re})),i("div",{class:"trash-icon",innerHTML:ze,onClick:function(){return e.handleDelete(n)}}))})),i("h5",null,"Attach a New Document"),this.uploading?i("div",{class:"loader-wrapper"},i("verdocs-loader",null),this.progressLabel&&i("div",{class:"progress-wrapper"},i("verdocs-progress-bar",{showPercent:!0,percent:this.progressPercent,label:this.progressLabel}))):i("verdocs-file-chooser",{onFileSelected:function(n){return e.handleUpload(n)}}),i("div",{class:"buttons"},i("verdocs-button",{variant:"outline",label:"Cancel",size:"small",onClick:function(n){return e.handleCancel(n)},disabled:this.uploading}),i("verdocs-button",{label:"Next",size:"small",onClick:function(n){return e.handleNext(n)},disabled:!(!((o=this.store)===null||o===void 0)&&o.state.documents.length)||this.uploading})),this.showDeleteError&&i("verdocs-ok-dialog",{heading:"Unable to Delete Attachment",message:"Templates must contain at least one attachment.",onNext:function(){return e.showDeleteError=!1}}),this.confirmDeleteDocument&&i("verdocs-ok-dialog",{heading:"Delete this Attachment?",message:"This operation cannot be undone. All fields placed<br />on the deleted attachment will also be removed.",onNext:function(){return e.confirmDelete()},showCancel:!0,onExit:function(){e.confirmDeleteDocument=null}})):i(w,{class:"loading"},i("verdocs-loader",null))},c}();Oe.style=Be;var We='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-template-build-tabs{-ms-flex:1;flex:1;gap:20px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-direction:column;flex-direction:column;font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-template-build-tabs verdocs-template-attachments,verdocs-template-build-tabs verdocs-template-roles{margin:20px}verdocs-template-build-tabs verdocs-template-fields{border-top:1px solid #777777}verdocs-template-build-tabs verdocs-template-attachments{padding:20px;background:#ffffff}verdocs-template-build-tabs verdocs-template-fields{width:100%}verdocs-template-build-tabs verdocs-preview{-ms-flex:1;flex:1}',Qe=We,je=["attachments","roles","settings","fields","preview"],Ye=function(){function c(e){q(this,e),this.sdkError=f(this,"sdkError",7),this.stepChanged=f(this,"stepChanged",7),this.endpoint=L.getDefault(),this.templateId=null,this.step="preview",this.store=null}return c.prototype.onStepChanged=function(){console.log("Step changed",this.step,this.templateId),this.loadTemplate().catch(function(e){return console.log("Unknown Error",e)})},c.prototype.componentWillLoad=function(){return y(this,void 0,void 0,function(){var e,t,s;return k(this,function(o){try{if(this.endpoint.loadSession(),!this.endpoint.session)return console.log("[BUILD_TABS] Unable to start builder session, must be authenticated"),[2];if(!this.templateId)return this.step="preview",[2];this.loadTemplate().catch(function(r){return console.log("[BUILD_TABS] Unable to load template",r)})}catch(r){console.log("[BUILD_TABS] Error loading template",r),(e=this.sdkError)===null||e===void 0||e.emit(new I(r.message,(t=r.response)===null||t===void 0?void 0:t.status,(s=r.response)===null||s===void 0?void 0:s.data))}return[2]})})},c.prototype.loadTemplate=function(){return y(this,void 0,void 0,function(){var e;return k(this,function(t){switch(t.label){case 0:return this.templateId?(e=this,[4,S(this.endpoint,this.templateId,!1)]):[3,2];case 1:e.store=t.sent(),t.label=2;case 2:return[2]}})})},c.prototype.setStep=function(e){var t;console.log("Selected step",e.detail.tab.id),e.stopPropagation(),e.preventDefault(),this.step=e.detail.tab.id,(t=this.stepChanged)===null||t===void 0||t.emit(e.detail.tab.id)},c.prototype.render=function(){var e=this,t,s,o,r,n,l,d,a,p;if(!this.endpoint.session)return i(w,null,i("verdocs-component-error",{message:"You must be authenticated to use this module."}));var b=!1,x=!1,m=!1;console.log("[BUILD_TABS] Rendering tabs",this.templateId,this.step),this.templateId&&this.store&&this.store.state&&(m=((o=(s=(t=this.store)===null||t===void 0?void 0:t.state)===null||s===void 0?void 0:s.documents)===null||o===void 0?void 0:o.length)>0,x=m&&((l=(n=(r=this.store)===null||r===void 0?void 0:r.state)===null||n===void 0?void 0:n.roles)===null||l===void 0?void 0:l.length)>0,b=x&&((p=(a=(d=this.store)===null||d===void 0?void 0:d.state)===null||a===void 0?void 0:a.fields)===null||p===void 0?void 0:p.length)>0);var h=Math.max(je.indexOf(this.step),0);return!b&&h>=4&&(h=3),!x&&h>=3&&(h=1),!m&&h>=1&&(h=0),console.log({selectedStepIndex:h,canPreview:b,canEditFields:x,canEditRoles:m}),i(w,null,i("verdocs-tabs",{onSelectTab:function(g){return e.setStep(g)},selectedTab:h,tabs:[{id:"attachments",disabled:!1,label:this.templateId&&this.store?"Attachment(s)":"Upload Attachment(s)"},{id:"roles",disabled:!m,label:"Roles"},{id:"settings",disabled:!x,label:"Settings"},{id:"fields",disabled:!x,label:"Fields"},{id:"preview",disabled:!b,label:"Preview/Send"}]}))},Object.defineProperty(c,"watchers",{get:function(){return{step:["onStepChanged"]}},enumerable:!1,configurable:!0}),c}();Ye.style=Qe;var Xe='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-template-create{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-template-create form{background-color:#ffffff;padding:12px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}verdocs-template-create form .upload-box{-webkit-box-sizing:border-box;box-sizing:border-box;width:320px;text-align:center;padding:44px 18px 66px;border:2px dashed #979797;color:rgba(0, 0, 0, 0.54)}verdocs-template-create form .upload-box.drag-over{border:2px solid #4c56cb}verdocs-template-create form .upload-box svg{width:64px;fill:#5c6575}verdocs-template-create .loader-wrapper{background-color:#ffffff;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;width:320px;height:320px;text-align:center;border:2px dashed #979797;-ms-flex-pack:end;justify-content:flex-end}verdocs-template-create .progress-wrapper{padding:20px}verdocs-template-create .buttons{display:-ms-flexbox;display:flex;-webkit-column-gap:8px;-moz-column-gap:8px;column-gap:8px;margin-top:16px;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:end;justify-content:flex-end}verdocs-template-create .buttons .flex-fill{-ms-flex:1;flex:1}verdocs-template-create ::-webkit-input-placeholder{color:#aaaaaa}verdocs-template-create ::-moz-placeholder{color:#aaaaaa}verdocs-template-create :-ms-input-placeholder{color:#aaaaaa}verdocs-template-create ::-ms-input-placeholder{color:#aaaaaa}verdocs-template-create ::placeholder{color:#aaaaaa}',$e=Xe,Ke=" ",Ge='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"></path></svg>',Je=function(){function c(e){q(this,e),this.exit=f(this,"exit",7),this.next=f(this,"next",7),this.sdkError=f(this,"sdkError",7),this.templateCreated=f(this,"templateCreated",7),this.endpoint=L.getDefault(),this.file=void 0,this.creating=!1,this.progressLabel="Uploading...",this.progressPercent=0}return c.prototype.componentWillLoad=function(){this.endpoint.setTimeout(3e4),this.endpoint.loadSession()},c.prototype.handleFileChanged=function(e){var t;this.file=((t=e.target.files)===null||t===void 0?void 0:t[0])||null,console.log("[CREATE] Selected file",this.file)},c.prototype.handleUpload=function(e){e.stopPropagation();var t=document.getElementById("verdocs-template-create-file");t.click()},c.prototype.handleCancel=function(e){e.stopPropagation(),this.exit.emit()},c.prototype.handleSubmit=function(e){return y(this,void 0,void 0,function(){var t,s,o,r,n,l=this;return k(this,function(d){switch(d.label){case 0:if(e.stopPropagation(),console.log("Submitting"),!this.file)return[2];this.creating=!0,this.progressLabel="Uploading...",d.label=1;case 1:return d.trys.push([1,3,,4]),[4,de(this.endpoint,{name:this.file.name,documents:[this.file]},function(a){a>=99?(l.progressLabel="Processing...",l.progressPercent=100):l.progressPercent=a})];case 2:return r=d.sent(),console.log("[CREATE] Created template",r),S(this.endpoint,r.id,!0).then(function(){var a,p;(a=l.templateCreated)===null||a===void 0||a.emit({endpoint:l.endpoint,template:r,templateId:r.id}),(p=l.next)===null||p===void 0||p.emit(r),l.creating=!1,l.progressLabel="",l.progressPercent=0}).catch(function(a){console.log(a)}),[3,4];case 3:return n=d.sent(),console.log("[CREATE] Error creating template",n),(t=this.sdkError)===null||t===void 0||t.emit(new I(n.message,(s=n.response)===null||s===void 0?void 0:s.status,(o=n.response)===null||o===void 0?void 0:o.data)),this.creating=!1,[3,4];case 4:return[2]}})})},c.prototype.render=function(){var e=this;return this.endpoint.session?i(w,null,i("form",{onSubmit:function(t){return t.preventDefault()},onClick:function(t){return t.stopPropagation()},autocomplete:"off"},i("input",{type:"file",id:"verdocs-template-create-file",multiple:!0,accept:"application/pdf",style:{display:"none"},onChange:function(t){return e.handleFileChanged(t)}}),this.creating?i("div",{class:"loader-wrapper"},i("verdocs-loader",null),this.progressLabel&&i("div",{class:"progress-wrapper"},i("verdocs-progress-bar",{showPercent:!0,percent:this.progressPercent,label:this.progressLabel}))):i("div",{class:"upload-box",onDrop:function(t){t.preventDefault(),t.target.classList.remove("drag-over"),e.file=t.dataTransfer.files[0]},onDragOver:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy"},onDragEnter:function(t){return t.target.classList.add("drag-over")},onDragLeave:function(t){return t.target.classList.remove("drag-over")}},i("div",null,i("span",{innerHTML:Ge})),i("div",{style:{marginTop:"20px",fontSize:"20px",fontWeight:"bold",overflowWrap:"anywhere"}},this.file?this.file.name:"Drag a file here"),i("div",{style:{marginTop:"20px",marginBottom:"20px",fontSize:"16px",height:"20px"}},this.file?Ke:"Or, if you prefer..."),i("verdocs-button",{label:this.file?"Select a different file":"Select a file from your computer",size:"small",onClick:function(t){return e.handleUpload(t)}})),i("div",{class:"buttons"},i("verdocs-button",{variant:"outline",label:"Cancel",size:"small",onClick:function(t){return e.handleCancel(t)},disabled:this.creating}),i("verdocs-button",{label:"Next",size:"small",onClick:function(t){return e.handleSubmit(t)},disabled:!this.file||this.creating})))):i(w,null,i("verdocs-component-error",{message:"You must be authenticated to use this module."}))},c}();Je.style=$e;var et=`@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-template-fields{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;position:relative;display:block;min-height:600px}verdocs-template-fields .page-0{padding:65px 15px 0 15px;-webkit-box-sizing:border-box;box-sizing:border-box}verdocs-template-fields .page-0 .user-placed-fields{height:100px;position:relative;background:#ffffff;-webkit-box-shadow:0 0 10px 5px rgba(0, 0, 0, 0.0588235294);box-shadow:0 0 10px 5px rgba(0, 0, 0, 0.0588235294)}verdocs-template-fields .page-0 .user-placed-fields .title{top:0;left:0;color:#ffffff;font-size:12px;padding:3px 6px;font-weight:bold;position:absolute;background:#46497d}verdocs-template-fields .pages{display:-ms-flexbox;display:flex;padding:15px;row-gap:15px;min-height:200px;position:relative;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-direction:column;flex-direction:column}verdocs-template-fields .pages div,verdocs-template-fields .pages canvas{-webkit-box-sizing:border-box;box-sizing:border-box}verdocs-template-fields #verdocs-template-fields-toolbar{height:50px;display:-ms-flexbox;display:flex;-ms-flex:0 0 50px;flex:0 0 50px;-webkit-column-gap:15px;-moz-column-gap:15px;column-gap:15px;font-weight:700;padding:0 20px 0 0;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;color:#f5f5fa;-ms-flex-pack:center;justify-content:center;background:#46497d}verdocs-template-fields #verdocs-template-fields-toolbar>verdocs-select-input{margin:0}verdocs-template-fields #verdocs-template-fields-toolbar svg{width:24px;height:24px}verdocs-template-fields #verdocs-template-fields-toolbar .add-for{margin:0;font-weight:500;color:#f5f5fa}verdocs-template-fields #verdocs-template-fields-toolbar verdocs-select-input{margin:0 20px 0 0}verdocs-template-fields.placing-attachment{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='m10.55 16.55 7.275-7.275L16.05 7.5l-5.5 5.45-2.675-2.65L6.1 12.075Zm-5.375 4.925q-1.125 0-1.887-.763-.763-.762-.763-1.887V5.175q0-1.125.763-1.888.762-.762 1.887-.762h13.65q1.125 0 1.888.762.762.763.762 1.888v13.65q0 1.125-.762 1.887-.763.763-1.888.763Zm0-2.65h13.65V5.175H5.175v13.65Zm0-13.65v13.65-13.65Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-checkbox_group{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='m10.55 16.55 7.275-7.275L16.05 7.5l-5.5 5.45-2.675-2.65L6.1 12.075Zm-5.375 4.925q-1.125 0-1.887-.763-.763-.762-.763-1.887V5.175q0-1.125.763-1.888.762-.762 1.887-.762h13.65q1.125 0 1.888.762.762.763.762 1.888v13.65q0 1.125-.762 1.887-.763.763-1.888.763Zm0-2.65h13.65V5.175H5.175v13.65Zm0-13.65v13.65-13.65Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-date{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath fill='%23000000' d='M7.6 13.925q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375Zm4.4 0q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375Zm4.4 0q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375ZM5.3 22.85q-1.325 0-2.238-.912-.912-.913-.912-2.238V6.3q0-1.325.912-2.238.913-.912 2.238-.912H6v-2h2.575v2h6.85v-2H18v2h.7q1.325 0 2.238.912.912.913.912 2.238v13.4q0 1.325-.912 2.238-.913.912-2.238.912Zm0-3.15h13.4V10H5.3v9.7ZM5.3 8h13.4V6.3H5.3Zm0 0V6.3 8Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-dropdown{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24' stroke-width='1.5' stroke='currentColor'%3E%3Cpath stroke='%23000000' stroke-linecap='round' stroke-linejoin='round' d='M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0l-3.75-3.75M17.25 21L21 17.25' /%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-initial{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='M6.225 20.775V7h-5V3.225H15V7h-5v13.775Zm9.775 0v-8h-3V9h9.775v3.775h-3v8Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-payment{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='m10.55 16.55 7.275-7.275L16.05 7.5l-5.5 5.45-2.675-2.65L6.1 12.075Zm-5.375 4.925q-1.125 0-1.887-.763-.763-.762-.763-1.887V5.175q0-1.125.763-1.888.762-.762 1.887-.762h13.65q1.125 0 1.888.762.762.763.762 1.888v13.65q0 1.125-.762 1.887-.763.763-1.888.763Zm0-2.65h13.65V5.175H5.175v13.65Zm0-13.65v13.65-13.65Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-radio_button_group{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='M12 17q2.075 0 3.538-1.463Q17 14.075 17 12t-1.462-3.538Q14.075 7 12 7 9.925 7 8.463 8.462 7 9.925 7 12q0 2.075 1.463 3.537Q9.925 17 12 17Zm0 5.85q-2.275 0-4.25-.85t-3.438-2.312Q2.85 18.225 2 16.25q-.85-1.975-.85-4.25T2 7.75q.85-1.975 2.312-3.438Q5.775 2.85 7.75 2q1.975-.85 4.25-.85t4.25.85q1.975.85 3.438 2.312Q21.15 5.775 22 7.75q.85 1.975.85 4.25T22 16.25q-.85 1.975-2.312 3.438Q18.225 21.15 16.25 22q-1.975.85-4.25.85Zm0-3.15q3.25 0 5.475-2.225Q19.7 15.25 19.7 12q0-3.25-2.225-5.475Q15.25 4.3 12 4.3q-3.25 0-5.475 2.225Q4.3 8.75 4.3 12q0 3.25 2.225 5.475Q8.75 19.7 12 19.7Zm0-7.7Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-signature{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='m9.225 21.225 4.65-4.65h8.45v4.65Zm-5.35-2.2H5.05l8.5-8.5-1.175-1.175-8.5 8.5Zm14.25-9.95L13.8 4.8l1.325-1.325q.625-.65 1.525-.663.9-.012 1.6.663l1.225 1.175q.675.675.663 1.562-.013.888-.663 1.513ZM16.7 10.55 6 21.225H1.675V16.9L12.35 6.225Zm-3.725-.625-.6-.575 1.175 1.175Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-textarea{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='M3.225 20.725v-3.15h11.55v3.15Zm0-4.775V12.8h17.55v3.15Zm0-4.75V8.05h17.55v3.15Zm0-4.775v-3.15h17.55v3.15Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-textbox{cursor:url("data:image/svg+xml,%3Csvg width='32' height='15' viewBox='0 0 32 15' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cmask id='path-1-inside-1_1401_24' fill='white'%3E%3Cpath d='M0 0H32V15H0V0Z'/%3E%3C/mask%3E%3Cpath d='M0 0H32V15H0V0Z' fill='%234C56CB' fill-opacity='0.1'/%3E%3Cpath d='M0 0V-1H-1V0H0ZM0 15H-1V16H0V15ZM0 1H32V-1H0V1ZM32 14H0V16H32V14ZM1 15V0H-1V15H1Z' fill='%234C56CB' mask='url(%23path-1-inside-1_1401_24)'/%3E%3Cpath d='M3 11.8V8.65H14.15V11.8H3ZM3 6.65V3.5H20.15V6.65H3Z' fill='%234C56CB'/%3E%3Cline x1='31.5' y1='1' x2='31.5' y2='14' stroke='%234C56CB' stroke-opacity='0.32' stroke-dasharray='1 1'/%3E%3C/svg%3E%0A") 0 14, pointer}verdocs-template-fields.placing-timestamp{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath fill='%23000000' d='M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM13 14h-2V8h2v6z'%3E%3C/path%3E%3C/svg%3E") 16 16, pointer}`,tt=et,ot='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M3.425 16.15V13h11.15v3.15Zm0-5.15V7.85h17.15V11Z"/></svg>',it='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M3.225 20.725v-3.15h11.55v3.15Zm0-4.775V12.8h17.55v3.15Zm0-4.75V8.05h17.55v3.15Zm0-4.775v-3.15h17.55v3.15Z"/></svg>',st='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="m10.55 16.55 7.275-7.275L16.05 7.5l-5.5 5.45-2.675-2.65L6.1 12.075Zm-5.375 4.925q-1.125 0-1.887-.763-.763-.762-.763-1.887V5.175q0-1.125.763-1.888.762-.762 1.887-.762h13.65q1.125 0 1.888.762.762.763.762 1.888v13.65q0 1.125-.762 1.887-.763.763-1.888.763Zm0-2.65h13.65V5.175H5.175v13.65Zm0-13.65v13.65-13.65Z"/></svg>',rt='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M12 17q2.075 0 3.538-1.463Q17 14.075 17 12t-1.462-3.538Q14.075 7 12 7 9.925 7 8.463 8.462 7 9.925 7 12q0 2.075 1.463 3.537Q9.925 17 12 17Zm0 5.85q-2.275 0-4.25-.85t-3.438-2.312Q2.85 18.225 2 16.25q-.85-1.975-.85-4.25T2 7.75q.85-1.975 2.312-3.438Q5.775 2.85 7.75 2q1.975-.85 4.25-.85t4.25.85q1.975.85 3.438 2.312Q21.15 5.775 22 7.75q.85 1.975.85 4.25T22 16.25q-.85 1.975-2.312 3.438Q18.225 21.15 16.25 22q-1.975.85-4.25.85Zm0-3.15q3.25 0 5.475-2.225Q19.7 15.25 19.7 12q0-3.25-2.225-5.475Q15.25 4.3 12 4.3q-3.25 0-5.475 2.225Q4.3 8.75 4.3 12q0 3.25 2.225 5.475Q8.75 19.7 12 19.7Zm0-7.7Z"/></svg>',nt='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M7.6 13.925q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375Zm4.4 0q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375Zm4.4 0q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375ZM5.3 22.85q-1.325 0-2.238-.912-.912-.913-.912-2.238V6.3q0-1.325.912-2.238.913-.912 2.238-.912H6v-2h2.575v2h6.85v-2H18v2h.7q1.325 0 2.238.912.912.913.912 2.238v13.4q0 1.325-.912 2.238-.913.912-2.238.912Zm0-3.15h13.4V10H5.3v9.7ZM5.3 8h13.4V6.3H5.3Zm0 0V6.3 8Z"/></svg>',lt='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="m9.225 21.225 4.65-4.65h8.45v4.65Zm-5.35-2.2H5.05l8.5-8.5-1.175-1.175-8.5 8.5Zm14.25-9.95L13.8 4.8l1.325-1.325q.625-.65 1.525-.663.9-.012 1.6.663l1.225 1.175q.675.675.663 1.562-.013.888-.663 1.513ZM16.7 10.55 6 21.225H1.675V16.9L12.35 6.225Zm-3.725-.625-.6-.575 1.175 1.175Z"/></svg>',at='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M6.225 20.775V7h-5V3.225H15V7h-5v13.775Zm9.775 0v-8h-3V9h9.775v3.775h-3v8Z"/></svg>',dt='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM13 14h-2V8h2v6z"></path></svg>',ct='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" stroke-width="1.5" stroke="currentColor"><path stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" d="M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0l-3.75-3.75M17.25 21L21 17.25" /></svg>',X='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.707 14.707"><g><rect x="6.275" y="0" fill="#ffffff7f" width="1" height="15"/></g></svg>',pt=[{id:"signature",tooltip:"Signature",icon:lt},{id:"initial",tooltip:"Initials",icon:at},{id:"sep1",tooltip:"",icon:X},{id:"textbox",tooltip:"Text Box",icon:ot},{id:"textarea",tooltip:"Text Area",icon:it},{id:"checkbox_group",tooltip:"Check Box",icon:st},{id:"radio_button_group",tooltip:"Radio Button",icon:rt},{id:"dropdown",tooltip:"Dropdown",icon:ct},{id:"sep2",tooltip:"",icon:X},{id:"date",tooltip:"Date",icon:nt},{id:"timestamp",tooltip:"Timestamp",icon:dt}],ut=function(){function c(e){q(this,e),this.sdkError=f(this,"sdkError",7),this.templateUpdated=f(this,"templateUpdated",7),this.fieldsUpdated=f(this,"fieldsUpdated",7),this.pageHeights={},this.templateStore=null,this.fieldStore=null,this.roleStore=null,this.cachedPageInfo={},this.endpoint=L.getDefault(),this.templateId=null,this.toolbarTargetId=null,this.placing=null,this.showMustSelectRole=!1,this.selectedRoleName="",this.loading=!0}return c.prototype.componentWillLoad=function(){return y(this,void 0,void 0,function(){var e,t,s,o=this;return k(this,function(r){try{if(this.endpoint.loadSession(),!this.templateId)return console.log("[FIELDS] Missing required template ID ".concat(this.templateId)),[2];if(!this.endpoint.session)return console.log("[FIELDS] Unable to start builder session, must be authenticated"),[2];S(this.endpoint,this.templateId,!0).then(function(n){var l,d;o.templateStore=n,o.fieldStore=te(o.templateId),o.roleStore=A(o.templateId),o.selectedRoleName=((d=(l=o.roleStore.get("roles"))===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.name)||"",o.loading=!1,o.fieldStore.onChange("fields",function(a){var p;console.log("[FIELDS] Fields changed",{fields:a}),(p=o.fieldsUpdated)===null||p===void 0||p.emit({event:"updated",endpoint:o.endpoint,templateId:o.templateId,fields:a})})}).catch(function(n){console.log(n)})}catch(n){console.log("[FIELDS] Error with preview session",n),(e=this.sdkError)===null||e===void 0||e.emit(new I(n.message,(t=n.response)===null||t===void 0?void 0:t.status,(s=n.response)===null||s===void 0?void 0:s.data))}return[2]})})},c.prototype.componentDidRender=function(){z.dynamicDrop(!0);var e=this.toolbarTargetId?document.getElementById(this.toolbarTargetId):null,t=document.getElementById("verdocs-template-fields-toolbar");e&&t&&(console.log("[FIELDS] Moving toolbar"),t.remove(),e.append(t))},c.prototype.componentWillUpdate=function(){var e=this,t,s=this.roleStore.get("roles");(!this.selectedRoleName||!s.find(function(o){return o&&o.name===e.selectedRoleName}))&&(this.selectedRoleName=((t=s[0])===null||t===void 0?void 0:t.name)||"",console.log("[FIELDS] Selected new role",this.selectedRoleName))},c.prototype.handleKeyDown=function(e){e.key==="Escape"&&(this.placing=null)},c.prototype.handleFieldChange=function(e,t,s){return y(this,void 0,void 0,function(){return k(this,function(o){return console.log("[FIELDS] handleFieldChange",e,t,s),[2]})})},c.prototype.attachFieldAttributes=function(e,t,s){var o=this;s.addEventListener("input",function(r){return o.handleFieldChange(t,r)}),s.addEventListener("settingsChanged",function(r){var n,l;console.log("Settings changed",r.detail),(n=o.templateUpdated)===null||n===void 0||n.emit({endpoint:o.endpoint,template:(l=o.templateStore)===null||l===void 0?void 0:l.state,event:"added-field"})}),s.addEventListener("deleted",function(){var r,n;console.log("[FIELDS] Deleted",o,t),s.remove(),(r=o.templateUpdated)===null||r===void 0||r.emit({endpoint:o.endpoint,template:(n=o.templateStore)===null||n===void 0?void 0:n.state,event:"updated-field"})}),s.setAttribute("templateid",this.templateId),s.setAttribute("fieldname",t.name),s.setAttribute("pageNumber",e.pageNumber),s.setAttribute("xScale",e.xScale),s.setAttribute("yScale",e.yScale),s.setAttribute("name",t.name)},c.prototype.handlePageRendered=function(e){var t=this,s=e.detail;this.cachedPageInfo[s.pageNumber]=s,this.pageHeights[s.pageNumber]=s.naturalHeight,this.fieldStore.get("fields").filter(function(o){return o&&o.page===s.pageNumber}).forEach(function(o){switch(o.type){case"checkbox_group":case"radio_button_group":(o.settings||{}).options.map(function(l,d){var a=ke(o,d),p=document.getElementById(a);p&&(p.setAttribute("fieldname",o.name),p.setAttribute("pagenumber",String(o.page)),t.makeDraggable(p))});break;default:var r=ye(o),n=document.getElementById(r);n&&(n.setAttribute("fieldname",o.name),n.setAttribute("pagenumber",String(o.page)),t.makeDraggable(n));break}})},c.prototype.makeDraggable=function(e){z(e).draggable({listeners:{move:this.handleMoveField.bind(this),end:this.handleMoveEnd.bind(this)}})},c.prototype.handleMoveField=function(e){return y(this,void 0,void 0,function(){var t,s,o,r,n,l;return k(this,function(d){return t=+(e.target.getAttribute("posX")||0),s=+(e.target.getAttribute("posY")||0),o=+(e.target.getAttribute("xScale")||1),r=+(e.target.getAttribute("yScale")||1),n=e.dx/o+t,l=e.dy/r+s,e.target.setAttribute("posX",n),e.target.setAttribute("posy",l),Se(e.target,"translate","".concat(n,"px, ").concat(l,"px")),[2]})})},c.prototype.handleMoveEnd=function(e){return y(this,void 0,void 0,function(){var t,s,o,r,n,l,d,a,p,b,x,m,h,g,v,u,C,T,F,B,Z,N,D,M,O;return k(this,function(W){switch(W.label){case 0:if(o=e.target.getAttribute("fieldname"),r=+(e.target.getAttribute("option")||"0"),n=this.fieldStore.get("fields").find(function(oe){return oe.name===o}),!n)return console.log("[FIELDS] Unable to find field",o,e.target),[2];switch(l=e.target.getAttribute("pagenumber"),d=this.cachedPageInfo[l],a=d.naturalWidth,p=a===void 0?612:a,b=d.naturalHeight,x=b===void 0?792:b,m=d.renderedHeight,h=m===void 0?792:m,g=e.target.getBoundingClientRect(),v=e.target.parentElement,u=v.getBoundingClientRect(),C=n.settings.width||Q(n.type),T=n.settings.height||j(n.type),F=Math.max(g.left-u.left,0),B=Math.max(h-(u.bottom-g.bottom),0),Z=this.viewCoordinatesToPageCoordinates(F,B,l,p-C,x-T),N=Z.x,D=Z.y,n.type){case"attachment":case"payment":case"initial":case"signature":case"date":case"dropdown":case"textarea":case"textbox":case"timestamp":n.settings.x=N,n.settings.y=D;break;case"checkbox_group":case"radio_button_group":M=n.settings.options[r],M&&(M.x=N,M.y=D);break}return console.log("[FIELDS] Will update",o,D,r,n),[4,ce(this.endpoint,this.templateId,o,n)];case 1:return O=W.sent(),ge(this.fieldStore,o,O),e.target.removeAttribute("posX"),e.target.removeAttribute("posY"),Ce(e.target),(t=this.templateUpdated)===null||t===void 0||t.emit({endpoint:this.endpoint,template:(s=this.templateStore)===null||s===void 0?void 0:s.state,event:"updated-field"}),[2]}})})},c.prototype.generateFieldName=function(e,t){var s=1,o;do o="".concat(e,"P").concat(t,"-").concat(s),s++;while(this.fieldStore.get("fields").some(function(r){return r&&r.name===o}));return o},c.prototype.viewCoordinatesToPageCoordinates=function(e,t,s,o,r){var n=this.cachedPageInfo[s],l=n.xScale,d=l===void 0?1:l,a=n.yScale,p=a===void 0?1:a,b=n.renderedHeight,x=b===void 0?792:b,m=Math.floor(Math.min(e/d,o)),h=Math.floor(Math.min(Math.max(x-t,0)/p,r));return{x:m,y:h}},c.prototype.handleClickPage=function(e,t){return y(this,void 0,void 0,function(){var s,o,r,n,l,d,a,p,b,x,m,h,g,v,u,C;return k(this,function(T){switch(T.label){case 0:if(!this.placing)return[3,2];switch(r=e.offsetX,n=e.offsetY,l=Q(this.placing),d=j(this.placing),a=this.cachedPageInfo[t],p=a.naturalWidth,b=p===void 0?612:p,x=a.naturalHeight,m=x===void 0?792:x,h=this.viewCoordinatesToPageCoordinates(r,n,t,b-l,m-d),g=Math.floor(h.x),v=Math.floor(h.y),u={name:this.generateFieldName(this.placing,t),role_name:this.selectedRoleName,template_id:this.templateId,document_id:a.documentId,type:this.placing,required:!0,page:t,validator:null,label:null,default:null,placeholder:null,group:null,settings:{x:g,y:v},x:g,y:v,width:l,height:d},console.log("[FIELDS] Will save new field",u),u.type){case"attachment":case"payment":u.settings={x:g,y:v};break;case"initial":case"signature":u.settings={x:g,y:v,result:""};break;case"checkbox_group":u.setting={minimum_checked:0,maximum_checked:1e3,options:[{id:"".concat(u.name,"-1"),value:"Option 1",checked:!1,x:g,y:v}]};break;case"date":u.settings={x:g,y:v,width:l,height:d,result:""};break;case"dropdown":u.required=!1,u.settings={x:g,y:v,width:l,height:d,value:null,placeholder:"Choose",options:[{id:"option-1",value:"Option 1"}]};break;case"radio_button_group":u.setting={options:[{id:"".concat(u.name,"-1"),value:"Option 1",selected:!1,x:g,y:v}]};break;case"textarea":case"textbox":u.settings={x:g,y:v,width:l,height:d,result:"",leading:0,alignment:0,upperCase:!1};break;case"timestamp":u.settings={x:g,y:v,width:l,height:d};break}return u.type==="textarea"&&(u.settings.leading=16,u.type="textbox"),[4,pe(this.endpoint,this.templateId,u)];case 1:C=T.sent(),console.log("[FIELDS] Saved field",C),this.fieldStore.set("fields",H(H([],this.fieldStore.get("fields"),!0),[C],!1)),this.placing=null,(s=this.templateUpdated)===null||s===void 0||s.emit({endpoint:this.endpoint,template:(o=this.templateStore)===null||o===void 0?void 0:o.state,event:"added-field"}),T.label=2;case 2:return[2]}})})},c.prototype.render=function(){var e,t=this,s,o,r;if(!this.endpoint.session)return i(w,null,i("verdocs-component-error",{message:"You must be authenticated to use this module."}));if(this.loading||!(!((s=this.templateStore)===null||s===void 0)&&s.state.isLoaded))return i(w,null,i("verdocs-loader",null));var n=this.roleStore.get("roles").map(function(l){return{value:l.name,label:l.full_name?"".concat(l.name,": ").concat(l.full_name):l.name}});return i(w,{class:this.placing?(e={},e["placing-".concat(this.placing)]=!0,e):{},onSubmit:function(){}},i("div",{id:"verdocs-template-fields-toolbar"},i("div",{class:"add-for"},"Add field:"),i("verdocs-select-input",{value:this.selectedRoleName,options:n,onInput:function(l){return t.selectedRoleName=l.target.value}}),pt.map(function(l){return i("verdocs-toolbar-icon",{text:l.tooltip,icon:l.icon,onClick:function(){l.tooltip&&(t.selectedRoleName?t.placing=l.id:t.showMustSelectRole=!0)}})})),i("div",{class:"pages"},(((r=(o=this.templateStore)===null||o===void 0?void 0:o.state)===null||r===void 0?void 0:r.documents)||[]).map(function(l){var d=J(1,l.pages);return d.map(function(a){return i("verdocs-template-document-page",{templateId:t.templateId,documentId:l.id,pageNumber:a,virtualWidth:612,virtualHeight:792,disabled:!0,editable:!0,done:!1,onClick:function(p){return t.handleClickPage(p,a)},onPageRendered:function(p){return t.handlePageRendered(p)},layers:[{name:"page",type:"canvas"},{name:"controls",type:"div"}]})})})),this.showMustSelectRole&&i("verdocs-ok-dialog",{heading:"Unable to add field",message:this.roleStore.get("roles").length>0?"Please select a role before adding fields.":"Please add at least one role before adding fields.",onNext:function(){return t.showMustSelectRole=!1}}))},c}();ut.style=tt;var mt="",ht=mt,vt=function(){function c(e){q(this,e),this.close=f(this,"close",7),this.sdkError=f(this,"sdkError",7),this.templateUpdated=f(this,"templateUpdated",7),this.store=null,this.endpoint=L.getDefault(),this.templateId="",this.name="",this.dirty=!1}return c.prototype.componentWillLoad=function(){return y(this,void 0,void 0,function(){var e,t,s,o,r,n,l;return k(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),this.endpoint.loadSession(),this.templateId?this.endpoint.session?(n=this,[4,S(this.endpoint,this.templateId,!1)]):(console.log("[ROLES] Unable to start builder session, must be authenticated"),[2]):(console.log("[ROLES] Missing required template ID ".concat(this.templateId)),[2]);case 1:return n.store=d.sent(),this.name=(t=(e=this.store)===null||e===void 0?void 0:e.state)===null||t===void 0?void 0:t.name,this.dirty=!1,[3,3];case 2:return l=d.sent(),console.log("[TEMPLATE NAME] Error loading template",l),(s=this.sdkError)===null||s===void 0||s.emit(new I(l.message,(o=l.response)===null||o===void 0?void 0:o.status,(r=l.response)===null||r===void 0?void 0:r.data)),[3,3];case 3:return[2]}})})},c.prototype.handleCancel=function(e){var t,s,o;e.stopPropagation(),this.name=(s=(t=this.store)===null||t===void 0?void 0:t.state)===null||s===void 0?void 0:s.name,this.dirty=!1,console.log("Closing"),(o=this.close)===null||o===void 0||o.emit()},c.prototype.handleSave=function(e){return y(this,void 0,void 0,function(){var t,s,o;return k(this,function(r){switch(r.label){case 0:return e.stopPropagation(),[4,ee(this.endpoint,this.templateId,{name:this.name})];case 1:return r.sent(),!((t=this.store)===null||t===void 0)&&t.state&&(this.store.state.name=this.name),this.dirty=!1,(s=this.templateUpdated)===null||s===void 0||s.emit({endpoint:this.endpoint,template:this.store.state,event:"name"}),(o=this.close)===null||o===void 0||o.emit(),[2]}})})},c.prototype.render=function(){var e=this,t,s;return this.endpoint.session?!((s=(t=this.store)===null||t===void 0?void 0:t.state)===null||s===void 0)&&s.isLoading?i(w,{class:"loading"},i("verdocs-loader",null)):i(w,null,i("form",{onSubmit:function(o){return o.preventDefault()},onClick:function(o){return o.stopPropagation()},autocomplete:"off"},i("label",{htmlFor:"verdocs-template-name"},"Template Name"),i("verdocs-text-input",{id:"verdocs-template-name",value:this.name,autocomplete:"off",placeholder:"Template Name...",onInput:function(o){var r,n;e.name=o.target.value,e.dirty=e.name!==((n=(r=e.store)===null||r===void 0?void 0:r.state)===null||n===void 0?void 0:n.name)}}),i("div",{class:"buttons"},i("verdocs-button",{size:"small",variant:"outline",label:"Cancel",disabled:!this.dirty,onClick:function(o){return e.handleCancel(o)}}),i("verdocs-button",{size:"small",label:"Save",disabled:!this.dirty,onClick:function(o){return e.handleSave(o)}})))):i(w,null,i("verdocs-component-error",{message:"You must be authenticated to use this module."}))},c}();vt.style=ht;var ft='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-template-reminders{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-template-reminders.loading{min-height:300px;position:relative;display:block}verdocs-template-reminders.empty{display:none}verdocs-template-reminders form{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}verdocs-template-reminders form h5{font-size:16px;font-weight:bold;color:#4c56cb;margin:0 0 20px 0}verdocs-template-reminders form label{font-size:16px;font-weight:500;margin:0 0 6px 0;color:#33364b}verdocs-template-reminders form input{border:none;font-size:18px;padding:3px 6px 3px 0;background:transparent;border-bottom:1px solid #33364b}verdocs-template-reminders form input:focus{outline:none}verdocs-template-reminders form .input-row{display:-ms-flexbox;display:flex;margin:0 0 10px 0;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row}verdocs-template-reminders form .input-row label{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex}verdocs-template-reminders form .input-row verdocs-text-input{margin:0;display:-ms-flexbox;display:flex;-ms-flex:0 0 60px;flex:0 0 60px}verdocs-template-reminders form .input-row verdocs-text-input input{text-align:center}verdocs-template-reminders form .input-row verdocs-checkbox{display:-ms-flexbox;display:flex;-ms-flex:0 0 40px;flex:0 0 40px;-ms-flex-pack:center;justify-content:center}verdocs-template-reminders .buttons{display:-ms-flexbox;display:flex;-webkit-column-gap:8px;-moz-column-gap:8px;column-gap:8px;margin-top:16px;-ms-flex-direction:row;flex-direction:row}verdocs-template-reminders ::-webkit-input-placeholder{color:#aaaaaa}verdocs-template-reminders ::-moz-placeholder{color:#aaaaaa}verdocs-template-reminders :-ms-input-placeholder{color:#aaaaaa}verdocs-template-reminders ::-ms-input-placeholder{color:#aaaaaa}verdocs-template-reminders ::placeholder{color:#aaaaaa}',gt=ft,bt=function(){function c(e){q(this,e),this.close=f(this,"close",7),this.sdkError=f(this,"sdkError",7),this.templateUpdated=f(this,"templateUpdated",7),this.store=null,this.endpoint=L.getDefault(),this.templateId="",this.showPlanBlocker=!1,this.sendReminders=!1,this.firstReminderDays="1",this.reminderDays="1",this.dirty=!1}return c.prototype.componentWillLoad=function(){return y(this,void 0,void 0,function(){var e,t,s,o,r,n,l;return k(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),this.endpoint.loadSession(),this.templateId?this.endpoint.session?(n=this,[4,S(this.endpoint,this.templateId,!1)]):(console.log("[ROLES] Unable to start builder session, must be authenticated"),[2]):(console.log("[ROLES] Missing required template ID ".concat(this.templateId)),[2]);case 1:return n.store=d.sent(),this.sendReminders=!!(!((t=(e=this.store)===null||e===void 0?void 0:e.state)===null||t===void 0)&&t.reminder_id),this.dirty=!1,[3,3];case 2:return l=d.sent(),console.log("[TEMPLATE REMINDERS] Error loading template",l),(s=this.sdkError)===null||s===void 0||s.emit(new I(l.message,(o=l.response)===null||o===void 0?void 0:o.status,(r=l.response)===null||r===void 0?void 0:r.data)),[3,3];case 3:return[2]}})})},c.prototype.handleCancel=function(e){var t,s,o;e.stopPropagation(),this.sendReminders=!!(!((s=(t=this.store)===null||t===void 0?void 0:t.state)===null||s===void 0)&&s.reminder_id),this.dirty=!1,(o=this.close)===null||o===void 0||o.emit()},c.prototype.handleSave=function(e){return y(this,void 0,void 0,function(){var t,s,o,r,n,l,d,a,p,b,x,m,h,g;return k(this,function(v){switch(v.label){case 0:e.stopPropagation(),v.label=1;case 1:return v.trys.push([1,12,,13]),this.sendReminders?(b={setup_time:+this.firstReminderDays,interval_time:+this.reminderDays},!((s=(t=this.store)===null||t===void 0?void 0:t.state)===null||s===void 0)&&s.reminder_id?[3,4]:[4,he(this.endpoint,this.templateId,b)]):[3,8];case 2:return v.sent(),x=this,[4,S(this.endpoint,this.templateId,!1)];case 3:return x.store=v.sent(),[3,7];case 4:return[4,me(this.endpoint,this.templateId,(o=this.store)===null||o===void 0?void 0:o.state.reminder_id,b)];case 5:return v.sent(),m=this,[4,S(this.endpoint,this.templateId,!1)];case 6:m.store=v.sent(),v.label=7;case 7:return[3,11];case 8:return[4,ue(this.endpoint,this.templateId,(r=this.store)===null||r===void 0?void 0:r.state.reminder_id)];case 9:return v.sent(),h=this,[4,S(this.endpoint,this.templateId,!1)];case 10:h.store=v.sent(),v.label=11;case 11:return(n=this.templateUpdated)===null||n===void 0||n.emit({endpoint:this.endpoint,template:this.store.state,event:"attachments"}),[3,13];case 12:return g=v.sent(),console.log("[TEMPLATE REMINDERS] Unable to update reminders",g),De(g.message),(l=this.sdkError)===null||l===void 0||l.emit(new I(g.message,(d=g.response)===null||d===void 0?void 0:d.status,(a=g.response)===null||a===void 0?void 0:a.data)),[3,13];case 13:return this.dirty=!1,(p=this.close)===null||p===void 0||p.emit(),[2]}})})},c.prototype.render=function(){var e=this,t,s;return this.endpoint.session?!this.endpoint.session||!(!((s=(t=this.store)===null||t===void 0?void 0:t.state)===null||s===void 0)&&s.isLoaded)?i(w,{class:"empty"}):i(w,null,i("form",{onSubmit:function(o){return o.preventDefault()},onClick:function(o){return o.stopPropagation()},autocomplete:"off"},i("h5",null,"Reminders"),i("div",{class:"input-row"},i("label",{htmlFor:"verdocs-send-reminders"},"Send Automatic Reminders"),i("verdocs-checkbox",{id:"verdocs-send-reminders",name:"automatic-reminders",checked:this.sendReminders,value:"on",onInput:function(o){e.sendReminders=o.target.checked,e.dirty=!0}})),i("p",null,i("strong",null,"NOTE:")," Reminders will only be sent for up to 14 days."),i("div",{class:"input-row"},i("label",{htmlFor:"verdocs-first-reminder-days"},"Days Before First Reminder"),i("verdocs-text-input",{id:"verdocs-first-reminder-days",type:"number",value:this.firstReminderDays,onInput:function(o){e.firstReminderDays=o.target.value,e.dirty=!0},disabled:!this.sendReminders})),i("div",{class:"input-row"},i("label",{htmlFor:"verdocs-days-between-reminders"},"Days Between Reminders"),i("verdocs-text-input",{id:"verdocs-days-between-reminders",type:"number",value:this.reminderDays,onInput:function(o){e.reminderDays=o.target.value,e.dirty=!0},disabled:!this.sendReminders})),i("div",{class:"buttons"},i("verdocs-button",{size:"small",variant:"outline",label:"Cancel",disabled:!this.dirty,onClick:function(o){return e.handleCancel(o)}}),i("verdocs-button",{size:"small",label:"Save",disabled:!this.dirty,onClick:function(o){return e.handleSave(o)}}))),this.showPlanBlocker&&i("verdocs-ok-dialog",{heading:"Upgrade to access this feature",message:"Please upgrade your plan to access this feature.",onNext:function(){return e.showPlanBlocker=!1}})):i(w,null,i("verdocs-component-error",{message:"You must be authenticated to use this module."}))},c}();bt.style=gt;var xt='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-template-roles{display:block;min-width:400px;font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-template-roles>form{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;background-color:#ffffff;padding:12px}verdocs-template-roles>form h5{font-size:16px;font-weight:bold;color:#46497d;margin:0 0 10px 0}verdocs-template-roles>form .participants{position:relative}verdocs-template-roles>form .left-line{top:32px;left:11px;z-index:1;width:12px;bottom:30px;position:absolute;background:#ffffff;border-left:3px dotted #9b9b9b}verdocs-template-roles>form .row{display:-ms-flexbox;display:flex;-webkit-column-gap:0;-moz-column-gap:0;column-gap:0;min-height:35px;margin-left:40px;position:relative;-ms-flex-direction:row;flex-direction:row;padding:6px 0 4px 0}verdocs-template-roles>form .row .row-roles{-ms-flex:1;flex:1;gap:10px;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-direction:row;flex-direction:row}verdocs-template-roles>form .row .icon{top:14px;z-index:2;left:-40px;width:24px;height:24px;position:absolute;background:#ffffff}verdocs-template-roles>form .row .sender{height:30px;display:-ms-flexbox;display:flex;font-size:14px;line-height:30px;-ms-flex-align:center;align-items:center;border-radius:30px;-ms-flex-direction:row;flex-direction:row;padding:0 5px 0 15px;border:1px solid #c6c9cc;background-color:#f5f5fa}verdocs-template-roles>form .row .complete{height:30px;display:-ms-flexbox;display:flex;font-size:14px;padding:0 15px;line-height:30px;-ms-flex-direction:row;flex-direction:row;border-radius:30px;background-color:#f5f5fa;border:1px solid #aeb4bf}verdocs-template-roles>form .row .label{font-weight:bold;margin-right:6px;color:#33364b}verdocs-template-roles>form .row .settings-button{display:-ms-flexbox;display:flex;cursor:pointer;margin:0 0 0 9px}verdocs-template-roles>form .row .recipient{height:30px;display:-ms-flexbox;display:flex;font-size:14px;border-radius:30px;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;padding:0 5px 0 6px;white-space:nowrap;border:2px solid #aeb4bf}verdocs-template-roles>form .row .recipient .type-icon{width:24px;height:24px;-webkit-transform:scale(0.8);transform:scale(0.8);opacity:0.6;margin:0 12px 0 0}verdocs-template-roles>form .row .recipient.dragging{position:absolute}verdocs-template-roles>form .row .recipient.dragging+.dropzone{display:none !important}verdocs-template-roles>form .row .dropzone{width:14px;height:30px;display:none}verdocs-template-roles>form .row .dropzone svg{fill:#cccccc}verdocs-template-roles>form .row .dropzone.visible{margin:0 7px;display:-ms-flexbox;display:flex;-ms-flex:0 0 14px;flex:0 0 14px}verdocs-template-roles>form .row .dropzone.active{-ms-flex:0 0 120px;flex:0 0 120px;border-radius:30px;background:rgba(101, 77, 203, 0.4980392157);border:1px dashed #654dcb}verdocs-template-roles>form label{display:block;font-size:14px;font-weight:500;margin:0 0 4px 0;color:#5c6575}verdocs-template-roles>form input{border:none;font-size:18px;padding:3px 6px 3px 0;background:transparent;border-bottom:1px solid #33364b}verdocs-template-roles>form input:focus{outline:none}verdocs-template-roles .row.add-sequence{display:none}verdocs-template-roles .add-role{margin:0;padding:0;border:none;opacity:0.5;cursor:pointer;background:none}verdocs-template-roles .add-role:hover{opacity:1}verdocs-template-roles .add-role svg{width:32px;height:32px}verdocs-template-roles .add-step{margin:0;padding:0;border:none;opacity:0.5;cursor:pointer;background:none}verdocs-template-roles .add-step:hover{opacity:1}verdocs-template-roles .add-step svg{width:32px;height:32px}verdocs-template-roles.dragging .add-role{display:none}verdocs-template-roles.dragging form .row .recipient+.dropzone{display:-ms-flexbox;display:flex}verdocs-template-roles.dragging .row.add-sequence{display:-ms-flexbox;display:flex}verdocs-template-roles.dragging .row.add-sequence .dropzone{opacity:0.5;-ms-flex:0 0 120px;flex:0 0 120px;border-radius:30px;-ms-flex-align:center;align-items:center;background:rgba(101, 77, 203, 0.4980392157);-ms-flex-pack:center;justify-content:center;border:1px dashed #654dcb}verdocs-template-roles.dragging .row.add-sequence .dropzone.active{opacity:1}verdocs-template-roles .buttons{display:-ms-flexbox;display:flex;-webkit-column-gap:8px;-moz-column-gap:8px;column-gap:8px;margin-top:16px;-ms-flex-direction:row;flex-direction:row}verdocs-template-roles .empty{font-size:13px;margin-top:15px;margin-bottom:5px}verdocs-template-roles .empty svg{width:20px;height:20px;stroke:#666666;margin-bottom:-5px}verdocs-template-roles ::-webkit-input-placeholder{color:#aaaaaa}verdocs-template-roles ::-moz-placeholder{color:#aaaaaa}verdocs-template-roles :-ms-input-placeholder{color:#aaaaaa}verdocs-template-roles ::-ms-input-placeholder{color:#aaaaaa}verdocs-template-roles ::placeholder{color:#aaaaaa}',wt=xt,yt={everyone:"Everyone",everyone_as_creator:"Everyone as Me",organization_member:"Organization member",organization_member_as_creator:"Organization Member as Me",creator:"Me"},U='<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" fill="#00000089"><path d="m8.021 17.917-.313-2.5q-.27-.125-.625-.334-.354-.208-.625-.395l-2.312.979-1.979-3.438 1.979-1.5q-.021-.167-.031-.364-.011-.198-.011-.365 0-.146.011-.344.01-.198.031-.385l-1.979-1.5 1.979-3.417 2.312.958q.271-.187.615-.385t.635-.344l.313-2.5h3.958l.313 2.5q.312.167.625.344.312.177.604.385l2.333-.958 1.979 3.417-1.979 1.521q.021.187.021.364V10q0 .146-.01.333-.011.188-.011.396l1.958 1.5-1.979 3.438-2.312-.979q-.292.208-.615.395-.323.188-.614.334l-.313 2.5Zm1.937-5.355q1.063 0 1.813-.75t.75-1.812q0-1.062-.75-1.812t-1.813-.75q-1.041 0-1.802.75-.76.75-.76 1.812t.76 1.812q.761.75 1.802.75Zm0-1.333q-.5 0-.864-.364-.365-.365-.365-.865t.365-.865q.364-.364.864-.364t.865.364q.365.365.365.865t-.365.865q-.365.364-.865.364ZM10.021 10Zm-.854 6.583h1.666l.25-2.187q.605-.167 1.136-.49.531-.323 1.031-.802l2.021.875.854-1.375-1.792-1.354q.105-.333.136-.635.031-.303.031-.615 0-.292-.031-.573-.031-.281-.115-.635l1.792-1.396-.834-1.375-2.062.875q-.438-.438-1.021-.781-.583-.344-1.125-.49l-.271-2.208H9.167l-.271 2.208q-.584.146-1.125.458-.542.313-1.042.792l-2.021-.854-.833 1.375 1.75 1.354q-.083.333-.125.646-.042.312-.042.604t.042.594q.042.302.125.635l-1.75 1.375.833 1.375 2.021-.854q.479.458 1.021.771.542.312 1.146.479Z"/></svg>',kt='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" fill="#00000089"><path d="M2 12C2 6.48 6.48 2 12 2s10 4.48 10 10-4.48 10-10 10S2 17.52 2 12zm10 6c3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6 2.69 6 6 6z"></path></svg>',St='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" fill="#00000089"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></svg>',Ct='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" fill="#00000089"><path d="m18 7-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41 6 19l1.41-1.41L1.83 12 .41 13.41z"></path></svg>',R='<svg xmlns="http://www.w3.org/2000/svg" fill="#ffffff" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>',$='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="m9.225 21.225 4.65-4.65h8.45v4.65Zm-5.35-2.2H5.05l8.5-8.5-1.175-1.175-8.5 8.5Zm14.25-9.95L13.8 4.8l1.325-1.325q.625-.65 1.525-.663.9-.012 1.6.663l1.225 1.175q.675.675.663 1.562-.013.888-.663 1.513ZM16.7 10.55 6 21.225H1.675V16.9L12.35 6.225Zm-3.725-.625-.6-.575 1.175 1.175Z"/></svg>',K='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z" clip-rule="evenodd" /></svg>',G='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M1.5 8.67v8.58a3 3 0 003 3h15a3 3 0 003-3V8.67l-8.928 5.493a3 3 0 01-3.144 0L1.5 8.67z" /><path d="M22.5 6.908V6.75a3 3 0 00-3-3h-15a3 3 0 00-3 3v.158l9.714 5.978a1.5 1.5 0 001.572 0L22.5 6.908z" /></svg>',It=function(){function c(e){q(this,e),this.next=f(this,"next",7),this.exit=f(this,"exit",7),this.sdkError=f(this,"sdkError",7),this.rolesUpdated=f(this,"rolesUpdated",7),this.templateStore=null,this.roleStore=null,this.endpoint=L.getDefault(),this.templateId="",this.showingRoleDialog=null,this.showingSenderDialog=!1,this.sender=null,this.loading=!0}return c.prototype.componentWillLoad=function(){return y(this,void 0,void 0,function(){var e,t,s,o,r=this;return k(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.endpoint.loadSession(),this.templateId?this.endpoint.session?[4,S(this.endpoint,this.templateId,!1).then(function(l){var d;r.templateStore=l,r.roleStore=A(r.templateId),console.log("RS",(d=r.roleStore)===null||d===void 0?void 0:d.state),r.loading=!1,r.roleStore.onChange("roles",function(a){var p;console.log("[ROLES] Roles changed",{roles:a}),(p=r.rolesUpdated)===null||p===void 0||p.emit({event:"updated",endpoint:r.endpoint,templateId:r.templateId,roles:a})})}).catch(function(l){console.log(l)})]:(console.log("[ROLES] Unable to start builder session, must be authenticated"),[2]):(console.log("[ROLES] Missing required template ID ".concat(this.templateId)),[2]);case 1:return n.sent(),[3,3];case 2:return o=n.sent(),console.log("[FIELDS] Error with preview session",o),(e=this.sdkError)===null||e===void 0||e.emit(new I(o.message,(t=o.response)===null||t===void 0?void 0:t.status,(s=o.response)===null||s===void 0?void 0:s.data)),[3,3];case 3:return[2]}})})},c.prototype.componentDidRender=function(){z.dynamicDrop(!0),z(".recipient").draggable({listeners:{start:(function(t){t.target.classList.add("dragging"),this.el.classList.add("dragging")}).bind(this),move:(function(t){var s=+(t.target.getAttribute("dX")||0),o=+(t.target.getAttribute("dY")||0),r=+(t.target.dataset.sequence||0),n=+(t.target.dataset.order||0),l=t.dx+s,d=t.dy+o;t.target.setAttribute("dX",l),t.target.setAttribute("dY",d);var a=t.target.getBoundingClientRect();console.log("w",a.width),t.target.style.transform="translate(".concat(l+a.width-(n+1),"px, ").concat(d-a.height*r,"px)")}).bind(this),end:(function(t){t.target.classList.remove("dragging"),this.el.classList.remove("dragging"),t.target.removeAttribute("dX"),t.target.removeAttribute("dY"),t.target.style.transform=null}).bind(this)}}),z(".dropzone").dropzone({overlap:.05,ondrop:(function(t){return y(this,void 0,void 0,function(){var s,o,r,n;return k(this,function(l){switch(l.label){case 0:return console.log("dropped",t.target.classList),t.target.classList.remove("active"),o=t.relatedTarget.dataset.rolename,r=+t.target.dataset.sequence,n=+t.target.dataset.order,xe(this.roleStore,o,{sequence:r,order:n}),[4,this.renumberTemplateRoles()];case 1:return l.sent(),console.log("[ROLES] Updated roles",this.getSortedRoles()),(s=this.rolesUpdated)===null||s===void 0||s.emit({event:"updated",endpoint:this.endpoint,templateId:this.templateId,roles:this.getSortedRoles()}),[2]}})})}).bind(this),ondropactivate:function(e){e.target.classList.add("visible")},ondropdeactivate:function(e){e.target.classList.remove("visible")},ondragenter:function(e){e.target.classList.add("active")},ondragleave:function(e){e.target.classList.remove("active")}})},c.prototype.handleCancel=function(){var e;(e=this.exit)===null||e===void 0||e.emit()},c.prototype.handleSubmit=function(){var e;(e=this.next)===null||e===void 0||e.emit()},c.prototype.getSortedRoles=function(){return this.roleStore.state.roles.sort(function(e,t){return e.sequence===t.sequence?e.order-t.order:e.sequence-t.sequence})},c.prototype.getSequenceNumbers=function(){var e=[];return this.getSortedRoles().forEach(function(t){e.includes(t.sequence)||e.push(t.sequence)}),e.sort(function(t,s){return t-s})},c.prototype.getRoleNames=function(){var e=this.getSortedRoles();return e.map(function(t){return t.name})},c.prototype.getRolesAtSequence=function(e){return this.roleStore.state.roles.filter(function(t){return t&&t.sequence===e})},c.prototype.renumberTemplateRoles=function(){var e=this,t=[],s=[];return this.getSequenceNumbers().forEach(function(o,r){e.getRolesAtSequence(o).forEach(function(n,l){t.includes(n.name)||(n.sequence=r+1,n.order=l+1,t.push(n.name),s.push(ve(e.endpoint,e.templateId,n.name,{sequence:n.sequence,order:n.order})))})}),Promise.all(s)},c.prototype.getNextRoleName=function(){var e="",t=Object.keys(this.roleStore.state).length-1;do t++,e="Recipient ".concat(t);while(!e||this.roleStore.state.roles.some(function(s){return s&&s.name===e}));return e},c.prototype.callCreateRole=function(e,t,s){var o=this;console.log("[ROLES] Will create role",{name:e,sequence:t,order:s}),fe(this.endpoint,this.templateId,{template_id:this.templateId,name:e,sequence:t,message:"",order:s,full_name:"",email:"",phone:"",type:"signer",delegator:!1}).then(function(r){return y(o,void 0,void 0,function(){var n;return k(this,function(l){switch(l.label){case 0:return console.log("[ROLES] Created role",r),this.roleStore.set("roles",H(H([],this.roleStore.state.roles,!0),[r],!1)),[4,this.renumberTemplateRoles()];case 1:return l.sent(),(n=this.rolesUpdated)===null||n===void 0||n.emit({event:"added",endpoint:this.endpoint,templateId:this.templateId,roles:this.getSortedRoles()}),[2]}})})}).catch(function(r){console.log("[ROLES] Error creating role",r)})},c.prototype.handleAddRole=function(e,t){e.stopPropagation();var s=this.getRolesAtSequence(t).length+1,o=this.getNextRoleName();this.callCreateRole(o,t,s)},c.prototype.handleAddStep=function(e,t){e.stopPropagation();var s=1,o=this.getNextRoleName();this.callCreateRole(o,t,s)},c.prototype.render=function(){var e=this,t,s,o,r;if(!this.endpoint.session)return i(w,null,i("verdocs-component-error",{message:"You must be authenticated to use this module."}));if(this.loading||!(!((t=this.templateStore)===null||t===void 0)&&t.state.isLoaded))return console.log("Loading",this.loading,(s=this.templateStore)===null||s===void 0?void 0:s.state.isLoaded),i(w,{class:"loading"},i("verdocs-loader",null));console.log("Rendering roles",this.roleStore.get("roles"));var n=this.getRoleNames(),l=this.getSequenceNumbers();return console.log("Rendering",n,l),i(w,null,i("form",{onSubmit:function(d){return d.preventDefault()},onClick:function(d){return d.stopPropagation()},autocomplete:"off"},i("h5",null,"Roles and Workflow"),i("div",{class:"participants"},i("div",{class:"left-line"}),i("div",{class:"row"},i("div",{class:"icon",innerHTML:kt}),i("div",{class:"row-roles"},i("div",{class:"sender"},i("span",{class:"label"},"Sender:")," ",yt[(r=(o=this.templateStore)===null||o===void 0?void 0:o.state)===null||r===void 0?void 0:r.sender]," ",i("div",{class:"settings-button",innerHTML:U,onClick:function(){return e.showingSenderDialog=!0},"aria-role":"button"})))),i("div",{class:"row add-sequence","data-sequence":0},i("div",{class:"icon",innerHTML:R}),i("div",{class:"row-roles"},i("div",{class:"dropzone","data-sequence":0,"data-order":1},"Add Step"))),l.map(function(d){return i(P,null,i("div",{class:"row"},i("div",{class:"icon",innerHTML:St}),i("div",{class:"row-roles"},i("div",{class:"dropzone","data-order":.5,"data-sequence":d}),e.getRolesAtSequence(d).map(function(a){var p=!a.email;return p?i(P,null,i("div",{class:"recipient",style:{backgroundColor:_(V(e.roleStore,a.name))},"data-rolename":a.name,"data-sequence":d,"data-order":a.order},i("span",{class:"type-icon",innerHTML:a.type==="signer"?$:a.type==="cc"?G:K}),a.name," ",i("div",{class:"settings-button",innerHTML:U,onClick:function(){return e.showingRoleDialog=a.name},"aria-role":"button"})),i("div",{class:"dropzone","data-order":a.order+.5,"data-sequence":d})):i(P,null,i("div",{class:"recipient",style:{borderColor:_(V(e.roleStore,a.name))},"data-rolename":a.name,"data-sequence":d,"data-order":a.order},i("span",{class:"type-icon",innerHTML:a.type==="signer"?$:a.type==="cc"?G:K}),a.full_name," ",i("div",{class:"settings-button",innerHTML:U,onClick:function(){return e.showingRoleDialog=a.name},"aria-role":"button"})),i("div",{class:"dropzone","data-order":a.order+.5,"data-sequence":d}))}),i("button",{class:"add-role",innerHTML:R,onClick:function(a){return e.handleAddRole(a,d)}}))),l.length>0&&i("div",{class:"row add-sequence","data-sequence":d},i("div",{class:"row-roles"},i("div",{class:"icon",innerHTML:R}),i("div",{class:"dropzone","data-sequence":d+1,"data-order":1},"Add Step"))))}),i("div",{class:"row","data-sequence":l.length+1},i("div",{class:"row-roles"},i("div",{class:"icon",innerHTML:R}),i("button",{class:"add-step",innerHTML:R,onClick:function(d){return e.handleAddStep(d,l.length+1)}}))),i("div",{class:"row"},i("div",{class:"icon",innerHTML:Ct}),i("div",{class:"row-roles"},i("div",{class:"complete"},"Document Complete")))),n.length<1&&i("div",{class:"empty"},"You must add at least one Role before proceeding.",i("br",null)," Click the ",i("span",{innerHTML:R})," Add button above to get started."),i("div",{class:"buttons"},i("div",{class:"flex-fill"}),i("verdocs-button",{variant:"outline",label:"Cancel",size:"small",onClick:function(){return e.handleCancel()}}),i("verdocs-button",{label:"OK",size:"small",onClick:function(){return e.handleSubmit()},disabled:n.length<1}))),this.showingRoleDialog&&i("verdocs-template-role-properties",{endpoint:this.endpoint,templateId:this.templateId,roleName:this.showingRoleDialog,onClose:function(){e.showingRoleDialog=null},onDelete:function(){return y(e,void 0,void 0,function(){var d;return k(this,function(a){switch(a.label){case 0:return this.showingRoleDialog=null,[4,this.renumberTemplateRoles()];case 1:return a.sent(),(d=this.rolesUpdated)===null||d===void 0||d.emit({event:"deleted",endpoint:this.endpoint,templateId:this.templateId,roles:this.getSortedRoles()}),[2]}})})}}),this.showingSenderDialog&&i("verdocs-template-sender",{endpoint:this.endpoint,templateId:this.templateId,onClose:function(){return e.showingSenderDialog=!1}}))},Object.defineProperty(c.prototype,"el",{get:function(){return ie(this)},enumerable:!1,configurable:!0}),c}();It.style=wt;var Et='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-template-visibility{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-template-visibility.loading{min-height:300px;position:relative;display:block}verdocs-template-visibility.empty{display:none}verdocs-template-visibility form{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}verdocs-template-visibility form .description{font-size:14px;text-align:justify;color:#5c6575}verdocs-template-visibility form h5{font-size:16px;font-weight:bold;color:#4c56cb;margin:0}verdocs-template-visibility form label{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;font-size:16px;font-weight:500;margin:0 0 4px 0;color:#33364b}verdocs-template-visibility form input{border:none;font-size:18px;padding:3px 6px 3px 0;background:transparent;border-bottom:1px solid #33364b}verdocs-template-visibility form input:focus{outline:none}verdocs-template-visibility form .input-row{display:-ms-flexbox;display:flex;margin:20px 0 0 0;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row}verdocs-template-visibility form .input-row verdocs-text-input{margin:0;display:-ms-flexbox;display:flex;-ms-flex:0 0 40px;flex:0 0 40px}verdocs-template-visibility form .input-row verdocs-text-input input{text-align:center}verdocs-template-visibility form .input-row verdocs-checkbox{-ms-flex:0;flex:0;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}verdocs-template-visibility form .input-row verdocs-checkbox label>input[type=checkbox]+*::before{margin-right:0}verdocs-template-visibility .buttons{display:-ms-flexbox;display:flex;-webkit-column-gap:8px;-moz-column-gap:8px;column-gap:8px;margin-top:25px;-ms-flex-direction:row;flex-direction:row}verdocs-template-visibility ::-webkit-input-placeholder{color:#aaaaaa}verdocs-template-visibility ::-moz-placeholder{color:#aaaaaa}verdocs-template-visibility :-ms-input-placeholder{color:#aaaaaa}verdocs-template-visibility ::-ms-input-placeholder{color:#aaaaaa}verdocs-template-visibility ::placeholder{color:#aaaaaa}',qt=Et,Lt=function(){function c(e){q(this,e),this.close=f(this,"close",7),this.sdkError=f(this,"sdkError",7),this.templateUpdated=f(this,"templateUpdated",7),this.store=null,this.endpoint=L.getDefault(),this.templateId="",this.dirty=!1,this.personal=!1,this.public=!1}return c.prototype.componentWillLoad=function(){return y(this,void 0,void 0,function(){var e,t,s,o,r,n,l,d,a;return k(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),this.endpoint.loadSession(),this.templateId?this.endpoint.session?(d=this,[4,S(this.endpoint,this.templateId,!1)]):(console.log("[VISIBILITY] Unable to start builder session, must be authenticated"),[2]):(console.log("[VISIBILITY] Missing required template ID ".concat(this.templateId)),[2]);case 1:return d.store=p.sent(),this.personal=((t=(e=this.store)===null||e===void 0?void 0:e.state)===null||t===void 0?void 0:t.is_personal)||!0,this.public=((o=(s=this.store)===null||s===void 0?void 0:s.state)===null||o===void 0?void 0:o.is_public)||!1,this.dirty=!1,[3,3];case 2:return a=p.sent(),console.log("[TEMPLATE VISIBILITY] Error loading template",a),(r=this.sdkError)===null||r===void 0||r.emit(new I(a.message,(n=a.response)===null||n===void 0?void 0:n.status,(l=a.response)===null||l===void 0?void 0:l.data)),[3,3];case 3:return[2]}})})},c.prototype.handleCancel=function(e){var t,s,o,r,n;e.stopPropagation(),this.personal=(s=(t=this.store)===null||t===void 0?void 0:t.state)===null||s===void 0?void 0:s.is_personal,this.public=(r=(o=this.store)===null||o===void 0?void 0:o.state)===null||r===void 0?void 0:r.is_public,this.dirty=!1,(n=this.close)===null||n===void 0||n.emit()},c.prototype.handleSave=function(e){return y(this,void 0,void 0,function(){var t,s,o;return k(this,function(r){switch(r.label){case 0:return e.stopPropagation(),[4,ee(this.endpoint,this.templateId,{is_personal:this.personal,is_public:this.public})];case 1:return r.sent(),!((t=this.store)===null||t===void 0)&&t.state&&(this.store.state.is_personal=this.personal,this.store.state.is_public=this.public),this.dirty=!1,(s=this.templateUpdated)===null||s===void 0||s.emit({endpoint:this.endpoint,template:this.store.state,event:"visibility"}),(o=this.close)===null||o===void 0||o.emit(),[2]}})})},c.prototype.render=function(){var e=this,t,s;return this.endpoint.session?!this.endpoint.session||!(!((s=(t=this.store)===null||t===void 0?void 0:t.state)===null||s===void 0)&&s.isLoaded)?i(w,{class:"empty"}):i(w,null,i("form",{onSubmit:function(o){return o.preventDefault()},onClick:function(o){return o.stopPropagation()},autocomplete:"off"},i("h5",null,"Visibility"),i("div",{class:"input-row"},i("label",{htmlFor:"verdocs-is-shared"},"Shared"),i("verdocs-checkbox",{id:"verdocs-is-shared",name:"is-shared",checked:!this.personal,value:"on",onInput:function(o){e.personal=!o.target.checked,e.dirty=!0}})),i("div",{class:"description"},"Shared templates are visible to other members of your Organization (if any)."),i("div",{class:"input-row"},i("label",{htmlFor:"verdocs-is-public"},"Public"),i("verdocs-checkbox",{id:"verdocs-is-public",name:"is-public",checked:this.public,value:"on",onInput:function(o){e.public=o.target.checked,e.dirty=!0}})),i("div",{class:"description"},"Public templates may appear in results when any other user searches for templates. Note that a template may be both Personal and Public, which may be useful if you want your template to be found via search but not otherwise displayed to other members of your Organization (if any)."),i("div",{class:"buttons"},i("verdocs-button",{size:"small",variant:"outline",label:"Cancel",disabled:!this.dirty,onClick:function(o){return e.handleCancel(o)}}),i("verdocs-button",{size:"small",label:"Save",disabled:!this.dirty,onClick:function(o){return e.handleSave(o)}})))):i(w,null,i("verdocs-component-error",{message:"You must be authenticated to use this module."}))},c}();Lt.style=qt;export{_e as verdocs_preview,Ue as verdocs_send,Oe as verdocs_template_attachments,Ye as verdocs_template_build_tabs,Je as verdocs_template_create,ut as verdocs_template_fields,vt as verdocs_template_name,bt as verdocs_template_reminders,It as verdocs_template_roles,Lt as verdocs_template_visibility};

import{r as c,c as u,h as e}from"./preview-X13RbvS2.js";import{V as h,c as p,a as m,d as g,r as v,b}from"./index-CL2BROP6.js";import{V as n}from"./Toast-b71de686-C5I_O3Ev.js";import{S as d}from"./errors-887f1e88-DR-_BPTJ.js";import"./chunk-QN4WKJDJ-Bf_F3oir.js";import"./iframe-DWV1oore.js";import"../sb-preview/runtime.js";const f='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-auth{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}verdocs-auth .form{background:#ffffff;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-ms-flex-direction:column;flex-direction:column;display:-ms-flexbox;display:flex;padding:20px;width:300px;max-width:100%}verdocs-auth .logo{margin:20px 0 30px;width:128px;max-width:100%}verdocs-auth h3{text-align:center;font-weight:400;font-size:16px;line-height:1.75;margin:0}verdocs-auth h4{text-align:center;font-weight:400;font-size:14px;line-height:1.43;margin:0}verdocs-auth h4 verdocs-button button.normal .button-label{padding:0}verdocs-auth .buttons{gap:20px;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:center;justify-content:center}verdocs-auth .status-result{display:none}verdocs-auth .status-result.debug{white-space:pre-wrap;font-size:14px;background:#fff;padding:10px;display:block;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:center;justify-content:center}verdocs-auth form{width:100%}verdocs-auth verdocs-text-input{margin-bottom:10px}verdocs-auth .account-option{gap:8px;margin:20px 0 8px 0;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}verdocs-auth p+p{margin-top:0}verdocs-auth verdocs-help-icon{margin-top:18px;display:-ms-flexbox;display:flex;width:32px;height:32px;-ms-flex:0 0 32px;flex:0 0 32px}',y=f,x=5e3,k=[{value:"",label:""},{value:"Accounting & Tax",label:"Accounting & Tax"},{value:"Business Services / Consulting",label:"Business Services / Consulting"},{value:"Construction",label:"Construction"},{value:"Education",label:"Education"},{value:"Financial Services",label:"Financial Services"},{value:"Government",label:"Government"},{value:"Healthcare - Health Plans & Payers",label:"Healthcare - Health Plans & Payers"},{value:"Healthcare - Providers",label:"Healthcare - Providers"},{value:"Insurance",label:"Insurance"},{value:"Legal",label:"Legal"},{value:"Life Sciences",label:"Life Sciences"},{value:"Manufacturing",label:"Manufacturing"},{value:"Mortgage",label:"Mortgage"},{value:"Not For Profit",label:"Not For Profit"},{value:"Real Estate - Commercial",label:"Real Estate - Commercial"},{value:"Real Estate - Residential",label:"Real Estate - Residential"},{value:"Retail",label:"Retail"},{value:"Technology",label:"Technology"},{value:"Other",label:"Other"}],w=[{value:"",label:""},{value:"I want to send a document for signature.",label:"I want to send a document for signature."},{value:"I just need to sign a document today.",label:"I just need to sign a document today."},{value:"I'm evaluating it for my business.",label:"I'm evaluating it for my business."},{value:"I'm evaluating it for my personal use.",label:"I'm evaluating it for my personal use."},{value:"I'm a developer building an integration.",label:"I'm a developer building an integration."}],T=[{value:"",label:""},{value:"Solo",label:"Solo"},{value:"2-10",label:"2-10"},{value:"11-50",label:"11-50"},{value:"51-200",label:"51-200"},{value:"201-500",label:"201-500"},{value:"501-1000",label:"501-1000"},{value:"1000+",label:"1000+"}],S=class{constructor(t){c(this,t),this.authenticated=u(this,"authenticated",7),this.sdkError=u(this,"sdkError",7),this.recheckTimer=null,this.resendDisabledTimer=null,this.accessTokenForVerification=null,this.endpoint=h.getDefault(),this.visible=!0,this.logo="https://app.verdocs.com/assets/blue-logo.svg",this.isAuthenticated=!1,this.displayMode="login",this.orgname="",this.first="",this.last="",this.username="",this.phone="",this.password="",this.submitting=!1,this.activeSession=null,this.accountType="org",this.howHear="",this.industry="",this.companySize="",this.reason="",this.signupStep=1,this.resendDisabled=!1,this.checkingOrg=!1}componentWillLoad(){var t,i;this.endpoint.loadSession(),this.endpoint.session?(console.log("[AUTH] Authenticated"),this.isAuthenticated=!0,this.activeSession=this.endpoint.session,(t=this.authenticated)===null||t===void 0||t.emit({authenticated:!0,session:this.endpoint.session})):(console.log("[AUTH] Anonymous"),(i=this.authenticated)===null||i===void 0||i.emit({authenticated:!1,session:null}))}disconnectedCallback(){this.cancelRecheckTimer()}cancelRecheckTimer(){if(this.recheckTimer){try{clearTimeout(this.recheckTimer)}catch{}this.recheckTimer=null}if(this.resendDisabledTimer){try{clearTimeout(this.resendDisabledTimer)}catch{}this.resendDisabledTimer=null}}handleSignup(){this.submitting=!0,this.accessTokenForVerification=null,p(this.endpoint,{email:this.username,password:this.password,firstName:this.first,lastName:this.last,orgName:this.orgname}).then(t=>{console.log("Result",t),console.log("[AUTH] Created profile",t.profile),console.log("[AUTH] Created organization",t.organization),this.loginAndCheckVerification()}).catch(t=>{var i,s,o,a,l,r;console.log("[AUTH] Signup error",t.response),this.submitting=!1,this.activeSession=null,(i=this.authenticated)===null||i===void 0||i.emit({authenticated:!1,session:null}),(s=this.sdkError)===null||s===void 0||s.emit(new d(t.message,(o=t.response)===null||o===void 0?void 0:o.status,(a=t.response)===null||a===void 0?void 0:a.data)),n("Signup failed: "+((r=(l=t.response)===null||l===void 0?void 0:l.data)===null||r===void 0?void 0:r.message)||"Unknown Error",{style:"error"})})}loginAndCheckVerification(){this.submitting=!0,this.accessTokenForVerification=null,m(this.endpoint,{username:this.username,password:this.password}).then(t=>{var i;this.cancelRecheckTimer(),this.submitting=!1;const s=g(t.accessToken);console.log("[AUTH] Got access token body",s),s!=null&&s.email_verified?(console.log("[AUTH] Email address is verified, completing login"),this.displayMode="login",this.accessTokenForVerification=null,this.endpoint.setToken(t.accessToken),this.activeSession=this.endpoint.session,this.isAuthenticated=!0,(i=this.authenticated)===null||i===void 0||i.emit({authenticated:!0,session:this.endpoint.session})):(console.log("[AUTH] Logged in, pending email address verification"),this.displayMode="verify",this.accessTokenForVerification=t.accessToken,this.recheckTimer=setTimeout(()=>this.loginAndCheckVerification(),x))}).catch(t=>{var i,s,o,a;this.cancelRecheckTimer(),console.log("[AUTH] Authentication error",t.response,JSON.stringify(t)),this.displayMode="login",this.submitting=!1,this.activeSession=null,(i=this.authenticated)===null||i===void 0||i.emit({authenticated:!1,session:null}),(s=this.sdkError)===null||s===void 0||s.emit(new d(t.message,(o=t.response)===null||o===void 0?void 0:o.status,(a=t.response)===null||a===void 0?void 0:a.data)),n("Login failed. Please check your username and password and try again.",{style:"error"})})}handleLogout(){var t;this.endpoint.clearSession(),this.isAuthenticated=!1,this.accessTokenForVerification=null,(t=this.authenticated)===null||t===void 0||t.emit({authenticated:!1,session:null})}handleResend(){this.resendDisabled=!0,this.resendDisabledTimer=setTimeout(()=>{this.resendDisabled=!1,this.resendDisabledTimer=null},3e4),v(this.endpoint,this.accessTokenForVerification).then(t=>{console.log("[AUTH] Verification request resent",t),n("Please check your email for a message with verification instructions.",{style:"info"})}).catch(t=>{console.log("[AUTH] Unable to resend verification",t)})}handleReset(){this.submitting=!0,b(this.endpoint,{email:this.username}).then(t=>{console.log("[AUTH] Reset sent",t),this.submitting=!1,this.displayMode="login",n("If your email address is registered, you will receive instructions on resetting your password shortly.",{style:"info"})}).catch(t=>{console.log("[AUTH] Unable to reset password",t),this.submitting=!1})}render(){if(!this.visible)return e("div",{style:{display:"none"}},"Authenticated");if(this.isAuthenticated)return e("verdocs-button",{label:"Sign Out",disabled:this.submitting,onClick:()=>this.handleLogout(),style:{display:"flex",justifyContent:"center",margin:"30px auto 0"}});if(this.displayMode==="signup"){const t=this.submitting||!this.first||!this.last||!this.username||!this.password||!this.orgname;return e("div",{class:"form"},e("a",{href:"https://verdocs.com/en/"},e("img",{src:this.logo,alt:"Verdocs Logo",class:"logo"})),e("h3",null,"Sign up for a trial account"),e("h4",null,"Already have an account?",e("verdocs-button",{label:"Log In",variant:"text",onClick:()=>this.displayMode="login",disabled:this.submitting})),this.signupStep===1&&e("form",{onSubmit:()=>this.handleSignup()},e("div",{style:{display:"flex",flexDirection:"row",columnGap:"20px"}},e("verdocs-text-input",{label:"First Name",autocomplete:"first",required:!0,value:this.first,onInput:i=>this.first=i.target.value,disabled:this.submitting}),e("verdocs-text-input",{label:"Last Name",autocomplete:"last",required:!0,value:this.last,onInput:i=>this.last=i.target.value,disabled:this.submitting})),e("verdocs-text-input",{label:"Email",autocomplete:"email",required:!0,value:this.username,onInput:i=>this.username=i.target.value,disabled:this.submitting}),e("verdocs-text-input",{label:"Phone #",autocomplete:"phone",value:this.phone,onInput:i=>this.phone=i.target.value,disabled:this.submitting}),e("verdocs-text-input",{label:"Password",type:"password",required:!0,autocomplete:"current-password",value:this.password,onInput:i=>this.password=i.target.value,disabled:this.submitting}),e("verdocs-text-input",{label:"Organization Name",autocomplete:"org",required:!0,value:this.orgname,onInput:i=>this.orgname=i.target.value,disabled:this.submitting,style:{flex:"1"}}),e("div",{style:{marginTop:"30px"}}),e("verdocs-button",{label:"Next",disabled:t,onClick:()=>this.signupStep=2,style:{display:"flex",justifyContent:"center",margin:"30px auto 0"}})),this.signupStep===2&&e("form",{onSubmit:()=>this.handleSignup()},e("verdocs-text-input",{label:"How did you hear about Verdocs?",value:this.howHear,onInput:i=>this.howHear=i.target.value,disabled:this.submitting}),e("verdocs-select-input",{label:"Your Industry",options:k,value:this.industry,onInput:i=>this.industry=i.target.value,disabled:this.submitting}),e("verdocs-select-input",{label:"Company Size",options:T,value:this.companySize,onInput:i=>this.companySize=i.target.value,disabled:this.submitting}),e("verdocs-select-input",{label:"Purpose",options:w,value:this.reason,onInput:i=>this.reason=i.target.value,disabled:this.submitting}),e("div",{style:{marginTop:"30px"}}),e("verdocs-button",{label:"Create Account",disabled:this.submitting,onClick:()=>this.handleSignup(),style:{display:"flex",justifyContent:"center",margin:"30px auto 0"}})),this.signupStep===3&&e("form",{onSubmit:()=>this.handleSignup()},e("p",null,"Please check your e-mail inbox for a verification code and follow the instructions provided."),e("p",null,e("em",null,"Verification messages may take up to 1 hour to arrive. If you do not receive the invitation, ",e("a",{href:"#"},"Click Here")," to resend it. Be sure to check your spam folder.")),e("div",{style:{display:"flex",flexDirection:"row",gap:"20px"}},e("verdocs-button",{label:"Back",disabled:this.submitting,onClick:()=>{this.signupStep=2},style:{display:"flex",justifyContent:"center",margin:"30px auto 0"}}),e("verdocs-button",{label:"Go to Dashboard",disabled:!0,onClick:()=>this.handleSignup(),style:{display:"flex",justifyContent:"center",margin:"30px auto 0"}}))))}return this.displayMode==="forgot"?e("div",{class:"form"},e("a",{href:"https://verdocs.com/en/"},e("img",{src:this.logo,alt:"Verdocs Logo",class:"logo"})),e("h3",null,"Forgot your password?"),e("p",null,"Enter your e-mail address below, and reset instructions will be sent to your Inbox."),e("p",null,e("em",null,"Please allow up to 24 hours for delivery, and check your spam folder if you do not receive the message. ")),e("form",{onSubmit:()=>this.handleSignup()},e("verdocs-text-input",{label:"Email",autocomplete:"email",required:!0,value:this.username,onInput:t=>this.username=t.target.value,disabled:this.submitting}),e("div",{style:{marginTop:"30px"}}),e("div",{class:"buttons"},e("verdocs-button",{label:"Cancel",variant:"outline",disabled:this.submitting,onClick:()=>this.displayMode="login"}),e("verdocs-button",{label:"Reset",disabled:this.submitting,onClick:()=>this.handleReset()})))):this.displayMode==="verify"?e("div",{class:"form"},e("img",{src:this.logo,alt:"Verdocs Logo",class:"logo"}),e("h3",null,"Please Verify your Email Address"),e("p",null,"Check your e-mail inbox for a verification email, and follow the instructions provided."),e("p",null,e("em",null,"Please allow up to 24 hours for delivery, and check your spam folder if you do not receive the message. ")),e("div",{class:"buttons"},e("verdocs-button",{label:"Sign Out",variant:"outline",disabled:this.submitting,onClick:()=>{this.username="",this.password="",this.cancelRecheckTimer(),this.displayMode="login"}}),e("verdocs-button",{label:"Resend Email",disabled:this.resendDisabled,onClick:()=>this.handleResend()}))):e("div",{class:"form"},e("a",{href:"https://verdocs.com/en/"},e("img",{src:this.logo,alt:"Verdocs Logo",class:"logo"})),e("h3",null,"Log in to your account"),e("h4",null,"Don't have an account?",e("verdocs-button",{label:"Sign Up",variant:"text",onClick:()=>{this.displayMode="signup",this.signupStep=1},disabled:this.submitting})),e("form",{onSubmit:()=>this.loginAndCheckVerification()},e("verdocs-text-input",{label:"Email",autocomplete:"username",value:this.username,onInput:t=>this.username=t.target.value,disabled:this.submitting}),e("verdocs-text-input",{label:"Password",type:"password",autocomplete:"current-password",value:this.password,onInput:t=>this.password=t.target.value,disabled:this.submitting}),e("verdocs-button",{label:"Forgot Your Password?",variant:"text",onClick:()=>this.displayMode="forgot",disabled:this.submitting,style:{display:"flex",justifyContent:"center",margin:"10px auto 20px"}}),e("verdocs-button",{label:"Login",disabled:this.submitting,onClick:()=>this.loginAndCheckVerification(),style:{display:"flex",justifyContent:"center",margin:"10px auto 0"}})))}};S.style=y;export{S as verdocs_auth};

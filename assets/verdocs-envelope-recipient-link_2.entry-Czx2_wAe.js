import{r as p,c as l,h as t,H as c}from"./preview-X13RbvS2.js";import{V as m,M as u,m as h,N as v}from"./index-CL2BROP6.js";import{g as x}from"./EnvelopeStore-fefba6fd-CA3Piyct.js";import{V as d}from"./Toast-b71de686-C5I_O3Ev.js";import{S as g}from"./errors-887f1e88-DR-_BPTJ.js";import"./index-7456b04f-CtY4qLFG.js";import"./chunk-QN4WKJDJ-Bf_F3oir.js";import"./iframe-DWV1oore.js";import"../sb-preview/runtime.js";import"./index-296aabaf-BfkBbDig.js";const f='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-envelope-recipient-link{top:0;left:0;right:0;bottom:0;display:-ms-flexbox;display:flex;z-index:100000;position:fixed;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;font-family:"Inter", "Barlow", sans-serif;background-color:rgba(0, 0, 0, 0.4980392157)}verdocs-envelope-recipient-link .summary-content{width:600px;display:-ms-flexbox;display:flex;max-width:90%;font-size:18px;-ms-flex:0 0 600px;flex:0 0 600px;border-radius:6px;background:#ffffff;-ms-flex-direction:column;flex-direction:column;padding:30px 20px 20px}verdocs-envelope-recipient-link .summary-content .summary-title{font-size:20px;font-weight:700;margin:0 0 10px 0;color:#33364b}verdocs-envelope-recipient-link .summary-recipient{display:-ms-flexbox;display:flex;color:#33364b;margin:8px 0 24px 0;-ms-flex-direction:column;flex-direction:column}verdocs-envelope-recipient-link .summary-recipient .role-name{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;font-size:14px;font-weight:600;margin:0 0 8px 0;color:#092c4c}verdocs-envelope-recipient-link .summary-recipient .role-info{gap:5px;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:end;align-items:flex-end}verdocs-envelope-recipient-link .summary-recipient .role-full-name{-ms-flex:1;flex:1;height:34px;display:-ms-flexbox;display:flex;font-size:16px;padding:0 12px;border-radius:4px;-ms-flex-align:center;align-items:center;border:1px solid #cccccc;background:rgb(249, 250, 251)}verdocs-envelope-recipient-link .summary-recipient .recipient-link{width:120px;padding:0 16px;font-weight:500;margin:0 0 0 8px;text-align:center;font-size:0.875rem;border-radius:100%;color:rgb(55, 65, 81);line-height:1.25rem;background-color:#d8d8d8;border:2px solid rgb(156, 163, 175)}verdocs-envelope-recipient-link .summary-recipient .link-wrapper{gap:5px;display:-ms-flexbox;display:flex;margin:4px 0 0 0;-ms-flex-direction:row;flex-direction:row}verdocs-envelope-recipient-link .summary-recipient .link-wrapper .link{-ms-flex:1;flex:1;height:34px;display:-ms-flexbox;display:flex;font-size:16px;padding:0 12px;border-radius:4px;-ms-flex-align:center;align-items:center;border:1px solid #cccccc;background:rgb(249, 250, 251)}verdocs-envelope-recipient-link .buttons{display:-ms-flexbox;display:flex;-webkit-column-gap:15px;-moz-column-gap:15px;column-gap:15px;margin:10px 0 0 0;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}verdocs-envelope-recipient-link .buttons verdocs-button{-ms-flex:0 0 120px;flex:0 0 120px;margin-left:10px;white-space:nowrap}verdocs-envelope-recipient-link .buttons verdocs-button button{width:100%}',b=f,k=class{constructor(i){p(this,i),this.next=l(this,"next",7),this.sdkError=l(this,"sdkError",7),this.store=null,this.recipient=null,this.endpoint=m.getDefault(),this.envelopeId="",this.roleName="",this.isOpen=void 0,this.loading=!0,this.gettingLink=!0,this.link=""}async componentWillLoad(){var i,e,n,o,a,s;try{if(this.endpoint.loadSession(),!this.envelopeId){console.log(`[RECIPIENT_LINK] Missing required envelope ID ${this.envelopeId}`);return}if(!this.endpoint.session){console.log("[RECIPIENT_LINK] Unable to start session, must be authenticated");return}this.store=await x(this.endpoint,this.envelopeId,!0),this.loading=!1,this.gettingLink=!0,this.recipient=(n=(e=(i=this.store)===null||i===void 0?void 0:i.state)===null||e===void 0?void 0:e.recipients)===null||n===void 0?void 0:n.find(r=>r.role_name===this.roleName),this.getLink(this.recipient)}catch(r){console.log("[RECIPIENT_LINK] Error loading envelope",r),(o=this.sdkError)===null||o===void 0||o.emit(new g(r.message,(a=r.response)===null||a===void 0?void 0:a.status,(s=r.response)===null||s===void 0?void 0:s.data))}}handleDone(i){var e;i.preventDefault(),(e=this.next)===null||e===void 0||e.emit({envelope:this.store.state})}copyLink(i){navigator.clipboard.writeText(i).then(()=>d("Link copied to clipboard!",{style:"success",duration:3e3})).catch(e=>{console.warn("[RECIPIENT_LINK] Error copying to clipboard",e),d(`Unable to copy to clipboard: ${e.message}`,{style:"error"})})}getLink(i){this.gettingLink=!0,u(this.endpoint,i.envelope_id,i.role_name).then(e=>{this.gettingLink=!1,this.link=e.link}).catch(e=>{this.gettingLink=!1,console.log("[RECIPIENT_LINK] Error getting link",e),d("Unable to get link: "+e.message,{style:"error"})})}render(){return this.loading||!this.recipient?t(c,null):t(c,null,t("div",{class:"summary-content"},t("h1",{class:"summary-title"},"In-Person Signing Link"),t("div",{class:"summary-rows"},t("div",{class:"summary-recipient"},t("div",{class:"role-name"},this.recipient.role_name),t("div",{class:"role-details"},t("div",{class:"role-info"},t("div",{class:"role-full-name"},this.recipient.full_name," (",this.recipient.email||this.recipient.phone,")"),!this.link&&t("verdocs-button",{size:"small",variant:"outline",label:this.gettingLink?"Loading...":"Get Link",disabled:this.gettingLink,onClick:()=>this.getLink(this.recipient)})),this.link&&t("div",{class:"link-wrapper"},t("div",{class:"link"},this.link),t("verdocs-button",{size:"small",variant:"outline",label:"Copy",onClick:()=>this.copyLink(this.link)}))))),t("div",{class:"buttons"},t("verdocs-button",{size:"small",label:"Done",onClick:i=>this.handleDone(i)}))))}};k.style=b;const y='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-envelope-recipient-summary{top:0;left:0;right:0;bottom:0;display:-ms-flexbox;display:flex;z-index:100000;position:fixed;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;font-family:"Inter", "Barlow", sans-serif;background-color:rgba(0, 0, 0, 0.4980392157)}verdocs-envelope-recipient-summary .summary-content{width:600px;display:-ms-flexbox;display:flex;max-width:90%;font-size:18px;-ms-flex:0 0 600px;flex:0 0 600px;border-radius:6px;background:#ffffff;-ms-flex-direction:column;flex-direction:column;padding:30px 20px 20px}verdocs-envelope-recipient-summary .summary-content .summary-title{font-size:20px;font-weight:700;margin:0 0 10px 0;color:#33364b}verdocs-envelope-recipient-summary .summary-recipient{display:-ms-flexbox;display:flex;color:#33364b;margin:8px 0 24px 0;-ms-flex-direction:column;flex-direction:column}verdocs-envelope-recipient-summary .summary-recipient .role-name{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;font-size:14px;font-weight:600;margin:0 0 8px 0;color:#092c4c}verdocs-envelope-recipient-summary .summary-recipient .role-info{gap:5px;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:end;align-items:flex-end}verdocs-envelope-recipient-summary .summary-recipient .role-full-name{-ms-flex:1;flex:1;height:34px;display:-ms-flexbox;display:flex;font-size:16px;padding:0 12px;border-radius:4px;-ms-flex-align:center;align-items:center;border:1px solid #cccccc;background:rgb(249, 250, 251)}verdocs-envelope-recipient-summary .summary-recipient .recipient-link{width:120px;padding:0 16px;font-weight:500;margin:0 0 0 8px;text-align:center;font-size:0.875rem;border-radius:100%;color:rgb(55, 65, 81);line-height:1.25rem;background-color:#d8d8d8;border:2px solid rgb(156, 163, 175)}verdocs-envelope-recipient-summary .summary-recipient .link-wrapper{gap:5px;display:-ms-flexbox;display:flex;margin:4px 0 0 0;-ms-flex-direction:row;flex-direction:row}verdocs-envelope-recipient-summary .summary-recipient .link-wrapper .link{-ms-flex:1;flex:1;height:34px;display:-ms-flexbox;display:flex;font-size:16px;padding:0 12px;border-radius:4px;-ms-flex-align:center;align-items:center;border:1px solid #cccccc;background:rgb(249, 250, 251)}verdocs-envelope-recipient-summary .buttons{display:-ms-flexbox;display:flex;-webkit-column-gap:15px;-moz-column-gap:15px;column-gap:15px;margin:10px 0 0 0;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}verdocs-envelope-recipient-summary .buttons verdocs-button{-ms-flex:0 0 120px;flex:0 0 120px;margin-left:10px;white-space:nowrap}verdocs-envelope-recipient-summary .buttons verdocs-button button{width:100%}',w=y,E=class{constructor(i){p(this,i),this.another=l(this,"another",7),this.view=l(this,"view",7),this.next=l(this,"next",7),this.sdkError=l(this,"sdkError",7),this.store=null,this.endpoint=m.getDefault(),this.envelopeId="",this.canSendAnother=!0,this.canView=!0,this.canDone=!0,this.isOpen=void 0,this.loading=!0,this.recipientStatusIcons=[],this.containerId=`verdocs-status-indicator-${Math.random().toString(36).substring(2,11)}`,this.gettingLinks={},this.links={}}async componentWillLoad(){var i,e,n;try{if(this.endpoint.loadSession(),!this.envelopeId){console.log(`[RECIPIENTS] Missing required envelope ID ${this.envelopeId}`);return}if(!this.endpoint.session){console.log("[RECIPIENTS] Unable to start session, must be authenticated");return}this.store=await x(this.endpoint,this.envelopeId,!0),this.sortEnvelopeRecipients(),this.loading=!1}catch(o){console.log("[RECIPIENTS] Error loading envelope",o),(i=this.sdkError)===null||i===void 0||i.emit(new g(o.message,(e=o.response)===null||e===void 0?void 0:e.status,(n=o.response)===null||n===void 0?void 0:n.data))}}sortEnvelopeRecipients(){var i,e;(e=(i=this.store)===null||i===void 0?void 0:i.state)===null||e===void 0||e.recipients.sort((n,o)=>n.sequence===o.sequence?n.order-o.order:n.sequence-o.sequence)}handleAnother(i){var e;i.preventDefault(),(e=this.another)===null||e===void 0||e.emit({envelope:this.store.state})}handleView(i){var e;i.preventDefault(),(e=this.view)===null||e===void 0||e.emit({envelope:this.store.state})}handleDone(i){var e;i.preventDefault(),(e=this.next)===null||e===void 0||e.emit({envelope:this.store.state})}copyLink(i){navigator.clipboard.writeText(i).then(()=>{}).catch(e=>{var n;console.warn("[RECIPIENTS] Error copying to clipboard",e),(n=this.sdkError)===null||n===void 0||n.emit(e)})}getLink(i){this.gettingLinks={...this.gettingLinks,[i.role_name]:!0},u(this.endpoint,i.envelope_id,i.role_name).then(e=>{this.gettingLinks={...this.gettingLinks,[i.role_name]:!1},this.links={...this.links,[i.role_name]:e.link},this.copyLink(e.link)}).catch(e=>{var n;this.gettingLinks={...this.gettingLinks,[i.role_name]:!1},console.log("[RECIPIENTS] Error getting link",e),(n=this.sdkError)===null||n===void 0||n.emit(e)})}render(){var i,e;return this.loading?t(c,null):t(c,null,t("div",{class:"summary-content"},t("h1",{class:"summary-title"},"Recipient Summary"),t("div",{class:"summary-rows"},(((e=(i=this.store)===null||i===void 0?void 0:i.state)===null||e===void 0?void 0:e.recipients)||[]).map(n=>{const o=h(this.store.state),a=v(n,o),s=this.links[n.role_name],r=this.gettingLinks[n.role_name];return t("div",{class:"summary-recipient"},t("div",{class:"role-name"},n.role_name),t("div",{class:"role-details"},t("div",{class:"role-info"},t("div",{class:"role-full-name"},n.full_name," (",n.email||n.phone,")"),a&&!s&&t("verdocs-button",{size:"small",variant:"outline",label:"Get Link",disabled:r,onClick:()=>this.getLink(n)})),s&&t("div",{class:"link-wrapper"},t("div",{class:"link"},s),t("verdocs-button",{size:"small",variant:"outline",label:"Copy",onClick:()=>this.copyLink(s)}))))})),(this.canSendAnother||this.canView||this.canDone)&&t("div",{class:"buttons"},this.canSendAnother&&t("verdocs-button",{size:"small",label:"Send Another",onClick:n=>this.handleAnother(n)}),this.canView&&t("verdocs-button",{size:"small",label:"View Now",onClick:n=>this.handleView(n)}),this.canDone&&t("verdocs-button",{size:"small",label:"Done",onClick:n=>this.handleDone(n)}))))}};E.style=w;export{k as verdocs_envelope_recipient_link,E as verdocs_envelope_recipient_summary};

import{r as y,c,h as o,H as g,F as E,g as $}from"./preview-X13RbvS2.js";import{V as k,i as U,O as W,F as Y,E as Q,v as L,P as j,Q as X,R as K,S as J,T as G,U as F,W as ee,X as te,Y as se,Z as oe,_ as ie}from"./index-CL2BROP6.js";import{g as B,u as le}from"./TemplateFieldStore-d7516adf-DPqtitkf.js";import{g as q,b as ae,a as R,u as re}from"./TemplateRoleStore-ddc3b96f-DhMDWHWE.js";import{g as b}from"./TemplateStore-df5484bb-Bwk0x2-p.js";import{r as ne,g as de,b as ce,c as pe,d as M,e as P,f as me}from"./utils-2cf884a7-7ztE_qbo.js";import{S as w}from"./errors-887f1e88-DR-_BPTJ.js";import{D as he,P as ge,J as ve,a as ue,F as fe,b as be,T as xe}from"./Icons-faf0377f-BefOm9DP.js";import{i as I}from"./interact.min-3a2d7790-CuTJzriy.js";import{V as we}from"./Toast-b71de686-C5I_O3Ev.js";import"./index-7456b04f-CtY4qLFG.js";import"./chunk-QN4WKJDJ-Bf_F3oir.js";import"./iframe-DWV1oore.js";import"../sb-preview/runtime.js";import"./index-296aabaf-BfkBbDig.js";import"./Types-e4a6eba5-BiEcJ5ex.js";import"./index-fc5a08b9-CmPFFxNR.js";const ye='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-preview{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;display:-ms-flexbox;display:flex;padding:15px;row-gap:15px;min-height:200px;position:relative;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-direction:column;flex-direction:column}verdocs-preview div,verdocs-preview canvas{-webkit-box-sizing:border-box;box-sizing:border-box}',ke=ye,Se=class{constructor(e){y(this,e),this.sdkError=c(this,"sdkError",7),this.templateStore=null,this.fieldStore=null,this.roleStore=null,this.endpoint=k.getDefault(),this.templateId=null,this.loading=!0}async componentWillLoad(){var e,t,s;try{if(this.endpoint.loadSession(),!this.templateId){console.log(`[PREVIEW] Missing required template ID ${this.templateId}`);return}if(!this.endpoint.session){console.log("[PREVIEW] Unable to start builder session, must be authenticated");return}b(this.endpoint,this.templateId,!0).then(i=>{this.templateStore=i,console.log("[PREVIEW] Loaded Template Store",i.state),this.fieldStore=B(this.templateId),this.roleStore=q(this.templateId),console.log("[PREVIEW] Loaded template",this.templateStore.state,this.roleStore.get("roles"),this.fieldStore.get("fields")),this.loading=!1}).catch(i=>{console.log(i)})}catch(i){console.log("[PREVIEW] Error with preview session",i),(e=this.sdkError)===null||e===void 0||e.emit(new w(i.message,(t=i.response)===null||t===void 0?void 0:t.status,(s=i.response)===null||s===void 0?void 0:s.data))}}handlePageRendered(e){var t,s;const i=e.detail,l=(s=(t=this.templateStore)===null||t===void 0?void 0:t.state)===null||s===void 0?void 0:s.fields.filter(r=>r.page===i.pageNumber);console.log("[PREVIEW] Page rendered",i,l),l.forEach(r=>ne(r,i,{disabled:!0,editable:!1,draggable:!1}))}render(){var e,t;return this.loading?o(g,null,o("verdocs-loader",null)):o(g,null,(((t=(e=this.templateStore)===null||e===void 0?void 0:e.state)===null||t===void 0?void 0:t.documents)||[]).map(s=>{const i=U(1,s.pages);return o(E,null,i.map(l=>o("verdocs-template-document-page",{templateId:s.template_id,documentId:s.id,pageNumber:l,disabled:!0,editable:!0,done:!1,virtualWidth:612,virtualHeight:792,onPageRendered:r=>this.handlePageRendered(r),layers:[{name:"page",type:"canvas"},{name:"controls",type:"div"}]})))}))}};Se.style=ke;const _e='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-send{padding:10px;position:relative;background:#ffffff;-ms-flex-direction:column;flex-direction:column;font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;display:none}verdocs-send.sendable{display:-ms-flexbox;display:flex}verdocs-send .recipients{position:relative}verdocs-send .left-line{top:32px;left:20px;z-index:1;width:12px;bottom:30px;position:absolute;background:#ffffff;border-left:3px dotted #9b9b9b}verdocs-send .level{display:-ms-flexbox;display:flex;-webkit-column-gap:10px;-moz-column-gap:10px;column-gap:10px;margin-left:50px;position:relative;-ms-flex-direction:row;flex-direction:row;padding:8px 0 4px 0;border-bottom:1px solid rgba(151, 151, 151, 0.2666666667)}verdocs-send .level .level-icon{top:14px;z-index:2;left:-40px;width:24px;height:24px;position:absolute;background:#ffffff}verdocs-send .level .level-icon svg{fill:rgba(0, 0, 0, 0.537254902)}verdocs-send .level .recipient{height:30px;display:-ms-flexbox;display:flex;-ms-flex:0 0 30px;flex:0 0 30px;color:#000000;cursor:pointer;font-size:14px;-ms-flex-align:center;align-items:center;border-radius:30px;-ms-flex-direction:row;flex-direction:row;background:#dddddd;white-space:nowrap;border:2px solid #dddddd;padding:2px 10px 2px 14px}verdocs-send .level .recipient .icon{width:22px;height:22px;-ms-flex:0 0 22px;flex:0 0 22px;margin:0 0 0 10px}verdocs-send .level .recipient .icon svg{width:22px;height:22px;fill:#333333;outline:none}verdocs-send .level .complete{-ms-flex:1;flex:1;height:30px;display:-ms-flexbox;display:flex;color:#000000;font-size:14px;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;padding:3px 10px 3px 2px}verdocs-send .buttons{display:-ms-flexbox;display:flex;margin-top:10px;-webkit-column-gap:15px;-moz-column-gap:15px;column-gap:15px;-ms-flex-direction:row;flex-direction:row}verdocs-send verdocs-contact-picker{left:0;top:41px;z-index:10;position:absolute;border:1px solid #dddddd;-webkit-box-shadow:0 0 6px 3px rgba(0, 0, 0, 0.1);box-shadow:0 0 6px 3px rgba(0, 0, 0, 0.1)}',Ce=_e,V='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg>',Ie='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="M2 12C2 6.48 6.48 2 12 2s10 4.48 10 10-4.48 10-10 10S2 17.52 2 12zm10 6c3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6 2.69 6 6 6z"></path></svg>',Ee='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></svg>',Le='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" tabindex="-1"><path d="m18 7-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41 6 19l1.41-1.41L1.83 12 .41 13.41z"></path></svg>',Re=class{constructor(e){y(this,e),this.sendingEnvelope=c(this,"sendingEnvelope",7),this.send=c(this,"send",7),this.exit=c(this,"exit",7),this.sdkError=c(this,"sdkError",7),this.searchContacts=c(this,"searchContacts",7),this.levels=[],this.templateStore=null,this.roleStore=null,this.endpoint=k.getDefault(),this.templateId=null,this.environment="web",this.containerId=`verdocs-send-${Math.random().toString(36).substring(2,11)}`,this.rolesAtLevel={},this.showPickerForId="",this.sessionContacts=[],this.sending=!1,this.rolesCompleted={}}async reset(){this.rolesCompleted={}}async componentWillLoad(){var e,t,s,i,l,r;try{const a=this.endpoint.loadSession();if(!this.templateId){console.log(`[SEND] Missing required template ID ${this.templateId}`);return}if(!this.endpoint.session){console.log("[SEND] Unable to start builder session, must be authenticated");return}if(this.templateStore=await b(this.endpoint,this.templateId,!1),this.roleStore=q(this.templateId),!((t=(e=this.templateStore)===null||e===void 0?void 0:e.state)===null||t===void 0)&&t.is_sendable||console.warn("[SEND] Template is not sendable",this.templateId),this.roleStore.get("roles")){const n={};this.rolesCompleted={},this.roleStore.get("roles").forEach(d=>{const m=d.sequence-1;n[m]||(n[m]=[]);const p=`r-${m}-${n[m].length}`;n[m].push({...d,id:p}),d.full_name&&(d.email||d.phone)&&(this.rolesCompleted[p]={...d,id:p})}),this.rolesAtLevel=n,this.levels=Object.keys(n).map(d=>+d),this.levels.sort((d,m)=>d-m)}!((s=a==null?void 0:a.session)===null||s===void 0)&&s.profile&&this.sessionContacts.push({id:a.session.profile.id,name:`${a.session.profile.first_name} ${a.session.profile.last_name}`,email:a.session.profile.email,phone:a.session.profile.phone})}catch(a){console.log("[SEND] Error with preview session",a),(i=this.sdkError)===null||i===void 0||i.emit(new w(a.message,(l=a.response)===null||l===void 0?void 0:l.status,(r=a.response)===null||r===void 0?void 0:r.data))}}getLevelIcon(e){return e<0?o("div",{class:"level-icon",innerHTML:Ie}):e>=this.levels.length?o("div",{class:"level-icon",innerHTML:Le}):o("div",{class:"level-icon",innerHTML:Ee})}handleSelectContact(e,t){e.preventDefault(),this.rolesCompleted[t.id]={...t,...e.detail},this.showPickerForId=""}handleClickRole(e,t){e.stopPropagation(),this.showPickerForId=t.id}handleSend(e){var t,s,i;if(this.sending){console.log("Skipping duplicate send",e);return}console.log("Sending",e),e.preventDefault(),e.stopPropagation(),this.sending=!0,(t=this.sendingEnvelope)===null||t===void 0||t.emit({sending:!0});const l={template_id:this.templateId,name:(i=(s=this.templateStore)===null||s===void 0?void 0:s.state)===null||i===void 0?void 0:i.name,environment:this.environment,roles:Object.values(this.rolesCompleted),prepared_fields:[]};console.log("[SEND] Creating envelope",l),W(this.endpoint,l).then(r=>{var a,n;console.log("[SEND] Send envelope",r),this.reset().catch(d=>console.log("Unknown Error",d)),this.sending=!1,(a=this.sendingEnvelope)===null||a===void 0||a.emit({sending:!1}),(n=this.send)===null||n===void 0||n.emit({...l,envelope_id:r.id,envelope:r})}).catch(r=>{var a;console.log("Send error",r),this.sending=!1,(a=this.sendingEnvelope)===null||a===void 0||a.emit({sending:!1})})}handleCancel(e){var t;e.stopPropagation(),(t=this.exit)===null||t===void 0||t.emit()}render(){var e,t;const s=ae(this.roleStore),l=Object.values(this.rolesCompleted).filter(r=>Y(r.email)||Q(r.phone)).length>=s.length;return o(g,{key:"ecdc1830949a5a35b092167b201c6feb8284e221",class:{sendable:(t=(e=this.templateStore)===null||e===void 0?void 0:e.state)===null||t===void 0?void 0:t.is_sendable}},o("div",{key:"2d8ebba91a5cff228135465c0956848fcc8873b5",class:"recipients"},o("div",{key:"1c72951bfc1e11a1d95c04e005b3fcd8108c39f5",class:"left-line"}),o("div",{key:"82834a006584cde2b8020f7f233dfff685e647f2",class:"level level-start"},this.getLevelIcon(-1),o("div",{key:"930ca1cc5b3f93f11f0a38703396538ee90dba5b",class:"complete"},"Send Envelope")),this.levels.map(r=>o("div",{class:`level level-${r}`},this.getLevelIcon(r),this.rolesAtLevel[r].map(a=>{var n,d,m,p,x,h;const u=!a.email,v=`verdocs-send-recipient-${a.name}`;return u?o("div",{class:"recipient",style:{backgroundColor:L(R(this.roleStore,a.name))},onClick:f=>this.handleClickRole(f,a),id:v},(d=(n=this.rolesCompleted[a.id])===null||n===void 0?void 0:n.full_name)!==null&&d!==void 0?d:a.name,o("div",{class:"icon",innerHTML:V}),this.showPickerForId===a.id&&o("verdocs-portal",{anchor:v,onClickAway:()=>this.showPickerForId=""},o("verdocs-contact-picker",{onExit:()=>this.showPickerForId="",onNext:f=>this.handleSelectContact(f,a),contactSuggestions:this.sessionContacts,templateRole:(m=this.rolesCompleted[a.id])!==null&&m!==void 0?m:a,onSearchContacts:f=>{var S;return(S=this.searchContacts)===null||S===void 0?void 0:S.emit(f.detail)}}))):o("div",{class:"recipient",style:{borderColor:L(R(this.roleStore,a.name))},onClick:f=>this.handleClickRole(f,a),id:v},(x=(p=this.rolesCompleted[a.id])===null||p===void 0?void 0:p.full_name)!==null&&x!==void 0?x:a.full_name,o("div",{class:"icon",innerHTML:V}),this.showPickerForId===a.id&&o("verdocs-portal",{anchor:v,onClickAway:()=>this.showPickerForId=""},o("verdocs-contact-picker",{onExit:()=>this.showPickerForId="",onNext:f=>this.handleSelectContact(f,a),contactSuggestions:this.sessionContacts,templateRole:(h=this.rolesCompleted[a.id])!==null&&h!==void 0?h:a,onSearchContacts:f=>{var S;return(S=this.searchContacts)===null||S===void 0?void 0:S.emit(f.detail)}})))}))),o("div",{key:"241118ea059aadb8a6030b5ee5bd4383e88af212",class:"level level-done"},this.getLevelIcon(this.levels.length),o("div",{key:"05ba689ac40aaf1543b921b490f8fe4550bad4df",class:"complete"},"Signing Complete"))),o("div",{key:"39c73b0a3310d85dfbd29f2d2fda347d37091e90",class:"buttons"},o("verdocs-button",{key:"c3d1196a34f1cd4ab654aa07b707372054f26202",label:"Cancel",size:"small",variant:"outline",onClick:r=>this.handleCancel(r),disabled:this.sending}),o("verdocs-button",{key:"d2e16d7a4d97c8888df3e7257296dee6f8db3234",label:"Send",size:"small",disabled:!l||this.sending,onClick:r=>this.handleSend(r)}),this.sending&&o("verdocs-spinner",{key:"d8c0a234261d1b77d6343dd7e426c28475dceadf"})))}};Re.style=Ce;const qe='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-template-attachments{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-template-attachments h5{font-size:16px;font-weight:bold;margin:0 0 10px 0;color:#46497d}verdocs-template-attachments .attachments{margin:0 0 40px 0}verdocs-template-attachments .attachment{display:-ms-flexbox;display:flex;padding:5px 0;-webkit-column-gap:15px;-moz-column-gap:15px;column-gap:15px;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;color:#33364b}verdocs-template-attachments .attachment:hover .trash-icon{display:-ms-flexbox;display:flex}verdocs-template-attachments .attachment:hover .pages{display:none}verdocs-template-attachments svg{width:28px;height:28px;fill:#5c6575;margin:2px 0 0 0}verdocs-template-attachments .file-icon{-ms-flex:0;flex:0}verdocs-template-attachments .pages{width:24px;height:24px;-ms-flex:0 0 24px;flex:0 0 24px;padding-left:4px;position:relative;margin:-10px 0 0 0}verdocs-template-attachments .pages .pages-icon{top:0;left:0;width:24px;height:24px;position:absolute}verdocs-template-attachments .pages .count{top:11px;left:7px;z-index:1;width:18px;font-size:12px;font-weight:500;position:absolute;text-align:center;letter-spacing:-2px}verdocs-template-attachments .filename{-ms-flex:1;flex:1;display:block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;border-bottom:1px dotted #cccccc}verdocs-template-attachments .trash-icon{-ms-flex:0;flex:0;display:none}verdocs-template-attachments .trash-icon:hover{cursor:pointer}verdocs-template-attachments verdocs-file-chooser{margin:10px 0;border:2px dashed #979797}verdocs-template-attachments .loader-wrapper{background-color:#ffffff;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;width:320px;height:320px;text-align:center;border:2px dashed #979797;-ms-flex-pack:end;justify-content:flex-end}verdocs-template-attachments .progress-wrapper{padding:20px}verdocs-template-attachments .buttons{display:-ms-flexbox;display:flex;-webkit-column-gap:8px;-moz-column-gap:8px;column-gap:8px;margin-top:16px;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:end;justify-content:flex-end}verdocs-template-attachments .buttons .flex-fill{-ms-flex:1;flex:1}verdocs-template-attachments ::-webkit-input-placeholder{color:#aaaaaa}verdocs-template-attachments ::-moz-placeholder{color:#aaaaaa}verdocs-template-attachments :-ms-input-placeholder{color:#aaaaaa}verdocs-template-attachments ::-ms-input-placeholder{color:#aaaaaa}verdocs-template-attachments ::placeholder{color:#aaaaaa}',Te=qe,De=class{constructor(e){y(this,e),this.exit=c(this,"exit",7),this.next=c(this,"next",7),this.templateUpdated=c(this,"templateUpdated",7),this.sdkError=c(this,"sdkError",7),this.endpoint=k.getDefault(),this.templateId="",this.uploading=!1,this.progressLabel="Uploading...",this.progressPercent=0,this.showDeleteError=!1,this.confirmDeleteDocument=null,this.store=null}async componentWillLoad(){var e,t,s;try{if(this.endpoint.loadSession(),!this.templateId){console.log(`[ROLES] Missing required template ID ${this.templateId}`);return}if(!this.endpoint.session){console.log("[ROLES] Unable to start builder session, must be authenticated");return}this.store=await b(this.endpoint,this.templateId,!1)}catch(i){console.log("[TEMPLATE ATTACHMENTS] Error loading template",i),(e=this.sdkError)===null||e===void 0||e.emit(new w(i.message,(t=i.response)===null||t===void 0?void 0:t.status,(s=i.response)===null||s===void 0?void 0:s.data))}}handleCancel(e){e.stopPropagation(),this.exit.emit()}handleUploadProgress(e){e>=99?(this.progressPercent=100,this.progressLabel="Processing..."):this.progressPercent=e}async handleUpload(e){var t,s,i,l;e.stopPropagation();const r=e.detail.file;if(r){console.log("[ATTACHMENTS] Uploading...",r),this.uploading=!0,this.progressLabel="Uploading...";try{const a=await j(this.endpoint,this.templateId,r,this.handleUploadProgress.bind(this));console.log("[ATTACHMENTS] Created attachment",a),this.store=await b(this.endpoint,this.templateId,!1),console.log("[ATTACHMENTS] Updated template",this.store.state),(t=this.templateUpdated)===null||t===void 0||t.emit({endpoint:this.endpoint,template:this.store.state,event:"attachments"}),this.uploading=!1,this.progressLabel="",this.progressPercent=0}catch(a){console.log("[ATTACHMENTS] Error creating template",a),(s=this.sdkError)===null||s===void 0||s.emit(new w(a.message,(i=a.response)===null||i===void 0?void 0:i.status,(l=a.response)===null||l===void 0?void 0:l.data)),this.uploading=!1}}}handleNext(e){var t;e.stopPropagation(),this.uploading=!1,this.progressLabel="",this.progressPercent=0,(t=this.next)===null||t===void 0||t.emit({template:this.store.state})}async confirmDelete(){await X(this.endpoint,this.templateId,this.confirmDeleteDocument.id),this.store=await b(this.endpoint,this.templateId,!1),console.log("[ATTACHMENTS] New template",this.store.state),this.confirmDeleteDocument=null}async handleDelete(e){var t;((t=this.store.state)===null||t===void 0?void 0:t.documents.length)>1?this.confirmDeleteDocument=e:this.showDeleteError=!0}getFileIcon(e){switch(e.mime){case"application/pdf":return ue;case"image/jpeg":return ve;case"image/png":return ge;case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return he}return fe}render(){var e,t,s;if(!this.endpoint.session)return o(g,null,o("verdocs-component-error",{message:"You must be authenticated to use this module."}));const i=(e=this.store)===null||e===void 0?void 0:e.state;return i.isLoaded?!this.endpoint.session||!i.profile_id?o(g,{class:"empty"}):o(g,null,o("h5",null,"Existing Attachments"),o("div",{class:"attachments"},(t=this.store)===null||t===void 0?void 0:t.state.documents.map(l=>o("div",{class:"attachment"},o("div",{class:"file-icon",innerHTML:this.getFileIcon(l)}),o("div",{class:"filename",title:l.name},l.name),o("div",{class:"pages"},o("div",{class:"count"},l.pages),o("div",{class:"pages-icon",innerHTML:be})),o("div",{class:"trash-icon",innerHTML:xe,onClick:()=>this.handleDelete(l)})))),o("h5",null,"Attach a New Document"),this.uploading?o("div",{class:"loader-wrapper"},o("verdocs-loader",null),this.progressLabel&&o("div",{class:"progress-wrapper"},o("verdocs-progress-bar",{showPercent:!0,percent:this.progressPercent,label:this.progressLabel}))):o("verdocs-file-chooser",{onFileSelected:l=>this.handleUpload(l)}),o("div",{class:"buttons"},o("verdocs-button",{variant:"outline",label:"Cancel",size:"small",onClick:l=>this.handleCancel(l),disabled:this.uploading}),o("verdocs-button",{label:"Next",size:"small",onClick:l=>this.handleNext(l),disabled:!(!((s=this.store)===null||s===void 0)&&s.state.documents.length)||this.uploading})),this.showDeleteError&&o("verdocs-ok-dialog",{heading:"Unable to Delete Attachment",message:"Templates must contain at least one attachment.",onNext:()=>this.showDeleteError=!1}),this.confirmDeleteDocument&&o("verdocs-ok-dialog",{heading:"Delete this Attachment?",message:"This operation cannot be undone. All fields placed<br />on the deleted attachment will also be removed.",onNext:()=>this.confirmDelete(),showCancel:!0,onExit:()=>{this.confirmDeleteDocument=null}})):o(g,{class:"loading"},o("verdocs-loader",null))}};De.style=Te;const ze='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-template-build-tabs{-ms-flex:1;flex:1;gap:20px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-direction:column;flex-direction:column;font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-template-build-tabs verdocs-template-attachments,verdocs-template-build-tabs verdocs-template-roles{margin:20px}verdocs-template-build-tabs verdocs-template-fields{border-top:1px solid #777777}verdocs-template-build-tabs verdocs-template-attachments{padding:20px;background:#ffffff}verdocs-template-build-tabs verdocs-template-fields{width:100%}verdocs-template-build-tabs verdocs-preview{-ms-flex:1;flex:1}',Me=ze,Pe=["attachments","roles","settings","fields","preview"],Ve=class{constructor(e){y(this,e),this.sdkError=c(this,"sdkError",7),this.stepChanged=c(this,"stepChanged",7),this.endpoint=k.getDefault(),this.templateId=null,this.step="preview",this.store=null}onStepChanged(){console.log("Step changed",this.step,this.templateId),this.loadTemplate().catch(e=>console.log("Unknown Error",e))}async componentWillLoad(){var e,t,s;try{if(this.endpoint.loadSession(),!this.endpoint.session){console.log("[BUILD_TABS] Unable to start builder session, must be authenticated");return}if(!this.templateId){this.step="preview";return}this.loadTemplate().catch(i=>console.log("[BUILD_TABS] Unable to load template",i))}catch(i){console.log("[BUILD_TABS] Error loading template",i),(e=this.sdkError)===null||e===void 0||e.emit(new w(i.message,(t=i.response)===null||t===void 0?void 0:t.status,(s=i.response)===null||s===void 0?void 0:s.data))}}async loadTemplate(){this.templateId&&(this.store=await b(this.endpoint,this.templateId,!1))}setStep(e){var t;console.log("Selected step",e.detail.tab.id),e.stopPropagation(),e.preventDefault(),this.step=e.detail.tab.id,(t=this.stepChanged)===null||t===void 0||t.emit(e.detail.tab.id)}render(){var e,t,s,i,l,r,a,n,d;if(!this.endpoint.session)return o(g,null,o("verdocs-component-error",{message:"You must be authenticated to use this module."}));let m=!1,p=!1,x=!1;console.log("[BUILD_TABS] Rendering tabs",this.templateId,this.step),this.templateId&&this.store&&this.store.state&&(x=((s=(t=(e=this.store)===null||e===void 0?void 0:e.state)===null||t===void 0?void 0:t.documents)===null||s===void 0?void 0:s.length)>0,p=x&&((r=(l=(i=this.store)===null||i===void 0?void 0:i.state)===null||l===void 0?void 0:l.roles)===null||r===void 0?void 0:r.length)>0,m=p&&((d=(n=(a=this.store)===null||a===void 0?void 0:a.state)===null||n===void 0?void 0:n.fields)===null||d===void 0?void 0:d.length)>0);let h=Math.max(Pe.indexOf(this.step),0);return!m&&h>=4&&(h=3),!p&&h>=3&&(h=1),!x&&h>=1&&(h=0),console.log({selectedStepIndex:h,canPreview:m,canEditFields:p,canEditRoles:x}),o(g,null,o("verdocs-tabs",{onSelectTab:u=>this.setStep(u),selectedTab:h,tabs:[{id:"attachments",disabled:!1,label:this.templateId&&this.store?"Attachment(s)":"Upload Attachment(s)"},{id:"roles",disabled:!x,label:"Roles"},{id:"settings",disabled:!p,label:"Settings"},{id:"fields",disabled:!p,label:"Fields"},{id:"preview",disabled:!m,label:"Preview/Send"}]}))}static get watchers(){return{step:["onStepChanged"]}}};Ve.style=Me;const He='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-template-create{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-template-create form{background-color:#ffffff;padding:12px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}verdocs-template-create form .upload-box{-webkit-box-sizing:border-box;box-sizing:border-box;width:320px;text-align:center;padding:44px 18px 66px;border:2px dashed #979797;color:rgba(0, 0, 0, 0.54)}verdocs-template-create form .upload-box.drag-over{border:2px solid #4c56cb}verdocs-template-create form .upload-box svg{width:64px;fill:#5c6575}verdocs-template-create .loader-wrapper{background-color:#ffffff;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;width:320px;height:320px;text-align:center;border:2px dashed #979797;-ms-flex-pack:end;justify-content:flex-end}verdocs-template-create .progress-wrapper{padding:20px}verdocs-template-create .buttons{display:-ms-flexbox;display:flex;-webkit-column-gap:8px;-moz-column-gap:8px;column-gap:8px;margin-top:16px;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:end;justify-content:flex-end}verdocs-template-create .buttons .flex-fill{-ms-flex:1;flex:1}verdocs-template-create ::-webkit-input-placeholder{color:#aaaaaa}verdocs-template-create ::-moz-placeholder{color:#aaaaaa}verdocs-template-create :-ms-input-placeholder{color:#aaaaaa}verdocs-template-create ::-ms-input-placeholder{color:#aaaaaa}verdocs-template-create ::placeholder{color:#aaaaaa}',Ae=He,Ne=" ",Ze='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"></path></svg>',Ue=class{constructor(e){y(this,e),this.exit=c(this,"exit",7),this.next=c(this,"next",7),this.sdkError=c(this,"sdkError",7),this.templateCreated=c(this,"templateCreated",7),this.endpoint=k.getDefault(),this.file=void 0,this.creating=!1,this.progressLabel="Uploading...",this.progressPercent=0}componentWillLoad(){this.endpoint.setTimeout(3e4),this.endpoint.loadSession()}handleFileChanged(e){var t;this.file=((t=e.target.files)===null||t===void 0?void 0:t[0])||null,console.log("[CREATE] Selected file",this.file)}handleUpload(e){e.stopPropagation(),document.getElementById("verdocs-template-create-file").click()}handleCancel(e){e.stopPropagation(),this.exit.emit()}async handleSubmit(e){var t,s,i;if(e.stopPropagation(),console.log("Submitting"),!!this.file){this.creating=!0,this.progressLabel="Uploading...";try{const l=await K(this.endpoint,{name:this.file.name,documents:[this.file]},r=>{r>=99?(this.progressLabel="Processing...",this.progressPercent=100):this.progressPercent=r});console.log("[CREATE] Created template",l),b(this.endpoint,l.id,!0).then(()=>{var r,a;(r=this.templateCreated)===null||r===void 0||r.emit({endpoint:this.endpoint,template:l,templateId:l.id}),(a=this.next)===null||a===void 0||a.emit(l),this.creating=!1,this.progressLabel="",this.progressPercent=0}).catch(r=>{console.log(r)})}catch(l){console.log("[CREATE] Error creating template",l),(t=this.sdkError)===null||t===void 0||t.emit(new w(l.message,(s=l.response)===null||s===void 0?void 0:s.status,(i=l.response)===null||i===void 0?void 0:i.data)),this.creating=!1}}}render(){return this.endpoint.session?o(g,null,o("form",{onSubmit:e=>e.preventDefault(),onClick:e=>e.stopPropagation(),autocomplete:"off"},o("input",{type:"file",id:"verdocs-template-create-file",multiple:!0,accept:"application/pdf",style:{display:"none"},onChange:e=>this.handleFileChanged(e)}),this.creating?o("div",{class:"loader-wrapper"},o("verdocs-loader",null),this.progressLabel&&o("div",{class:"progress-wrapper"},o("verdocs-progress-bar",{showPercent:!0,percent:this.progressPercent,label:this.progressLabel}))):o("div",{class:"upload-box",onDrop:e=>{e.preventDefault(),e.target.classList.remove("drag-over"),this.file=e.dataTransfer.files[0]},onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},onDragEnter:e=>e.target.classList.add("drag-over"),onDragLeave:e=>e.target.classList.remove("drag-over")},o("div",null,o("span",{innerHTML:Ze})),o("div",{style:{marginTop:"20px",fontSize:"20px",fontWeight:"bold",overflowWrap:"anywhere"}},this.file?this.file.name:"Drag a file here"),o("div",{style:{marginTop:"20px",marginBottom:"20px",fontSize:"16px",height:"20px"}},this.file?Ne:"Or, if you prefer..."),o("verdocs-button",{label:this.file?"Select a different file":"Select a file from your computer",size:"small",onClick:e=>this.handleUpload(e)})),o("div",{class:"buttons"},o("verdocs-button",{variant:"outline",label:"Cancel",size:"small",onClick:e=>this.handleCancel(e),disabled:this.creating}),o("verdocs-button",{label:"Next",size:"small",onClick:e=>this.handleSubmit(e),disabled:!this.file||this.creating})))):o(g,null,o("verdocs-component-error",{message:"You must be authenticated to use this module."}))}};Ue.style=Ae;const Fe=`@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-template-fields{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;position:relative;display:block;min-height:600px}verdocs-template-fields .page-0{padding:65px 15px 0 15px;-webkit-box-sizing:border-box;box-sizing:border-box}verdocs-template-fields .page-0 .user-placed-fields{height:100px;position:relative;background:#ffffff;-webkit-box-shadow:0 0 10px 5px rgba(0, 0, 0, 0.0588235294);box-shadow:0 0 10px 5px rgba(0, 0, 0, 0.0588235294)}verdocs-template-fields .page-0 .user-placed-fields .title{top:0;left:0;color:#ffffff;font-size:12px;padding:3px 6px;font-weight:bold;position:absolute;background:#46497d}verdocs-template-fields .pages{display:-ms-flexbox;display:flex;padding:15px;row-gap:15px;min-height:200px;position:relative;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-direction:column;flex-direction:column}verdocs-template-fields .pages div,verdocs-template-fields .pages canvas{-webkit-box-sizing:border-box;box-sizing:border-box}verdocs-template-fields #verdocs-template-fields-toolbar{height:50px;display:-ms-flexbox;display:flex;-ms-flex:0 0 50px;flex:0 0 50px;-webkit-column-gap:15px;-moz-column-gap:15px;column-gap:15px;font-weight:700;padding:0 20px 0 0;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;color:#f5f5fa;-ms-flex-pack:center;justify-content:center;background:#46497d}verdocs-template-fields #verdocs-template-fields-toolbar>verdocs-select-input{margin:0}verdocs-template-fields #verdocs-template-fields-toolbar svg{width:24px;height:24px}verdocs-template-fields #verdocs-template-fields-toolbar .add-for{margin:0;font-weight:500;color:#f5f5fa}verdocs-template-fields #verdocs-template-fields-toolbar verdocs-select-input{margin:0 20px 0 0}verdocs-template-fields.placing-attachment{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='m10.55 16.55 7.275-7.275L16.05 7.5l-5.5 5.45-2.675-2.65L6.1 12.075Zm-5.375 4.925q-1.125 0-1.887-.763-.763-.762-.763-1.887V5.175q0-1.125.763-1.888.762-.762 1.887-.762h13.65q1.125 0 1.888.762.762.763.762 1.888v13.65q0 1.125-.762 1.887-.763.763-1.888.763Zm0-2.65h13.65V5.175H5.175v13.65Zm0-13.65v13.65-13.65Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-checkbox_group{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='m10.55 16.55 7.275-7.275L16.05 7.5l-5.5 5.45-2.675-2.65L6.1 12.075Zm-5.375 4.925q-1.125 0-1.887-.763-.763-.762-.763-1.887V5.175q0-1.125.763-1.888.762-.762 1.887-.762h13.65q1.125 0 1.888.762.762.763.762 1.888v13.65q0 1.125-.762 1.887-.763.763-1.888.763Zm0-2.65h13.65V5.175H5.175v13.65Zm0-13.65v13.65-13.65Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-date{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath fill='%23000000' d='M7.6 13.925q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375Zm4.4 0q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375Zm4.4 0q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375ZM5.3 22.85q-1.325 0-2.238-.912-.912-.913-.912-2.238V6.3q0-1.325.912-2.238.913-.912 2.238-.912H6v-2h2.575v2h6.85v-2H18v2h.7q1.325 0 2.238.912.912.913.912 2.238v13.4q0 1.325-.912 2.238-.913.912-2.238.912Zm0-3.15h13.4V10H5.3v9.7ZM5.3 8h13.4V6.3H5.3Zm0 0V6.3 8Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-dropdown{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24' stroke-width='1.5' stroke='currentColor'%3E%3Cpath stroke='%23000000' stroke-linecap='round' stroke-linejoin='round' d='M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0l-3.75-3.75M17.25 21L21 17.25' /%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-initial{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='M6.225 20.775V7h-5V3.225H15V7h-5v13.775Zm9.775 0v-8h-3V9h9.775v3.775h-3v8Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-payment{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='m10.55 16.55 7.275-7.275L16.05 7.5l-5.5 5.45-2.675-2.65L6.1 12.075Zm-5.375 4.925q-1.125 0-1.887-.763-.763-.762-.763-1.887V5.175q0-1.125.763-1.888.762-.762 1.887-.762h13.65q1.125 0 1.888.762.762.763.762 1.888v13.65q0 1.125-.762 1.887-.763.763-1.888.763Zm0-2.65h13.65V5.175H5.175v13.65Zm0-13.65v13.65-13.65Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-radio_button_group{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='M12 17q2.075 0 3.538-1.463Q17 14.075 17 12t-1.462-3.538Q14.075 7 12 7 9.925 7 8.463 8.462 7 9.925 7 12q0 2.075 1.463 3.537Q9.925 17 12 17Zm0 5.85q-2.275 0-4.25-.85t-3.438-2.312Q2.85 18.225 2 16.25q-.85-1.975-.85-4.25T2 7.75q.85-1.975 2.312-3.438Q5.775 2.85 7.75 2q1.975-.85 4.25-.85t4.25.85q1.975.85 3.438 2.312Q21.15 5.775 22 7.75q.85 1.975.85 4.25T22 16.25q-.85 1.975-2.312 3.438Q18.225 21.15 16.25 22q-1.975.85-4.25.85Zm0-3.15q3.25 0 5.475-2.225Q19.7 15.25 19.7 12q0-3.25-2.225-5.475Q15.25 4.3 12 4.3q-3.25 0-5.475 2.225Q4.3 8.75 4.3 12q0 3.25 2.225 5.475Q8.75 19.7 12 19.7Zm0-7.7Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-signature{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='m9.225 21.225 4.65-4.65h8.45v4.65Zm-5.35-2.2H5.05l8.5-8.5-1.175-1.175-8.5 8.5Zm14.25-9.95L13.8 4.8l1.325-1.325q.625-.65 1.525-.663.9-.012 1.6.663l1.225 1.175q.675.675.663 1.562-.013.888-.663 1.513ZM16.7 10.55 6 21.225H1.675V16.9L12.35 6.225Zm-3.725-.625-.6-.575 1.175 1.175Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-textarea{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='M3.225 20.725v-3.15h11.55v3.15Zm0-4.775V12.8h17.55v3.15Zm0-4.75V8.05h17.55v3.15Zm0-4.775v-3.15h17.55v3.15Z'/%3E%3C/svg%3E") 16 16, pointer}verdocs-template-fields.placing-textbox{cursor:url("data:image/svg+xml,%3Csvg width='32' height='15' viewBox='0 0 32 15' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cmask id='path-1-inside-1_1401_24' fill='white'%3E%3Cpath d='M0 0H32V15H0V0Z'/%3E%3C/mask%3E%3Cpath d='M0 0H32V15H0V0Z' fill='%234C56CB' fill-opacity='0.1'/%3E%3Cpath d='M0 0V-1H-1V0H0ZM0 15H-1V16H0V15ZM0 1H32V-1H0V1ZM32 14H0V16H32V14ZM1 15V0H-1V15H1Z' fill='%234C56CB' mask='url(%23path-1-inside-1_1401_24)'/%3E%3Cpath d='M3 11.8V8.65H14.15V11.8H3ZM3 6.65V3.5H20.15V6.65H3Z' fill='%234C56CB'/%3E%3Cline x1='31.5' y1='1' x2='31.5' y2='14' stroke='%234C56CB' stroke-opacity='0.32' stroke-dasharray='1 1'/%3E%3C/svg%3E%0A") 0 14, pointer}verdocs-template-fields.placing-timestamp{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath fill='%23000000' d='M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM13 14h-2V8h2v6z'%3E%3C/path%3E%3C/svg%3E") 16 16, pointer}`,Be=Fe,Oe='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M3.425 16.15V13h11.15v3.15Zm0-5.15V7.85h17.15V11Z"/></svg>',$e='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M3.225 20.725v-3.15h11.55v3.15Zm0-4.775V12.8h17.55v3.15Zm0-4.75V8.05h17.55v3.15Zm0-4.775v-3.15h17.55v3.15Z"/></svg>',We='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="m10.55 16.55 7.275-7.275L16.05 7.5l-5.5 5.45-2.675-2.65L6.1 12.075Zm-5.375 4.925q-1.125 0-1.887-.763-.763-.762-.763-1.887V5.175q0-1.125.763-1.888.762-.762 1.887-.762h13.65q1.125 0 1.888.762.762.763.762 1.888v13.65q0 1.125-.762 1.887-.763.763-1.888.763Zm0-2.65h13.65V5.175H5.175v13.65Zm0-13.65v13.65-13.65Z"/></svg>',Ye='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M12 17q2.075 0 3.538-1.463Q17 14.075 17 12t-1.462-3.538Q14.075 7 12 7 9.925 7 8.463 8.462 7 9.925 7 12q0 2.075 1.463 3.537Q9.925 17 12 17Zm0 5.85q-2.275 0-4.25-.85t-3.438-2.312Q2.85 18.225 2 16.25q-.85-1.975-.85-4.25T2 7.75q.85-1.975 2.312-3.438Q5.775 2.85 7.75 2q1.975-.85 4.25-.85t4.25.85q1.975.85 3.438 2.312Q21.15 5.775 22 7.75q.85 1.975.85 4.25T22 16.25q-.85 1.975-2.312 3.438Q18.225 21.15 16.25 22q-1.975.85-4.25.85Zm0-3.15q3.25 0 5.475-2.225Q19.7 15.25 19.7 12q0-3.25-2.225-5.475Q15.25 4.3 12 4.3q-3.25 0-5.475 2.225Q4.3 8.75 4.3 12q0 3.25 2.225 5.475Q8.75 19.7 12 19.7Zm0-7.7Z"/></svg>',Qe='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M7.6 13.925q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375Zm4.4 0q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375Zm4.4 0q-.55 0-.925-.375t-.375-.925q0-.55.375-.937.375-.388.925-.388t.925.388q.375.387.375.937t-.375.925q-.375.375-.925.375ZM5.3 22.85q-1.325 0-2.238-.912-.912-.913-.912-2.238V6.3q0-1.325.912-2.238.913-.912 2.238-.912H6v-2h2.575v2h6.85v-2H18v2h.7q1.325 0 2.238.912.912.913.912 2.238v13.4q0 1.325-.912 2.238-.913.912-2.238.912Zm0-3.15h13.4V10H5.3v9.7ZM5.3 8h13.4V6.3H5.3Zm0 0V6.3 8Z"/></svg>',je='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="m9.225 21.225 4.65-4.65h8.45v4.65Zm-5.35-2.2H5.05l8.5-8.5-1.175-1.175-8.5 8.5Zm14.25-9.95L13.8 4.8l1.325-1.325q.625-.65 1.525-.663.9-.012 1.6.663l1.225 1.175q.675.675.663 1.562-.013.888-.663 1.513ZM16.7 10.55 6 21.225H1.675V16.9L12.35 6.225Zm-3.725-.625-.6-.575 1.175 1.175Z"/></svg>',Xe='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M6.225 20.775V7h-5V3.225H15V7h-5v13.775Zm9.775 0v-8h-3V9h9.775v3.775h-3v8Z"/></svg>',Ke='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM13 14h-2V8h2v6z"></path></svg>',Je='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" stroke-width="1.5" stroke="currentColor"><path stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" d="M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0l-3.75-3.75M17.25 21L21 17.25" /></svg>',H='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.707 14.707"><g><rect x="6.275" y="0" fill="#ffffff7f" width="1" height="15"/></g></svg>',Ge=[{id:"signature",tooltip:"Signature",icon:je},{id:"initial",tooltip:"Initials",icon:Xe},{id:"sep1",tooltip:"",icon:H},{id:"textbox",tooltip:"Text Box",icon:Oe},{id:"textarea",tooltip:"Text Area",icon:$e},{id:"checkbox_group",tooltip:"Check Box",icon:We},{id:"radio_button_group",tooltip:"Radio Button",icon:Ye},{id:"dropdown",tooltip:"Dropdown",icon:Je},{id:"sep2",tooltip:"",icon:H},{id:"date",tooltip:"Date",icon:Qe},{id:"timestamp",tooltip:"Timestamp",icon:Ke}],et=class{constructor(e){y(this,e),this.sdkError=c(this,"sdkError",7),this.templateUpdated=c(this,"templateUpdated",7),this.fieldsUpdated=c(this,"fieldsUpdated",7),this.pageHeights={},this.templateStore=null,this.fieldStore=null,this.roleStore=null,this.cachedPageInfo={},this.endpoint=k.getDefault(),this.templateId=null,this.toolbarTargetId=null,this.placing=null,this.showMustSelectRole=!1,this.selectedRoleName="",this.loading=!0}async componentWillLoad(){var e,t,s;try{if(this.endpoint.loadSession(),!this.templateId){console.log(`[FIELDS] Missing required template ID ${this.templateId}`);return}if(!this.endpoint.session){console.log("[FIELDS] Unable to start builder session, must be authenticated");return}b(this.endpoint,this.templateId,!0).then(i=>{var l,r;this.templateStore=i,this.fieldStore=B(this.templateId),this.roleStore=q(this.templateId),this.selectedRoleName=((r=(l=this.roleStore.get("roles"))===null||l===void 0?void 0:l[0])===null||r===void 0?void 0:r.name)||"",this.loading=!1,this.fieldStore.onChange("fields",a=>{var n;console.log("[FIELDS] Fields changed",{fields:a}),(n=this.fieldsUpdated)===null||n===void 0||n.emit({event:"updated",endpoint:this.endpoint,templateId:this.templateId,fields:a})})}).catch(i=>{console.log(i)})}catch(i){console.log("[FIELDS] Error with preview session",i),(e=this.sdkError)===null||e===void 0||e.emit(new w(i.message,(t=i.response)===null||t===void 0?void 0:t.status,(s=i.response)===null||s===void 0?void 0:s.data))}}componentDidRender(){I.dynamicDrop(!0);const e=this.toolbarTargetId?document.getElementById(this.toolbarTargetId):null,t=document.getElementById("verdocs-template-fields-toolbar");e&&t&&(console.log("[FIELDS] Moving toolbar"),t.remove(),e.append(t))}componentWillUpdate(){var e;const t=this.roleStore.get("roles");(!this.selectedRoleName||!t.find(s=>s&&s.name===this.selectedRoleName))&&(this.selectedRoleName=((e=t[0])===null||e===void 0?void 0:e.name)||"",console.log("[FIELDS] Selected new role",this.selectedRoleName))}handleKeyDown(e){e.key==="Escape"&&(this.placing=null)}async handleFieldChange(e,t,s){console.log("[FIELDS] handleFieldChange",e,t,s)}attachFieldAttributes(e,t,s){s.addEventListener("input",i=>this.handleFieldChange(t,i)),s.addEventListener("settingsChanged",i=>{var l,r;console.log("Settings changed",i.detail),(l=this.templateUpdated)===null||l===void 0||l.emit({endpoint:this.endpoint,template:(r=this.templateStore)===null||r===void 0?void 0:r.state,event:"added-field"})}),s.addEventListener("deleted",()=>{var i,l;console.log("[FIELDS] Deleted",this,t),s.remove(),(i=this.templateUpdated)===null||i===void 0||i.emit({endpoint:this.endpoint,template:(l=this.templateStore)===null||l===void 0?void 0:l.state,event:"updated-field"})}),s.setAttribute("templateid",this.templateId),s.setAttribute("fieldname",t.name),s.setAttribute("pageNumber",e.pageNumber),s.setAttribute("xScale",e.xScale),s.setAttribute("yScale",e.yScale),s.setAttribute("name",t.name)}handlePageRendered(e){const t=e.detail;this.cachedPageInfo[t.pageNumber]=t,this.pageHeights[t.pageNumber]=t.naturalHeight,this.fieldStore.get("fields").filter(s=>s&&s.page===t.pageNumber).forEach(s=>{switch(s.type){case"checkbox_group":case"radio_button_group":(s.settings||{}).options.map((r,a)=>{const n=ce(s,a),d=document.getElementById(n);d&&(d.setAttribute("fieldname",s.name),d.setAttribute("pagenumber",String(s.page)),this.makeDraggable(d))});break;default:const i=de(s),l=document.getElementById(i);l&&(l.setAttribute("fieldname",s.name),l.setAttribute("pagenumber",String(s.page)),this.makeDraggable(l));break}})}makeDraggable(e){I(e).draggable({listeners:{move:this.handleMoveField.bind(this),end:this.handleMoveEnd.bind(this)}})}async handleMoveField(e){const t=+(e.target.getAttribute("posX")||0),s=+(e.target.getAttribute("posY")||0),i=+(e.target.getAttribute("xScale")||1),l=+(e.target.getAttribute("yScale")||1),r=e.dx/i+t,a=e.dy/l+s;e.target.setAttribute("posX",r),e.target.setAttribute("posy",a),pe(e.target,"translate",`${r}px, ${a}px`)}async handleMoveEnd(e){var t,s;const i=e.target.getAttribute("fieldname"),l=+(e.target.getAttribute("option")||"0"),r=this.fieldStore.get("fields").find(C=>C.name===i);if(!r){console.log("[FIELDS] Unable to find field",i,e.target);return}const a=e.target.getAttribute("pagenumber"),{naturalWidth:n=612,naturalHeight:d=792,renderedHeight:m=792}=this.cachedPageInfo[a],p=e.target.getBoundingClientRect(),h=e.target.parentElement.getBoundingClientRect(),u=r.settings.width||M(r.type),v=r.settings.height||P(r.type),f=Math.max(p.left-h.left,0),S=Math.max(m-(h.bottom-p.bottom),0),{x:z,y:T}=this.viewCoordinatesToPageCoordinates(f,S,a,n-u,d-v);switch(r.type){case"attachment":case"payment":case"initial":case"signature":case"date":case"dropdown":case"textarea":case"textbox":case"timestamp":r.settings.x=z,r.settings.y=T;break;case"checkbox_group":case"radio_button_group":{const C=r.settings.options[l];C&&(C.x=z,C.y=T)}break}console.log("[FIELDS] Will update",i,T,l,r);const O=await J(this.endpoint,this.templateId,i,r);le(this.fieldStore,i,O),e.target.removeAttribute("posX"),e.target.removeAttribute("posY"),me(e.target),(t=this.templateUpdated)===null||t===void 0||t.emit({endpoint:this.endpoint,template:(s=this.templateStore)===null||s===void 0?void 0:s.state,event:"updated-field"})}generateFieldName(e,t){let s=1,i;do i=`${e}P${t}-${s}`,s++;while(this.fieldStore.get("fields").some(l=>l&&l.name===i));return i}viewCoordinatesToPageCoordinates(e,t,s,i,l){const{xScale:r=1,yScale:a=1,renderedHeight:n=792}=this.cachedPageInfo[s],d=Math.floor(Math.min(e/r,i)),m=Math.floor(Math.min(Math.max(n-t,0)/a,l));return{x:d,y:m}}async handleClickPage(e,t){var s,i;if(this.placing){const l=e.offsetX,r=e.offsetY,a=M(this.placing),n=P(this.placing),d=this.cachedPageInfo[t],{naturalWidth:m=612,naturalHeight:p=792}=d,x=this.viewCoordinatesToPageCoordinates(l,r,t,m-a,p-n),h=Math.floor(x.x),u=Math.floor(x.y),v={name:this.generateFieldName(this.placing,t),role_name:this.selectedRoleName,template_id:this.templateId,document_id:d.documentId,type:this.placing,required:!0,page:t,validator:null,label:null,default:null,placeholder:null,group:null,settings:{x:h,y:u},x:h,y:u,width:a,height:n};switch(console.log("[FIELDS] Will save new field",v),v.type){case"attachment":case"payment":v.settings={x:h,y:u};break;case"initial":case"signature":v.settings={x:h,y:u,result:""};break;case"checkbox_group":v.setting={minimum_checked:0,maximum_checked:1e3,options:[{id:`${v.name}-1`,value:"Option 1",checked:!1,x:h,y:u}]};break;case"date":v.settings={x:h,y:u,width:a,height:n,result:""};break;case"dropdown":v.required=!1,v.settings={x:h,y:u,width:a,height:n,value:null,placeholder:"Choose",options:[{id:"option-1",value:"Option 1"}]};break;case"radio_button_group":v.setting={options:[{id:`${v.name}-1`,value:"Option 1",selected:!1,x:h,y:u}]};break;case"textarea":case"textbox":v.settings={x:h,y:u,width:a,height:n,result:"",leading:0,alignment:0,upperCase:!1};break;case"timestamp":v.settings={x:h,y:u,width:a,height:n};break}v.type==="textarea"&&(v.settings.leading=16,v.type="textbox");const f=await G(this.endpoint,this.templateId,v);console.log("[FIELDS] Saved field",f),this.fieldStore.set("fields",[...this.fieldStore.get("fields"),f]),this.placing=null,(s=this.templateUpdated)===null||s===void 0||s.emit({endpoint:this.endpoint,template:(i=this.templateStore)===null||i===void 0?void 0:i.state,event:"added-field"})}}render(){var e,t,s;if(!this.endpoint.session)return o(g,null,o("verdocs-component-error",{message:"You must be authenticated to use this module."}));if(this.loading||!(!((e=this.templateStore)===null||e===void 0)&&e.state.isLoaded))return o(g,null,o("verdocs-loader",null));const i=this.roleStore.get("roles").map(l=>({value:l.name,label:l.full_name?`${l.name}: ${l.full_name}`:l.name}));return o(g,{class:this.placing?{[`placing-${this.placing}`]:!0}:{},onSubmit:()=>{}},o("div",{id:"verdocs-template-fields-toolbar"},o("div",{class:"add-for"},"Add field:"),o("verdocs-select-input",{value:this.selectedRoleName,options:i,onInput:l=>this.selectedRoleName=l.target.value}),Ge.map(l=>o("verdocs-toolbar-icon",{text:l.tooltip,icon:l.icon,onClick:()=>{l.tooltip&&(this.selectedRoleName?this.placing=l.id:this.showMustSelectRole=!0)}}))),o("div",{class:"pages"},(((s=(t=this.templateStore)===null||t===void 0?void 0:t.state)===null||s===void 0?void 0:s.documents)||[]).map(l=>U(1,l.pages).map(a=>o("verdocs-template-document-page",{templateId:this.templateId,documentId:l.id,pageNumber:a,virtualWidth:612,virtualHeight:792,disabled:!0,editable:!0,done:!1,onClick:n=>this.handleClickPage(n,a),onPageRendered:n=>this.handlePageRendered(n),layers:[{name:"page",type:"canvas"},{name:"controls",type:"div"}]})))),this.showMustSelectRole&&o("verdocs-ok-dialog",{heading:"Unable to add field",message:this.roleStore.get("roles").length>0?"Please select a role before adding fields.":"Please add at least one role before adding fields.",onNext:()=>this.showMustSelectRole=!1}))}};et.style=Be;const tt="",st=tt,ot=class{constructor(e){y(this,e),this.close=c(this,"close",7),this.sdkError=c(this,"sdkError",7),this.templateUpdated=c(this,"templateUpdated",7),this.store=null,this.endpoint=k.getDefault(),this.templateId="",this.name="",this.dirty=!1}async componentWillLoad(){var e,t,s,i,l;try{if(this.endpoint.loadSession(),!this.templateId){console.log(`[ROLES] Missing required template ID ${this.templateId}`);return}if(!this.endpoint.session){console.log("[ROLES] Unable to start builder session, must be authenticated");return}this.store=await b(this.endpoint,this.templateId,!1),this.name=(t=(e=this.store)===null||e===void 0?void 0:e.state)===null||t===void 0?void 0:t.name,this.dirty=!1}catch(r){console.log("[TEMPLATE NAME] Error loading template",r),(s=this.sdkError)===null||s===void 0||s.emit(new w(r.message,(i=r.response)===null||i===void 0?void 0:i.status,(l=r.response)===null||l===void 0?void 0:l.data))}}handleCancel(e){var t,s,i;e.stopPropagation(),this.name=(s=(t=this.store)===null||t===void 0?void 0:t.state)===null||s===void 0?void 0:s.name,this.dirty=!1,console.log("Closing"),(i=this.close)===null||i===void 0||i.emit()}async handleSave(e){var t,s,i;e.stopPropagation(),await F(this.endpoint,this.templateId,{name:this.name}),!((t=this.store)===null||t===void 0)&&t.state&&(this.store.state.name=this.name),this.dirty=!1,(s=this.templateUpdated)===null||s===void 0||s.emit({endpoint:this.endpoint,template:this.store.state,event:"name"}),(i=this.close)===null||i===void 0||i.emit()}render(){var e,t;return this.endpoint.session?!((t=(e=this.store)===null||e===void 0?void 0:e.state)===null||t===void 0)&&t.isLoading?o(g,{class:"loading"},o("verdocs-loader",null)):o(g,null,o("form",{onSubmit:s=>s.preventDefault(),onClick:s=>s.stopPropagation(),autocomplete:"off"},o("label",{htmlFor:"verdocs-template-name"},"Template Name"),o("verdocs-text-input",{id:"verdocs-template-name",value:this.name,autocomplete:"off",placeholder:"Template Name...",onInput:s=>{var i,l;this.name=s.target.value,this.dirty=this.name!==((l=(i=this.store)===null||i===void 0?void 0:i.state)===null||l===void 0?void 0:l.name)}}),o("div",{class:"buttons"},o("verdocs-button",{size:"small",variant:"outline",label:"Cancel",disabled:!this.dirty,onClick:s=>this.handleCancel(s)}),o("verdocs-button",{size:"small",label:"Save",disabled:!this.dirty,onClick:s=>this.handleSave(s)})))):o(g,null,o("verdocs-component-error",{message:"You must be authenticated to use this module."}))}};ot.style=st;const it='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-template-reminders{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-template-reminders.loading{min-height:300px;position:relative;display:block}verdocs-template-reminders.empty{display:none}verdocs-template-reminders form{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}verdocs-template-reminders form h5{font-size:16px;font-weight:bold;color:#4c56cb;margin:0 0 20px 0}verdocs-template-reminders form label{font-size:16px;font-weight:500;margin:0 0 6px 0;color:#33364b}verdocs-template-reminders form input{border:none;font-size:18px;padding:3px 6px 3px 0;background:transparent;border-bottom:1px solid #33364b}verdocs-template-reminders form input:focus{outline:none}verdocs-template-reminders form .input-row{display:-ms-flexbox;display:flex;margin:0 0 10px 0;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row}verdocs-template-reminders form .input-row label{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex}verdocs-template-reminders form .input-row verdocs-text-input{margin:0;display:-ms-flexbox;display:flex;-ms-flex:0 0 60px;flex:0 0 60px}verdocs-template-reminders form .input-row verdocs-text-input input{text-align:center}verdocs-template-reminders form .input-row verdocs-checkbox{display:-ms-flexbox;display:flex;-ms-flex:0 0 40px;flex:0 0 40px;-ms-flex-pack:center;justify-content:center}verdocs-template-reminders .buttons{display:-ms-flexbox;display:flex;-webkit-column-gap:8px;-moz-column-gap:8px;column-gap:8px;margin-top:16px;-ms-flex-direction:row;flex-direction:row}verdocs-template-reminders ::-webkit-input-placeholder{color:#aaaaaa}verdocs-template-reminders ::-moz-placeholder{color:#aaaaaa}verdocs-template-reminders :-ms-input-placeholder{color:#aaaaaa}verdocs-template-reminders ::-ms-input-placeholder{color:#aaaaaa}verdocs-template-reminders ::placeholder{color:#aaaaaa}',lt=it,at=class{constructor(e){y(this,e),this.close=c(this,"close",7),this.sdkError=c(this,"sdkError",7),this.templateUpdated=c(this,"templateUpdated",7),this.store=null,this.endpoint=k.getDefault(),this.templateId="",this.showPlanBlocker=!1,this.sendReminders=!1,this.firstReminderDays="1",this.reminderDays="1",this.dirty=!1}async componentWillLoad(){var e,t,s,i,l;try{if(this.endpoint.loadSession(),!this.templateId){console.log(`[ROLES] Missing required template ID ${this.templateId}`);return}if(!this.endpoint.session){console.log("[ROLES] Unable to start builder session, must be authenticated");return}this.store=await b(this.endpoint,this.templateId,!1),this.sendReminders=!!(!((t=(e=this.store)===null||e===void 0?void 0:e.state)===null||t===void 0)&&t.reminder_id),this.dirty=!1}catch(r){console.log("[TEMPLATE REMINDERS] Error loading template",r),(s=this.sdkError)===null||s===void 0||s.emit(new w(r.message,(i=r.response)===null||i===void 0?void 0:i.status,(l=r.response)===null||l===void 0?void 0:l.data))}}handleCancel(e){var t,s,i;e.stopPropagation(),this.sendReminders=!!(!((s=(t=this.store)===null||t===void 0?void 0:t.state)===null||s===void 0)&&s.reminder_id),this.dirty=!1,(i=this.close)===null||i===void 0||i.emit()}async handleSave(e){var t,s,i,l,r,a,n,d,m;e.stopPropagation();try{if(this.sendReminders){const p={setup_time:+this.firstReminderDays,interval_time:+this.reminderDays};!((s=(t=this.store)===null||t===void 0?void 0:t.state)===null||s===void 0)&&s.reminder_id?(await te(this.endpoint,this.templateId,(i=this.store)===null||i===void 0?void 0:i.state.reminder_id,p),this.store=await b(this.endpoint,this.templateId,!1)):(await ee(this.endpoint,this.templateId,p),this.store=await b(this.endpoint,this.templateId,!1))}else await se(this.endpoint,this.templateId,(l=this.store)===null||l===void 0?void 0:l.state.reminder_id),this.store=await b(this.endpoint,this.templateId,!1);(r=this.templateUpdated)===null||r===void 0||r.emit({endpoint:this.endpoint,template:this.store.state,event:"attachments"})}catch(p){console.log("[TEMPLATE REMINDERS] Unable to update reminders",p),we(p.message),(a=this.sdkError)===null||a===void 0||a.emit(new w(p.message,(n=p.response)===null||n===void 0?void 0:n.status,(d=p.response)===null||d===void 0?void 0:d.data))}this.dirty=!1,(m=this.close)===null||m===void 0||m.emit()}render(){var e,t;return this.endpoint.session?!this.endpoint.session||!(!((t=(e=this.store)===null||e===void 0?void 0:e.state)===null||t===void 0)&&t.isLoaded)?o(g,{class:"empty"}):o(g,null,o("form",{onSubmit:s=>s.preventDefault(),onClick:s=>s.stopPropagation(),autocomplete:"off"},o("h5",null,"Reminders"),o("div",{class:"input-row"},o("label",{htmlFor:"verdocs-send-reminders"},"Send Automatic Reminders"),o("verdocs-checkbox",{id:"verdocs-send-reminders",name:"automatic-reminders",checked:this.sendReminders,value:"on",onInput:s=>{this.sendReminders=s.target.checked,this.dirty=!0}})),o("p",null,o("strong",null,"NOTE:")," Reminders will only be sent for up to 14 days."),o("div",{class:"input-row"},o("label",{htmlFor:"verdocs-first-reminder-days"},"Days Before First Reminder"),o("verdocs-text-input",{id:"verdocs-first-reminder-days",type:"number",value:this.firstReminderDays,onInput:s=>{this.firstReminderDays=s.target.value,this.dirty=!0},disabled:!this.sendReminders})),o("div",{class:"input-row"},o("label",{htmlFor:"verdocs-days-between-reminders"},"Days Between Reminders"),o("verdocs-text-input",{id:"verdocs-days-between-reminders",type:"number",value:this.reminderDays,onInput:s=>{this.reminderDays=s.target.value,this.dirty=!0},disabled:!this.sendReminders})),o("div",{class:"buttons"},o("verdocs-button",{size:"small",variant:"outline",label:"Cancel",disabled:!this.dirty,onClick:s=>this.handleCancel(s)}),o("verdocs-button",{size:"small",label:"Save",disabled:!this.dirty,onClick:s=>this.handleSave(s)}))),this.showPlanBlocker&&o("verdocs-ok-dialog",{heading:"Upgrade to access this feature",message:"Please upgrade your plan to access this feature.",onNext:()=>this.showPlanBlocker=!1})):o(g,null,o("verdocs-component-error",{message:"You must be authenticated to use this module."}))}};at.style=lt;const rt='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-template-roles{display:block;min-width:400px;font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-template-roles>form{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;background-color:#ffffff;padding:12px}verdocs-template-roles>form h5{font-size:16px;font-weight:bold;color:#46497d;margin:0 0 10px 0}verdocs-template-roles>form .participants{position:relative}verdocs-template-roles>form .left-line{top:32px;left:11px;z-index:1;width:12px;bottom:30px;position:absolute;background:#ffffff;border-left:3px dotted #9b9b9b}verdocs-template-roles>form .row{display:-ms-flexbox;display:flex;-webkit-column-gap:0;-moz-column-gap:0;column-gap:0;min-height:35px;margin-left:40px;position:relative;-ms-flex-direction:row;flex-direction:row;padding:6px 0 4px 0}verdocs-template-roles>form .row .row-roles{-ms-flex:1;flex:1;gap:10px;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-direction:row;flex-direction:row}verdocs-template-roles>form .row .icon{top:14px;z-index:2;left:-40px;width:24px;height:24px;position:absolute;background:#ffffff}verdocs-template-roles>form .row .sender{height:30px;display:-ms-flexbox;display:flex;font-size:14px;line-height:30px;-ms-flex-align:center;align-items:center;border-radius:30px;-ms-flex-direction:row;flex-direction:row;padding:0 5px 0 15px;border:1px solid #c6c9cc;background-color:#f5f5fa}verdocs-template-roles>form .row .complete{height:30px;display:-ms-flexbox;display:flex;font-size:14px;padding:0 15px;line-height:30px;-ms-flex-direction:row;flex-direction:row;border-radius:30px;background-color:#f5f5fa;border:1px solid #aeb4bf}verdocs-template-roles>form .row .label{font-weight:bold;margin-right:6px;color:#33364b}verdocs-template-roles>form .row .settings-button{display:-ms-flexbox;display:flex;cursor:pointer;margin:0 0 0 9px}verdocs-template-roles>form .row .recipient{height:30px;display:-ms-flexbox;display:flex;font-size:14px;border-radius:30px;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;padding:0 5px 0 6px;white-space:nowrap;border:2px solid #aeb4bf}verdocs-template-roles>form .row .recipient .type-icon{width:24px;height:24px;-webkit-transform:scale(0.8);transform:scale(0.8);opacity:0.6;margin:0 12px 0 0}verdocs-template-roles>form .row .recipient.dragging{position:absolute}verdocs-template-roles>form .row .recipient.dragging+.dropzone{display:none !important}verdocs-template-roles>form .row .dropzone{width:14px;height:30px;display:none}verdocs-template-roles>form .row .dropzone svg{fill:#cccccc}verdocs-template-roles>form .row .dropzone.visible{margin:0 7px;display:-ms-flexbox;display:flex;-ms-flex:0 0 14px;flex:0 0 14px}verdocs-template-roles>form .row .dropzone.active{-ms-flex:0 0 120px;flex:0 0 120px;border-radius:30px;background:rgba(101, 77, 203, 0.4980392157);border:1px dashed #654dcb}verdocs-template-roles>form label{display:block;font-size:14px;font-weight:500;margin:0 0 4px 0;color:#5c6575}verdocs-template-roles>form input{border:none;font-size:18px;padding:3px 6px 3px 0;background:transparent;border-bottom:1px solid #33364b}verdocs-template-roles>form input:focus{outline:none}verdocs-template-roles .row.add-sequence{display:none}verdocs-template-roles .add-role{margin:0;padding:0;border:none;opacity:0.5;cursor:pointer;background:none}verdocs-template-roles .add-role:hover{opacity:1}verdocs-template-roles .add-role svg{width:32px;height:32px}verdocs-template-roles .add-step{margin:0;padding:0;border:none;opacity:0.5;cursor:pointer;background:none}verdocs-template-roles .add-step:hover{opacity:1}verdocs-template-roles .add-step svg{width:32px;height:32px}verdocs-template-roles.dragging .add-role{display:none}verdocs-template-roles.dragging form .row .recipient+.dropzone{display:-ms-flexbox;display:flex}verdocs-template-roles.dragging .row.add-sequence{display:-ms-flexbox;display:flex}verdocs-template-roles.dragging .row.add-sequence .dropzone{opacity:0.5;-ms-flex:0 0 120px;flex:0 0 120px;border-radius:30px;-ms-flex-align:center;align-items:center;background:rgba(101, 77, 203, 0.4980392157);-ms-flex-pack:center;justify-content:center;border:1px dashed #654dcb}verdocs-template-roles.dragging .row.add-sequence .dropzone.active{opacity:1}verdocs-template-roles .buttons{display:-ms-flexbox;display:flex;-webkit-column-gap:8px;-moz-column-gap:8px;column-gap:8px;margin-top:16px;-ms-flex-direction:row;flex-direction:row}verdocs-template-roles .empty{font-size:13px;margin-top:15px;margin-bottom:5px}verdocs-template-roles .empty svg{width:20px;height:20px;stroke:#666666;margin-bottom:-5px}verdocs-template-roles ::-webkit-input-placeholder{color:#aaaaaa}verdocs-template-roles ::-moz-placeholder{color:#aaaaaa}verdocs-template-roles :-ms-input-placeholder{color:#aaaaaa}verdocs-template-roles ::-ms-input-placeholder{color:#aaaaaa}verdocs-template-roles ::placeholder{color:#aaaaaa}',nt=rt,dt={everyone:"Everyone",everyone_as_creator:"Everyone as Me",organization_member:"Organization member",organization_member_as_creator:"Organization Member as Me",creator:"Me"},D='<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" fill="#00000089"><path d="m8.021 17.917-.313-2.5q-.27-.125-.625-.334-.354-.208-.625-.395l-2.312.979-1.979-3.438 1.979-1.5q-.021-.167-.031-.364-.011-.198-.011-.365 0-.146.011-.344.01-.198.031-.385l-1.979-1.5 1.979-3.417 2.312.958q.271-.187.615-.385t.635-.344l.313-2.5h3.958l.313 2.5q.312.167.625.344.312.177.604.385l2.333-.958 1.979 3.417-1.979 1.521q.021.187.021.364V10q0 .146-.01.333-.011.188-.011.396l1.958 1.5-1.979 3.438-2.312-.979q-.292.208-.615.395-.323.188-.614.334l-.313 2.5Zm1.937-5.355q1.063 0 1.813-.75t.75-1.812q0-1.062-.75-1.812t-1.813-.75q-1.041 0-1.802.75-.76.75-.76 1.812t.76 1.812q.761.75 1.802.75Zm0-1.333q-.5 0-.864-.364-.365-.365-.365-.865t.365-.865q.364-.364.864-.364t.865.364q.365.365.365.865t-.365.865q-.365.364-.865.364ZM10.021 10Zm-.854 6.583h1.666l.25-2.187q.605-.167 1.136-.49.531-.323 1.031-.802l2.021.875.854-1.375-1.792-1.354q.105-.333.136-.635.031-.303.031-.615 0-.292-.031-.573-.031-.281-.115-.635l1.792-1.396-.834-1.375-2.062.875q-.438-.438-1.021-.781-.583-.344-1.125-.49l-.271-2.208H9.167l-.271 2.208q-.584.146-1.125.458-.542.313-1.042.792l-2.021-.854-.833 1.375 1.75 1.354q-.083.333-.125.646-.042.312-.042.604t.042.594q.042.302.125.635l-1.75 1.375.833 1.375 2.021-.854q.479.458 1.021.771.542.312 1.146.479Z"/></svg>',ct='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" fill="#00000089"><path d="M2 12C2 6.48 6.48 2 12 2s10 4.48 10 10-4.48 10-10 10S2 17.52 2 12zm10 6c3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6 2.69 6 6 6z"></path></svg>',pt='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" fill="#00000089"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></svg>',mt='<svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" fill="#00000089"><path d="m18 7-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41 6 19l1.41-1.41L1.83 12 .41 13.41z"></path></svg>',_='<svg xmlns="http://www.w3.org/2000/svg" fill="#ffffff" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>',A='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="m9.225 21.225 4.65-4.65h8.45v4.65Zm-5.35-2.2H5.05l8.5-8.5-1.175-1.175-8.5 8.5Zm14.25-9.95L13.8 4.8l1.325-1.325q.625-.65 1.525-.663.9-.012 1.6.663l1.225 1.175q.675.675.663 1.562-.013.888-.663 1.513ZM16.7 10.55 6 21.225H1.675V16.9L12.35 6.225Zm-3.725-.625-.6-.575 1.175 1.175Z"/></svg>',N='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z" clip-rule="evenodd" /></svg>',Z='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M1.5 8.67v8.58a3 3 0 003 3h15a3 3 0 003-3V8.67l-8.928 5.493a3 3 0 01-3.144 0L1.5 8.67z" /><path d="M22.5 6.908V6.75a3 3 0 00-3-3h-15a3 3 0 00-3 3v.158l9.714 5.978a1.5 1.5 0 001.572 0L22.5 6.908z" /></svg>',ht=class{constructor(e){y(this,e),this.next=c(this,"next",7),this.exit=c(this,"exit",7),this.sdkError=c(this,"sdkError",7),this.rolesUpdated=c(this,"rolesUpdated",7),this.templateStore=null,this.roleStore=null,this.endpoint=k.getDefault(),this.templateId="",this.showingRoleDialog=null,this.showingSenderDialog=!1,this.sender=null,this.loading=!0}async componentWillLoad(){var e,t,s;try{if(this.endpoint.loadSession(),!this.templateId){console.log(`[ROLES] Missing required template ID ${this.templateId}`);return}if(!this.endpoint.session){console.log("[ROLES] Unable to start builder session, must be authenticated");return}await b(this.endpoint,this.templateId,!1).then(i=>{var l;this.templateStore=i,this.roleStore=q(this.templateId),console.log("RS",(l=this.roleStore)===null||l===void 0?void 0:l.state),this.loading=!1,this.roleStore.onChange("roles",r=>{var a;console.log("[ROLES] Roles changed",{roles:r}),(a=this.rolesUpdated)===null||a===void 0||a.emit({event:"updated",endpoint:this.endpoint,templateId:this.templateId,roles:r})})}).catch(i=>{console.log(i)})}catch(i){console.log("[FIELDS] Error with preview session",i),(e=this.sdkError)===null||e===void 0||e.emit(new w(i.message,(t=i.response)===null||t===void 0?void 0:t.status,(s=i.response)===null||s===void 0?void 0:s.data))}}componentDidRender(){I.dynamicDrop(!0),I(".recipient").draggable({listeners:{start:(function(t){t.target.classList.add("dragging"),this.el.classList.add("dragging")}).bind(this),move:(function(t){const s=+(t.target.getAttribute("dX")||0),i=+(t.target.getAttribute("dY")||0),l=+(t.target.dataset.sequence||0),r=+(t.target.dataset.order||0),a=t.dx+s,n=t.dy+i;t.target.setAttribute("dX",a),t.target.setAttribute("dY",n);const d=t.target.getBoundingClientRect();console.log("w",d.width),t.target.style.transform=`translate(${a+d.width-(r+1)}px, ${n-d.height*l}px)`}).bind(this),end:(function(t){t.target.classList.remove("dragging"),this.el.classList.remove("dragging"),t.target.removeAttribute("dX"),t.target.removeAttribute("dY"),t.target.style.transform=null}).bind(this)}}),I(".dropzone").dropzone({overlap:.05,ondrop:(async function(t){var s;console.log("dropped",t.target.classList),t.target.classList.remove("active");const i=t.relatedTarget.dataset.rolename,l=+t.target.dataset.sequence,r=+t.target.dataset.order;re(this.roleStore,i,{sequence:l,order:r}),await this.renumberTemplateRoles(),console.log("[ROLES] Updated roles",this.getSortedRoles()),(s=this.rolesUpdated)===null||s===void 0||s.emit({event:"updated",endpoint:this.endpoint,templateId:this.templateId,roles:this.getSortedRoles()})}).bind(this),ondropactivate:e=>{e.target.classList.add("visible")},ondropdeactivate:e=>{e.target.classList.remove("visible")},ondragenter:e=>{e.target.classList.add("active")},ondragleave:e=>{e.target.classList.remove("active")}})}handleCancel(){var e;(e=this.exit)===null||e===void 0||e.emit()}handleSubmit(){var e;(e=this.next)===null||e===void 0||e.emit()}getSortedRoles(){return this.roleStore.state.roles.sort((e,t)=>e.sequence===t.sequence?e.order-t.order:e.sequence-t.sequence)}getSequenceNumbers(){const e=[];return this.getSortedRoles().forEach(t=>{e.includes(t.sequence)||e.push(t.sequence)}),e.sort((t,s)=>t-s)}getRoleNames(){return this.getSortedRoles().map(t=>t.name)}getRolesAtSequence(e){return this.roleStore.state.roles.filter(t=>t&&t.sequence===e)}renumberTemplateRoles(){const e=[],t=[];return this.getSequenceNumbers().forEach((s,i)=>{this.getRolesAtSequence(s).forEach((l,r)=>{e.includes(l.name)||(l.sequence=i+1,l.order=r+1,e.push(l.name),t.push(oe(this.endpoint,this.templateId,l.name,{sequence:l.sequence,order:l.order})))})}),Promise.all(t)}getNextRoleName(){let e="",t=Object.keys(this.roleStore.state).length-1;do t++,e=`Recipient ${t}`;while(!e||this.roleStore.state.roles.some(s=>s&&s.name===e));return e}callCreateRole(e,t,s){console.log("[ROLES] Will create role",{name:e,sequence:t,order:s}),ie(this.endpoint,this.templateId,{template_id:this.templateId,name:e,sequence:t,message:"",order:s,full_name:"",email:"",phone:"",type:"signer",delegator:!1}).then(async i=>{var l;console.log("[ROLES] Created role",i),this.roleStore.set("roles",[...this.roleStore.state.roles,i]),await this.renumberTemplateRoles(),(l=this.rolesUpdated)===null||l===void 0||l.emit({event:"added",endpoint:this.endpoint,templateId:this.templateId,roles:this.getSortedRoles()})}).catch(i=>{console.log("[ROLES] Error creating role",i)})}handleAddRole(e,t){e.stopPropagation();const s=this.getRolesAtSequence(t).length+1,i=this.getNextRoleName();this.callCreateRole(i,t,s)}handleAddStep(e,t){e.stopPropagation();const s=1,i=this.getNextRoleName();this.callCreateRole(i,t,s)}render(){var e,t,s,i;if(!this.endpoint.session)return o(g,null,o("verdocs-component-error",{message:"You must be authenticated to use this module."}));if(this.loading||!(!((e=this.templateStore)===null||e===void 0)&&e.state.isLoaded))return console.log("Loading",this.loading,(t=this.templateStore)===null||t===void 0?void 0:t.state.isLoaded),o(g,{class:"loading"},o("verdocs-loader",null));console.log("Rendering roles",this.roleStore.get("roles"));const l=this.getRoleNames(),r=this.getSequenceNumbers();return console.log("Rendering",l,r),o(g,null,o("form",{onSubmit:a=>a.preventDefault(),onClick:a=>a.stopPropagation(),autocomplete:"off"},o("h5",null,"Roles and Workflow"),o("div",{class:"participants"},o("div",{class:"left-line"}),o("div",{class:"row"},o("div",{class:"icon",innerHTML:ct}),o("div",{class:"row-roles"},o("div",{class:"sender"},o("span",{class:"label"},"Sender:")," ",dt[(i=(s=this.templateStore)===null||s===void 0?void 0:s.state)===null||i===void 0?void 0:i.sender]," ",o("div",{class:"settings-button",innerHTML:D,onClick:()=>this.showingSenderDialog=!0,"aria-role":"button"})))),o("div",{class:"row add-sequence","data-sequence":0},o("div",{class:"icon",innerHTML:_}),o("div",{class:"row-roles"},o("div",{class:"dropzone","data-sequence":0,"data-order":1},"Add Step"))),r.map(a=>o(E,null,o("div",{class:"row"},o("div",{class:"icon",innerHTML:pt}),o("div",{class:"row-roles"},o("div",{class:"dropzone","data-order":.5,"data-sequence":a}),this.getRolesAtSequence(a).map(n=>!n.email?o(E,null,o("div",{class:"recipient",style:{backgroundColor:L(R(this.roleStore,n.name))},"data-rolename":n.name,"data-sequence":a,"data-order":n.order},o("span",{class:"type-icon",innerHTML:n.type==="signer"?A:n.type==="cc"?Z:N}),n.name," ",o("div",{class:"settings-button",innerHTML:D,onClick:()=>this.showingRoleDialog=n.name,"aria-role":"button"})),o("div",{class:"dropzone","data-order":n.order+.5,"data-sequence":a})):o(E,null,o("div",{class:"recipient",style:{borderColor:L(R(this.roleStore,n.name))},"data-rolename":n.name,"data-sequence":a,"data-order":n.order},o("span",{class:"type-icon",innerHTML:n.type==="signer"?A:n.type==="cc"?Z:N}),n.full_name," ",o("div",{class:"settings-button",innerHTML:D,onClick:()=>this.showingRoleDialog=n.name,"aria-role":"button"})),o("div",{class:"dropzone","data-order":n.order+.5,"data-sequence":a}))),o("button",{class:"add-role",innerHTML:_,onClick:n=>this.handleAddRole(n,a)}))),r.length>0&&o("div",{class:"row add-sequence","data-sequence":a},o("div",{class:"row-roles"},o("div",{class:"icon",innerHTML:_}),o("div",{class:"dropzone","data-sequence":a+1,"data-order":1},"Add Step"))))),o("div",{class:"row","data-sequence":r.length+1},o("div",{class:"row-roles"},o("div",{class:"icon",innerHTML:_}),o("button",{class:"add-step",innerHTML:_,onClick:a=>this.handleAddStep(a,r.length+1)}))),o("div",{class:"row"},o("div",{class:"icon",innerHTML:mt}),o("div",{class:"row-roles"},o("div",{class:"complete"},"Document Complete")))),l.length<1&&o("div",{class:"empty"},"You must add at least one Role before proceeding.",o("br",null)," Click the ",o("span",{innerHTML:_})," Add button above to get started."),o("div",{class:"buttons"},o("div",{class:"flex-fill"}),o("verdocs-button",{variant:"outline",label:"Cancel",size:"small",onClick:()=>this.handleCancel()}),o("verdocs-button",{label:"OK",size:"small",onClick:()=>this.handleSubmit(),disabled:l.length<1}))),this.showingRoleDialog&&o("verdocs-template-role-properties",{endpoint:this.endpoint,templateId:this.templateId,roleName:this.showingRoleDialog,onClose:()=>{this.showingRoleDialog=null},onDelete:async()=>{var a;this.showingRoleDialog=null,await this.renumberTemplateRoles(),(a=this.rolesUpdated)===null||a===void 0||a.emit({event:"deleted",endpoint:this.endpoint,templateId:this.templateId,roles:this.getSortedRoles()})}}),this.showingSenderDialog&&o("verdocs-template-sender",{endpoint:this.endpoint,templateId:this.templateId,onClose:()=>this.showingSenderDialog=!1}))}get el(){return $(this)}};ht.style=nt;const gt='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-template-visibility{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif}verdocs-template-visibility.loading{min-height:300px;position:relative;display:block}verdocs-template-visibility.empty{display:none}verdocs-template-visibility form{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}verdocs-template-visibility form .description{font-size:14px;text-align:justify;color:#5c6575}verdocs-template-visibility form h5{font-size:16px;font-weight:bold;color:#4c56cb;margin:0}verdocs-template-visibility form label{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;font-size:16px;font-weight:500;margin:0 0 4px 0;color:#33364b}verdocs-template-visibility form input{border:none;font-size:18px;padding:3px 6px 3px 0;background:transparent;border-bottom:1px solid #33364b}verdocs-template-visibility form input:focus{outline:none}verdocs-template-visibility form .input-row{display:-ms-flexbox;display:flex;margin:20px 0 0 0;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row}verdocs-template-visibility form .input-row verdocs-text-input{margin:0;display:-ms-flexbox;display:flex;-ms-flex:0 0 40px;flex:0 0 40px}verdocs-template-visibility form .input-row verdocs-text-input input{text-align:center}verdocs-template-visibility form .input-row verdocs-checkbox{-ms-flex:0;flex:0;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}verdocs-template-visibility form .input-row verdocs-checkbox label>input[type=checkbox]+*::before{margin-right:0}verdocs-template-visibility .buttons{display:-ms-flexbox;display:flex;-webkit-column-gap:8px;-moz-column-gap:8px;column-gap:8px;margin-top:25px;-ms-flex-direction:row;flex-direction:row}verdocs-template-visibility ::-webkit-input-placeholder{color:#aaaaaa}verdocs-template-visibility ::-moz-placeholder{color:#aaaaaa}verdocs-template-visibility :-ms-input-placeholder{color:#aaaaaa}verdocs-template-visibility ::-ms-input-placeholder{color:#aaaaaa}verdocs-template-visibility ::placeholder{color:#aaaaaa}',vt=gt,ut=class{constructor(e){y(this,e),this.close=c(this,"close",7),this.sdkError=c(this,"sdkError",7),this.templateUpdated=c(this,"templateUpdated",7),this.store=null,this.endpoint=k.getDefault(),this.templateId="",this.dirty=!1,this.personal=!1,this.public=!1}async componentWillLoad(){var e,t,s,i,l,r,a;try{if(this.endpoint.loadSession(),!this.templateId){console.log(`[VISIBILITY] Missing required template ID ${this.templateId}`);return}if(!this.endpoint.session){console.log("[VISIBILITY] Unable to start builder session, must be authenticated");return}this.store=await b(this.endpoint,this.templateId,!1),this.personal=((t=(e=this.store)===null||e===void 0?void 0:e.state)===null||t===void 0?void 0:t.is_personal)||!0,this.public=((i=(s=this.store)===null||s===void 0?void 0:s.state)===null||i===void 0?void 0:i.is_public)||!1,this.dirty=!1}catch(n){console.log("[TEMPLATE VISIBILITY] Error loading template",n),(l=this.sdkError)===null||l===void 0||l.emit(new w(n.message,(r=n.response)===null||r===void 0?void 0:r.status,(a=n.response)===null||a===void 0?void 0:a.data))}}handleCancel(e){var t,s,i,l,r;e.stopPropagation(),this.personal=(s=(t=this.store)===null||t===void 0?void 0:t.state)===null||s===void 0?void 0:s.is_personal,this.public=(l=(i=this.store)===null||i===void 0?void 0:i.state)===null||l===void 0?void 0:l.is_public,this.dirty=!1,(r=this.close)===null||r===void 0||r.emit()}async handleSave(e){var t,s,i;e.stopPropagation(),await F(this.endpoint,this.templateId,{is_personal:this.personal,is_public:this.public}),!((t=this.store)===null||t===void 0)&&t.state&&(this.store.state.is_personal=this.personal,this.store.state.is_public=this.public),this.dirty=!1,(s=this.templateUpdated)===null||s===void 0||s.emit({endpoint:this.endpoint,template:this.store.state,event:"visibility"}),(i=this.close)===null||i===void 0||i.emit()}render(){var e,t;return this.endpoint.session?!this.endpoint.session||!(!((t=(e=this.store)===null||e===void 0?void 0:e.state)===null||t===void 0)&&t.isLoaded)?o(g,{class:"empty"}):o(g,null,o("form",{onSubmit:s=>s.preventDefault(),onClick:s=>s.stopPropagation(),autocomplete:"off"},o("h5",null,"Visibility"),o("div",{class:"input-row"},o("label",{htmlFor:"verdocs-is-shared"},"Shared"),o("verdocs-checkbox",{id:"verdocs-is-shared",name:"is-shared",checked:!this.personal,value:"on",onInput:s=>{this.personal=!s.target.checked,this.dirty=!0}})),o("div",{class:"description"},"Shared templates are visible to other members of your Organization (if any)."),o("div",{class:"input-row"},o("label",{htmlFor:"verdocs-is-public"},"Public"),o("verdocs-checkbox",{id:"verdocs-is-public",name:"is-public",checked:this.public,value:"on",onInput:s=>{this.public=s.target.checked,this.dirty=!0}})),o("div",{class:"description"},"Public templates may appear in results when any other user searches for templates. Note that a template may be both Personal and Public, which may be useful if you want your template to be found via search but not otherwise displayed to other members of your Organization (if any)."),o("div",{class:"buttons"},o("verdocs-button",{size:"small",variant:"outline",label:"Cancel",disabled:!this.dirty,onClick:s=>this.handleCancel(s)}),o("verdocs-button",{size:"small",label:"Save",disabled:!this.dirty,onClick:s=>this.handleSave(s)})))):o(g,null,o("verdocs-component-error",{message:"You must be authenticated to use this module."}))}};ut.style=vt;export{Se as verdocs_preview,Re as verdocs_send,De as verdocs_template_attachments,Ve as verdocs_template_build_tabs,Ue as verdocs_template_create,et as verdocs_template_fields,ot as verdocs_template_name,at as verdocs_template_reminders,ht as verdocs_template_roles,ut as verdocs_template_visibility};

import{m as l,H as y,r as k,n as v}from"./components-BUY51Sj4.js";import{l as E,i as P,m as S,n as _,o as V,j as L,V as C}from"./index-FOFzXDN2.js";import{s as g}from"./utils-61c1093b-BdPfu6ZN.js";import{V as h}from"./Toast-b71de686-BSDPq5kl.js";import{S as D}from"./errors-887f1e88-DR85jTO9.js";import"./index-CDs2tPxN.js";import"./index-BXagdh-V.js";import"./iframe-BIHgOnMp.js";import"../sb-preview/runtime.js";import"./Types-e4a6eba5-DhtnXEHy.js";import"./index-0329eed3-CmPFFxNR.js";var c=function(){return c=Object.assign||function(a){for(var n,e=1,s=arguments.length;e<s;e++){n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},c.apply(this,arguments)},m=function(a,n,e,s){function o(i){return i instanceof e?i:new e(function(d){d(i)})}return new(e||(e=Promise))(function(i,d){function p(r){try{t(s.next(r))}catch(u){d(u)}}function f(r){try{t(s.throw(r))}catch(u){d(u)}}function t(r){r.done?i(r.value):o(r.value).then(p,f)}t((s=s.apply(a,n||[])).next())})},b=function(a,n){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,o,i,d;return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(t){return function(r){return f([t,r])}}function f(t){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,t[0]&&(e=0)),e;)try{if(s=1,o&&(i=t[0]&2?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[t[0]&2,i.value]),t[0]){case 0:case 1:i=t;break;case 4:return e.label++,{value:t[1],done:!1};case 5:e.label++,o=t[1],t=[0];continue;case 7:t=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(t[0]===6||t[0]===2)){e=0;continue}if(t[0]===3&&(!i||t[1]>i[0]&&t[1]<i[3])){e.label=t[1];break}if(t[0]===6&&e.label<i[1]){e.label=i[1],i=t;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(t);break}i[2]&&e.ops.pop(),e.trys.pop();continue}t=n.call(a,e)}catch(r){t=[6,r],o=0}finally{s=i=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}},x=function(a,n,e){if(e||arguments.length===2)for(var s=0,o=n.length,i;s<o;s++)(i||!(s in n))&&(i||(i=Array.prototype.slice.call(n,0,s)),i[s]=n[s]);return a.concat(i||Array.prototype.slice.call(n))},q='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-envelopes-list{display:-ms-flexbox;display:flex;padding:10px;font-size:18px;-ms-flex-wrap:nowrap;flex-wrap:nowrap;border-radius:6px;color:#33364b;-ms-flex-direction:column;flex-direction:column;font-family:"Inter", "Barlow", sans-serif}@media screen and (max-width: 800px){verdocs-envelopes-list{font-size:14px}}verdocs-envelopes-list .envelope-placeholder{height:48px;-ms-flex:0 0 48px;flex:0 0 48px;margin:5px 0;border-radius:5px;background:#f5f5fa}verdocs-envelopes-list .header{width:100%;row-gap:4px;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-column-gap:12px;-moz-column-gap:12px;column-gap:12px;margin:0 0 10px 0;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row}verdocs-envelopes-list .header .filter{width:300px}verdocs-envelopes-list .header verdocs-text-input{margin:0}verdocs-envelopes-list .header verdocs-text-input input{height:32px}verdocs-envelopes-list .filter{-ms-flex-align:center;align-items:center}verdocs-envelopes-list .envelope{width:100%;margin:3px 0;background:#ffffff}verdocs-envelopes-list .envelope:hover{cursor:pointer;background:#f5f5fa}verdocs-envelopes-list .envelope .inner{gap:12px;display:-ms-flexbox;display:flex;padding:8px 14px;border-radius:5px;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;container-type:inline-size}verdocs-envelopes-list .envelope .inner svg{width:24px;height:24px}verdocs-envelopes-list .vert-spacer{height:50px;display:-ms-flexbox;display:flex;-ms-flex:0 0 1px;flex:0 0 1px;border-right:1px solid #dad8dd}@media screen and (max-width: 800px){verdocs-envelopes-list .vert-spacer{display:none}}@media screen and (max-width: 800px){verdocs-envelopes-list .envelope-icon{display:none}}@media screen and (max-width: 800px){verdocs-envelopes-list verdocs-checkbox{display:none}}verdocs-envelopes-list .last-modified{color:#444;display:-ms-flexbox;display:flex;-ms-flex:0 0 180px;flex:0 0 180px;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;white-space:nowrap}@media screen and (max-width: 800px){verdocs-envelopes-list .last-modified{display:none}}verdocs-envelopes-list .envelope-name{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;color:#000000;line-height:28px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}verdocs-envelopes-list .envelope-recipients{color:#4b5563;font-weight:700;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}verdocs-envelopes-list .empty-text{text-align:center;margin:16px 0 0 0;padding:80px 80px;border:2px solid #ccc}verdocs-envelopes-list .containing{gap:12px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row}@media screen and (max-width: 800px){verdocs-envelopes-list verdocs-status-indicator{font-size:14px}}',O=q,A='<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="#000000" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z" /></svg>',U=[{value:"all",label:"All"},{value:"inbox",label:"Inbox"},{value:"sent",label:"Sent"},{value:"completed",label:"Completed"},{value:"action",label:"Action Required"},{value:"waiting",label:"Waiting on Others"}],M=[{value:"all",label:"All"},{value:"pending",label:"Pending"},{value:"in progress",label:"In Progress"},{value:"complete",label:"Completed"},{value:"declined",label:"Declined"},{value:"canceled",label:"Canceled"}],z=[{value:"created_at",label:"Created"},{value:"updated_at",label:"Updated"},{value:"canceled_at",label:"Canceled"},{value:"envelope_name",label:"Name"},{value:"envelope_status",label:"Status"}],H=function(){function a(n){k(this,n),this.changeView=v(this,"changeView",7),this.changeStatus=v(this,"changeStatus",7),this.changeSort=v(this,"changeSort",7),this.changeMatch=v(this,"changeMatch",7),this.sdkError=v(this,"sdkError",7),this.viewEnvelope=v(this,"viewEnvelope",7),this.finishEnvelope=v(this,"finishEnvelope",7),this.endpoint=C.getDefault(),this.view=void 0,this.status="all",this.sort="created_at",this.match="",this.showPagination=!0,this.rowsPerPage=10,this.selectedPage=0,this.count=0,this.initiallyLoaded=!1,this.loading=!0,this.selectedEnvelopes=[],this.envelopes=[]}return a.prototype.handleViewUpdated=function(){return this.queryEnvelopes()},a.prototype.handleStatusUpdated=function(){return this.queryEnvelopes()},a.prototype.handleSortUpdated=function(){return this.queryEnvelopes()},a.prototype.handleMatchUpdated=function(){return this.queryEnvelopes()},a.prototype.handlePageUpdated=function(){return this.queryEnvelopes()},a.prototype.componentWillLoad=function(){if(this.endpoint.loadSession(),!this.endpoint.session){console.log("[ENVELOPES] Must be authenticated");return}},a.prototype.componentDidLoad=function(){return m(this,void 0,void 0,function(){return b(this,function(n){switch(n.label){case 0:return[4,this.queryEnvelopes()];case 1:return n.sent(),this.initiallyLoaded=!0,[2]}})})},a.prototype.queryEnvelopes=function(){return m(this,void 0,void 0,function(){var n,e,s,o,i,d;return b(this,function(p){switch(p.label){case 0:switch(p.trys.push([0,2,,3]),this.loading=!0,o={page:this.selectedPage,rows:this.rowsPerPage},this.view){case"all":o=c(c({},o),{status:this.status==="all"?["pending","in progress","complete","declined","canceled"]:[this.status]});break;case"inbox":o=c({},o);break;case"sent":o=c(c({},o),{is_owner:!0});break;case"action":o=c(c({},o),{status:["pending","in progress"]});break;case"waiting":o=c(c({},o),{is_owner:!0,status:["pending","in progress"]});break;case"completed":o=c(c({},o),{status:["complete"]});break;default:o=c(c({},o),{status:this.status==="all"?["pending","in progress","complete","declined","canceled"]:[this.status]})}return this.view==="all"&&this.status!=="all"&&(o.status=[this.status]),this.match.trim(),[4,E(this.endpoint,o)];case 1:return i=p.sent(),this.envelopes=i.envelopes,this.count=i.total,this.loading=!1,[3,3];case 2:return d=p.sent(),this.loading=!1,console.log("[ENVELOPES] Error listing envelopes",d),(n=this.sdkError)===null||n===void 0||n.emit(new D(d.message,(e=d.response)===null||e===void 0?void 0:e.status,(s=d.response)===null||s===void 0?void 0:s.data)),[3,3];case 3:return[2]}})})},a.prototype.handleDownload=function(){var n=this;g(this.endpoint,this.selectedEnvelopes).then(function(){n.selectedEnvelopes=[]}).catch(function(e){console.log("[ENVELOPES] Download error",e),h("Download error: "+e.message,{style:"error"})})},a.prototype.downloadEnvelope=function(n){g(this.endpoint,[n]).catch(function(e){console.log("[ENVELOPES] Download error",e),h("Download error: "+e.message,{style:"error"})})},a.prototype.render=function(){var n=this;return l(y,{key:"4b7bda7f7615513f3e263d8dd0635733e069829d"},l("div",{key:"2f8e6a7c99c0beba2ea5ca4b70f5547f6735d61e",class:"header"},l("div",{key:"3be14d43f05437301237aef3ce5ea491f6e7747c",class:"filter"},l("verdocs-text-input",{key:"3ec6f05183dbede1787c8f8eca98b5db9079b488",id:"verdocs-filter-name",value:this.match,clearable:!0,autocomplete:"off",placeholder:"Filter by Name, Recipient, or Field...",onFocusout:function(e){var s;n.match=e.target.value.trim(),(s=n.changeMatch)===null||s===void 0||s.emit(n.match)}})),l("verdocs-quick-filter",{key:"7822828a8a7ebbb820ee689b09c9e0a5eb764edb",label:"View",value:this.view,options:U,onOptionSelected:function(e){n.view=e.detail.value}}),this.view==="all"&&l("verdocs-quick-filter",{key:"a181198baa609fd7e170635a2f9e5c567d9227eb",label:"Status",value:this.status,options:M,onOptionSelected:function(e){n.status=e.detail.value}}),this.view==="all"&&l("verdocs-quick-filter",{key:"14a253295139825b43c20bafe8e56a253242f1f8",label:"Sort By",value:this.sort,options:z,onOptionSelected:function(e){n.sort=e.detail.value}}),this.loading&&l("verdocs-spinner",{key:"8e72be52c0dcf484761187c14ef99607b91ab9ca",mode:"dark",size:24}),l("div",{key:"c31e47e5b85fff3841620bde02ecf71a177b769f",style:{display:"flex",flex:"1"}}),this.selectedEnvelopes.length>0&&l("verdocs-button",{key:"4fc3bf3c3e04efd833f4dec4e09862969a30da2a",label:"Download (".concat(this.selectedEnvelopes.length,")"),onClick:function(){return n.handleDownload()}})),this.envelopes.map(function(e){var s,o=S(e),i=_(n.endpoint.session,e),d=o.find(function(t){var r;return t.email===((r=n.endpoint.session)===null||r===void 0?void 0:r.email)||""}),p=d&&i&&V(((s=n.endpoint.session)===null||s===void 0?void 0:s.email)||"",o),f=[{label:"View Envelope",id:"view"},{label:"Finish Envelope",id:"finish",disabled:!p},{label:"Download",id:"download"},{label:"Cancel",id:"cancel",disabled:!i}];return l("div",{class:"envelope",key:e.id,onClick:function(){var t;return(t=n.viewEnvelope)===null||t===void 0?void 0:t.emit({endpoint:n.endpoint,envelope:e})}},l("div",{class:"inner"},l("verdocs-checkbox",{checked:n.selectedEnvelopes.findIndex(function(t){return t.id===e.id})!==-1,onClick:function(t){return t.stopPropagation()},onInput:function(t){t.target.checked?n.selectedEnvelopes=x(x([],n.selectedEnvelopes,!0),[e],!1):n.selectedEnvelopes=n.selectedEnvelopes.filter(function(r){return r.id!==e.id})}}),l("div",{class:"vert-spacer"}),l("span",{innerHTML:A,class:"envelope-icon"}),l("div",{class:"envelope-name"},e.name,":  ",l("div",{class:"envelope-recipients"},e.recipients.map(function(t){return t.full_name}).join(", "))),l("div",{class:"vert-spacer"}),l("verdocs-status-indicator",{envelope:e,style:{width:"125px"}}),l("div",{class:"vert-spacer"}),l("div",{class:"last-modified"},new Date(e.updated_at).toLocaleString()),l("div",{class:"vert-spacer"}),l("verdocs-dropdown",{options:f,onOptionSelected:function(t){var r,u;switch(t.detail.id){case"view":(r=n.viewEnvelope)===null||r===void 0||r.emit({endpoint:n.endpoint,envelope:e});break;case"finish":(u=n.finishEnvelope)===null||u===void 0||u.emit({endpoint:n.endpoint,envelope:e});break;case"download":n.downloadEnvelope(e);break;case"cancel":window.confirm("Are you sure you want to cancel this envelope?")&&(L(n.endpoint,e.id).then(function(){return h("Envelope canceled")}).catch(function(w){return h("Unable to cancel envelope: "+w.messabge,{style:"error"})}),n.queryEnvelopes().catch(function(){}));break}}})))}),!this.initiallyLoaded&&l("div",{key:"cf943955958934d6bab489b04c6af5b026649998",style:{width:"100%"}},P(0,this.rowsPerPage).map(function(){return l("div",{class:"envelope-placeholder"})})),this.initiallyLoaded&&!this.envelopes.length&&l("div",{key:"e9c7b5ee1c2600ff9876624f3d61a830903f0345",class:"empty-text"},"No matching envelopes found. Please adjust your filters and try again."),this.initiallyLoaded&&this.envelopes.length&&this.showPagination?l("div",{style:{marginTop:"20px"}},l("verdocs-pagination",{selectedPage:this.selectedPage,perPage:this.rowsPerPage,itemCount:this.count,onSelectPage:function(e){n.selectedPage=e.detail.selectedPage}})):l("div",null))},Object.defineProperty(a,"watchers",{get:function(){return{view:["handleViewUpdated"],status:["handleStatusUpdated"],sort:["handleSortUpdated"],match:["handleMatchUpdated"],selectedPage:["handlePageUpdated"]}},enumerable:!1,configurable:!0}),a}();H.style=O;export{H as verdocs_envelopes_list};

import{m as r,H as x,r as m,n as u}from"./components-BUY51Sj4.js";import{g,i as b,f as y,V as w}from"./index-FOFzXDN2.js";import{S as k}from"./errors-887f1e88-DR85jTO9.js";import"./index-CDs2tPxN.js";import"./index-BXagdh-V.js";import"./iframe-BIHgOnMp.js";import"../sb-preview/runtime.js";var h=function(l,o,t,n){function a(e){return e instanceof t?e:new t(function(c){c(e)})}return new(t||(t=Promise))(function(e,c){function d(s){try{i(n.next(s))}catch(f){c(f)}}function p(s){try{i(n.throw(s))}catch(f){c(f)}}function i(s){s.done?e(s.value):a(s.value).then(d,p)}i((n=n.apply(l,o||[])).next())})},v=function(l,o){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},n,a,e,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(i){return function(s){return p([i,s])}}function p(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(t=0)),t;)try{if(n=1,a&&(e=i[0]&2?a.return:i[0]?a.throw||((e=a.return)&&e.call(a),0):a.next)&&!(e=e.call(a,i[1])).done)return e;switch(a=0,e&&(i=[i[0]&2,e.value]),i[0]){case 0:case 1:e=i;break;case 4:return t.label++,{value:i[1],done:!1};case 5:t.label++,a=i[1],i=[0];continue;case 7:i=t.ops.pop(),t.trys.pop();continue;default:if(e=t.trys,!(e=e.length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){t=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){t.label=i[1];break}if(i[0]===6&&t.label<e[1]){t.label=e[1],e=i;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(i);break}e[2]&&t.ops.pop(),t.trys.pop();continue}i=o.call(l,t)}catch(s){i=[6,s],a=0}finally{n=e=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},A='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-activity-box{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;font-size:18px;min-width:300px;-ms-flex-wrap:nowrap;flex-wrap:nowrap;color:#33364b;-ms-flex-align:center;align-items:center;border:1px solid #ccc;-ms-flex-direction:column;flex-direction:column;font-family:"Inter", "Barlow", sans-serif;background:#ffffff;padding:20px 20px 8px 20px}verdocs-activity-box .box-title{width:100%;display:-ms-flexbox;display:flex;color:#33364b;font-size:20px;font-weight:600;-webkit-column-gap:10px;-moz-column-gap:10px;column-gap:10px;margin:0 0 20px 0;-ms-flex-align:center;align-items:center}verdocs-activity-box .box-title .count{margin:0 0 0 6px;font-weight:300}verdocs-activity-box .box-title verdocs-loader{margin:0 0 20px 0}@media screen and (max-width: 1200px){verdocs-activity-box .box-title{font-size:18px}verdocs-activity-box .box-title .count{display:none}}verdocs-activity-box .spacer{-ms-flex:1;flex:1}verdocs-activity-box .loading-placeholder{width:100%;height:62px;display:block;-ms-flex:0 0 62px;flex:0 0 62px;margin:0 0 10px 0;border-radius:6px;background-color:#f5f8f9}verdocs-activity-box .loading-placeholder .loading-placeholder-bg{height:62px;position:relative;background:#f5f8f9;-webkit-animation-duration:1.25s;animation-duration:1.25s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:loadingPlaceholderSwoop;animation-name:loadingPlaceholderSwoop;background:-webkit-gradient(linear, left top, right top, color-stop(10%, #f5f8f9), color-stop(18%, #eeeeee), color-stop(33%, #f5f8f9));background:linear-gradient(to right, #f5f8f9 10%, #eeeeee 18%, #f5f8f9 33%);background-size:800px 62px}verdocs-activity-box .activity-entry{width:100%;display:-ms-flexbox;display:flex;-ms-flex:0 0 62px;flex:0 0 62px;border-radius:6px;margin-bottom:10px;-ms-flex-direction:row;flex-direction:row;padding:0 16px 0 0;background:#f5f8f9;-ms-flex-align:center;align-items:center;border:1px solid #f5f8f9}verdocs-activity-box .activity-entry:hover{cursor:pointer;background:#f2f4f5;border:1px solid #ddd}verdocs-activity-box .activity-entry svg{width:32px;height:32px;margin-right:20px}@media screen and (max-width: 1300px){verdocs-activity-box .activity-entry svg{width:24px;height:24px;margin-right:15px}}verdocs-activity-box .activity-entry .title{-ms-flex:1;flex:1;color:black;font-size:16px;font-weight:500;margin-left:12px}@media screen and (max-width: 1300px){verdocs-activity-box .activity-entry .title{font-size:14px}}verdocs-activity-box .activity-entry .time-ago{height:24px;display:-ms-flexbox;display:flex;-ms-flex:0 0 24px;flex:0 0 24px;color:#7f8e92;font-size:16px;font-weight:500;padding-left:14px;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;border-left:1px solid #d8e3e6}@media screen and (max-width: 1300px){verdocs-activity-box .activity-entry .time-ago{font-size:14px}}@-webkit-keyframes loadingPlaceholderSwoop{0%{background-position:-468px 0}100%{background-position:468px 0}}@keyframes loadingPlaceholderSwoop{0%{background-position:-468px 0}100%{background-position:468px 0}}',E=A,S="https://verdocs-public-assets.s3.amazonaws.com/no-verdocs.png",_=function(){function l(o){m(this,o),this.sdkError=u(this,"sdkError",7),this.viewEnvelope=u(this,"viewEnvelope",7),this.viewAll=u(this,"viewAll",7),this.endpoint=w.getDefault(),this.items=5,this.view=void 0,this.header=void 0,this.title="",this.count=0,this.loading=!0,this.entries=[]}return l.prototype.componentWillLoad=function(){return h(this,void 0,void 0,function(){var o,t,n;return v(this,function(a){try{if(this.endpoint.loadSession(),!this.endpoint.session)return console.log("[ACTIVITIES] Must be authenticated"),[2];this.loadActivity()}catch(e){console.log("[ACTIVITIES] Error with preview session",e),(o=this.sdkError)===null||o===void 0||o.emit(new k(e.message,(t=e.response)===null||t===void 0?void 0:t.status,(n=e.response)===null||n===void 0?void 0:n.data))}return[2]})})},l.prototype.handleItemsUpdated=function(){return this.loadActivity()},l.prototype.handleViewUpdated=function(){return this.loadActivity()},l.prototype.loadActivity=function(){return h(this,void 0,void 0,function(){var o,t;return v(this,function(n){switch(n.label){case 0:return this.loading=!0,[4,g(this.endpoint,0)];case 1:return o=n.sent(),this.view==="action"?(t="Action Required",this.entries=o.action_required.result,this.count=o.action_required.total):this.view==="waiting"?(t="Waiting on Others",this.entries=o.waiting_others.result,this.count=o.waiting_others.total):this.view==="completed"&&(t="Completed",this.entries=o.completed.result,this.count=o.completed.total),this.title=this.header!==void 0?this.header:t,this.loading=!1,[2]}})})},l.prototype.render=function(){var o=this;return this.loading?r(x,{style:{minHeight:"300px"}},this.title&&r("div",{class:"box-title"},this.title," ",r("span",{class:"count"},"(0)")),b(0,this.items).map(function(){return r("div",{class:"loading-placeholder"},r("div",{class:"loading-placeholder-bg"}))})):r(x,null,this.title&&r("div",{class:"box-title"},this.title," ",r("span",{class:"count"},"(",this.count,")"),r("div",{class:"spacer"}),r("verdocs-button",{label:"View All",size:"small",onClick:function(){var t;return(t=o.viewAll)===null||t===void 0?void 0:t.emit({endpoint:o.endpoint,view:o.view})}})),this.count>0?this.entries.slice(0,Math.max(this.items,1)).map(function(t){return r("div",{class:"activity-entry",onClick:function(){var n;(n=o.viewEnvelope)===null||n===void 0||n.emit({endpoint:o.endpoint,entry:t})}},r("div",{class:"title"},t.name,r("br",null)," ",r("strong",null,t.recipient.name)),r("div",{class:"time-ago"},y(t.updated_at)))}):r("img",{src:S,alt:"No documents to show",style:{width:"190px",margin:"0 auto"}}))},Object.defineProperty(l,"watchers",{get:function(){return{items:["handleItemsUpdated"],view:["handleViewUpdated"]}},enumerable:!1,configurable:!0}),l}();_.style=E;export{_ as verdocs_activity_box};

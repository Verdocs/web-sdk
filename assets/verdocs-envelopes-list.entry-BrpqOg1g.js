import{r as f,c as o,h as s,H as m}from"./preview-X13RbvS2.js";import{V as g,l as x,i as b,m as w,n as y,o as E,j as k}from"./index-CL2BROP6.js";import{s as p}from"./utils-2cf884a7-7ztE_qbo.js";import{V as d}from"./Toast-b71de686-C5I_O3Ev.js";import{S as P}from"./errors-887f1e88-DR-_BPTJ.js";import"./chunk-QN4WKJDJ-Bf_F3oir.js";import"./iframe-DWV1oore.js";import"../sb-preview/runtime.js";import"./Types-e4a6eba5-BiEcJ5ex.js";import"./index-fc5a08b9-CmPFFxNR.js";const S='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-envelopes-list{display:-ms-flexbox;display:flex;padding:10px;font-size:18px;-ms-flex-wrap:nowrap;flex-wrap:nowrap;border-radius:6px;color:#33364b;-ms-flex-direction:column;flex-direction:column;font-family:"Inter", "Barlow", sans-serif}@media screen and (max-width: 800px){verdocs-envelopes-list{font-size:14px}}verdocs-envelopes-list .envelope-placeholder{height:48px;-ms-flex:0 0 48px;flex:0 0 48px;margin:5px 0;border-radius:5px;background:#f5f5fa}verdocs-envelopes-list .header{width:100%;row-gap:4px;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-column-gap:12px;-moz-column-gap:12px;column-gap:12px;margin:0 0 10px 0;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row}verdocs-envelopes-list .header .filter{width:300px}verdocs-envelopes-list .header verdocs-text-input{margin:0}verdocs-envelopes-list .header verdocs-text-input input{height:32px}verdocs-envelopes-list .filter{-ms-flex-align:center;align-items:center}verdocs-envelopes-list .envelope{width:100%;margin:3px 0;background:#ffffff}verdocs-envelopes-list .envelope:hover{cursor:pointer;background:#f5f5fa}verdocs-envelopes-list .envelope .inner{gap:12px;display:-ms-flexbox;display:flex;padding:8px 14px;border-radius:5px;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;container-type:inline-size}verdocs-envelopes-list .envelope .inner svg{width:24px;height:24px}verdocs-envelopes-list .vert-spacer{height:50px;display:-ms-flexbox;display:flex;-ms-flex:0 0 1px;flex:0 0 1px;border-right:1px solid #dad8dd}@media screen and (max-width: 800px){verdocs-envelopes-list .vert-spacer{display:none}}@media screen and (max-width: 800px){verdocs-envelopes-list .envelope-icon{display:none}}@media screen and (max-width: 800px){verdocs-envelopes-list verdocs-checkbox{display:none}}verdocs-envelopes-list .last-modified{color:#444;display:-ms-flexbox;display:flex;-ms-flex:0 0 180px;flex:0 0 180px;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;white-space:nowrap}@media screen and (max-width: 800px){verdocs-envelopes-list .last-modified{display:none}}verdocs-envelopes-list .envelope-name{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;color:#000000;line-height:28px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}verdocs-envelopes-list .envelope-recipients{color:#4b5563;font-weight:700;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}verdocs-envelopes-list .empty-text{text-align:center;margin:16px 0 0 0;padding:80px 80px;border:2px solid #ccc}verdocs-envelopes-list .containing{gap:12px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row}@media screen and (max-width: 800px){verdocs-envelopes-list verdocs-status-indicator{font-size:14px}}',V=S,_='<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="#000000" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z" /></svg>',C=[{value:"all",label:"All"},{value:"inbox",label:"Inbox"},{value:"sent",label:"Sent"},{value:"completed",label:"Completed"},{value:"action",label:"Action Required"},{value:"waiting",label:"Waiting on Others"}],L=[{value:"all",label:"All"},{value:"pending",label:"Pending"},{value:"in progress",label:"In Progress"},{value:"complete",label:"Completed"},{value:"declined",label:"Declined"},{value:"canceled",label:"Canceled"}],q=[{value:"created_at",label:"Created"},{value:"updated_at",label:"Updated"},{value:"canceled_at",label:"Canceled"},{value:"envelope_name",label:"Name"},{value:"envelope_status",label:"Status"}],D=class{constructor(e){f(this,e),this.changeView=o(this,"changeView",7),this.changeStatus=o(this,"changeStatus",7),this.changeSort=o(this,"changeSort",7),this.changeMatch=o(this,"changeMatch",7),this.sdkError=o(this,"sdkError",7),this.viewEnvelope=o(this,"viewEnvelope",7),this.finishEnvelope=o(this,"finishEnvelope",7),this.endpoint=g.getDefault(),this.view=void 0,this.status="all",this.sort="created_at",this.match="",this.showPagination=!0,this.rowsPerPage=10,this.selectedPage=0,this.count=0,this.initiallyLoaded=!1,this.loading=!0,this.selectedEnvelopes=[],this.envelopes=[]}handleViewUpdated(){return this.queryEnvelopes()}handleStatusUpdated(){return this.queryEnvelopes()}handleSortUpdated(){return this.queryEnvelopes()}handleMatchUpdated(){return this.queryEnvelopes()}handlePageUpdated(){return this.queryEnvelopes()}componentWillLoad(){if(this.endpoint.loadSession(),!this.endpoint.session){console.log("[ENVELOPES] Must be authenticated");return}}async componentDidLoad(){await this.queryEnvelopes(),this.initiallyLoaded=!0}async queryEnvelopes(){var e,l,n;try{this.loading=!0;let t={page:this.selectedPage,rows:this.rowsPerPage};switch(this.view){case"all":t={...t,status:this.status==="all"?["pending","in progress","complete","declined","canceled"]:[this.status]};break;case"inbox":t={...t};break;case"sent":t={...t,is_owner:!0};break;case"action":t={...t,status:["pending","in progress"]};break;case"waiting":t={...t,is_owner:!0,status:["pending","in progress"]};break;case"completed":t={...t,status:["complete"]};break;default:t={...t,status:this.status==="all"?["pending","in progress","complete","declined","canceled"]:[this.status]}}this.view==="all"&&this.status!=="all"&&(t.status=[this.status]),this.match.trim();const r=await x(this.endpoint,t);this.envelopes=r.envelopes,this.count=r.total,this.loading=!1}catch(t){this.loading=!1,console.log("[ENVELOPES] Error listing envelopes",t),(e=this.sdkError)===null||e===void 0||e.emit(new P(t.message,(l=t.response)===null||l===void 0?void 0:l.status,(n=t.response)===null||n===void 0?void 0:n.data))}}handleDownload(){p(this.endpoint,this.selectedEnvelopes).then(()=>{this.selectedEnvelopes=[]}).catch(e=>{console.log("[ENVELOPES] Download error",e),d("Download error: "+e.message,{style:"error"})})}downloadEnvelope(e){p(this.endpoint,[e]).catch(l=>{console.log("[ENVELOPES] Download error",l),d("Download error: "+l.message,{style:"error"})})}render(){return s(m,{key:"1533851ebdceca1b689aec246de482f547817585"},s("div",{key:"a33685ad776d4ad2282a794fc08a6928c2a2c2c6",class:"header"},s("div",{key:"774df81f4db58154c20b5aa6d00585cf70f2c0be",class:"filter"},s("verdocs-text-input",{key:"d279867c1693c181d115ed9380263f7ca33cf54e",id:"verdocs-filter-name",value:this.match,clearable:!0,autocomplete:"off",placeholder:"Filter by Name, Recipient, or Field...",onFocusout:e=>{var l;this.match=e.target.value.trim(),(l=this.changeMatch)===null||l===void 0||l.emit(this.match)}})),s("verdocs-quick-filter",{key:"0e24f54710055db16f106c43419ae8c7d60a137a",label:"View",value:this.view,options:C,onOptionSelected:e=>{this.view=e.detail.value}}),this.view==="all"&&s("verdocs-quick-filter",{key:"d94ade343fe8dfabb11cc6995960c2a221e3fdc4",label:"Status",value:this.status,options:L,onOptionSelected:e=>{this.status=e.detail.value}}),this.view==="all"&&s("verdocs-quick-filter",{key:"5b7e637fb7621c1e3b8c52888fd9fabc5b56e27e",label:"Sort By",value:this.sort,options:q,onOptionSelected:e=>{this.sort=e.detail.value}}),this.loading&&s("verdocs-spinner",{key:"2c1a05c9c04cd61733816141c6811ba52229056c",mode:"dark",size:24}),s("div",{key:"5af2c9f56ba9bb21cba28637b925dc011613bd05",style:{display:"flex",flex:"1"}}),this.selectedEnvelopes.length>0&&s("verdocs-button",{key:"06bc8e1fd09692bdaf9e56268a8592d97ff10cce",label:`Download (${this.selectedEnvelopes.length})`,onClick:()=>this.handleDownload()})),this.envelopes.map(e=>{var l;const n=w(e),t=y(this.endpoint.session,e),h=n.find(i=>{var a;return i.email===((a=this.endpoint.session)===null||a===void 0?void 0:a.email)||""})&&t&&E(((l=this.endpoint.session)===null||l===void 0?void 0:l.email)||"",n),v=[{label:"View Envelope",id:"view"},{label:"Finish Envelope",id:"finish",disabled:!h},{label:"Download",id:"download"},{label:"Cancel",id:"cancel",disabled:!t}];return s("div",{class:"envelope",key:e.id,onClick:()=>{var i;return(i=this.viewEnvelope)===null||i===void 0?void 0:i.emit({endpoint:this.endpoint,envelope:e})}},s("div",{class:"inner"},s("verdocs-checkbox",{checked:this.selectedEnvelopes.findIndex(i=>i.id===e.id)!==-1,onClick:i=>i.stopPropagation(),onInput:i=>{i.target.checked?this.selectedEnvelopes=[...this.selectedEnvelopes,e]:this.selectedEnvelopes=this.selectedEnvelopes.filter(a=>a.id!==e.id)}}),s("div",{class:"vert-spacer"}),s("span",{innerHTML:_,class:"envelope-icon"}),s("div",{class:"envelope-name"},e.name,":Â  ",s("div",{class:"envelope-recipients"},e.recipients.map(i=>i.full_name).join(", "))),s("div",{class:"vert-spacer"}),s("verdocs-status-indicator",{envelope:e,style:{width:"125px"}}),s("div",{class:"vert-spacer"}),s("div",{class:"last-modified"},new Date(e.updated_at).toLocaleString()),s("div",{class:"vert-spacer"}),s("verdocs-dropdown",{options:v,onOptionSelected:i=>{var a,c;switch(i.detail.id){case"view":(a=this.viewEnvelope)===null||a===void 0||a.emit({endpoint:this.endpoint,envelope:e});break;case"finish":(c=this.finishEnvelope)===null||c===void 0||c.emit({endpoint:this.endpoint,envelope:e});break;case"download":this.downloadEnvelope(e);break;case"cancel":window.confirm("Are you sure you want to cancel this envelope?")&&(k(this.endpoint,e.id).then(()=>d("Envelope canceled")).catch(u=>d("Unable to cancel envelope: "+u.messabge,{style:"error"})),this.queryEnvelopes().catch(()=>{}));break}}})))}),!this.initiallyLoaded&&s("div",{key:"ff38c547cc65bd2559dc9f2fb5be237384f56be5",style:{width:"100%"}},b(0,this.rowsPerPage).map(()=>s("div",{class:"envelope-placeholder"}))),this.initiallyLoaded&&!this.envelopes.length&&s("div",{key:"bd666277c44235c7ef9855b1b7985860b8d8f0da",class:"empty-text"},"No matching envelopes found. Please adjust your filters and try again."),this.initiallyLoaded&&this.envelopes.length&&this.showPagination?s("div",{style:{marginTop:"20px"}},s("verdocs-pagination",{selectedPage:this.selectedPage,perPage:this.rowsPerPage,itemCount:this.count,onSelectPage:e=>{this.selectedPage=e.detail.selectedPage}})):s("div",null))}static get watchers(){return{view:["handleViewUpdated"],status:["handleStatusUpdated"],sort:["handleSortUpdated"],match:["handleMatchUpdated"],selectedPage:["handlePageUpdated"]}}};D.style=V;export{D as verdocs_envelopes_list};

import{c as g}from"./index-296aabaf-RiVWanv8.js";import{k as v}from"./index-FOFzXDN2.js";import{u as p}from"./index-7456b04f-WYt0v2to.js";var E=function(f,u,t,n){function a(e){return e instanceof t?e:new t(function(l){l(e)})}return new(t||(t=Promise))(function(e,l){function c(i){try{r(n.next(i))}catch(s){l(s)}}function o(i){try{r(n.throw(i))}catch(s){l(s)}}function r(i){i.done?e(i.value):a(i.value).then(c,o)}r((n=n.apply(f,u||[])).next())})},y=function(f,u){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},n,a,e,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(r){return function(i){return o([r,i])}}function o(r){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,r[0]&&(t=0)),t;)try{if(n=1,a&&(e=r[0]&2?a.return:r[0]?a.throw||((e=a.return)&&e.call(a),0):a.next)&&!(e=e.call(a,r[1])).done)return e;switch(a=0,e&&(r=[r[0]&2,e.value]),r[0]){case 0:case 1:e=r;break;case 4:return t.label++,{value:r[1],done:!1};case 5:t.label++,a=r[1],r=[0];continue;case 7:r=t.ops.pop(),t.trys.pop();continue;default:if(e=t.trys,!(e=e.length>0&&e[e.length-1])&&(r[0]===6||r[0]===2)){t=0;continue}if(r[0]===3&&(!e||r[1]>e[0]&&r[1]<e[3])){t.label=r[1];break}if(r[0]===6&&t.label<e[1]){t.label=e[1],e=r;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(r);break}e[2]&&t.ops.pop(),t.trys.pop();continue}r=u.call(f,t)}catch(i){r=[6,i],a=0}finally{n=e=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},h=function(f,u,t){if(t||arguments.length===2)for(var n=0,a=u.length,e;n<a;n++)(e||!(n in u))&&(e||(e=Array.prototype.slice.call(u,0,n)),e[n]=u[n]);return f.concat(e||Array.prototype.slice.call(u))},b=function(f){var u=new Date().toISOString();return g({isLoading:!0,isLoaded:!1,isError:!1,error:null,roleNames:[],id:f,template_id:"",name:"",status:"pending",profile_id:"",organization_id:"",no_contact:!1,created_at:u,updated_at:u,canceled_at:null,reminder_id:null,visibility:"private",recipients:[],profile:null,access_keys:[],data:p,history_entries:[],organization:null,reminder:null,search_key:"",template:null,documents:[],fields:[]})},d={},S=function(f,u){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return E(void 0,h([f,u],t,!0),void 0,function(a,e,l){var c,o,r,i;return l===void 0&&(l=!1),y(this,function(s){switch(s.label){case 0:if(c=!1,d[e]||(console.debug("[ENVELOPES] No envelope store found for ID, creating",e),d[e]=b(e),c=!0),o=d[e],o.use({reset:function(){return console.debug("[ENVELOPES] Store got reset")},dispose:function(){return console.debug("[ENVELOPES] Store got disposed")}}),!(c||l))return[3,5];console.debug("[ENVELOPES] Reloading envelope",{envelopeId:e,created:c,forceReload:l}),o.state.isLoading=!0,o.state.isLoaded=!1,o.state.isError=!1,o.state.error=p,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,v(a,e)];case 2:return r=s.sent(),console.debug("[ENVELOPES] Got envelope",r),Object.assign(o.state,r),o.state.isLoaded=!0,o.state.isError=!1,o.state.error=p,[3,4];case 3:throw i=s.sent(),console.error("[ENVELOPES] Error loading envelope",i),o.state.isLoaded=!1,o.state.isError=!0,o.state.error=i,i;case 4:o.state.isLoading=!1,s.label=5;case 5:return[2,o]}})})};export{S as g};

import{r,c as n,h as t,H as s}from"./preview-X13RbvS2.js";import{V as l,g as d,i as c,f as p}from"./index-CL2BROP6.js";import{S as x}from"./errors-887f1e88-DR-_BPTJ.js";import"./chunk-QN4WKJDJ-Bf_F3oir.js";import"./iframe-DWV1oore.js";import"../sb-preview/runtime.js";const f='@-webkit-keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}@keyframes verdocs-field-pulse{0%{background-color:rgba(0, 0, 0, 0.35)}50%{background-color:rgba(0, 0, 0, 0)}100%{background-color:rgba(0, 0, 0, 0.35)}}verdocs-activity-box{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;font-size:18px;min-width:300px;-ms-flex-wrap:nowrap;flex-wrap:nowrap;color:#33364b;-ms-flex-align:center;align-items:center;border:1px solid #ccc;-ms-flex-direction:column;flex-direction:column;font-family:"Inter", "Barlow", sans-serif;background:#ffffff;padding:20px 20px 8px 20px}verdocs-activity-box .box-title{width:100%;display:-ms-flexbox;display:flex;color:#33364b;font-size:20px;font-weight:600;-webkit-column-gap:10px;-moz-column-gap:10px;column-gap:10px;margin:0 0 20px 0;-ms-flex-align:center;align-items:center}verdocs-activity-box .box-title .count{margin:0 0 0 6px;font-weight:300}verdocs-activity-box .box-title verdocs-loader{margin:0 0 20px 0}@media screen and (max-width: 1200px){verdocs-activity-box .box-title{font-size:18px}verdocs-activity-box .box-title .count{display:none}}verdocs-activity-box .spacer{-ms-flex:1;flex:1}verdocs-activity-box .loading-placeholder{width:100%;height:62px;display:block;-ms-flex:0 0 62px;flex:0 0 62px;margin:0 0 10px 0;border-radius:6px;background-color:#f5f8f9}verdocs-activity-box .loading-placeholder .loading-placeholder-bg{height:62px;position:relative;background:#f5f8f9;-webkit-animation-duration:1.25s;animation-duration:1.25s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:loadingPlaceholderSwoop;animation-name:loadingPlaceholderSwoop;background:-webkit-gradient(linear, left top, right top, color-stop(10%, #f5f8f9), color-stop(18%, #eeeeee), color-stop(33%, #f5f8f9));background:linear-gradient(to right, #f5f8f9 10%, #eeeeee 18%, #f5f8f9 33%);background-size:800px 62px}verdocs-activity-box .activity-entry{width:100%;display:-ms-flexbox;display:flex;-ms-flex:0 0 62px;flex:0 0 62px;border-radius:6px;margin-bottom:10px;-ms-flex-direction:row;flex-direction:row;padding:0 16px 0 0;background:#f5f8f9;-ms-flex-align:center;align-items:center;border:1px solid #f5f8f9}verdocs-activity-box .activity-entry:hover{cursor:pointer;background:#f2f4f5;border:1px solid #ddd}verdocs-activity-box .activity-entry svg{width:32px;height:32px;margin-right:20px}@media screen and (max-width: 1300px){verdocs-activity-box .activity-entry svg{width:24px;height:24px;margin-right:15px}}verdocs-activity-box .activity-entry .title{-ms-flex:1;flex:1;color:black;font-size:16px;font-weight:500;margin-left:12px}@media screen and (max-width: 1300px){verdocs-activity-box .activity-entry .title{font-size:14px}}verdocs-activity-box .activity-entry .time-ago{height:24px;display:-ms-flexbox;display:flex;-ms-flex:0 0 24px;flex:0 0 24px;color:#7f8e92;font-size:16px;font-weight:500;padding-left:14px;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;border-left:1px solid #d8e3e6}@media screen and (max-width: 1300px){verdocs-activity-box .activity-entry .time-ago{font-size:14px}}@-webkit-keyframes loadingPlaceholderSwoop{0%{background-position:-468px 0}100%{background-position:468px 0}}@keyframes loadingPlaceholderSwoop{0%{background-position:-468px 0}100%{background-position:468px 0}}',m=f,h="https://verdocs-public-assets.s3.amazonaws.com/no-verdocs.png",g=class{constructor(i){r(this,i),this.sdkError=n(this,"sdkError",7),this.viewEnvelope=n(this,"viewEnvelope",7),this.viewAll=n(this,"viewAll",7),this.endpoint=l.getDefault(),this.items=5,this.view=void 0,this.header=void 0,this.title="",this.count=0,this.loading=!0,this.entries=[]}async componentWillLoad(){var i,e,a;try{if(this.endpoint.loadSession(),!this.endpoint.session){console.log("[ACTIVITIES] Must be authenticated");return}this.loadActivity()}catch(o){console.log("[ACTIVITIES] Error with preview session",o),(i=this.sdkError)===null||i===void 0||i.emit(new x(o.message,(e=o.response)===null||e===void 0?void 0:e.status,(a=o.response)===null||a===void 0?void 0:a.data))}}handleItemsUpdated(){return this.loadActivity()}handleViewUpdated(){return this.loadActivity()}async loadActivity(){this.loading=!0;const i=await d(this.endpoint,0);let e;this.view==="action"?(e="Action Required",this.entries=i.action_required.result,this.count=i.action_required.total):this.view==="waiting"?(e="Waiting on Others",this.entries=i.waiting_others.result,this.count=i.waiting_others.total):this.view==="completed"&&(e="Completed",this.entries=i.completed.result,this.count=i.completed.total),this.title=this.header!==void 0?this.header:e,this.loading=!1}render(){return this.loading?t(s,{style:{minHeight:"300px"}},this.title&&t("div",{class:"box-title"},this.title," ",t("span",{class:"count"},"(0)")),c(0,this.items).map(()=>t("div",{class:"loading-placeholder"},t("div",{class:"loading-placeholder-bg"})))):t(s,null,this.title&&t("div",{class:"box-title"},this.title," ",t("span",{class:"count"},"(",this.count,")"),t("div",{class:"spacer"}),t("verdocs-button",{label:"View All",size:"small",onClick:()=>{var i;return(i=this.viewAll)===null||i===void 0?void 0:i.emit({endpoint:this.endpoint,view:this.view})}})),this.count>0?this.entries.slice(0,Math.max(this.items,1)).map(i=>t("div",{class:"activity-entry",onClick:()=>{var e;(e=this.viewEnvelope)===null||e===void 0||e.emit({endpoint:this.endpoint,entry:i})}},t("div",{class:"title"},i.name,t("br",null)," ",t("strong",null,i.recipient.name)),t("div",{class:"time-ago"},p(i.updated_at)))):t("img",{src:h,alt:"No documents to show",style:{width:"190px",margin:"0 auto"}}))}static get watchers(){return{items:["handleItemsUpdated"],view:["handleViewUpdated"]}}};g.style=m;export{g as verdocs_activity_box};

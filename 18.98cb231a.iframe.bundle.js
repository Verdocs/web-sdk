/*! For license information please see 18.98cb231a.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"./dist/esm/Templates-22116158.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getTemplates})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getTemplate}));var getTemplates=function getTemplates(endpoint,params){return endpoint.api.get("/templates",{params:params}).then((function(r){return r.data}))},getTemplate=function getTemplate(endpoint,templateId){return endpoint.api.get("/templates/".concat(templateId)).then((function(r){return r.data}))}},"./dist/esm/errors-9b5498c8.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SDKError}));__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var SDKError=function(_Error){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(SDKError,_Error);var _super=function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}(SDKError);function SDKError(message,statusCode,response){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SDKError),(_this=_super.call(this,message||"SDK Error")).response=response,_this.statusCode=statusCode,Object.setPrototypeOf(_assertThisInitialized(_this),(this instanceof SDKError?this.constructor:void 0).prototype),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(SDKError)}(_wrapNativeSuper(Error))},"./dist/esm/utils-7b1ffdba.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getRoleIndex})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getRGBA})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getFieldId})),__webpack_require__.d(__webpack_exports__,"d",(function(){return rescale})),__webpack_require__.d(__webpack_exports__,"e",(function(){return fullNameToInitials})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getFieldSettings})),__webpack_require__.d(__webpack_exports__,"g",(function(){return integerSequence})),__webpack_require__.d(__webpack_exports__,"h",(function(){return renderDocumentField})),__webpack_require__.d(__webpack_exports__,"i",(function(){return setControlStyles}));__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js");function getRGBA(roleIndex){switch(roleIndex%10){case 0:return 0===roleIndex?"rgba(255, 193, 7, 0.4)":"rgba(134, 134, 134, 0.3)";case 1:return"rgba(156, 39, 176, .4)";case 2:return"rgba(33, 150, 243, .4)";case 3:return"rgba(220, 231, 117, 0.3)";case 4:return"rgba(121, 134, 203, 0.3)";case 5:return"rgba(77, 182, 172, 0.3)";case 6:return"rgba(255, 202, 165, 0.3)";case 7:return"rgba(2, 247, 190, 0.3)";case 8:return"rgba(255, 138, 101, 0.3)";case 9:return"rgba(82, 255, 79, 0.3)";default:return"rgba(229, 115, 155, 0.3)"}}function rescale(r,n){return r*n}var integerSequence=function integerSequence(start,count){return Array(count).fill(1).map((function(_,index){return index+start}))},fullNameToInitials=function fullNameToInitials(name){return name.split(" ").map((function(word){return word[0]})).join("")},setControlStyles=function setControlStyles(el,field,xScale,yScale,roleIndex,option){var _a,_b,_c,_d,settings=field.setting||field.settings,_settings$x=settings.x,x=void 0===_settings$x?0:_settings$x,_settings$y=settings.y,y=void 0===_settings$y?0:_settings$y,_settings$width=settings.width,width=void 0===_settings$width?function defaultWidth(field){switch(field.type){case"attachment":case"payment":return 24;case"checkbox":case"checkbox_group":case"radio_button_group":return 14;case"signature":case"initial":return 82}return 150}(field):_settings$width,_settings$height=settings.height,height=void 0===_settings$height?function defaultHeight(field){switch(field.type){case"attachment":case"payment":return 24;case"checkbox":case"checkbox_group":case"radio_button_group":return 14;case"signature":case"initial":return 41}return 50}(field):_settings$height,optionSettings=void 0!==option&&settings.options[option]?settings.options[option]:null;optionSettings&&(x=null!==(_a=optionSettings.x)&&void 0!==_a?_a:x,y=null!==(_b=optionSettings.y)&&void 0!==_b?_b:y,width=null!==(_c=optionSettings.width)&&void 0!==_c?_c:width,height=null!==(_d=optionSettings.height)&&void 0!==_d?_d:height),el.style.width=width+"px",el.style.height=height+"px",el.style.position="absolute",el.style.left=rescale(xScale,x)+"px",el.style.bottom=rescale(yScale,y)+"px",el.style.transform="scale("+xScale+", "+yScale+")",el.style.backgroundColor=field.rgba||getRGBA(roleIndex)},getFieldId=function getFieldId(field){return"verdocs-doc-fld-"+field.name},getFieldOptionId=function getFieldOptionId(field,index){return"verdocs-doc-fld-"+field.name+"-"+index},renderDocumentField=function renderDocumentField(field,docPage,roleIndex,handleFieldChange,disabled){var controlsDiv=document.getElementById(docPage.containerId+"-controls");if(controlsDiv)switch(field.type){case"attachment":case"date":case"dropdown":case"initial":case"payment":case"signature":case"timestamp":case"textarea":case"textbox":var id=getFieldId(field),existingField=document.getElementById(id);if(existingField)return void setControlStyles(existingField,field,docPage.xScale,docPage.yScale,roleIndex);var el=document.createElement("verdocs-field-"+field.type);el.field=field,el.setAttribute("id",id),disabled&&el.setAttribute("disabled",!0),el.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(el,field,docPage.xScale,docPage.yScale,roleIndex),controlsDiv.appendChild(el);break;case"checkbox_group":field.setting.options.forEach((function(_,checkboxIndex){var id=getFieldOptionId(field,checkboxIndex),existingField=document.getElementById(id);if(existingField)setControlStyles(existingField,field,docPage.xScale,docPage.yScale,roleIndex,checkboxIndex);else{var cbEl=document.createElement("verdocs-field-checkbox");cbEl.field=field,cbEl.setAttribute("id",id),cbEl.setAttribute("option",checkboxIndex),disabled&&cbEl.setAttribute("disabled",!0),cbEl.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(cbEl,field,docPage.xScale,docPage.yScale,roleIndex,checkboxIndex),controlsDiv.appendChild(cbEl)}}));break;case"radio_button_group":field.setting.options.forEach((function(_,buttonIndex){var id=getFieldOptionId(field,buttonIndex),existingField=document.getElementById(id);if(existingField)setControlStyles(existingField,field,docPage.xScale,docPage.yScale,roleIndex,buttonIndex);else{var cbEl=document.createElement("verdocs-field-radio-button");cbEl.field=field,cbEl.setAttribute("id",id),cbEl.setAttribute("option",buttonIndex),disabled&&cbEl.setAttribute("disabled",!0),cbEl.addEventListener("fieldChange",(function(e){return handleFieldChange(field,e)})),setControlStyles(cbEl,field,docPage.xScale,docPage.yScale,roleIndex,buttonIndex),controlsDiv.appendChild(cbEl)}}));break;default:console.log("[PREVIEW] Skipping unsupported field type",field)}},getRoleIndex=function getRoleIndex(roles,role){return roles.indexOf(role)||0},getFieldSettings=function getFieldSettings(field){return field.setting?field.setting:field.settings?field.settings:{x:0,y:0,required:!1,disabled:!1,result:"",value:""}}},"./dist/esm/verdocs-preview.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"verdocs_preview",(function(){return VerdocsPreview}));__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js");var _index_bc9b2c82_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./dist/esm/index-bc9b2c82.js"),_Templates_22116158_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./dist/esm/Templates-22116158.js"),_VerdocsEndpoint_9db225a3_js__WEBPACK_IMPORTED_MODULE_28__=(__webpack_require__("./dist/esm/Types-ab9f6af8.js"),__webpack_require__("./dist/esm/VerdocsEndpoint-9db225a3.js")),_utils_7b1ffdba_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./dist/esm/utils-7b1ffdba.js"),_errors_9b5498c8_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("./dist/esm/errors-9b5498c8.js");function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var VerdocsPreview=function(){function VerdocsPreview(hostRef){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,VerdocsPreview),Object(_index_bc9b2c82_js__WEBPACK_IMPORTED_MODULE_25__.h)(this,hostRef),this.sdkError=Object(_index_bc9b2c82_js__WEBPACK_IMPORTED_MODULE_25__.d)(this,"sdkError",7),this.endpoint=_VerdocsEndpoint_9db225a3_js__WEBPACK_IMPORTED_MODULE_28__.a.getDefault(),this.templateId=null,this.pdfUrl=null,this.template=null,this.roles=[],this.fields=[]}var _handleFieldChange,_componentDidLoad;return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(VerdocsPreview,[{key:"componentDidLoad",value:(_componentDidLoad=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var _a,_b,_c,_d,template,_this=this;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,console.log("[PREVIEW] Loading template "+this.templateId),_context.next=4,Object(_Templates_22116158_js__WEBPACK_IMPORTED_MODULE_26__.b)(this.endpoint,this.templateId);case 4:template=_context.sent,console.log("[PREVIEW] Got template",this.template),this.template=template,this.pdfUrl=this.endpoint.getBaseURL()+"/templates/"+this.templateId+"/documents/"+(null===(_a=template.template_document)||void 0===_a?void 0:_a.id)+"?file=true",this.roles=template.roles.map((function(role){return role.name})),console.log("[PREVIEW] Loaded roles",this.roles),this.fields=[],template.roles.forEach((function(role){var _this$fields;(_this$fields=_this.fields).push.apply(_this$fields,_toConsumableArray(role.fields))})),console.log("[PREVIEW] Loaded fields",this.fields),_context.next=19;break;case 15:_context.prev=15,_context.t0=_context.catch(0),console.log("[PREVIEW] Error with preview session",_context.t0),null===(_b=this.sdkError)||void 0===_b||_b.emit(new _errors_9b5498c8_js__WEBPACK_IMPORTED_MODULE_30__.a(_context.t0.message,null===(_c=_context.t0.response)||void 0===_c?void 0:_c.status,null===(_d=_context.t0.response)||void 0===_d?void 0:_d.data));case 19:case"end":return _context.stop()}}),_callee,this,[[0,15]])}))),function componentDidLoad(){return _componentDidLoad.apply(this,arguments)})},{key:"handleFieldChange",value:(_handleFieldChange=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(field,e,optionId){return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:console.log("[PREVIEW] handleFieldChange",field,e,optionId);case 1:case"end":return _context2.stop()}}),_callee2)}))),function handleFieldChange(_x,_x2,_x3){return _handleFieldChange.apply(this,arguments)})},{key:"handlePageRendered",value:function handlePageRendered(e){var _this2=this,pageInfo=e.detail;console.log("[PREVIEW] Page rendered",pageInfo);var fields=this.fields.filter((function(field){return field.page_sequence===pageInfo.renderedPage.pageNumber}));console.log("[PREVIEW] Fields on page",fields),fields.forEach((function(field){return Object(_utils_7b1ffdba_js__WEBPACK_IMPORTED_MODULE_29__.h)(field,pageInfo.renderedPage,Object(_utils_7b1ffdba_js__WEBPACK_IMPORTED_MODULE_29__.a)(_this2.roles,field.role_name),_this2.handleFieldChange,!0)}))}},{key:"render",value:function render(){var _this3=this;return Object(_index_bc9b2c82_js__WEBPACK_IMPORTED_MODULE_25__.f)(_index_bc9b2c82_js__WEBPACK_IMPORTED_MODULE_25__.b,null,this.pdfUrl?Object(_index_bc9b2c82_js__WEBPACK_IMPORTED_MODULE_25__.f)("div",{class:"inner"},Object(_index_bc9b2c82_js__WEBPACK_IMPORTED_MODULE_25__.f)("verdocs-view",{source:this.pdfUrl,endpoint:this.endpoint,onPageRendered:function onPageRendered(e){return _this3.handlePageRendered(e)},pageLayers:[{name:"page",type:"canvas"},{name:"controls",type:"div"}]})):Object(_index_bc9b2c82_js__WEBPACK_IMPORTED_MODULE_25__.f)("verdocs-loader",null))}}]),VerdocsPreview}();VerdocsPreview.style=""}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMvVGVtcGxhdGVzLmpzIiwid2VicGFjazovLy9zcmMvdXRpbHMvZXJyb3JzLnRzIiwid2VicGFjazovLy9ub2RlX21vZHVsZXMvQHZlcmRvY3MvanMtc2RrL1V0aWxzL0NvbG9ycy5qcyIsIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9VdGlscy9GaWVsZHMuanMiLCJ3ZWJwYWNrOi8vL3NyYy91dGlscy91dGlscy50cyIsIndlYnBhY2s6Ly8vc3JjL2NvbXBvbmVudHMvZW1iZWRzL3ZlcmRvY3MtcHJldmlldy92ZXJkb2NzLXByZXZpZXcuc2NzcyIsIndlYnBhY2s6Ly8vc3JjL2NvbXBvbmVudHMvZW1iZWRzL3ZlcmRvY3MtcHJldmlldy92ZXJkb2NzLXByZXZpZXcudHN4Il0sIm5hbWVzIjpbImdldFRlbXBsYXRlcyIsImVuZHBvaW50IiwicGFyYW1zIiwiYXBpIiwiZ2V0IiwidGhlbiIsInIiLCJkYXRhIiwiZ2V0VGVtcGxhdGUiLCJ0ZW1wbGF0ZUlkIiwiY29uY2F0IiwiU0RLRXJyb3IiLCJtZXNzYWdlIiwic3RhdHVzQ29kZSIsInJlc3BvbnNlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJFcnJvciIsImdldFJHQkEiLCJyb2xlSW5kZXgiLCJyZXNjYWxlIiwibiIsImludGVnZXJTZXF1ZW5jZSIsInN0YXJ0IiwiY291bnQiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJfIiwiaW5kZXgiLCJmdWxsTmFtZVRvSW5pdGlhbHMiLCJuYW1lIiwic3BsaXQiLCJ3b3JkIiwiam9pbiIsInNldENvbnRyb2xTdHlsZXMiLCJlbCIsImZpZWxkIiwieFNjYWxlIiwieVNjYWxlIiwib3B0aW9uIiwic2V0dGluZ3MiLCJzZXR0aW5nIiwieCIsInkiLCJ3aWR0aCIsImRlZmF1bHRXaWR0aCIsInR5cGUiLCJoZWlnaHQiLCJkZWZhdWx0SGVpZ2h0Iiwib3B0aW9uU2V0dGluZ3MiLCJ1bmRlZmluZWQiLCJvcHRpb25zIiwiX2EiLCJfYiIsIl9jIiwiX2QiLCJzdHlsZSIsInBvc2l0aW9uIiwibGVmdCIsImJvdHRvbSIsInRyYW5zZm9ybSIsImJhY2tncm91bmRDb2xvciIsImdldEZpZWxkSWQiLCJnZXRGaWVsZE9wdGlvbklkIiwicmVuZGVyRG9jdW1lbnRGaWVsZCIsImRvY1BhZ2UiLCJoYW5kbGVGaWVsZENoYW5nZSIsImRpc2FibGVkIiwiY29udHJvbHNEaXYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY29udGFpbmVySWQiLCJpZCIsImV4aXN0aW5nRmllbGQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJhcHBlbmRDaGlsZCIsImZvckVhY2giLCJjaGVja2JveEluZGV4IiwiY2JFbCIsImJ1dHRvbkluZGV4IiwiY29uc29sZSIsImxvZyIsImdldFJvbGVJbmRleCIsInJvbGVzIiwicm9sZSIsImluZGV4T2YiLCJnZXRGaWVsZFNldHRpbmdzIiwicmVxdWlyZWQiLCJyZXN1bHQiLCJ2YWx1ZSIsIlZlcmRvY3NQcmV2aWV3IiwiVmVyZG9jc0VuZHBvaW50IiwiZ2V0RGVmYXVsdCIsInBkZlVybCIsInRlbXBsYXRlIiwiZmllbGRzIiwidGhpcyIsImdldEJhc2VVUkwiLCJ0ZW1wbGF0ZV9kb2N1bWVudCIsInB1c2giLCJzZGtFcnJvciIsImVtaXQiLCJzdGF0dXMiLCJvcHRpb25JZCIsImhhbmRsZVBhZ2VSZW5kZXJlZCIsInBhZ2VJbmZvIiwiZGV0YWlsIiwiZmlsdGVyIiwicGFnZV9zZXF1ZW5jZSIsInJlbmRlcmVkUGFnZSIsInBhZ2VOdW1iZXIiLCJyb2xlX25hbWUiLCJyZW5kZXIiLCJoIiwiSG9zdCIsImNsYXNzIiwic291cmNlIiwib25QYWdlUmVuZGVyZWQiLCJwYWdlTGF5ZXJzIl0sIm1hcHBpbmdzIjoiO21LQUFBLGlLQXNEVSxJQUFDQSxhQUFlLFNB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SCxPQUNKb0Isa0VBQUtFLE1BQU0sU0FDVEYsMkVBQ0VHLE9BQVFwQixLQUFLSCxPQUNiakcsU0FBVW9HLEtBQUtwRyxTQUNmeUgsZUFBZ0Isd0JBQUEzQyxHQUFDLE9BQUksT0FBSzhCLG1CQUFtQjlCLEVBQTVCLEVBQ2pCNEMsV0FBWSxDQUNWLENBQUMzRixLQUFNLE9BQVFnQixLQUFNLFVBQ3JCLENBQUNoQixLQUFNLFdBQVlnQixLQUFNLFdBSy9Cc0Usa0ZBSVAsS0FoRndCLGtCLHFCRGpCRCxFIiwiZmlsZSI6IjE4Ljk4Y2IyMzFhLmlmcmFtZS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEEgVGVtcGxhdGUgZGVmaW5lcyBob3cgYSBWZXJkb2NzIHNpZ25pbmcgZmxvdyB3aWxsIGJlIHBlcmZvcm1lZCwgaW5jbHVkaW5nIGF0dGFjaG1lbnRzLCBzaWduaW5nIGZpZWxkcywgYW5kXG4gKiByZWNpcGllbnRzLlxuICpcbiAqIEBtb2R1bGVcbiAqL1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbi8qKlxuICogR2V0IGFsbCB0ZW1wbGF0ZXMgYWNjZXNzaWJsZSBieSB0aGUgY2FsbGVyLCB3aXRoIG9wdGlvbmFsIGZpbHRlcnMuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZXMoKTtcbiAqIGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZXMoeyBpc19zdGFycmVkOiB0cnVlIH0pO1xuICogYXdhaXQgVGVtcGxhdGVzLmdldFRlbXBsYXRlcyh7IGlzX2NyZWF0b3I6IHRydWUgfSk7XG4gKiBhd2FpdCBUZW1wbGF0ZXMuZ2V0VGVtcGxhdGVzKHsgaXNfb3JnYW5pemF0aW9uOiB0cnVlIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VGVtcGxhdGVzID0gZnVuY3Rpb24gKGVuZHBvaW50LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5nZXQoJy90ZW1wbGF0ZXMnLCB7IHBhcmFtczogcGFyYW1zIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogR2V0IG9uZSB0ZW1wbGF0ZSBieSBpdHMgSUQuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGNvbnN0IHRlbXBsYXRlID0gYXdhaXQgVGVtcGxhdGVzLmdldFRlbXBsYXRlKCc4M2RhM2Q3MC03ODU3LTQzOTItYjg3Ni1jNDU5MmEzMDRiYzknKTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGdldFRlbXBsYXRlID0gZnVuY3Rpb24gKGVuZHBvaW50LCB0ZW1wbGF0ZUlkKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAuZ2V0KFwiL3RlbXBsYXRlcy9cIi5jb25jYXQodGVtcGxhdGVJZCkpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogR2V0IG93bmVyIGluZm9ybWF0aW9uIGZvciBhIHRlbXBsYXRlLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBjb25zdCB0ZW1wbGF0ZSA9IGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZU93bmVySW5mbygnODNkYTNkNzAtNzg1Ny00MzkyLWI4NzYtYzQ1OTJhMzA0YmM5Jyk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBnZXRUZW1wbGF0ZU93bmVySW5mbyA9IGZ1bmN0aW9uIChlbmRwb2ludCwgdGVtcGxhdGVJZCkge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLmdldChcIi90ZW1wbGF0ZXMvXCIuY29uY2F0KHRlbXBsYXRlSWQpKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIHRlbXBsYXRlLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBjb25zdCBuZXdUZW1wbGF0ZSA9IGF3YWl0IFRlbXBsYXRlcy5jcmVhdGVUZW1wbGF0ZSh7Li4ufSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBjcmVhdGVUZW1wbGF0ZSA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAucG9zdCgnL3RlbXBsYXRlcy8nLCBwYXJhbXMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogVXBkYXRlIGEgdGVtcGxhdGUuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGNvbnN0IHVwZGF0ZWRUZW1wbGF0ZSA9IGF3YWl0IFRlbXBsYXRlcy51cGRhdGVUZW1wbGF0ZSgnODNkYTNkNzAtNzg1Ny00MzkyLWI4NzYtYzQ1OTJhMzA0YmM5JywgeyBuYW1lOiAnTmV3IE5hbWUnIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlVGVtcGxhdGUgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHRlbXBsYXRlSWQsIHBhcmFtcykge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLnB1dChcIi90ZW1wbGF0ZXMvXCIuY29uY2F0KHRlbXBsYXRlSWQpLCBwYXJhbXMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogU2VhcmNoIGZvciB0ZW1wbGF0ZXMgbWF0Y2hpbmcgdmFyaW91cyBjcml0ZXJpYS5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1RlbXBsYXRlc30gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcyc7XG4gKlxuICogY29uc3Qge3Jlc3VsdCwgcGFnZSwgdG90YWx9ID0gYXdhaXQgVGVtcGxhdGVzLnNlYXJjaCh7IC4uLiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIHNlYXJjaFRlbXBsYXRlcyA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAgICAgICAgIC5wb3N0KCcvdGVtcGxhdGVzL3NlYXJjaCcsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KV07XG4gICAgfSk7XG59KTsgfTtcbi8qKlxuICogR2V0IGEgc3VtbWFyeSBvZiB0ZW1wbGF0ZSBkYXRhLCB0eXBpY2FsbHkgdXNlZCB0byBwb3B1bGF0ZSBhZG1pbiBwYW5lbCBkYXNoYm9hcmQgcGFnZXMuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGNvbnN0IHN1bW1hcnkgPSBhd2FpdCBUZW1wbGF0ZXMuZ2V0U3VtbWFyeSgwKTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGdldFN1bW1hcnkgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHBhZ2UpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgICAgICAgICAgLnBvc3QoJy90ZW1wbGF0ZXMvc3VtbWFyeScsIHsgcGFnZTogcGFnZSB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pXTtcbiAgICB9KTtcbn0pOyB9O1xuIiwiLyoqXG4gKiBQYXNzZWQgdG8gcGFyZW50IGNvbXBvbmVudHMgaW4gY2VydGFpbiBjYWxsYmFja3Mgd2l0aCB0aGUgbG93ZXItbGV2ZWwgSlMtU0RLIGVtaXRzIGFuIGVycm9yXG4gKi9cbmV4cG9ydCBjbGFzcyBTREtFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29kZTtcbiAgc3RhdHVzQ29kZTtcbiAgcmVzcG9uc2U7XG5cbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGF0dXNDb2RlOiBudW1iZXIsIHJlc3BvbnNlOiBhbnkpIHtcbiAgICBzdXBlcihtZXNzYWdlIHx8ICdTREsgRXJyb3InKTtcbiAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuICB9XG59XG4iLCIvKipcbiAqIEdpdmVuIGEgYHJnYmEocixnLGIsYSlgIHN0cmluZyB2YWx1ZSwgcmV0dXJucyB0aGUgaGV4IGVxdWl2YWxlbnQsIGRyb3BwaW5nIHRoZSBhbHBoYSBjaGFubmVsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UkdCKHJnYmEpIHtcbiAgICB2YXIgcmdiTnVtYmVycyA9IHJnYmEucmVwbGFjZSgncmdiYSgnLCAnJykucmVwbGFjZSgnKScsICcnKS5zcGxpdCgnLCcpO1xuICAgIHZhciByZ2JPYmplY3QgPSB7XG4gICAgICAgIHJlZDogK3JnYk51bWJlcnNbMF0sXG4gICAgICAgIGdyZWVuOiArcmdiTnVtYmVyc1sxXSxcbiAgICAgICAgYmx1ZTogK3JnYk51bWJlcnNbMl0sXG4gICAgICAgIGFscGhhOiArcmdiTnVtYmVyc1szXSxcbiAgICB9O1xuICAgIHZhciBhbHBoYSA9IDEgLSByZ2JPYmplY3QuYWxwaGE7XG4gICAgdmFyIHJlZCA9IE1hdGgucm91bmQoKHJnYk9iamVjdC5hbHBoYSAqIChyZ2JPYmplY3QucmVkIC8gMjU1KSArIGFscGhhKSAqIDI1NSk7XG4gICAgdmFyIGdyZWVuID0gTWF0aC5yb3VuZCgocmdiT2JqZWN0LmFscGhhICogKHJnYk9iamVjdC5ncmVlbiAvIDI1NSkgKyBhbHBoYSkgKiAyNTUpO1xuICAgIHZhciBibHVlID0gTWF0aC5yb3VuZCgocmdiT2JqZWN0LmFscGhhICogKHJnYk9iamVjdC5ibHVlIC8gMjU1KSArIGFscGhhKSAqIDI1NSk7XG4gICAgcmV0dXJuICcjJyArIHJnYlRvSGV4KHJlZCkgKyByZ2JUb0hleChncmVlbikgKyByZ2JUb0hleChibHVlKTtcbn1cbi8qKlxuICogR2l2ZW4gYW4gUkdCIHN0cmluZyB2YWx1ZSwgcmV0dXJucyB0aGUgaGV4IGVxdWl2YWxlbnQuXG4gKi9cbmZ1bmN0aW9uIHJnYlRvSGV4KHJnYikge1xuICAgIHZhciBoZXggPSByZ2IudG9TdHJpbmcoMTYpO1xuICAgIGlmIChoZXgubGVuZ3RoIDwgMikge1xuICAgICAgICByZXR1cm4gJzAnICsgaGV4O1xuICAgIH1cbiAgICByZXR1cm4gaGV4O1xufVxuLyoqXG4gKiBHaXZlbiBhIHNpZ25lciByb2xlIGluZGV4LCByZXR1cm4gdGhlIGNvbG9yIGNvZGUgZm9yIHRoYXQgc2lnbmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UkdCQShyb2xlSW5kZXgpIHtcbiAgICBzd2l0Y2ggKHJvbGVJbmRleCAlIDEwKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiByb2xlSW5kZXggPT09IDAgPyAncmdiYSgyNTUsIDE5MywgNywgMC40KScgOiAncmdiYSgxMzQsIDEzNCwgMTM0LCAwLjMpJzsgLy8gI0ZGRTY5Q1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMTU2LCAzOSwgMTc2LCAuNCknOyAvLyAnI0UzQzNFOSdcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDMzLCAxNTAsIDI0MywgLjQpJzsgLy8gJyNDMUUxRkInXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSgyMjAsIDIzMSwgMTE3LCAwLjMpJztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDEyMSwgMTM0LCAyMDMsIDAuMyknO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoNzcsIDE4MiwgMTcyLCAwLjMpJztcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDI1NSwgMjAyLCAxNjUsIDAuMyknO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMiwgMjQ3LCAxOTAsIDAuMyknO1xuICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMjU1LCAxMzgsIDEwMSwgMC4zKSc7XG4gICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIHJldHVybiAncmdiYSg4MiwgMjU1LCA3OSwgMC4zKSc7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMjI5LCAxMTUsIDE1NSwgMC4zKSc7XG4gICAgfVxufVxuLyoqXG4gKiBHaXZlbiBhIHJvbGUgbmFtZSwgcmV0dXJuIGEgY29sb3IgY29kZSBmb3IgaXQuIFRoaXMgd29ya3MgYnkgY29tcHV0aW5nIGEgaGFzaCBjb2RlIHNvIHRoZSBzcGVjaWZpYyBjb2xvciByZXR1cm5lZFxuICogaXMgbm90IHNwZWNpZmllZCBleHBsaWNpdGx5LCBidXQgd2lsbCBiZSB0aGUgc2FtZSBmb3IgZXZlcnkgY2FsbCB3aXRoIHRoZSBzYW1lIGlucHV0IHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbmFtZVRvUkdCQShzdHIpIHtcbiAgICBpZiAoISFzdHIpIHtcbiAgICAgICAgdmFyIHZhbGlkTnVtID0gcGFyc2VJbnQoc3RyLnNsaWNlKC0xKSwgMTApO1xuICAgICAgICBpZiAoIWlzTmFOKHZhbGlkTnVtKSkge1xuICAgICAgICAgICAgc3RyICs9ICh2YWxpZE51bSAqIDk5KS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBoYXNoID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGhhc2ggPSBzdHIuY2hhckNvZGVBdChpKSArICgoaGFzaCA8PCA1KSAtIGhhc2gpO1xuICAgICAgICB9XG4gICAgICAgIGhhc2ggPSBNYXRoLnJvdW5kKGhhc2ggLyAxLjMpO1xuICAgICAgICB2YXIgYyA9IChoYXNoICYgMHgwMGZmZmYwOCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIHZhciBoZXggPSAnIycgKyAnMDAwMDAnLnN1YnN0cmluZygwLCA2IC0gYy5sZW5ndGgpICsgYztcbiAgICAgICAgdmFyIHJlc3VsdCA9IC9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2kuZXhlYyhoZXgpO1xuICAgICAgICB2YXIgY29sb3IgPSB7XG4gICAgICAgICAgICByOiBwYXJzZUludChyZXN1bHRbMV0sIDE2KSxcbiAgICAgICAgICAgIGc6IHBhcnNlSW50KHJlc3VsdFsyXSwgMTYpLFxuICAgICAgICAgICAgYjogcGFyc2VJbnQocmVzdWx0WzNdLCAxNiksXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBcInJnYmEoXCIuY29uY2F0KGNvbG9yLnIsIFwiLCBcIikuY29uY2F0KGNvbG9yLmcsIFwiLCBcIikuY29uY2F0KGNvbG9yLmIsIFwiLCAwLjIpXCIpO1xuICAgIH1cbn1cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIG9idGFpbiBhIGNvbG9yIGNvZGUgZ2l2ZW4gYSByb2xlIG5hbWUgZ2l2ZW4gdmFyaW91cyBwb3NzaWJsZSBpbnB1dHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSb2xlQ29sb3IobmFtZSwgcm9sZXMsIGluZGV4KSB7XG4gICAgaWYgKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBnZXRSR0JBKGluZGV4KTtcbiAgICB9XG4gICAgZWxzZSBpZiAocm9sZXMgJiYgcm9sZXMubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgcm9sZUluZGV4ID0gcm9sZXMuZmluZEluZGV4KGZ1bmN0aW9uIChyb2xlKSB7IHJldHVybiByb2xlLm5hbWUgPT09IG5hbWU7IH0pO1xuICAgICAgICBpZiAocm9sZUluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiByb2xlc1tyb2xlSW5kZXhdLnJnYmEgfHwgZ2V0UkdCQShyb2xlSW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5hbWVUb1JHQkEobmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBuYW1lVG9SR0JBKG5hbWUpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBnZXRSVG9wKHksIGZpZWxkSGVpZ2h0LCBpVGV4dEhlaWdodCwgeVJhdGlvKSB7XG4gICAgcmV0dXJuIGlUZXh0SGVpZ2h0IC0gKHkgKyBmaWVsZEhlaWdodCkgKiB5UmF0aW87XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UkxlZnQoeCwgcmF0aW8pIHtcbiAgICByZXR1cm4geCAqIHJhdGlvO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFJWYWx1ZSh5LCByYXRpbykge1xuICAgIHJldHVybiB5ICogcmF0aW87XG59XG5leHBvcnQgZnVuY3Rpb24gYmxvYlRvQmFzZTY0KGltYWdlKSB7XG4gICAgdmFyIGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZpbGVSZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdQcm9ibGVtIHJlYWRpbmcgYmxvYi4nKSk7XG4gICAgICAgIH07XG4gICAgICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVzb2x2ZShmaWxlUmVhZGVyLnJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIGZpbGVSZWFkZXIucmVhZEFzRGF0YVVSTChpbWFnZSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzY2FsZShyLCBuKSB7XG4gICAgcmV0dXJuIHIgKiBuO1xufVxuIiwiLy8gVGhlc2Ugc2hvdWxkIHByb2JhYmx5IGFsbCBtb3ZlIHRvIEpTLVNES1xuaW1wb3J0IHtyZXNjYWxlfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVXRpbHMvRmllbGRzJztcbmltcG9ydCB7Z2V0UkdCQX0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1V0aWxzL0NvbG9ycyc7XG5pbXBvcnQge0lUZW1wbGF0ZUZpZWxkfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzL1R5cGVzJztcbmltcG9ydCB7SURvY3VtZW50RmllbGR9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9Eb2N1bWVudHMvVHlwZXMnO1xuaW1wb3J0IHtJRG9jdW1lbnRQYWdlSW5mb30gZnJvbSAnLi9UeXBlcyc7XG5cbmV4cG9ydCBjb25zdCBpbnRlZ2VyU2VxdWVuY2UgPSAoc3RhcnQ6IG51bWJlciwgY291bnQ6IG51bWJlcik6IG51bWJlcltdID0+XG4gIEFycmF5KGNvdW50KVxuICAgIC5maWxsKDEpXG4gICAgLm1hcCgoXywgaW5kZXgpID0+IGluZGV4ICsgc3RhcnQpO1xuXG5leHBvcnQgY29uc3QgZnVsbE5hbWVUb0luaXRpYWxzID0gKG5hbWU6IHN0cmluZykgPT5cbiAgbmFtZVxuICAgIC5zcGxpdCgnICcpXG4gICAgLm1hcCh3b3JkID0+IHdvcmRbMF0pXG4gICAgLmpvaW4oJycpO1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdFdpZHRoID0gKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCB8IElEb2N1bWVudEZpZWxkKSA9PiB7XG4gIHN3aXRjaCAoZmllbGQudHlwZSkge1xuICAgIGNhc2UgJ2F0dGFjaG1lbnQnOlxuICAgIGNhc2UgJ3BheW1lbnQnOlxuICAgICAgcmV0dXJuIDI0O1xuICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICBjYXNlICdjaGVja2JveF9ncm91cCc6XG4gICAgY2FzZSAncmFkaW9fYnV0dG9uX2dyb3VwJzpcbiAgICAgIHJldHVybiAxNDtcbiAgICBjYXNlICdzaWduYXR1cmUnOlxuICAgIGNhc2UgJ2luaXRpYWwnOlxuICAgICAgcmV0dXJuIDgyO1xuICB9XG5cbiAgcmV0dXJuIDE1MDtcbn07XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0SGVpZ2h0ID0gKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCB8IElEb2N1bWVudEZpZWxkKSA9PiB7XG4gIHN3aXRjaCAoZmllbGQudHlwZSkge1xuICAgIGNhc2UgJ2F0dGFjaG1lbnQnOlxuICAgIGNhc2UgJ3BheW1lbnQnOlxuICAgICAgcmV0dXJuIDI0O1xuICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICBjYXNlICdjaGVja2JveF9ncm91cCc6XG4gICAgY2FzZSAncmFkaW9fYnV0dG9uX2dyb3VwJzpcbiAgICAgIHJldHVybiAxNDtcbiAgICBjYXNlICdzaWduYXR1cmUnOlxuICAgIGNhc2UgJ2luaXRpYWwnOlxuICAgICAgcmV0dXJuIDQxO1xuICB9XG5cbiAgcmV0dXJuIDUwO1xufTtcblxuZXhwb3J0IGNvbnN0IHNldENvbnRyb2xTdHlsZXMgPSAoZWw6IEhUTUxFbGVtZW50LCBmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCwgeFNjYWxlOiBudW1iZXIsIHlTY2FsZTogbnVtYmVyLCByb2xlSW5kZXg6IG51bWJlciwgb3B0aW9uPzogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHNldHRpbmdzID0gKGZpZWxkIGFzIElUZW1wbGF0ZUZpZWxkKS5zZXR0aW5nIHx8IChmaWVsZCBhcyBJRG9jdW1lbnRGaWVsZCkuc2V0dGluZ3M7XG4gIGxldCB7eCA9IDAsIHkgPSAwLCB3aWR0aCA9IGRlZmF1bHRXaWR0aChmaWVsZCksIGhlaWdodCA9IGRlZmF1bHRIZWlnaHQoZmllbGQpfSA9IHNldHRpbmdzO1xuXG4gIGNvbnN0IG9wdGlvblNldHRpbmdzID0gb3B0aW9uICE9PSB1bmRlZmluZWQgJiYgc2V0dGluZ3Mub3B0aW9uc1tvcHRpb25dID8gc2V0dGluZ3Mub3B0aW9uc1tvcHRpb25dIDogbnVsbDtcbiAgaWYgKG9wdGlvblNldHRpbmdzKSB7XG4gICAgeCA9IG9wdGlvblNldHRpbmdzLnggPz8geDtcbiAgICB5ID0gb3B0aW9uU2V0dGluZ3MueSA/PyB5O1xuICAgIHdpZHRoID0gb3B0aW9uU2V0dGluZ3Mud2lkdGggPz8gd2lkdGg7XG4gICAgaGVpZ2h0ID0gb3B0aW9uU2V0dGluZ3MuaGVpZ2h0ID8/IGhlaWdodDtcbiAgfVxuXG4gIGVsLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgO1xuICBlbC5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuICBlbC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gIGVsLnN0eWxlLmxlZnQgPSBgJHtyZXNjYWxlKHhTY2FsZSwgeCl9cHhgO1xuICBlbC5zdHlsZS5ib3R0b20gPSBgJHtyZXNjYWxlKHlTY2FsZSwgeSl9cHhgO1xuICBlbC5zdHlsZS50cmFuc2Zvcm0gPSBgc2NhbGUoJHt4U2NhbGV9LCAke3lTY2FsZX0pYDtcbiAgZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZmllbGRbJ3JnYmEnXSB8fCBnZXRSR0JBKHJvbGVJbmRleCk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0RmllbGRJZCA9IChmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCkgPT4ge1xuICByZXR1cm4gYHZlcmRvY3MtZG9jLWZsZC0ke2ZpZWxkLm5hbWV9YDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRGaWVsZE9wdGlvbklkID0gKGZpZWxkOiBJVGVtcGxhdGVGaWVsZCwgaW5kZXg6IG51bWJlcikgPT4ge1xuICByZXR1cm4gYHZlcmRvY3MtZG9jLWZsZC0ke2ZpZWxkLm5hbWV9LSR7aW5kZXh9YDtcbn07XG5cbmV4cG9ydCBjb25zdCByZW5kZXJEb2N1bWVudEZpZWxkID0gKFxuICBmaWVsZDogSVRlbXBsYXRlRmllbGQsXG4gIGRvY1BhZ2U6IElEb2N1bWVudFBhZ2VJbmZvLFxuICByb2xlSW5kZXg6IG51bWJlcixcbiAgaGFuZGxlRmllbGRDaGFuZ2U6IChmaWVsZDogSVRlbXBsYXRlRmllbGQsIGU6IGFueSwgb3B0aW9uSWQ/OiBzdHJpbmcpID0+IHZvaWQsXG4gIGRpc2FibGVkOiBib29sZWFuLFxuKSA9PiB7XG4gIGNvbnN0IGNvbnRyb2xzRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZG9jUGFnZS5jb250YWluZXJJZCArICctY29udHJvbHMnKTtcbiAgaWYgKCFjb250cm9sc0Rpdikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN3aXRjaCAoZmllbGQudHlwZSkge1xuICAgIGNhc2UgJ2F0dGFjaG1lbnQnOlxuICAgIGNhc2UgJ2RhdGUnOlxuICAgIGNhc2UgJ2Ryb3Bkb3duJzpcbiAgICBjYXNlICdpbml0aWFsJzpcbiAgICBjYXNlICdwYXltZW50JzpcbiAgICBjYXNlICdzaWduYXR1cmUnOlxuICAgIGNhc2UgJ3RpbWVzdGFtcCc6XG4gICAgY2FzZSAndGV4dGFyZWEnOlxuICAgIGNhc2UgJ3RleHRib3gnOlxuICAgICAge1xuICAgICAgICBjb25zdCBpZCA9IGdldEZpZWxkSWQoZmllbGQpO1xuICAgICAgICBjb25zdCBleGlzdGluZ0ZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICBpZiAoZXhpc3RpbmdGaWVsZCkge1xuICAgICAgICAgIHNldENvbnRyb2xTdHlsZXMoZXhpc3RpbmdGaWVsZCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSwgcm9sZUluZGV4KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbDogYW55ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgdmVyZG9jcy1maWVsZC0ke2ZpZWxkLnR5cGV9YCk7XG4gICAgICAgIGVsLmZpZWxkID0gZmllbGQ7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdmaWVsZENoYW5nZScsIGUgPT4gaGFuZGxlRmllbGRDaGFuZ2UoZmllbGQsIGUpKTtcbiAgICAgICAgc2V0Q29udHJvbFN0eWxlcyhlbCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSwgcm9sZUluZGV4KTtcbiAgICAgICAgY29udHJvbHNEaXYuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdjaGVja2JveF9ncm91cCc6XG4gICAgICBmaWVsZC5zZXR0aW5nLm9wdGlvbnMuZm9yRWFjaCgoXywgY2hlY2tib3hJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpZCA9IGdldEZpZWxkT3B0aW9uSWQoZmllbGQsIGNoZWNrYm94SW5kZXgpO1xuICAgICAgICBjb25zdCBleGlzdGluZ0ZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICBpZiAoZXhpc3RpbmdGaWVsZCkge1xuICAgICAgICAgIHNldENvbnRyb2xTdHlsZXMoZXhpc3RpbmdGaWVsZCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSwgcm9sZUluZGV4LCBjaGVja2JveEluZGV4KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYkVsOiBhbnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGB2ZXJkb2NzLWZpZWxkLWNoZWNrYm94YCk7XG4gICAgICAgIGNiRWwuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgY2JFbC5zZXRBdHRyaWJ1dGUoJ2lkJywgaWQpO1xuICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgnb3B0aW9uJywgY2hlY2tib3hJbmRleCk7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGNiRWwuYWRkRXZlbnRMaXN0ZW5lcignZmllbGRDaGFuZ2UnLCBlID0+IGhhbmRsZUZpZWxkQ2hhbmdlKGZpZWxkLCBlKSk7XG4gICAgICAgIHNldENvbnRyb2xTdHlsZXMoY2JFbCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSwgcm9sZUluZGV4LCBjaGVja2JveEluZGV4KTtcbiAgICAgICAgY29udHJvbHNEaXYuYXBwZW5kQ2hpbGQoY2JFbCk7XG4gICAgICB9KTtcblxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdyYWRpb19idXR0b25fZ3JvdXAnOlxuICAgICAgZmllbGQuc2V0dGluZy5vcHRpb25zLmZvckVhY2goKF8sIGJ1dHRvbkluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlkID0gZ2V0RmllbGRPcHRpb25JZChmaWVsZCwgYnV0dG9uSW5kZXgpO1xuICAgICAgICBjb25zdCBleGlzdGluZ0ZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICBpZiAoZXhpc3RpbmdGaWVsZCkge1xuICAgICAgICAgIHNldENvbnRyb2xTdHlsZXMoZXhpc3RpbmdGaWVsZCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSwgcm9sZUluZGV4LCBidXR0b25JbmRleCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2JFbDogYW55ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgdmVyZG9jcy1maWVsZC1yYWRpby1idXR0b25gKTtcbiAgICAgICAgY2JFbC5maWVsZCA9IGZpZWxkO1xuICAgICAgICBjYkVsLnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG4gICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdvcHRpb24nLCBidXR0b25JbmRleCk7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgIGNiRWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGNiRWwuYWRkRXZlbnRMaXN0ZW5lcignZmllbGRDaGFuZ2UnLCBlID0+IGhhbmRsZUZpZWxkQ2hhbmdlKGZpZWxkLCBlKSk7XG4gICAgICAgIHNldENvbnRyb2xTdHlsZXMoY2JFbCwgZmllbGQsIGRvY1BhZ2UueFNjYWxlLCBkb2NQYWdlLnlTY2FsZSwgcm9sZUluZGV4LCBidXR0b25JbmRleCk7XG4gICAgICAgIGNvbnRyb2xzRGl2LmFwcGVuZENoaWxkKGNiRWwpO1xuICAgICAgfSk7XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gY2FzZSAnYXR0YWNobWVudCc6XG4gICAgLy8gICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZlcmRvY3MtZmllbGQtYXR0YWNobWVudCcpO1xuICAgIC8vICAgZWwuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHJlc3VsdCB8fCAnJyk7XG4gICAgLy8gICBicmVhaztcbiAgICAvLyBjYXNlICdwYXltZW50JzpcbiAgICAvLyAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmVyZG9jcy1maWVsZC1wYXltZW50Jyk7XG4gICAgLy8gICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBTa2lwcGluZyB1bnN1cHBvcnRlZCBmaWVsZCB0eXBlJywgZmllbGQpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Um9sZUluZGV4ID0gKHJvbGVzOiBzdHJpbmdbXSwgcm9sZTogc3RyaW5nKSA9PiByb2xlcy5pbmRleE9mKHJvbGUpIHx8IDA7XG5cbi8vIFRPRE86IFdlIGNhbiBjbGVhbiB0aGlzIHVwIGEgbG90IGlmIHdlIGFsdGVyIHRoZSBBUEkgdG8gZW1pdCBib3RoIHNldHRpbmcgYW5kIHNldHRpbmdzIHJlZ2FyZGxlc3Mgb2YgdGhlIHNvdXJjZSB0eXBlLFxuLy8gICBidXQgdGhlbiBtZXJnZSB0aGUgU0RLIHR5cGVzIHRvIGVuY291cmFnZSBkZXZlbG9wZXJzIHRvIHVzZSBqdXN0IGBzZXR0aW5nc2AuXG5leHBvcnQgY29uc3QgZ2V0RmllbGRTZXR0aW5ncyA9IChmaWVsZDogSVRlbXBsYXRlRmllbGQgfCBJRG9jdW1lbnRGaWVsZCkgPT4ge1xuICBpZiAoKGZpZWxkIGFzIElUZW1wbGF0ZUZpZWxkKS5zZXR0aW5nKSB7XG4gICAgcmV0dXJuIChmaWVsZCBhcyBJVGVtcGxhdGVGaWVsZCkuc2V0dGluZztcbiAgfVxuXG4gIGlmICgoZmllbGQgYXMgSURvY3VtZW50RmllbGQpLnNldHRpbmdzKSB7XG4gICAgcmV0dXJuIChmaWVsZCBhcyBJRG9jdW1lbnRGaWVsZCkuc2V0dGluZ3M7XG4gIH1cblxuICByZXR1cm4ge3g6IDAsIHk6IDAsIHJlcXVpcmVkOiBmYWxzZSwgZGlzYWJsZWQ6IGZhbHNlLCByZXN1bHQ6ICcnLCB2YWx1ZTogJyd9O1xufTtcbiIsIkBpbXBvcnQgJy4uLy4uLy4uL3RoZW1lLnNjc3MnO1xuXG52ZXJkb2NzLXByZXZpZXcge1xuICAvL2Rpc3BsYXk6IGZsZXg7XG4gIC8vb3ZlcmZsb3c6IGhpZGRlbjtcbiAgLy9wb3NpdGlvbjogcmVsYXRpdmU7XG4gIC8vbWluLWhlaWdodDogNjAwcHg7XG4gIC8vZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgLy9ib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAvL2ZvbnQtZmFtaWx5OiAkdmVyZG9jcy1wcmltYXJ5LWZvbnQ7XG4gIC8vXG4gIC8vZGl2IHtcbiAgLy8gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIC8vfVxuICAvL1xuICAvLy50b29sYmFyIHtcbiAgLy8gIHdpZHRoOiAxMDAlO1xuICAvLyAgbWFyZ2luOiAwIGF1dG87XG4gIC8vICBwYWRkaW5nOiAwIDE0cHg7XG4gIC8vICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIC8vfVxuICAvL1xuICAvLy50b29scyB7XG4gIC8vICB3aWR0aDogMTAwJTtcbiAgLy8gIGNvbG9yOiAjZmZmO1xuICAvLyAgaGVpZ2h0OiA1NnB4O1xuICAvLyAgZGlzcGxheTogZmxleDtcbiAgLy8gIGZvbnQtc2l6ZTogMTJweDtcbiAgLy8gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIC8vICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAvLyAgYmFja2dyb3VuZC1jb2xvcjogJG1lZGl1bS1iZztcbiAgLy99XG4gIC8vXG4gIC8vLmNvdmVyIHtcbiAgLy8gIHRvcDogMDtcbiAgLy8gIGxlZnQ6IDA7XG4gIC8vICByaWdodDogMDtcbiAgLy8gIGJvdHRvbTogMDtcbiAgLy8gIHotaW5kZXg6IDk5OTtcbiAgLy8gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgLy8gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC41KTtcbiAgLy99XG4gIC8vXG4gIC8vLmRvY3VtZW50IHtcbiAgLy8gIGZsZXg6IDE7XG4gIC8vICBoZWlnaHQ6IDEwMCU7XG4gIC8vICBkaXNwbGF5OiBmbGV4O1xuICAvLyAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAvLyAgb3ZlcmZsb3cteTogc2Nyb2xsO1xuICAvLyAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgLy8gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIC8vICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgLy9cbiAgLy8gIC5pbm5lciB7XG4gIC8vICAgIHdpZHRoOiAxMDAlO1xuICAvLyAgICBtYXgtd2lkdGg6IDEwMjhweDtcbiAgLy8gIH1cbiAgLy99XG4gIC8vXG4gIC8vLmFncmVlIHtcbiAgLy8gIGZsZXg6IDE7XG4gIC8vICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAvLyAgZGlzcGxheTogZmxleDtcbiAgLy8gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIC8vICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG4gIC8vXG4gIC8vICAuaW50cm8ge1xuICAvLyAgICBkaXNwbGF5OiBub25lO1xuICAvLyAgfVxuICAvL1xuICAvLyAgLmhlYWRlciB7XG4gIC8vICAgIGZsZXg6IDAgMCA1NnB4O1xuICAvLyAgfVxuICAvL1xuICAvLyAgLmFncmVlLWNoZWNrYm94IHtcbiAgLy8gICAgYmFja2dyb3VuZDogI2NjYztcbiAgLy8gICAgZmxleDogMCAwIDIwcHg7XG4gIC8vICAgIGRpc3BsYXk6IGZsZXg7XG4gIC8vICAgIHdpZHRoOiAyMHB4O1xuICAvLyAgICBoZWlnaHQ6IDIwcHg7XG4gIC8vICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgLy8gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAvLyAgICBtYXJnaW46IDAgMTBweCAwIDE0cHg7XG4gIC8vXG4gIC8vICAgIGlucHV0W3R5cGU9J2NoZWNrYm94J106Y2hlY2tlZCArIGxhYmVsOmFmdGVyIHtcbiAgLy8gICAgICBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9MTAwKTtcbiAgLy8gICAgICBvcGFjaXR5OiAxO1xuICAvLyAgICB9XG4gIC8vXG4gIC8vICAgIGxhYmVsIHtcbiAgLy8gICAgICBsZWZ0OiAycHg7XG4gIC8vICAgICAgdG9wOiAycHg7XG4gIC8vICAgICAgd2lkdGg6IDE2cHg7XG4gIC8vICAgICAgaGVpZ2h0OiAxNnB4O1xuICAvLyAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgLy8gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIC8vICAgICAgYmFja2dyb3VuZDogIzMzMzU0YztcbiAgLy8gICAgICBib3gtc2hhZG93OiBpbnNldCAwIC0xcHggMXB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTtcbiAgLy9cbiAgLy8gICAgICAuYWdyZWUtY2hlY2tib3ggbGFiZWw6aG92ZXI6OmFmdGVyIHtcbiAgLy8gICAgICAgIGZpbHRlcjogYWxwaGEob3BhY2l0eT0zMCk7XG4gIC8vICAgICAgICBvcGFjaXR5OiAwLjM7XG4gIC8vICAgICAgfVxuICAvL1xuICAvLyAgICAgICY6YWZ0ZXIge1xuICAvLyAgICAgICAgdG9wOiAycHg7XG4gIC8vICAgICAgICBsZWZ0OiAzcHg7XG4gIC8vICAgICAgICB3aWR0aDogOHB4O1xuICAvLyAgICAgICAgb3BhY2l0eTogMDtcbiAgLy8gICAgICAgIGhlaWdodDogNXB4O1xuICAvLyAgICAgICAgY29udGVudDogJyc7XG4gIC8vICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIC8vICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgLy8gICAgICAgIGZpbHRlcjogYWxwaGEob3BhY2l0eT0wKTtcbiAgLy8gICAgICAgIHRyYW5zZm9ybTogcm90YXRlKC00NWRlZyk7XG4gIC8vICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjZmNmZmY0O1xuICAvLyAgICAgICAgYm9yZGVyLXRvcDogbm9uZTtcbiAgLy8gICAgICAgIGJvcmRlci1yaWdodDogbm9uZTtcbiAgLy8gICAgICB9XG4gIC8vICAgIH1cbiAgLy8gIH1cbiAgLy99XG59XG4iLCJpbXBvcnQge0V2ZW50LCBFdmVudEVtaXR0ZXIsIEhvc3R9IGZyb20gJ0BzdGVuY2lsL2NvcmUnO1xuaW1wb3J0IHtWZXJkb2NzRW5kcG9pbnR9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkayc7XG5pbXBvcnQge0NvbXBvbmVudCwgUHJvcCwgU3RhdGUsIGh9IGZyb20gJ0BzdGVuY2lsL2NvcmUnO1xuaW1wb3J0IHtnZXRUZW1wbGF0ZX0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcy9UZW1wbGF0ZXMnO1xuaW1wb3J0IHtJVGVtcGxhdGUsIElUZW1wbGF0ZUZpZWxkfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzL1R5cGVzJztcbmltcG9ydCB7SVBhZ2VSZW5kZXJFdmVudH0gZnJvbSAnLi4vdmVyZG9jcy12aWV3L3ZlcmRvY3Mtdmlldyc7XG5pbXBvcnQge2dldFJvbGVJbmRleCwgcmVuZGVyRG9jdW1lbnRGaWVsZH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHtTREtFcnJvcn0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvZXJyb3JzJztcblxuLyoqXG4gKiBEaXNwbGF5IGEgdGVtcGxhdGUgcHJldmlldyBleHBlcmllbmNlLlxuICovXG5AQ29tcG9uZW50KHtcbiAgdGFnOiAndmVyZG9jcy1wcmV2aWV3JyxcbiAgc3R5bGVVcmw6ICd2ZXJkb2NzLXByZXZpZXcuc2NzcycsXG4gIHNoYWRvdzogZmFsc2UsXG59KVxuZXhwb3J0IGNsYXNzIFZlcmRvY3NQcmV2aWV3IHtcbiAgLyoqXG4gICAqIFRoZSBlbmRwb2ludCB0byB1c2UgdG8gY29tbXVuaWNhdGUgd2l0aCBWZXJkb2NzLiBJZiBub3Qgc2V0LCB0aGUgZGVmYXVsdCBlbmRwb2ludCB3aWxsIGJlIHVzZWQuXG4gICAqL1xuICBAUHJvcCgpIGVuZHBvaW50OiBWZXJkb2NzRW5kcG9pbnQgPSBWZXJkb2NzRW5kcG9pbnQuZ2V0RGVmYXVsdCgpO1xuXG4gIC8qKlxuICAgKiBUaGUgSUQgb2YgdGhlIHRlbXBsYXRlIHRvIGNyZWF0ZSB0aGUgZG9jdW1lbnQgZnJvbS5cbiAgICovXG4gIEBQcm9wKCkgdGVtcGxhdGVJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIGlmIGFuIGVycm9yIG9jY3Vycy4gVGhlIGV2ZW50IGRldGFpbHMgd2lsbCBjb250YWluIGluZm9ybWF0aW9uIGFib3V0IHRoZSBlcnJvci4gTW9zdCBlcnJvcnMgd2lsbFxuICAgKiB0ZXJtaW5hdGUgdGhlIHByb2Nlc3MsIGFuZCB0aGUgY2FsbGluZyBhcHBsaWNhdGlvbiBzaG91bGQgY29ycmVjdCB0aGUgY29uZGl0aW9uIGFuZCByZS1yZW5kZXIgdGhlIGNvbXBvbmVudC5cbiAgICovXG4gIEBFdmVudCh7Y29tcG9zZWQ6IHRydWV9KSBzZGtFcnJvcjogRXZlbnRFbWl0dGVyPFNES0Vycm9yPjtcblxuICBAU3RhdGUoKSBwZGZVcmwgPSBudWxsO1xuICBAU3RhdGUoKSB0ZW1wbGF0ZTogSVRlbXBsYXRlIHwgbnVsbCA9IG51bGw7XG5cbiAgcm9sZXM6IHN0cmluZ1tdID0gW107XG4gIGZpZWxkczogSVRlbXBsYXRlRmllbGRbXSA9IFtdO1xuXG4gIGFzeW5jIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGBbUFJFVklFV10gTG9hZGluZyB0ZW1wbGF0ZSAke3RoaXMudGVtcGxhdGVJZH1gKTtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXdhaXQgZ2V0VGVtcGxhdGUodGhpcy5lbmRwb2ludCwgdGhpcy50ZW1wbGF0ZUlkKTtcblxuICAgICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBHb3QgdGVtcGxhdGUnLCB0aGlzLnRlbXBsYXRlKTtcbiAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcblxuICAgICAgdGhpcy5wZGZVcmwgPSBgJHt0aGlzLmVuZHBvaW50LmdldEJhc2VVUkwoKX0vdGVtcGxhdGVzLyR7dGhpcy50ZW1wbGF0ZUlkfS9kb2N1bWVudHMvJHt0ZW1wbGF0ZS50ZW1wbGF0ZV9kb2N1bWVudD8uaWR9P2ZpbGU9dHJ1ZWA7XG5cbiAgICAgIHRoaXMucm9sZXMgPSB0ZW1wbGF0ZS5yb2xlcy5tYXAocm9sZSA9PiByb2xlLm5hbWUpO1xuICAgICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBMb2FkZWQgcm9sZXMnLCB0aGlzLnJvbGVzKTtcblxuICAgICAgdGhpcy5maWVsZHMgPSBbXTtcbiAgICAgIHRlbXBsYXRlLnJvbGVzLmZvckVhY2gocm9sZSA9PiB7XG4gICAgICAgIHRoaXMuZmllbGRzLnB1c2goLi4ucm9sZS5maWVsZHMpO1xuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZygnW1BSRVZJRVddIExvYWRlZCBmaWVsZHMnLCB0aGlzLmZpZWxkcyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBFcnJvciB3aXRoIHByZXZpZXcgc2Vzc2lvbicsIGUpO1xuICAgICAgdGhpcy5zZGtFcnJvcj8uZW1pdChuZXcgU0RLRXJyb3IoZS5tZXNzYWdlLCBlLnJlc3BvbnNlPy5zdGF0dXMsIGUucmVzcG9uc2U/LmRhdGEpKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBoYW5kbGVGaWVsZENoYW5nZShmaWVsZDogSVRlbXBsYXRlRmllbGQsIGU6IGFueSwgb3B0aW9uSWQ/OiBzdHJpbmcpIHtcbiAgICBjb25zb2xlLmxvZygnW1BSRVZJRVddIGhhbmRsZUZpZWxkQ2hhbmdlJywgZmllbGQsIGUsIG9wdGlvbklkKTtcbiAgfVxuXG4gIGhhbmRsZVBhZ2VSZW5kZXJlZChlKSB7XG4gICAgY29uc3QgcGFnZUluZm8gPSBlLmRldGFpbCBhcyBJUGFnZVJlbmRlckV2ZW50O1xuICAgIGNvbnNvbGUubG9nKCdbUFJFVklFV10gUGFnZSByZW5kZXJlZCcsIHBhZ2VJbmZvKTtcblxuICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMuZmllbGRzLmZpbHRlcihmaWVsZCA9PiBmaWVsZC5wYWdlX3NlcXVlbmNlID09PSBwYWdlSW5mby5yZW5kZXJlZFBhZ2UucGFnZU51bWJlcik7XG4gICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBGaWVsZHMgb24gcGFnZScsIGZpZWxkcyk7XG4gICAgZmllbGRzLmZvckVhY2goZmllbGQgPT4gcmVuZGVyRG9jdW1lbnRGaWVsZChmaWVsZCwgcGFnZUluZm8ucmVuZGVyZWRQYWdlLCBnZXRSb2xlSW5kZXgodGhpcy5yb2xlcywgZmllbGQucm9sZV9uYW1lKSwgdGhpcy5oYW5kbGVGaWVsZENoYW5nZSwgdHJ1ZSkpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8SG9zdD5cbiAgICAgICAge3RoaXMucGRmVXJsID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbm5lclwiPlxuICAgICAgICAgICAgPHZlcmRvY3Mtdmlld1xuICAgICAgICAgICAgICBzb3VyY2U9e3RoaXMucGRmVXJsfVxuICAgICAgICAgICAgICBlbmRwb2ludD17dGhpcy5lbmRwb2ludH1cbiAgICAgICAgICAgICAgb25QYWdlUmVuZGVyZWQ9e2UgPT4gdGhpcy5oYW5kbGVQYWdlUmVuZGVyZWQoZSl9XG4gICAgICAgICAgICAgIHBhZ2VMYXllcnM9e1tcbiAgICAgICAgICAgICAgICB7bmFtZTogJ3BhZ2UnLCB0eXBlOiAnY2FudmFzJ30sXG4gICAgICAgICAgICAgICAge25hbWU6ICdjb250cm9scycsIHR5cGU6ICdkaXYnfSxcbiAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPHZlcmRvY3MtbG9hZGVyIC8+XG4gICAgICAgICl9XG4gICAgICA8L0hvc3Q+XG4gICAgKTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==
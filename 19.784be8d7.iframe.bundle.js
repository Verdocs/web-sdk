/*! For license information please see 19.784be8d7.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"./dist/esm/Pages-2af466b6.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createPage})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getPageImage}));__webpack_require__("./node_modules/core-js/modules/es.array.concat.js");var createPage=function createPage(endpoint,templateId,params){return endpoint.api.post("/templates/".concat(templateId,"/pages"),params).then((function(r){return r.data}))},getPageImage=function getPageImage(endpoint,templateId,sequence){return endpoint.api.get("/templates/".concat(templateId,"/pages/").concat(sequence,"/image")).then((function(r){return r.data}))}},"./dist/esm/Templates-0b30ee66.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return loadTemplate}));__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js");var _Pages_2af466b6_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./dist/esm/Pages-2af466b6.js"),_Templates_f7c590c0_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./dist/esm/Templates-f7c590c0.js"),_templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./dist/esm/templateStore-3b26e38d.js");function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncIterator(iterable){var method,async,sync,retry=2;for("undefined"!=typeof Symbol&&(async=Symbol.asyncIterator,sync=Symbol.iterator);retry--;){if(async&&null!=(method=iterable[async]))return method.call(iterable);if(sync&&null!=(method=iterable[sync]))return new AsyncFromSyncIterator(method.call(iterable));async="@@asyncIterator",sync="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator(s){function AsyncFromSyncIteratorContinuation(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var done=r.done;return Promise.resolve(r.value).then((function(value){return{value:value,done:done}}))}return AsyncFromSyncIterator=function AsyncFromSyncIterator(s){this.s=s,this.n=s.next},AsyncFromSyncIterator.prototype={s:null,n:null,next:function next(){return AsyncFromSyncIteratorContinuation(this.n.apply(this.s,arguments))},return:function _return(value){var ret=this.s.return;return void 0===ret?Promise.resolve({value:value,done:!0}):AsyncFromSyncIteratorContinuation(ret.apply(this.s,arguments))},throw:function _throw(value){var thr=this.s.return;return void 0===thr?Promise.reject(value):AsyncFromSyncIteratorContinuation(thr.apply(this.s,arguments))}},new AsyncFromSyncIterator(s)}var loadTemplate=function(){var _ref=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(endpoint,templateId){var template,pageUris,_iteratorAbruptCompletion,_didIteratorError,_iteratorError,_iterator,_step,page,image;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_23__.a.template=null,templateId){_context.next=4;break}return console.log("[TEMPLATES] Missing required template ID"),_context.abrupt("return");case 4:return _templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_23__.a.loading=!0,_context.prev=5,console.log("[TEMPLATES] Loading template "+templateId),_context.next=9,Object(_Templates_f7c590c0_js__WEBPACK_IMPORTED_MODULE_22__.c)(endpoint,templateId);case 9:if(template=_context.sent){_context.next=13;break}return console.log("[TEMPLATES] Unable to load template"),_context.abrupt("return");case 13:_templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_23__.a.template=template,pageUris={},_iteratorAbruptCompletion=!1,_didIteratorError=!1,_context.prev=17,_iterator=_asyncIterator(_templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_23__.a.template.pages);case 19:return _context.next=21,_iterator.next();case 21:if(!(_iteratorAbruptCompletion=!(_step=_context.sent).done)){_context.next=33;break}return page=_step.value,console.log("[TEMPLATES] Loading page",page),_context.next=26,Object(_Pages_2af466b6_js__WEBPACK_IMPORTED_MODULE_21__.b)(endpoint,templateId,page.sequence);case 26:image=_context.sent,pageUris[page.sequence]=image.url,console.log("[TEMPLATES] Got image Uri",image.url),_templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_23__.a.loadProgress=page.sequence/_templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_23__.a.template.pages.length;case 30:_iteratorAbruptCompletion=!1,_context.next=19;break;case 33:_context.next=39;break;case 35:_context.prev=35,_context.t0=_context.catch(17),_didIteratorError=!0,_iteratorError=_context.t0;case 39:if(_context.prev=39,_context.prev=40,!_iteratorAbruptCompletion||null==_iterator.return){_context.next=44;break}return _context.next=44,_iterator.return();case 44:if(_context.prev=44,!_didIteratorError){_context.next=47;break}throw _iteratorError;case 47:return _context.finish(44);case 48:return _context.finish(39);case 49:_templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_23__.a.pageUris=pageUris,_templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_23__.a.loadProgress=100,_templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_23__.a.loading=!1,_context.next=58;break;case 54:throw _context.prev=54,_context.t1=_context.catch(5),console.log("[TEMPLATES] Error loading template",_context.t1),_context.t1;case 58:case"end":return _context.stop()}}),_callee,null,[[5,54],[17,35,39,49],[40,,44,48]])})));return function loadTemplate(_x,_x2){return _ref.apply(this,arguments)}}()},"./dist/esm/Templates-f7c590c0.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getTemplates})),__webpack_require__.d(__webpack_exports__,"b",(function(){return createTemplate})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getTemplate}));var getTemplates=function getTemplates(endpoint,params){return endpoint.api.post("/templates",{params:params}).then((function(r){return r.data}))},getTemplate=function getTemplate(endpoint,templateId){return endpoint.api.get("/templates/".concat(templateId)).then((function(r){return r.data}))},createTemplate=function createTemplate(endpoint,params){return endpoint.api.post("/templates/",params).then((function(r){return r.data}))}},"./dist/esm/errors-9b5498c8.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SDKError}));__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var SDKError=function(_Error){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(SDKError,_Error);var _super=function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}(SDKError);function SDKError(message,statusCode,response){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SDKError),(_this=_super.call(this,message||"SDK Error")).response=response,_this.statusCode=statusCode,Object.setPrototypeOf(_assertThisInitialized(_this),(this instanceof SDKError?this.constructor:void 0).prototype),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(SDKError)}(_wrapNativeSuper(Error))},"./dist/esm/verdocs-preview.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"verdocs_preview",(function(){return VerdocsPreview}));__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js");var _index_f78d163d_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./dist/esm/index-f78d163d.js"),_VerdocsEndpoint_82f4600d_js__WEBPACK_IMPORTED_MODULE_27__=(__webpack_require__("./dist/esm/Types-ab9f6af8.js"),__webpack_require__("./dist/esm/VerdocsEndpoint-82f4600d.js")),_utils_3f23facc_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("./dist/esm/utils-3f23facc.js"),_templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./dist/esm/templateStore-3b26e38d.js"),_Templates_0b30ee66_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("./dist/esm/Templates-0b30ee66.js"),_errors_9b5498c8_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("./dist/esm/errors-9b5498c8.js");__webpack_require__("./dist/esm/Pages-2af466b6.js"),__webpack_require__("./dist/esm/Templates-f7c590c0.js");function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var VerdocsPreview=function(){function VerdocsPreview(hostRef){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,VerdocsPreview),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_25__.j)(this,hostRef),this.sdkError=Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_25__.e)(this,"sdkError",7),this.endpoint=_VerdocsEndpoint_82f4600d_js__WEBPACK_IMPORTED_MODULE_27__.a.getDefault(),this.templateId=null}var _handleFieldChange,_componentDidLoad;return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(VerdocsPreview,[{key:"componentDidLoad",value:(_componentDidLoad=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var _a,_b,_c;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(this.endpoint.loadSession(),this.templateId){_context.next=4;break}return console.log("[PREVIEW] Missing required template ID "+this.templateId),_context.abrupt("return");case 4:return _context.prev=4,console.log("[PREVIEW] Loading template "+this.templateId),_context.next=8,Object(_Templates_0b30ee66_js__WEBPACK_IMPORTED_MODULE_30__.a)(this.endpoint,this.templateId);case 8:_context.next=14;break;case 10:_context.prev=10,_context.t0=_context.catch(4),console.log("[PREVIEW] Error loading template",_context.t0),null===(_a=this.sdkError)||void 0===_a||_a.emit(new _errors_9b5498c8_js__WEBPACK_IMPORTED_MODULE_31__.a(_context.t0.message,null===(_b=_context.t0.response)||void 0===_b?void 0:_b.status,null===(_c=_context.t0.response)||void 0===_c?void 0:_c.data));case 14:case"end":return _context.stop()}}),_callee,this,[[4,10]])}))),function componentDidLoad(){return _componentDidLoad.apply(this,arguments)})},{key:"handleFieldChange",value:(_handleFieldChange=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(field,e,optionId){return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:console.log("[PREVIEW] handleFieldChange",field,e,optionId);case 1:case"end":return _context2.stop()}}),_callee2)}))),function handleFieldChange(_x,_x2,_x3){return _handleFieldChange.apply(this,arguments)})},{key:"handlePageRendered",value:function handlePageRendered(e){var _this=this,pageInfo=e.detail;console.log("[PREVIEW] Page rendered",pageInfo);var fields=_templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_29__.a.fields.filter((function(field){return field.page_sequence===pageInfo.renderedPage.pageNumber}));console.log("[PREVIEW] Fields on page",fields),fields.forEach((function(field){return Object(_utils_3f23facc_js__WEBPACK_IMPORTED_MODULE_28__.g)(field,pageInfo.renderedPage,Object(_utils_3f23facc_js__WEBPACK_IMPORTED_MODULE_28__.a)(_templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_29__.a.roleNames,field.role_name),_this.handleFieldChange,!0)}))}},{key:"render",value:function render(){var _this2=this;return _templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_29__.a.loading?Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_25__.h)(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_25__.b,null,Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_25__.h)("verdocs-loader",null)):Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_25__.h)(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_25__.b,null,_templateStore_3b26e38d_js__WEBPACK_IMPORTED_MODULE_29__.a.template?Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_25__.h)("div",{class:"inner"},Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_25__.h)("verdocs-view",{templateId:this.templateId,endpoint:this.endpoint,onPageRendered:function onPageRendered(e){return _this2.handlePageRendered(e)},pageLayers:[{name:"page",type:"canvas"},{name:"controls",type:"div"}]})):Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_25__.h)("div",null,"Error loading Template. Please try again later."))}}]),VerdocsPreview}();VerdocsPreview.style=""}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMvUGFnZXMuanMiLCJ3ZWJwYWNrOi8vL3NyYy91dGlscy9UZW1wbGF0ZXMudHMiLCJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy9AdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzL1RlbXBsYXRlcy5qcyIsIndlYnBhY2s6Ly8vc3JjL3V0aWxzL2Vycm9ycy50cyIsIndlYnBhY2s6Ly8vc3JjL2NvbXBvbmVudHMvZW1iZWRzL3ZlcmRvY3MtcHJldmlldy92ZXJkb2NzLXByZXZpZXcuc2NzcyIsIndlYnBhY2s6Ly8vc3JjL2NvbXBvbmVudHMvZW1iZWRzL3ZlcmRvY3MtcHJldmlldy92ZXJkb2NzLXByZXZpZXcudHN4Il0sIm5hbWVzIjpbImNyZWF0ZVBhZ2UiLCJlbmRwb2ludCIsInRlbXBsYXRlSWQiLCJwYXJhbXMiLCJhcGkiLCJwb3N0IiwiY29uY2F0IiwidGhlbiIsInIiLCJkYXRhIiwiZ2V0UGFnZUltYWdlIiwic2VxdWVuY2UiLCJnZXQiLCJsb2FkVGVtcGxhdGUiLCJUZW1wbGF0ZVN0b3JlIiwidGVtcGxhdGUiLCJjb25zb2xlIiwibG9nIiwibG9hZGluZyIsImdldFRlbXBsYXRlIiwicGFnZVVyaXMiLCJwYWdlcyIsInBhZ2UiLCJpbWFnZSIsInVybCIsImxvYWRQcm9ncmVzcyIsImxlbmd0aCIsImdldFRlbXBsYXRlcyIsImNyZWF0ZVRlbXBsYXRlIiwiU0RLRXJyb3IiLCJtZXNzYWdlIiwic3RhdHVzQ29kZSIsInJlc3BvbnNlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJFcnJvciIsIlZlcmRvY3NQcmV2aWV3IiwiVmVyZG9jc0VuZHBvaW50IiwiZ2V0RGVmYXVsdCIsInRoaXMiLCJsb2FkU2Vzc2lvbiIsInNka0Vycm9yIiwiZW1pdCIsInN0YXR1cyIsImZpZWxkIiwiZSIsIm9wdGlvbklkIiwiaGFuZGxlUGFnZVJlbmRlcmVkIiwicGFnZUluZm8iLCJkZXRhaWwiLCJmaWVsZHMiLCJmaWx0ZXIiLCJwYWdlX3NlcXVlbmNlIiwicmVuZGVyZWRQYWdlIiwicGFnZU51bWJlciIsImZvckVhY2giLCJyZW5kZXJEb2N1bWVudEZpZWxkIiwiZ2V0Um9sZUluZGV4Iiwicm9sZU5hbWVzIiwicm9sZV9uYW1lIiwiaGFuZGxlRmllbGRDaGFuZ2UiLCJyZW5kZXIiLCJoIiwiSG9zdCIsImNsYXNzIiwib25QYWdlUmVuZGVyZWQiLCJwYWdlTGF5ZXJzIiwibmFtZSIsInR5cGUiXSwibWFwcGluZ3MiOiI7NFlBR1dBLFdBQWEsU0FBYkEsV0FBdUJDLFNBQVVDLFdBQVlDLFFBQ3BELE9BQU9GLFNBQVNHLElBQ1hDLEtBQUssY0FBY0MsT0FBT0osV0FBWSxVQUFXQyxRQUNqREksTUFBSyxTQUFVQyxHQUFLLE9BQU9BLEVBQUVDLElBQUssR0FDM0MsRUFxQldDLGFBQWUsU0FBZkEsYUFBeUJULFNBQVVDLFdBQVlTLFVBQ3RELE9BQU9WLFNBQVNHLElBQ1hRLElBQUksY0FBY04sT0FBT0osV0FBWSxXQUFXSSxPQUFPSyxTQUFVLFdBQ2pFSixNQUFLLFNBQVVDLEdBQUssT0FBT0EsRUFBRUMsSUFBSyxHQUMzQyxDLHM1YkMzQmFJLGFBQVksb0IscVZBQUEsNkJBQUcsaUJBQU9aLFNBQTJCQyxZQUFrQiw2TkFDaEQsR0FBOUJZLDJEQUFjQyxTQUFXLEtBRXBCYixXQUFZLENBQUYsc0JBQzJDLE9BQXhEYyxRQUFRQyxJQUFJLDRDQUE0QyxpQ0FPRSxPQUg1REgsMkRBQWNJLFNBQVUsRUFBSyxnQkFHM0JGLFFBQVFDLElBQUksZ0NBQWdDZixZQUFjLGdCQUNuQ2lCLCtEQUFZbEIsU0FBVUMsWUFBVyxPQUExQyxHQUFSYSxTQUFXLFNBQUgsS0FDQyxDQUFGLHVCQUN3QyxPQUFuREMsUUFBUUMsSUFBSSx1Q0FBdUMsa0NBSXJESCwyREFBY0MsU0FBV0EsU0FFbkJLLFNBQW1DLENBQUMsRUFBQyw0RkFDcEJOLDJEQUFjQyxTQUFTTSxPQUFLLDZJLE9BQXBDQyxLQUFJLFlBQ2pCTixRQUFRQyxJQUFJLDJCQUE0QkssTSxpQkFJcEJaLDJEQUFhVCxTQUFVQyxXQUFZb0IsS0FBS1gsVUFBUyxRQUEvRFksTUFBUSxTQUFILEtBRVhILFNBQVNFLEtBQUtYLFVBQVlZLE1BQU1DLElBQ2hDUixRQUFRQyxJQUFJLDRCQUE2Qk0sTUFBTUMsS0FDL0NWLDJEQUFjVyxhQUFlSCxLQUFLWCxTQUFXRywyREFBY0MsU0FBU00sTUFBTUssT0FBTyxnaEJBR25GWiwyREFBY00sU0FBV0EsU0FDekJOLDJEQUFjVyxhQUFlLElBQzdCWCwyREFBY0ksU0FBVSxFQUFNLCtCQUV1QixNQUZ2QiwrQ0FFOUJGLFFBQVFDLElBQUkscUNBQXNDLFNBQUYsSUFBSyw2R0FHekQsZ0JBeENhSixhQUFZLDZDLDJHQ0x6QixvUEFzRFUsSUFBQ2MsYUFBZSxTQUFmQSxhQUF5QjFCLFNBQVVFLFFBQzFDLE9BQU9GLFNBQVNHLElBQ1hDLEtBQUssYUFBYyxDQUFFRixPQUFRQSxTQUM3QkksTUFBSyxTQUFVQyxHQUFLLE9BQU9BLEVBQUVDLElBQUssR0FDM0MsRUFVV1UsWUFBYyxTQUFkQSxZQUF3QmxCLFNBQVVDLFlBQ3pDLE9BQU9ELFNBQVNHLElBQ1hRLElBQUksY0FBY04sT0FBT0osYUFDekJLLE1BQUssU0FBVUMsR0FBSyxPQUFPQSxFQUFFQyxJQUFLLEdBQzNDLEVBd0JXbUIsZUFBaUIsU0FBakJBLGVBQTJCM0IsU0FBVUUsUUFDNUMsT0FBT0YsU0FBU0csSUFDWEMsS0FBSyxjQUFlRixRQUNwQkksTUFBSyxTQUFVQyxHQUFLLE9BQU9BLEVBQUVDLElBQUssR0FDM0MsQyx3MklDcEdBLElBR2FvQixTQUFTLGtCLCtZQUFBLDZCLG9ZQUFBLFdBS3BCLGtCQUFZQyxRQUFpQkMsV0FBb0JDLFVBQWEsVUFJVixPLDhJQUpVLGlCQUM1RCx1QkFBTUYsU0FBVyxjQUNaRSxTQUFXQSxTQUNoQixNQUFLRCxXQUFhQSxXQUNsQkUsT0FBT0MsZUFBZSx1QkFBRCxRQUFPLGtEQUFXQyxXQUFXLEssQ0FDbkQsTyxrUUFBQSxXQVZtQixDQVVuQixpQkFWMkJDLE8sNC9jQ0g5QixJQ2tCYUMsZUFBYyxXLHlYQUlXQyw2REFBZ0JDLGEsZ0JBS2hCLEksQ0F3Qm5DLHVCLGtCQTRDQSxPLGtYQTNERCxpSkFDOEIsR0FBNUJDLEtBQUt2QyxTQUFTd0MsY0FFVEQsS0FBS3RDLFdBQVksQ0FBRixzQkFDdUQsT0FBekVjLFFBQVFDLElBQUksMENBQTBDdUIsS0FBS3RDLFlBQWMsaUNBS1osT0FMWSxnQkFLekVjLFFBQVFDLElBQUksOEJBQThCdUIsS0FBS3RDLFlBQWMsZ0JBQ3ZEVywrREFBYTJCLEtBQUt2QyxTQUFVdUMsS0FBS3RDLFlBQVcscUZBRWxEYyxRQUFRQyxJQUFJLG1DQUFvQyxTQUFGLElBQ2pDLFFBQWIsR0FBQXVCLEtBQUtFLGdCQUFRLFdBQUVDLEtBQUssSUFBSWQsb0RBQVMsWUFBRUMsUUFBbUIsUUFBVixlQUFFRSxnQkFBUSxpQkFBRVksT0FBa0IsUUFBVixlQUFFWixnQkFBUSxpQkFBRXZCLE9BQU8sdUVBRXRGLCtLQUVELGtCQUF3Qm9DLE1BQXVCQyxFQUFRQyxVQUFpQixxSEFDdEUvQixRQUFRQyxJQUFJLDhCQUErQjRCLE1BQU9DLEVBQUdDLFVBQVUsMERBQ2hFLDBIQUVELFNBQUFDLG1CQUFtQkYsR0FBQyxlQUNaRyxTQUFXSCxFQUFFSSxPQUNuQmxDLFFBQVFDLElBQUksMEJBQTJCZ0MsVUFFdkMsSUFBTUUsT0FBU3JDLDJEQUFjcUMsT0FBT0MsUUFBTyxTQUFBUCxPQUFLLE9BQUlBLE1BQU1RLGdCQUFrQkosU0FBU0ssYUFBYUMsVUFBVSxJQUM1R3ZDLFFBQVFDLElBQUksMkJBQTRCa0MsUUFDeENBLE9BQU9LLFNBQVEsU0FBQVgsT0FBSyxPQUFJWSwyREFBb0JaLE1BQU9JLFNBQVNLLGFBQWNJLDJEQUFhNUMsMkRBQWM2QyxVQUFXZCxNQUFNZSxXQUFZLE1BQUtDLG1CQUFtQixFQUFLLEcsR0FDaEssb0JBRUQsU0FBQUMsU0FBTSxnQkFDSixPQUFJaEQsMkRBQWNJLFFBRWQ2QywyREFBQ0MsbURBQUksS0FDSEQsbUZBT0pBLDJEQUFDQyxtREFBSSxLQUNGbEQsMkRBQWNDLFNBQ2JnRCxrRUFBS0UsTUFBTSxTQUNURiwyRUFDRTdELFdBQVlzQyxLQUFLdEMsV0FDakJELFNBQVV1QyxLQUFLdkMsU0FDZmlFLGVBQWdCLHdCQUFBcEIsR0FBQyxPQUFJLE9BQUtFLG1CQUFtQkYsRUFBRSxFQUMvQ3FCLFdBQVksQ0FDVixDQUFDQyxLQUFNLE9BQVFDLEtBQU0sVUFDckIsQ0FBQ0QsS0FBTSxXQUFZQyxLQUFNLFdBSy9CTix5SCxLQUlQLGVBN0V3QixHLHFCRGxCRCxFIiwiZmlsZSI6IjE5Ljc4NGJlOGQ3LmlmcmFtZS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFkZCBhIHBhZ2UgdG8gYSB0ZW1wbGF0ZS5cbiAqL1xuZXhwb3J0IHZhciBjcmVhdGVQYWdlID0gZnVuY3Rpb24gKGVuZHBvaW50LCB0ZW1wbGF0ZUlkLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5wb3N0KFwiL3RlbXBsYXRlcy9cIi5jb25jYXQodGVtcGxhdGVJZCwgXCIvcGFnZXNcIiksIHBhcmFtcylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xuLyoqXG4gKiBVcGRhdGUgYSB0ZW1wbGF0ZSBwYWdlLlxuICovXG5leHBvcnQgdmFyIGVkaXRQYWdlID0gZnVuY3Rpb24gKGVuZHBvaW50LCB0ZW1wbGF0ZUlkLCBzZXF1ZW5jZSkge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLnB1dChcIi90ZW1wbGF0ZXMvXCIuY29uY2F0KHRlbXBsYXRlSWQsIFwiL3BhZ2VzL1wiKS5jb25jYXQoc2VxdWVuY2UpKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIEdldCBhIHBhZ2UgZnJvbSBhIHRlbXBsYXRlLlxuICovXG5leHBvcnQgdmFyIGdldFBhZ2UgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHRlbXBsYXRlSWQsIHNlcXVlbmNlLCB0aHVtYm5haWwpIHtcbiAgICBpZiAodGh1bWJuYWlsID09PSB2b2lkIDApIHsgdGh1bWJuYWlsID0gZmFsc2U7IH1cbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5nZXQoXCIvdGVtcGxhdGVzL1wiLmNvbmNhdCh0ZW1wbGF0ZUlkLCBcIi9wYWdlcy9cIikuY29uY2F0KHNlcXVlbmNlKS5jb25jYXQodGh1bWJuYWlsID8gJz90aHVtYm5haWw9dHJ1ZScgOiAnJykpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogR2V0IGEgcGFnZSBpbWFnZSAoUE5HIGZvcm1hdCkgZnJvbSBhIHRlbXBsYXRlLlxuICovXG5leHBvcnQgdmFyIGdldFBhZ2VJbWFnZSA9IGZ1bmN0aW9uIChlbmRwb2ludCwgdGVtcGxhdGVJZCwgc2VxdWVuY2UpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5nZXQoXCIvdGVtcGxhdGVzL1wiLmNvbmNhdCh0ZW1wbGF0ZUlkLCBcIi9wYWdlcy9cIikuY29uY2F0KHNlcXVlbmNlLCBcIi9pbWFnZVwiKSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xuLyoqXG4gKiBEZWxldGUgYSBwYWdlIGZyb20gYSB0ZW1wbGF0ZVxuICovXG5leHBvcnQgdmFyIGRlbGV0ZVBhZ2UgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHRlbXBsYXRlSWQsIHNlcXVlbmNlKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAuZGVsZXRlKFwiL3RlbXBsYXRlcy9cIi5jb25jYXQodGVtcGxhdGVJZCwgXCIvcGFnZXMvXCIpLmNvbmNhdChzZXF1ZW5jZSkpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbiIsImltcG9ydCB7VmVyZG9jc0VuZHBvaW50fSBmcm9tICdAdmVyZG9jcy9qcy1zZGsnO1xuaW1wb3J0IHtnZXRQYWdlSW1hZ2V9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMvUGFnZXMnO1xuaW1wb3J0IHtnZXRUZW1wbGF0ZX0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcy9UZW1wbGF0ZXMnO1xuaW1wb3J0IFRlbXBsYXRlU3RvcmUgZnJvbSAnLi90ZW1wbGF0ZVN0b3JlJztcblxuZXhwb3J0IGNvbnN0IGxvYWRUZW1wbGF0ZSA9IGFzeW5jIChlbmRwb2ludDogVmVyZG9jc0VuZHBvaW50LCB0ZW1wbGF0ZUlkOiBzdHJpbmcpID0+IHtcbiAgVGVtcGxhdGVTdG9yZS50ZW1wbGF0ZSA9IG51bGw7XG5cbiAgaWYgKCF0ZW1wbGF0ZUlkKSB7XG4gICAgY29uc29sZS5sb2coYFtURU1QTEFURVNdIE1pc3NpbmcgcmVxdWlyZWQgdGVtcGxhdGUgSURgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBUZW1wbGF0ZVN0b3JlLmxvYWRpbmcgPSB0cnVlO1xuXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coYFtURU1QTEFURVNdIExvYWRpbmcgdGVtcGxhdGUgJHt0ZW1wbGF0ZUlkfWApO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gYXdhaXQgZ2V0VGVtcGxhdGUoZW5kcG9pbnQsIHRlbXBsYXRlSWQpO1xuICAgIGlmICghdGVtcGxhdGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbVEVNUExBVEVTXSBVbmFibGUgdG8gbG9hZCB0ZW1wbGF0ZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIFRlbXBsYXRlU3RvcmUudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcblxuICAgIGNvbnN0IHBhZ2VVcmlzOiBSZWNvcmQ8bnVtYmVyLCBzdHJpbmc+ID0ge307XG4gICAgZm9yIGF3YWl0IChsZXQgcGFnZSBvZiBUZW1wbGF0ZVN0b3JlLnRlbXBsYXRlLnBhZ2VzKSB7XG4gICAgICBjb25zb2xlLmxvZygnW1RFTVBMQVRFU10gTG9hZGluZyBwYWdlJywgcGFnZSk7XG4gICAgICAvLyBUT0RPOiBNYWtlIGFuIGVuZHBvaW50IHRvIGdldCBhbGwgb2YgdGhlIHBhZ2VzIGZvciBhIHRlbXBsYXRlXG4gICAgICAvLyBUT0RPOiBXaGVuIHVwbG9hZGluZyBhIG5ldyB0ZW1wbGF0ZSwgcHJlLXByb2Nlc3MgaXRzIHBhZ2VzIGludG8gaW1hZ2VzIGFuZCBjb21tZW50IHRoYXQgdGhlIGluZGl2aWR1YWwgcGFnZS1sb2FkZXIgaXMgYSB1dGlsaXR5LFxuICAgICAgLy8gIG5vdCB0aGUgcHJpbWFyeSBtZWNoYW5pc20uXG4gICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IGdldFBhZ2VJbWFnZShlbmRwb2ludCwgdGVtcGxhdGVJZCwgcGFnZS5zZXF1ZW5jZSk7XG4gICAgICAvLyBUT0RPOiBNYWtlIHRoaXMgdXJpIHRvIG1hdGNoIHRoZSByZXN0IG9mIHRoZSB0ZXJtaW5vbG9neT9cbiAgICAgIHBhZ2VVcmlzW3BhZ2Uuc2VxdWVuY2VdID0gaW1hZ2UudXJsO1xuICAgICAgY29uc29sZS5sb2coJ1tURU1QTEFURVNdIEdvdCBpbWFnZSBVcmknLCBpbWFnZS51cmwpO1xuICAgICAgVGVtcGxhdGVTdG9yZS5sb2FkUHJvZ3Jlc3MgPSBwYWdlLnNlcXVlbmNlIC8gVGVtcGxhdGVTdG9yZS50ZW1wbGF0ZS5wYWdlcy5sZW5ndGg7XG4gICAgfVxuXG4gICAgVGVtcGxhdGVTdG9yZS5wYWdlVXJpcyA9IHBhZ2VVcmlzO1xuICAgIFRlbXBsYXRlU3RvcmUubG9hZFByb2dyZXNzID0gMTAwO1xuICAgIFRlbXBsYXRlU3RvcmUubG9hZGluZyA9IGZhbHNlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coJ1tURU1QTEFURVNdIEVycm9yIGxvYWRpbmcgdGVtcGxhdGUnLCBlKTtcbiAgICB0aHJvdyBlO1xuICB9XG59O1xuIiwiLyoqXG4gKiBBIFRlbXBsYXRlIGRlZmluZXMgaG93IGEgVmVyZG9jcyBzaWduaW5nIGZsb3cgd2lsbCBiZSBwZXJmb3JtZWQsIGluY2x1ZGluZyBhdHRhY2htZW50cywgc2lnbmluZyBmaWVsZHMsIGFuZFxuICogcmVjaXBpZW50cy5cbiAqXG4gKiBAbW9kdWxlXG4gKi9cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG4vKipcbiAqIEdldCBhbGwgdGVtcGxhdGVzIGFjY2Vzc2libGUgYnkgdGhlIGNhbGxlciwgd2l0aCBvcHRpb25hbCBmaWx0ZXJzLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBhd2FpdCBUZW1wbGF0ZXMuZ2V0VGVtcGxhdGVzKChWZXJkb2NzRW5kcG9pbnQuZ2V0RGVmYXVsdCgpKTtcbiAqIGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZXMoKFZlcmRvY3NFbmRwb2ludC5nZXREZWZhdWx0KCksIHsgaXNfc3RhcnJlZDogdHJ1ZSB9KTtcbiAqIGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZXMoKFZlcmRvY3NFbmRwb2ludC5nZXREZWZhdWx0KCksIHsgaXNfY3JlYXRvcjogdHJ1ZSB9KTtcbiAqIGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZXMoKFZlcmRvY3NFbmRwb2ludC5nZXREZWZhdWx0KCksIHsgaXNfb3JnYW5pemF0aW9uOiB0cnVlIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VGVtcGxhdGVzID0gZnVuY3Rpb24gKGVuZHBvaW50LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5wb3N0KCcvdGVtcGxhdGVzJywgeyBwYXJhbXM6IHBhcmFtcyB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIEdldCBvbmUgdGVtcGxhdGUgYnkgaXRzIElELlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBjb25zdCB0ZW1wbGF0ZSA9IGF3YWl0IFRlbXBsYXRlcy5nZXRUZW1wbGF0ZSgoVmVyZG9jc0VuZHBvaW50LmdldERlZmF1bHQoKSwgJzgzZGEzZDcwLTc4NTctNDM5Mi1iODc2LWM0NTkyYTMwNGJjOScpO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHRlbXBsYXRlSWQpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5nZXQoXCIvdGVtcGxhdGVzL1wiLmNvbmNhdCh0ZW1wbGF0ZUlkKSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xuLyoqXG4gKiBHZXQgb3duZXIgaW5mb3JtYXRpb24gZm9yIGEgdGVtcGxhdGUuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGNvbnN0IHRlbXBsYXRlID0gYXdhaXQgVGVtcGxhdGVzLmdldFRlbXBsYXRlT3duZXJJbmZvKChWZXJkb2NzRW5kcG9pbnQuZ2V0RGVmYXVsdCgpLCAnODNkYTNkNzAtNzg1Ny00MzkyLWI4NzYtYzQ1OTJhMzA0YmM5Jyk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBnZXRUZW1wbGF0ZU93bmVySW5mbyA9IGZ1bmN0aW9uIChlbmRwb2ludCwgdGVtcGxhdGVJZCkge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLmdldChcIi90ZW1wbGF0ZXMvXCIuY29uY2F0KHRlbXBsYXRlSWQpKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIHRlbXBsYXRlLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBjb25zdCBuZXdUZW1wbGF0ZSA9IGF3YWl0IFRlbXBsYXRlcy5jcmVhdGVUZW1wbGF0ZSgoVmVyZG9jc0VuZHBvaW50LmdldERlZmF1bHQoKSwgey4uLn0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgY3JlYXRlVGVtcGxhdGUgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHBhcmFtcykge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLnBvc3QoJy90ZW1wbGF0ZXMvJywgcGFyYW1zKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIFVwZGF0ZSBhIHRlbXBsYXRlLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7VGVtcGxhdGVzfSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvVGVtcGxhdGVzJztcbiAqXG4gKiBjb25zdCB1cGRhdGVkVGVtcGxhdGUgPSBhd2FpdCBUZW1wbGF0ZXMudXBkYXRlVGVtcGxhdGUoKFZlcmRvY3NFbmRwb2ludC5nZXREZWZhdWx0KCksICc4M2RhM2Q3MC03ODU3LTQzOTItYjg3Ni1jNDU5MmEzMDRiYzknLCB7IG5hbWU6ICdOZXcgTmFtZScgfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVUZW1wbGF0ZSA9IGZ1bmN0aW9uIChlbmRwb2ludCwgdGVtcGxhdGVJZCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAucHV0KFwiL3RlbXBsYXRlcy9cIi5jb25jYXQodGVtcGxhdGVJZCksIHBhcmFtcylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xuLyoqXG4gKiBEZWxldGUgYSB0ZW1wbGF0ZS5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1RlbXBsYXRlc30gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcyc7XG4gKlxuICogYXdhaXQgVGVtcGxhdGVzLmRlbGV0ZVRlbXBsYXRlKChWZXJkb2NzRW5kcG9pbnQuZ2V0RGVmYXVsdCgpLCAnODNkYTNkNzAtNzg1Ny00MzkyLWI4NzYtYzQ1OTJhMzA0YmM5Jyk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciBkZWxldGVUZW1wbGF0ZSA9IGZ1bmN0aW9uIChlbmRwb2ludCwgdGVtcGxhdGVJZCkge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLmRlbGV0ZShcIi90ZW1wbGF0ZXMvXCIuY29uY2F0KHRlbXBsYXRlSWQpKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIFNlYXJjaCBmb3IgdGVtcGxhdGVzIG1hdGNoaW5nIHZhcmlvdXMgY3JpdGVyaWEuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtUZW1wbGF0ZXN9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9UZW1wbGF0ZXMnO1xuICpcbiAqIGNvbnN0IHtyZXN1bHQsIHBhZ2UsIHRvdGFsfSA9IGF3YWl0IFRlbXBsYXRlcy5zZWFyY2goKFZlcmRvY3NFbmRwb2ludC5nZXREZWZhdWx0KCksIHsgLi4uIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgc2VhcmNoVGVtcGxhdGVzID0gZnVuY3Rpb24gKGVuZHBvaW50LCBwYXJhbXMpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgICAgICAgICAgLnBvc3QoJy90ZW1wbGF0ZXMvc2VhcmNoJywgcGFyYW1zKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pXTtcbiAgICB9KTtcbn0pOyB9O1xuLyoqXG4gKiBHZXQgYSBzdW1tYXJ5IG9mIHRlbXBsYXRlIGRhdGEsIHR5cGljYWxseSB1c2VkIHRvIHBvcHVsYXRlIGFkbWluIHBhbmVsIGRhc2hib2FyZCBwYWdlcy5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1RlbXBsYXRlc30gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcyc7XG4gKlxuICogY29uc3Qgc3VtbWFyeSA9IGF3YWl0IFRlbXBsYXRlcy5nZXRTdW1tYXJ5KChWZXJkb2NzRW5kcG9pbnQuZ2V0RGVmYXVsdCgpLCAwKTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGdldFN1bW1hcnkgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHBhcmFtcykge1xuICAgIGlmIChwYXJhbXMgPT09IHZvaWQgMCkgeyBwYXJhbXMgPSB7fTsgfVxuICAgIHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgICAgICAgICAgICAgIC5wb3N0KCcvdGVtcGxhdGVzL3N1bW1hcnknLCBwYXJhbXMpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pXTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuIiwiLyoqXG4gKiBQYXNzZWQgdG8gcGFyZW50IGNvbXBvbmVudHMgaW4gY2VydGFpbiBjYWxsYmFja3Mgd2l0aCB0aGUgbG93ZXItbGV2ZWwgSlMtU0RLIGVtaXRzIGFuIGVycm9yXG4gKi9cbmV4cG9ydCBjbGFzcyBTREtFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29kZTtcbiAgc3RhdHVzQ29kZTtcbiAgcmVzcG9uc2U7XG5cbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGF0dXNDb2RlOiBudW1iZXIsIHJlc3BvbnNlOiBhbnkpIHtcbiAgICBzdXBlcihtZXNzYWdlIHx8ICdTREsgRXJyb3InKTtcbiAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuICB9XG59XG4iLCJAaW1wb3J0ICcuLi8uLi8uLi90aGVtZS5zY3NzJztcblxudmVyZG9jcy1wcmV2aWV3IHtcbiAgLy9kaXNwbGF5OiBmbGV4O1xuICAvL292ZXJmbG93OiBoaWRkZW47XG4gIC8vcG9zaXRpb246IHJlbGF0aXZlO1xuICAvL21pbi1oZWlnaHQ6IDYwMHB4O1xuICAvL2ZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIC8vYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgLy9mb250LWZhbWlseTogJHZlcmRvY3MtcHJpbWFyeS1mb250O1xuICAvL1xuICAvL2RpdiB7XG4gIC8vICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAvL31cbiAgLy9cbiAgLy8udG9vbGJhciB7XG4gIC8vICB3aWR0aDogMTAwJTtcbiAgLy8gIG1hcmdpbjogMCBhdXRvO1xuICAvLyAgcGFkZGluZzogMCAxNHB4O1xuICAvLyAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAvL31cbiAgLy9cbiAgLy8udG9vbHMge1xuICAvLyAgd2lkdGg6IDEwMCU7XG4gIC8vICBjb2xvcjogI2ZmZjtcbiAgLy8gIGhlaWdodDogNTZweDtcbiAgLy8gIGRpc3BsYXk6IGZsZXg7XG4gIC8vICBmb250LXNpemU6IDEycHg7XG4gIC8vICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAvLyAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgLy8gIGJhY2tncm91bmQtY29sb3I6ICRtZWRpdW0tYmc7XG4gIC8vfVxuICAvL1xuICAvLy5jb3ZlciB7XG4gIC8vICB0b3A6IDA7XG4gIC8vICBsZWZ0OiAwO1xuICAvLyAgcmlnaHQ6IDA7XG4gIC8vICBib3R0b206IDA7XG4gIC8vICB6LWluZGV4OiA5OTk7XG4gIC8vICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIC8vICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gIC8vfVxuICAvL1xuICAvLy5kb2N1bWVudCB7XG4gIC8vICBmbGV4OiAxO1xuICAvLyAgaGVpZ2h0OiAxMDAlO1xuICAvLyAgZGlzcGxheTogZmxleDtcbiAgLy8gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgLy8gIG92ZXJmbG93LXk6IHNjcm9sbDtcbiAgLy8gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIC8vICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAvLyAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIC8vXG4gIC8vICAuaW5uZXIge1xuICAvLyAgICB3aWR0aDogMTAwJTtcbiAgLy8gICAgbWF4LXdpZHRoOiAxMDI4cHg7XG4gIC8vICB9XG4gIC8vfVxuICAvL1xuICAvLy5hZ3JlZSB7XG4gIC8vICBmbGV4OiAxO1xuICAvLyAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgLy8gIGRpc3BsYXk6IGZsZXg7XG4gIC8vICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAvLyAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAvL1xuICAvLyAgLmludHJvIHtcbiAgLy8gICAgZGlzcGxheTogbm9uZTtcbiAgLy8gIH1cbiAgLy9cbiAgLy8gIC5oZWFkZXIge1xuICAvLyAgICBmbGV4OiAwIDAgNTZweDtcbiAgLy8gIH1cbiAgLy9cbiAgLy8gIC5hZ3JlZS1jaGVja2JveCB7XG4gIC8vICAgIGJhY2tncm91bmQ6ICNjY2M7XG4gIC8vICAgIGZsZXg6IDAgMCAyMHB4O1xuICAvLyAgICBkaXNwbGF5OiBmbGV4O1xuICAvLyAgICB3aWR0aDogMjBweDtcbiAgLy8gICAgaGVpZ2h0OiAyMHB4O1xuICAvLyAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gIC8vICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgLy8gICAgbWFyZ2luOiAwIDEwcHggMCAxNHB4O1xuICAvL1xuICAvLyAgICBpbnB1dFt0eXBlPSdjaGVja2JveCddOmNoZWNrZWQgKyBsYWJlbDphZnRlciB7XG4gIC8vICAgICAgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTEwMCk7XG4gIC8vICAgICAgb3BhY2l0eTogMTtcbiAgLy8gICAgfVxuICAvL1xuICAvLyAgICBsYWJlbCB7XG4gIC8vICAgICAgbGVmdDogMnB4O1xuICAvLyAgICAgIHRvcDogMnB4O1xuICAvLyAgICAgIHdpZHRoOiAxNnB4O1xuICAvLyAgICAgIGhlaWdodDogMTZweDtcbiAgLy8gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gIC8vICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAvLyAgICAgIGJhY2tncm91bmQ6ICMzMzM1NGM7XG4gIC8vICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAtMXB4IDFweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCk7XG4gIC8vXG4gIC8vICAgICAgLmFncmVlLWNoZWNrYm94IGxhYmVsOmhvdmVyOjphZnRlciB7XG4gIC8vICAgICAgICBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9MzApO1xuICAvLyAgICAgICAgb3BhY2l0eTogMC4zO1xuICAvLyAgICAgIH1cbiAgLy9cbiAgLy8gICAgICAmOmFmdGVyIHtcbiAgLy8gICAgICAgIHRvcDogMnB4O1xuICAvLyAgICAgICAgbGVmdDogM3B4O1xuICAvLyAgICAgICAgd2lkdGg6IDhweDtcbiAgLy8gICAgICAgIG9wYWNpdHk6IDA7XG4gIC8vICAgICAgICBoZWlnaHQ6IDVweDtcbiAgLy8gICAgICAgIGNvbnRlbnQ6ICcnO1xuICAvLyAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAvLyAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIC8vICAgICAgICBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9MCk7XG4gIC8vICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtNDVkZWcpO1xuICAvLyAgICAgICAgYm9yZGVyOiAycHggc29saWQgI2ZjZmZmNDtcbiAgLy8gICAgICAgIGJvcmRlci10b3A6IG5vbmU7XG4gIC8vICAgICAgICBib3JkZXItcmlnaHQ6IG5vbmU7XG4gIC8vICAgICAgfVxuICAvLyAgICB9XG4gIC8vICB9XG4gIC8vfVxufVxuIiwiaW1wb3J0IHtWZXJkb2NzRW5kcG9pbnR9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkayc7XG5pbXBvcnQge0NvbXBvbmVudCwgUHJvcCwgaH0gZnJvbSAnQHN0ZW5jaWwvY29yZSc7XG5pbXBvcnQge0V2ZW50LCBFdmVudEVtaXR0ZXIsIEhvc3R9IGZyb20gJ0BzdGVuY2lsL2NvcmUnO1xuaW1wb3J0IHtJVGVtcGxhdGVGaWVsZH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1RlbXBsYXRlcy9UeXBlcyc7XG5pbXBvcnQge2dldFJvbGVJbmRleCwgcmVuZGVyRG9jdW1lbnRGaWVsZH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHtJUGFnZVJlbmRlckV2ZW50fSBmcm9tICcuLi92ZXJkb2NzLXZpZXcvdmVyZG9jcy12aWV3JztcbmltcG9ydCBUZW1wbGF0ZVN0b3JlIGZyb20gJy4uLy4uLy4uL3V0aWxzL3RlbXBsYXRlU3RvcmUnO1xuaW1wb3J0IHtsb2FkVGVtcGxhdGV9IGZyb20gJy4uLy4uLy4uL3V0aWxzL1RlbXBsYXRlcyc7XG5pbXBvcnQge1NES0Vycm9yfSBmcm9tICcuLi8uLi8uLi91dGlscy9lcnJvcnMnO1xuXG4vKipcbiAqIERpc3BsYXkgYSB0ZW1wbGF0ZSBwcmV2aWV3IGV4cGVyaWVuY2UuXG4gKi9cbkBDb21wb25lbnQoe1xuICB0YWc6ICd2ZXJkb2NzLXByZXZpZXcnLFxuICBzdHlsZVVybDogJ3ZlcmRvY3MtcHJldmlldy5zY3NzJyxcbiAgc2hhZG93OiBmYWxzZSxcbn0pXG5leHBvcnQgY2xhc3MgVmVyZG9jc1ByZXZpZXcge1xuICAvKipcbiAgICogVGhlIGVuZHBvaW50IHRvIHVzZSB0byBjb21tdW5pY2F0ZSB3aXRoIFZlcmRvY3MuIElmIG5vdCBzZXQsIHRoZSBkZWZhdWx0IGVuZHBvaW50IHdpbGwgYmUgdXNlZC5cbiAgICovXG4gIEBQcm9wKCkgZW5kcG9pbnQ6IFZlcmRvY3NFbmRwb2ludCA9IFZlcmRvY3NFbmRwb2ludC5nZXREZWZhdWx0KCk7XG5cbiAgLyoqXG4gICAqIFRoZSBJRCBvZiB0aGUgdGVtcGxhdGUgdG8gY3JlYXRlIHRoZSBkb2N1bWVudCBmcm9tLlxuICAgKi9cbiAgQFByb3AoKSB0ZW1wbGF0ZUlkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgaWYgYW4gZXJyb3Igb2NjdXJzLiBUaGUgZXZlbnQgZGV0YWlscyB3aWxsIGNvbnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIGVycm9yLiBNb3N0IGVycm9ycyB3aWxsXG4gICAqIHRlcm1pbmF0ZSB0aGUgcHJvY2VzcywgYW5kIHRoZSBjYWxsaW5nIGFwcGxpY2F0aW9uIHNob3VsZCBjb3JyZWN0IHRoZSBjb25kaXRpb24gYW5kIHJlLXJlbmRlciB0aGUgY29tcG9uZW50LlxuICAgKi9cbiAgQEV2ZW50KHtjb21wb3NlZDogdHJ1ZX0pIHNka0Vycm9yOiBFdmVudEVtaXR0ZXI8U0RLRXJyb3I+O1xuXG4gIC8vIFRPRE86IE1vdmUgdG8gc3RhdGUgc3RvcmUgc28gd2UgY2FuIGxvYWQgdGhpcyBvbmUgdGltZVxuICBhc3luYyBjb21wb25lbnREaWRMb2FkKCkge1xuICAgIHRoaXMuZW5kcG9pbnQubG9hZFNlc3Npb24oKTtcblxuICAgIGlmICghdGhpcy50ZW1wbGF0ZUlkKSB7XG4gICAgICBjb25zb2xlLmxvZyhgW1BSRVZJRVddIE1pc3NpbmcgcmVxdWlyZWQgdGVtcGxhdGUgSUQgJHt0aGlzLnRlbXBsYXRlSWR9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGBbUFJFVklFV10gTG9hZGluZyB0ZW1wbGF0ZSAke3RoaXMudGVtcGxhdGVJZH1gKTtcbiAgICAgIGF3YWl0IGxvYWRUZW1wbGF0ZSh0aGlzLmVuZHBvaW50LCB0aGlzLnRlbXBsYXRlSWQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbUFJFVklFV10gRXJyb3IgbG9hZGluZyB0ZW1wbGF0ZScsIGUpO1xuICAgICAgdGhpcy5zZGtFcnJvcj8uZW1pdChuZXcgU0RLRXJyb3IoZS5tZXNzYWdlLCBlLnJlc3BvbnNlPy5zdGF0dXMsIGUucmVzcG9uc2U/LmRhdGEpKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBoYW5kbGVGaWVsZENoYW5nZShmaWVsZDogSVRlbXBsYXRlRmllbGQsIGU6IGFueSwgb3B0aW9uSWQ/OiBzdHJpbmcpIHtcbiAgICBjb25zb2xlLmxvZygnW1BSRVZJRVddIGhhbmRsZUZpZWxkQ2hhbmdlJywgZmllbGQsIGUsIG9wdGlvbklkKTtcbiAgfVxuXG4gIGhhbmRsZVBhZ2VSZW5kZXJlZChlKSB7XG4gICAgY29uc3QgcGFnZUluZm8gPSBlLmRldGFpbCBhcyBJUGFnZVJlbmRlckV2ZW50O1xuICAgIGNvbnNvbGUubG9nKCdbUFJFVklFV10gUGFnZSByZW5kZXJlZCcsIHBhZ2VJbmZvKTtcblxuICAgIGNvbnN0IGZpZWxkcyA9IFRlbXBsYXRlU3RvcmUuZmllbGRzLmZpbHRlcihmaWVsZCA9PiBmaWVsZC5wYWdlX3NlcXVlbmNlID09PSBwYWdlSW5mby5yZW5kZXJlZFBhZ2UucGFnZU51bWJlcik7XG4gICAgY29uc29sZS5sb2coJ1tQUkVWSUVXXSBGaWVsZHMgb24gcGFnZScsIGZpZWxkcyk7XG4gICAgZmllbGRzLmZvckVhY2goZmllbGQgPT4gcmVuZGVyRG9jdW1lbnRGaWVsZChmaWVsZCwgcGFnZUluZm8ucmVuZGVyZWRQYWdlLCBnZXRSb2xlSW5kZXgoVGVtcGxhdGVTdG9yZS5yb2xlTmFtZXMsIGZpZWxkLnJvbGVfbmFtZSksIHRoaXMuaGFuZGxlRmllbGRDaGFuZ2UsIHRydWUpKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBpZiAoVGVtcGxhdGVTdG9yZS5sb2FkaW5nKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8SG9zdD5cbiAgICAgICAgICA8dmVyZG9jcy1sb2FkZXIgLz5cbiAgICAgICAgPC9Ib3N0PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBSZW5kZXIgYSBiZXR0ZXIgZXJyb3JcbiAgICByZXR1cm4gKFxuICAgICAgPEhvc3Q+XG4gICAgICAgIHtUZW1wbGF0ZVN0b3JlLnRlbXBsYXRlID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbm5lclwiPlxuICAgICAgICAgICAgPHZlcmRvY3Mtdmlld1xuICAgICAgICAgICAgICB0ZW1wbGF0ZUlkPXt0aGlzLnRlbXBsYXRlSWR9XG4gICAgICAgICAgICAgIGVuZHBvaW50PXt0aGlzLmVuZHBvaW50fVxuICAgICAgICAgICAgICBvblBhZ2VSZW5kZXJlZD17ZSA9PiB0aGlzLmhhbmRsZVBhZ2VSZW5kZXJlZChlKX1cbiAgICAgICAgICAgICAgcGFnZUxheWVycz17W1xuICAgICAgICAgICAgICAgIHtuYW1lOiAncGFnZScsIHR5cGU6ICdjYW52YXMnfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ2NvbnRyb2xzJywgdHlwZTogJ2Rpdid9LFxuICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8ZGl2PkVycm9yIGxvYWRpbmcgVGVtcGxhdGUuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L0hvc3Q+XG4gICAgKTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==
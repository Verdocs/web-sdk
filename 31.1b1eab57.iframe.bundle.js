(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"./dist/esm/verdocs-initial-dialog.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"verdocs_initial_dialog",(function(){return VerdocsInitialDialog}));__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var _index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./dist/esm/index-5d92e60f.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var VerdocsInitialDialog=function(){function VerdocsInitialDialog(hostRef){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,VerdocsInitialDialog),Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.h)(this,hostRef),this.adopt=Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.d)(this,"adopt",7),this.cancel=Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.d)(this,"cancel",7),this.fullname="",this.open=!1,this.fontLoaded=!1,this.enteredInitials="",this.mode="type"}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(VerdocsInitialDialog,[{key:"componentWillLoad",value:function componentWillLoad(){var _this=this;this.enteredInitials=this.fullname.split(" ").map((function(s){return s.substring(0,1)})).join("").toUpperCase(),new FontFace("Dancing Script","url(https://fonts.gstatic.com/s/dancingscript/v19/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup6hNX6plRP.woff)").load().then((function(font){document.fonts.add(font),_this.fontLoaded=!0}))}},{key:"componentDidLoad",value:function componentDidLoad(){this.redrawSignature()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.redrawSignature()}},{key:"redrawSignature",value:function redrawSignature(){if(this.canvasElement){var canvasWidth=this.canvasElement.width,context=this.canvasElement.getContext("2d");context.clearRect(0,0,this.canvasElement.width,this.canvasElement.height);var fontSize=100;do{fontSize-=2,context.font=fontSize+"px Dancing Script"}while(context.measureText(this.enteredInitials).width>canvasWidth-32);context.textAlign="center",context.textBaseline="middle",context.font=fontSize+"px Dancing Script",context.fillText(this.enteredInitials,this.canvasElement.width/2,this.canvasElement.height/2)}}},{key:"handleDismiss",value:function handleDismiss(e){"background-overlay"===e.target.className&&(e.preventDefault(),this.handleCancel())}},{key:"handleNameChange",value:function handleNameChange(e){this.enteredInitials=e.detail}},{key:"handleAdopt",value:function handleAdopt(){var data=this.canvasElement.toDataURL("image/png");this.adopt.emit(data),this.open=!1}},{key:"handleCancel",value:function handleCancel(){this.cancel.emit(),this.open=!1}},{key:"render",value:function render(){var _this2=this;return Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.b,{class:{open:this.open}},Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("div",{class:"background-overlay",onClick:function onClick(e){return _this2.handleDismiss(e)}},Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("div",{class:"dialog"},Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("div",{class:"heading"},"Create Your Initial"),Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("div",{class:"content"},Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("verdocs-text-input",{placeholder:"Initials...",label:"Initials",value:this.enteredInitials,onFieldInput:function onFieldInput(e){return _this2.handleNameChange(e)}}),Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("div",{class:"as-shown"},"As shown on driver's license or govt. ID card."),Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("div",{class:"tabs"},Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("div",{class:{tab:!0,active:"type"===this.mode},onClick:function onClick(){return _this2.mode="type"}},"Type"),Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("div",{class:{tab:!0,active:"draw"===this.mode},onClick:function onClick(){return _this2.mode="draw"}},"Draw")),this.fontLoaded?Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("canvas",{ref:function ref(el){return _this2.canvasElement=el}}):Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("div",{style:{display:"none"}}),Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("div",{class:"disclaimer"},"By clicking Adopt, I agree that the signature will be the electronic representation of my signature for all purposes when I (or my agent) use them on documents, including legally binding contracts â€” just the same as a pen-and-paper signature or initial."),Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("div",{class:"buttons"},Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("verdocs-button",{label:"CANCEL",variant:"outline",onPress:function onPress(){return _this2.handleCancel()}}),Object(_index_5d92e60f_js__WEBPACK_IMPORTED_MODULE_5__.f)("verdocs-button",{label:"Adopt & Sign",onPress:function onPress(){return _this2.handleAdopt()}}))))))}}]),VerdocsInitialDialog}();VerdocsInitialDialog.style='verdocs-initial-dialog{font-family:"Barlow", sans-serif;-webkit-box-sizing:border-box;box-sizing:border-box;display:none}verdocs-initial-dialog.open{display:block}verdocs-initial-dialog .background-overlay{position:absolute;z-index:10000;top:0;left:0;right:0;bottom:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;background:#0000007f}verdocs-initial-dialog .dialog{width:100%;max-width:340px;border-radius:4px;overflow:hidden;-webkit-box-shadow:3px 3px 5px 1px rgba(40, 40, 40, 0.4);box-shadow:3px 3px 5px 1px rgba(40, 40, 40, 0.4);background:#f9f9f9}verdocs-initial-dialog .heading{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:20px 20px 0 20px;line-height:28px;font-size:20px;font-weight:500}verdocs-initial-dialog .content{font-size:14px;padding:20px}verdocs-initial-dialog .buttons{display:-ms-flexbox;display:flex;margin:20px 0 0 0;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:end;justify-content:flex-end;-ms-flex-align:center;align-items:center}verdocs-initial-dialog .buttons verdocs-button{margin-left:16px}verdocs-initial-dialog canvas{background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 auto;width:300px;height:79px;max-width:100%;-webkit-box-shadow:0 0 6px 0 #0000001f;box-shadow:0 0 6px 0 #0000001f}verdocs-initial-dialog .disclaimer{text-align:justify;padding:8px 0;font-size:11px;line-height:14px;color:rgba(0, 0, 0, 0.54)}verdocs-initial-dialog .as-shown{font-size:11px;margin:4px 0 20px 4px;color:rgba(0, 0, 0, 0.54)}verdocs-initial-dialog .tabs{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}verdocs-initial-dialog .tabs .tab{padding:8px 15px;cursor:pointer}verdocs-initial-dialog .tabs .tab.active{border-bottom:2px solid #cccccc}verdocs-initial-dialog .tabs .tab:hover{color:#55bc81}'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2NvbXBvbmVudHMvZGlhbG9ncy92ZXJkb2NzLWluaXRpYWwtZGlhbG9nL3ZlcmRvY3MtaW5pdGlhbC1kaWFsb2cuc2NzcyIsIndlYnBhY2s6Ly8vc3JjL2NvbXBvbmVudHMvZGlhbG9ncy92ZXJkb2NzLWluaXRpYWwtZGlhbG9nL3ZlcmRvY3MtaW5pdGlhbC1kaWFsb2cudHN4Il0sIm5hbWVzIjpbIlZlcmRvY3NJbml0aWFsRGlhbG9nIiwiZnVsbG5hbWUiLCJvcGVuIiwiZm9udExvYWRlZCIsImVudGVyZWRJbml0aWFscyIsIm1vZGUiLCJjb21wb25lbnRXaWxsTG9hZCIsInRoaXMiLCJzcGxpdCIsIm1hcCIsInMiLCJzdWJzdHJpbmciLCJqb2luIiwidG9VcHBlckNhc2UiLCJGb250RmFjZSIsImxvYWQiLCJ0aGVuIiwiZm9udCIsImRvY3VtZW50IiwiZm9udHMiLCJhZGQiLCJjb21wb25lbnREaWRMb2FkIiwicmVkcmF3U2lnbmF0dXJlIiwiY29tcG9uZW50RGlkVXBkYXRlIiwiY2FudmFzRWxlbWVudCIsImNhbnZhc1dpZHRoIiwid2lkdGgiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImNsZWFyUmVjdCIsImhlaWdodCIsImZvbnRTaXplIiwibWVhc3VyZVRleHQiLCJ0ZXh0QWxpZ24iLCJ0ZXh0QmFzZWxpbmUiLCJmaWxsVGV4dCIsImhhbmRsZURpc21pc3MiLCJlIiwidGFyZ2V0IiwiY2xhc3NOYW1lIiwicHJldmVudERlZmF1bHQiLCJoYW5kbGVDYW5jZWwiLCJoYW5kbGVOYW1lQ2hhbmdlIiwiZGV0YWlsIiwiaGFuZGxlQWRvcHQiLCJkYXRhIiwidG9EYXRhVVJMIiwiYWRvcHQiLCJlbWl0IiwiY2FuY2VsIiwicmVuZGVyIiwiaCIsIkhvc3QiLCJjbGFzcyIsIm9uQ2xpY2siLCJwbGFjZWhvbGRlciIsImxhYmVsIiwidmFsdWUiLCJvbkZpZWxkSW5wdXQiLCJ0YWIiLCJhY3RpdmUiLCJyZWYiLCJlbCIsInN0eWxlIiwi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M0ZFLEtBQUtKLFdBQWFnRCxvRUFBUVUsSUFBSyxhQUFBQyxJQUFFLE9BQUssT0FBS3RDLGNBQWdCc0MsRUFBMUIsSUFBeURYLGlFQUFLWSxNQUFPLENBQUNDLFFBQVMsVUFFakhiLGlFQUFLRSxNQUFNLGNBQVksaVFBS3ZCRixpRUFBS0UsTUFBTSxXQUNURiw0RUFBZ0JLLE1BQU0sU0FBU1MsUUFBUSxVQUFVQyxRQUFTLDBCQUFNLE9BQUt6QixjQUFYLElBQzFEVSw0RUFBZ0JLLE1BQU0sZUFBZVUsUUFBUywwQkFBTSxPQUFLdEIsYUFBWCxRQU8zRCxLQWxTOEIsd0IsMkJEVkQsdTFEIiwiZmlsZSI6IjMxLjFiMWVhYjU3LmlmcmFtZS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICcuLi8uLi8uLi90aGVtZS5zY3NzJztcblxudmVyZG9jcy1pbml0aWFsLWRpYWxvZyB7XG4gIGZvbnQtZmFtaWx5OiAkcHJpbWFyeS1mb250O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBkaXNwbGF5OiBub25lO1xuXG4gICYub3BlbiB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gIH1cblxuICAuYmFja2dyb3VuZC1vdmVybGF5IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgei1pbmRleDogMTAwMDA7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBiYWNrZ3JvdW5kOiAjMDAwMDAwN2Y7XG4gIH1cblxuICAuZGlhbG9nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBtYXgtd2lkdGg6IDM0MHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGJveC1zaGFkb3c6IDNweCAzcHggNXB4IDFweCByZ2JhKDQwLCA0MCwgNDAsIDAuNCk7XG4gICAgYmFja2dyb3VuZDogJGRpYWxvZy1iZztcbiAgfVxuXG4gIC5oZWFkaW5nIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgcGFkZGluZzogMjBweCAyMHB4IDAgMjBweDtcbiAgICBsaW5lLWhlaWdodDogMjhweDtcbiAgICBmb250LXNpemU6IDIwcHg7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgfVxuXG4gIC5jb250ZW50IHtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgcGFkZGluZzogMjBweDtcbiAgfVxuXG4gIC5idXR0b25zIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIG1hcmdpbjogMjBweCAwIDAgMDtcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAgIHZlcmRvY3MtYnV0dG9uIHtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxNnB4O1xuICAgIH1cbiAgfVxuXG4gIGNhbnZhcyB7XG4gICAgYmFja2dyb3VuZDogI2ZmZjtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIG1hcmdpbjogMCBhdXRvO1xuICAgIHdpZHRoOiAzMDBweDtcbiAgICAvLyBUT0RPOiBUaGUgb3JpZ2luYWwgYXBwIGhhZCBhbiBhc3BlY3QgcmF0aW8gb2YgKDgwIC8gMzA1KSAqIChzaWduYXR1cmVCb2R5V2lkdGggLSAyMClcbiAgICBoZWlnaHQ6IDc5cHg7XG4gICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgIGJveC1zaGFkb3c6IDAgMCA2cHggMCAjMDAwMDAwMWY7XG4gIH1cblxuICAuZGlzY2xhaW1lciB7XG4gICAgdGV4dC1hbGlnbjoganVzdGlmeTtcbiAgICBwYWRkaW5nOiA4cHggMDtcbiAgICBmb250LXNpemU6IDExcHg7XG4gICAgbGluZS1oZWlnaHQ6IDE0cHg7XG4gICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC41NCk7XG4gIH1cblxuICAuYXMtc2hvd24ge1xuICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICBtYXJnaW46IDRweCAwIDIwcHggNHB4O1xuICAgIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNTQpO1xuICB9XG5cbiAgLnRhYnMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IHJvdztcblxuICAgIC50YWIge1xuICAgICAgcGFkZGluZzogOHB4IDE1cHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG5cbiAgICAgICYuYWN0aXZlIHtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICRsaWdodC1ib3JkZXItY29sb3I7XG4gICAgICB9XG5cbiAgICAgICY6aG92ZXIge1xuICAgICAgICBjb2xvcjogJHByaW1hcnktY29sb3I7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQge0NvbXBvbmVudCwgUHJvcCwgSG9zdCwgaCwgRXZlbnQsIEV2ZW50RW1pdHRlciwgU3RhdGV9IGZyb20gJ0BzdGVuY2lsL2NvcmUnO1xuXG4vKipcbiAqIERpc3BsYXkgYSBkaWFsb2cgdGhhdCBhbGxvd3MgdGhlIHVzZXIgdG8gc3BlY2lmeSBhbiBpbml0aWFscyBpbWFnZSwgZWl0aGVyIGJ5IHVzaW5nIGEgc2lnbmF0dXJlLWZvbnQtZ2VuZXJhdGVkIGltYWdlXG4gKiBiYXNlZCBvbiB0aGVpciBmdWxsIG5hbWUsIG9yIGJ5IGhhbmQtZHJhd2luZyB0aGVpciBpbml0aWFscyB3aXRoIGEgbW91c2Ugb3IgdGFibGV0LlxuICovXG5AQ29tcG9uZW50KHtcbiAgdGFnOiAndmVyZG9jcy1pbml0aWFsLWRpYWxvZycsXG4gIHN0eWxlVXJsOiAndmVyZG9jcy1pbml0aWFsLWRpYWxvZy5zY3NzJyxcbn0pXG5leHBvcnQgY2xhc3MgVmVyZG9jc0luaXRpYWxEaWFsb2cge1xuICBwcml2YXRlIGNhbnZhc0VsZW1lbnQ/OiBIVE1MQ2FudmFzRWxlbWVudDtcblxuICAvKipcbiAgICogSW5pdGlhbCBzaWduYXR1cmUgdGV4dFxuICAgKi9cbiAgQFByb3AoKSBmdWxsbmFtZTogc3RyaW5nID0gJyc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGRpYWxvZyBpcyBjdXJyZW50bHkgYmVpbmcgZGlzcGxheWVkLiBUaGlzIGFsbG93cyBpdCB0byBiZSBhZGRlZCB0byB0aGUgRE9NIGJlZm9yZSBiZWluZyBkaXNwbGF5ZWQuXG4gICAqL1xuICBAUHJvcCgpIG9wZW46IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgd2hlbiB0aGUgaW5pdGlhbHMgYXJlIGFkb3B0ZWQuXG4gICAqL1xuICBARXZlbnQoe2NvbXBvc2VkOiB0cnVlfSkgYWRvcHQ6IEV2ZW50RW1pdHRlcjxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBFdmVudCBmaXJlZCB3aGVuIHRoZSBzdGVwIGlzIGNhbmNlbGxlZC5cbiAgICovXG4gIEBFdmVudCh7Y29tcG9zZWQ6IHRydWV9KSBjYW5jZWw6IEV2ZW50RW1pdHRlcjtcblxuICBAU3RhdGUoKSBmb250TG9hZGVkID0gZmFsc2U7XG5cbiAgQFN0YXRlKCkgZW50ZXJlZEluaXRpYWxzOiBzdHJpbmcgPSAnJztcblxuICBAU3RhdGUoKSBtb2RlOiBzdHJpbmcgPSAndHlwZSc7XG5cbiAgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgdGhpcy5lbnRlcmVkSW5pdGlhbHMgPSB0aGlzLmZ1bGxuYW1lXG4gICAgICAuc3BsaXQoJyAnKVxuICAgICAgLm1hcChzID0+IHMuc3Vic3RyaW5nKDAsIDEpKVxuICAgICAgLmpvaW4oJycpXG4gICAgICAudG9VcHBlckNhc2UoKTtcblxuICAgIGNvbnN0IGRzID0gbmV3IEZvbnRGYWNlKCdEYW5jaW5nIFNjcmlwdCcsICd1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL2RhbmNpbmdzY3JpcHQvdjE5L0lmMmNYVHI2WVMtekY0Uy1rY1NXU1ZpX3N4anNvaEQ5RjUwUnV1N0JNU28zU3VwNmhOWDZwbFJQLndvZmYpJyk7XG4gICAgZHMubG9hZCgpLnRoZW4oZm9udCA9PiB7XG4gICAgICBkb2N1bWVudC5mb250cy5hZGQoZm9udCk7XG4gICAgICB0aGlzLmZvbnRMb2FkZWQgPSB0cnVlO1xuICAgIH0pO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICB0aGlzLnJlZHJhd1NpZ25hdHVyZSgpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIHRoaXMucmVkcmF3U2lnbmF0dXJlKCk7XG4gIH1cblxuICByZWRyYXdTaWduYXR1cmUoKSB7XG4gICAgaWYgKCF0aGlzLmNhbnZhc0VsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjYW52YXNXaWR0aCA9IHRoaXMuY2FudmFzRWxlbWVudC53aWR0aDtcblxuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmNhbnZhc0VsZW1lbnQuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhc0VsZW1lbnQud2lkdGgsIHRoaXMuY2FudmFzRWxlbWVudC5oZWlnaHQpO1xuXG4gICAgbGV0IGZvbnRTaXplID0gMTAwO1xuICAgIGRvIHtcbiAgICAgIGZvbnRTaXplIC09IDI7XG4gICAgICBjb250ZXh0LmZvbnQgPSBgJHtmb250U2l6ZX1weCBEYW5jaW5nIFNjcmlwdGA7XG4gICAgfSB3aGlsZSAoY29udGV4dC5tZWFzdXJlVGV4dCh0aGlzLmVudGVyZWRJbml0aWFscykud2lkdGggPiBjYW52YXNXaWR0aCAtIDMyKTsgLy8gMzJweCBwYWRkaW5nIGVhY2ggc2lkZVxuXG4gICAgY29udGV4dC50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICBjb250ZXh0LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuICAgIGNvbnRleHQuZm9udCA9IGAke2ZvbnRTaXplfXB4IERhbmNpbmcgU2NyaXB0YDtcbiAgICBjb250ZXh0LmZpbGxUZXh0KHRoaXMuZW50ZXJlZEluaXRpYWxzLCB0aGlzLmNhbnZhc0VsZW1lbnQud2lkdGggLyAyLCB0aGlzLmNhbnZhc0VsZW1lbnQuaGVpZ2h0IC8gMik7XG4gIH1cblxuICAvLyBXZSBuZWVkIGEgc2VwYXJhdGUgZXZlbnQgaGFuZGxlciBmb3IgY2xpY2tpbmcgdGhlIGJhY2tncm91bmQgYmVjYXVzZSBpdCBjYW4gcmVjZWl2ZSBldmVudHMgXCJ0aHJvdWdoXCIgb3RoZXIgY2hpbGQgY29tcG9uZW50c1xuICBoYW5kbGVEaXNtaXNzKGU6IGFueSkge1xuICAgIGlmIChlLnRhcmdldC5jbGFzc05hbWUgPT09ICdiYWNrZ3JvdW5kLW92ZXJsYXknKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLmhhbmRsZUNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZU5hbWVDaGFuZ2UoZSkge1xuICAgIHRoaXMuZW50ZXJlZEluaXRpYWxzID0gZS5kZXRhaWw7XG4gIH1cblxuICBoYW5kbGVBZG9wdCgpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5jYW52YXNFbGVtZW50LnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7XG4gICAgdGhpcy5hZG9wdC5lbWl0KGRhdGEpO1xuICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICB9XG5cbiAgaGFuZGxlQ2FuY2VsKCkge1xuICAgIHRoaXMuY2FuY2VsLmVtaXQoKTtcbiAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgfVxuXG4gIC8qXG4gIHNlbENvbG9yKGhleDogc3RyaW5nKSB7XG4gICAgdGhpcy5jb2xvciA9IGhleDtcbiAgICB0aGlzLmFuaW1hdGVEcmF3KCk7XG4gIH1cblxuICBzdG9wRHJhdygpIHtcbiAgICB0aGlzLnBhaW50ID0gZmFsc2U7XG4gICAgdGhpcy5hZG9wdGVkQW5kU2lnbmVkID0gIXRoaXMuaGFzU2lnbmF0dXJlKCk7XG4gIH1cblxuICBkcmF3KGUpIHtcbiAgICB0aGlzLnBhaW50ID0gdHJ1ZTtcbiAgICB0aGlzLmFkZFBvaW50cyhlLCBmYWxzZSk7XG4gICAgdGhpcy5hbmltYXRlRHJhdygpO1xuICB9XG5cbiAgcmVjb3JkUG9pbnRzKGUpIHtcbiAgICBpZiAodGhpcy5wYWludCkge1xuICAgICAgdGhpcy5hZGRQb2ludHMoZSwgdHJ1ZSk7XG4gICAgICB0aGlzLmFuaW1hdGVEcmF3KCk7XG4gICAgfVxuICB9XG5cbiAgYW5pbWF0ZURyYXcoKSB7XG4gICAgdGhpcy5jYW52YXMuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLmNhbnZhcy5vZmZzZXRXaWR0aCwgdGhpcy5jYW52YXMuY2FudmFzLm9mZnNldEhlaWdodCk7XG5cbiAgICB0aGlzLmNhbnZhcy5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3IgfHwgJyMwMDAwMDAnO1xuICAgIHRoaXMuY2FudmFzLmxpbmVKb2luID0gJ3JvdW5kJztcbiAgICB0aGlzLmNhbnZhcy5saW5lV2lkdGggPSAzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7XG4gICAgICBpZiAodGhpcy5wb2ludHNbaV0uZHJhZyAmJiBpKSB7XG4gICAgICAgIHRoaXMuY2FudmFzLm1vdmVUbyh0aGlzLnBvaW50c1tpIC0gMV0ueCwgdGhpcy5wb2ludHNbaSAtIDFdLnkpO1xuICAgICAgICAvLyB0aGlzLmNhbnZhcy5hcmModGhpcy5wb2ludHNbaSAtIDFdLngsIHRoaXMucG9pbnRzW2kgLSAxXS55LCAyLCAwLCAyICogTWF0aC5QSSwgZmFsc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jYW52YXMubW92ZVRvKHRoaXMucG9pbnRzW2ldLnggLSAxLCB0aGlzLnBvaW50c1tpXS55KTtcbiAgICAgICAgLy8gdGhpcy5jYW52YXMuYXJjKHRoaXMucG9pbnRzW2ldLngsIHRoaXMucG9pbnRzW2ldLnksIDIsIDAsIDIgKiBNYXRoLlBJLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2FudmFzLmxpbmVUbyh0aGlzLnBvaW50c1tpXS54LCB0aGlzLnBvaW50c1tpXS55KTtcbiAgICAgIHRoaXMuY2FudmFzLmNsb3NlUGF0aCgpO1xuICAgICAgdGhpcy5jYW52YXMuc3Ryb2tlKCk7XG4gICAgfVxuICB9XG5cbiAgZHJhd0N1cnZlKGNvbG9yOiBzdHJpbmcsIGN1cnZlOiBudW1iZXIpIHtcbiAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcbiAgfVxuXG5cblxuICBhZGRQb2ludHMoZSwgZHJhZzogYm9vbGVhbikge1xuICAgIGlmICh3aW5kb3cpIHtcbiAgICAgIGxldCB4O1xuICAgICAgbGV0IHk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHggPSBlLmNsaWVudFg7XG4gICAgICB9XG5cbiAgICAgIGlmIChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgeSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeSA9IGUuY2xpZW50WTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLnNpZ25hdHVyZUNhbnZhcy5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgdGhpcy5wb2ludHMucHVzaCh7XG4gICAgICAgIHg6IHggLSByZWN0LmxlZnQsXG4gICAgICAgIHk6IHkgLSByZWN0LnRvcCxcbiAgICAgICAgZHJhZzogZHJhZ1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY2xlYXJQYWQoKSB7XG4gICAgdGhpcy5jYW52YXMuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLmNhbnZhcy5vZmZzZXRXaWR0aCwgdGhpcy5jYW52YXMuY2FudmFzLm9mZnNldEhlaWdodCk7XG4gICAgdGhpcy5wb2ludHMgPSBbXTtcbiAgICB0aGlzLmFkb3B0ZWRBbmRTaWduZWQgPSAhdGhpcy5oYXNTaWduYXR1cmUoKTtcbiAgfVxuXG4gICAgYXN5bmMgYWRvcHRBbmRTaWduKCkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmFkb3B0ZWRBbmRTaWduZWQgPSB0cnVlO1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGVGdWxsTmFtZSgpO1xuICAgICAgYXdhaXQgdGhpcy5jYXB0dXJlU2lnbmF0dXJlRnJvbUNhbnZhcygpO1xuICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuc2lnbmF0dXJlTW9kZSA9PT0gJ1NpZ25hdHVyZScgPyAnU2F2aW5nIFNpZ25hdHVyZScgOiAnU2F2aW5nIEluaXRpYWwnO1xuICAgICAgdGhpcy5zbmFja2JhclNlcnZpY2Uub3BlbihtZXNzYWdlLCAnT0snLCB0aGlzLnNuYWNrYmFyU2VydmljZS5pbml0Q29uZmlnKG51bGwsICdib3R0b20nKSk7XG4gICAgICB0aGlzLmhhbmRsZU1vZGUoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuc25hY2tiYXJTZXJ2aWNlLm9wZW4oJ0ZhaWxlZCB0byBhcHBseSBzaWduYXR1cmUnLCAnT0snLCB0aGlzLnNuYWNrYmFyU2VydmljZS5pbml0Q29uZmlnKG51bGwsICdib3R0b20nKSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlTW9kZSgpIHtcbiAgICBsZXQgY3VycmVudEZpZWxkO1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlICdzaWduZXJ2aWV3JzpcbiAgICAgICAgaWYgKHRoaXMuc2lnbmF0dXJlTW9kZSA9PT0gJ1NpZ25hdHVyZScpIHtcbiAgICAgICAgICB0aGlzLnNpZ25hdHVyZVNlcnZpY2UucG9zdFNpZ25hdHVyZUJsb2IoKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5pZCAmJiByZXN1bHQudXJsKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnRGaWVsZCA9IHRoaXMuc2lnbmF0dXJlU2VydmljZS5jdXJyRmllbGQ7XG4gICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VydmljZS51cGRhdGVTaWduZWQoY3VycmVudEZpZWxkLmZOYW1lLCB0cnVlKTtcbiAgICAgICAgICAgICAgdGhpcy5zaWduYXR1cmVTZXJ2aWNlLnRvZ2dsZVNpZyhmYWxzZSk7XG4gICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VydmljZS5zZXRTaWduYXR1cmVJZChyZXN1bHQuaWQpO1xuICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZVNlcnZpY2UucHV0U2lnbmF0dXJlRmllbGQodGhpcy5lbnZlbG9wZUlkLCB0aGlzLmZpZWxkTmFtZSwgcmVzdWx0LmlkKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudFRyYWNrZXIuY3JlYXRlRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICd2ZXJkb2MnLFxuICAgICAgICAgICAgICAgICAgYWN0aW9uOiAndmVyZG9jIHNpZ25lZCcsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogYHZlcmRvYyBpZDogJHt0aGlzLmVudmVsb3BlSWR9YFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuc2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VydmljZS5zZXRTaWduYXR1cmVEYXRhKHJlcy5zZXR0aW5ncy5iYXNlNjQpO1xuICAgICAgICAgICAgICAgICAgdGhpcy5zaWduYXR1cmVTZXJ2aWNlLnNldFNpZ25hdHVyZUlkKHJlcy5zZXR0aW5ncy5zaWduYXR1cmVfaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNuYWNrYmFyU2VydmljZS5kaXNtaXNzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cuY2xvc2UoeyBzdGF0dXM6ICdzYXZlZCcsIHRlbXBfc2lnOiByZXMuc2V0dGluZ3MuYmFzZTY0LCBzaWdfaWQ6IHJlcy5zZXR0aW5ncy5zaWduYXR1cmVfaWQgfSk7XG4gICAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbmFja2JhclNlcnZpY2Uub3BlbignRmFpbGVkIHRvIHNhdmUgc2lnbmF0dXJlLiBQbGVhc2UgdHJ5IGFnYWluLicsICdESVNNSVNTJywge1xuICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkb3B0ZWRBbmRTaWduZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNpZ25hdHVyZVNlcnZpY2UucG9zdEluaXRpYWxCbG9iKCkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQuaWQgJiYgcmVzdWx0LnVybCkge1xuICAgICAgICAgICAgICBjdXJyZW50RmllbGQgPSB0aGlzLnNpZ25hdHVyZVNlcnZpY2UuY3VyckZpZWxkO1xuICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZVNlcnZpY2UudXBkYXRlSW5pdGlhbGVkKGN1cnJlbnRGaWVsZC5mTmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VydmljZS5zZXRJbml0aWFsSWQocmVzdWx0LmlkKTtcbiAgICAgICAgICAgICAgdGhpcy5zaWduYXR1cmVTZXJ2aWNlLnRvZ2dsZVNpZyhmYWxzZSk7XG4gICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VydmljZS5wdXRJbml0aWFsRmllbGQodGhpcy5lbnZlbG9wZUlkLCB0aGlzLmZpZWxkTmFtZSwgcmVzdWx0LmlkKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuc2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VydmljZS5zZXRJbml0aWFsRGF0YShyZXMuc2V0dGluZ3MuYmFzZTY0KTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VydmljZS5zZXRJbml0aWFsSWQocmVzLnNldHRpbmdzLmluaXRpYWxfaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNuYWNrYmFyU2VydmljZS5kaXNtaXNzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cuY2xvc2UoeyBzdGF0dXM6ICdzYXZlZCcsIHRlbXBfaW50OiByZXMuc2V0dGluZ3MuYmFzZTY0LCBpbnRfaWQ6IHJlcy5zZXR0aW5ncy5pbml0aWFsX2lkIH0pO1xuICAgICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc25hY2tiYXJTZXJ2aWNlLm9wZW4oJ0ZhaWxlZCB0byBzYXZlIGluaXRpYWwuIFBsZWFzZSB0cnkgYWdhaW4uJywgJ0RJU01JU1MnLCB7XG4gICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRvcHRlZEFuZFNpZ25lZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICAgKi9cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxIb3N0IGNsYXNzPXt7b3BlbjogdGhpcy5vcGVufX0+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJiYWNrZ3JvdW5kLW92ZXJsYXlcIiBvbkNsaWNrPXtlID0+IHRoaXMuaGFuZGxlRGlzbWlzcyhlKX0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRpYWxvZ1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRpbmdcIj5DcmVhdGUgWW91ciBJbml0aWFsPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgICAgIDx2ZXJkb2NzLXRleHQtaW5wdXQgcGxhY2Vob2xkZXI9XCJJbml0aWFscy4uLlwiIGxhYmVsPVwiSW5pdGlhbHNcIiB2YWx1ZT17dGhpcy5lbnRlcmVkSW5pdGlhbHN9IG9uRmllbGRJbnB1dD17ZSA9PiB0aGlzLmhhbmRsZU5hbWVDaGFuZ2UoZSl9IC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhcy1zaG93blwiPkFzIHNob3duIG9uIGRyaXZlcidzIGxpY2Vuc2Ugb3IgZ292dC4gSUQgY2FyZC48L2Rpdj5cblxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFic1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9e3t0YWI6IHRydWUsIGFjdGl2ZTogdGhpcy5tb2RlID09PSAndHlwZSd9fSBvbkNsaWNrPXsoKSA9PiAodGhpcy5tb2RlID0gJ3R5cGUnKX0+XG4gICAgICAgICAgICAgICAgICBUeXBlXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz17e3RhYjogdHJ1ZSwgYWN0aXZlOiB0aGlzLm1vZGUgPT09ICdkcmF3J319IG9uQ2xpY2s9eygpID0+ICh0aGlzLm1vZGUgPSAnZHJhdycpfT5cbiAgICAgICAgICAgICAgICAgIERyYXdcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAge3RoaXMuZm9udExvYWRlZCA/IDxjYW52YXMgcmVmPXtlbCA9PiAodGhpcy5jYW52YXNFbGVtZW50ID0gZWwgYXMgSFRNTENhbnZhc0VsZW1lbnQpfSAvPiA6IDxkaXYgc3R5bGU9e3tkaXNwbGF5OiAnbm9uZSd9fSAvPn1cblxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGlzY2xhaW1lclwiPlxuICAgICAgICAgICAgICAgIEJ5IGNsaWNraW5nIEFkb3B0LCBJIGFncmVlIHRoYXQgdGhlIHNpZ25hdHVyZSB3aWxsIGJlIHRoZSBlbGVjdHJvbmljIHJlcHJlc2VudGF0aW9uIG9mIG15IHNpZ25hdHVyZSBmb3IgYWxsIHB1cnBvc2VzIHdoZW4gSSAob3IgbXkgYWdlbnQpIHVzZSB0aGVtIG9uIGRvY3VtZW50cyxcbiAgICAgICAgICAgICAgICBpbmNsdWRpbmcgbGVnYWxseSBiaW5kaW5nIGNvbnRyYWN0cyAmbWRhc2g7IGp1c3QgdGhlIHNhbWUgYXMgYSBwZW4tYW5kLXBhcGVyIHNpZ25hdHVyZSBvciBpbml0aWFsLlxuICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYnV0dG9uc1wiPlxuICAgICAgICAgICAgICAgIDx2ZXJkb2NzLWJ1dHRvbiBsYWJlbD1cIkNBTkNFTFwiIHZhcmlhbnQ9XCJvdXRsaW5lXCIgb25QcmVzcz17KCkgPT4gdGhpcy5oYW5kbGVDYW5jZWwoKX0gLz5cbiAgICAgICAgICAgICAgICA8dmVyZG9jcy1idXR0b24gbGFiZWw9XCJBZG9wdCAmIFNpZ25cIiBvblByZXNzPXsoKSA9PiB0aGlzLmhhbmRsZUFkb3B0KCl9IC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Ib3N0PlxuICAgICk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=
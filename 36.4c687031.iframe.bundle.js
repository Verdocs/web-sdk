(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"./dist/esm/Token-54690789.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return decodeAccessTokenBody}));__webpack_require__("./node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.string.starts-with.js");var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,decodeJWTBody=function decodeJWTBody(token){return JSON.parse(function AtoB(str){if(str=String(str).replace(/[\t\n\f\r ]+/g,""),!b64re.test(str))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var bitmap;str+="==".slice(2-(3&str.length));for(var r1,r2,result="",i=0;i<str.length;)bitmap=b64.indexOf(str.charAt(i++))<<18|b64.indexOf(str.charAt(i++))<<12|(r1=b64.indexOf(str.charAt(i++)))<<6|(r2=b64.indexOf(str.charAt(i++))),result+=64===r1?String.fromCharCode(bitmap>>16&255):64===r2?String.fromCharCode(bitmap>>16&255,bitmap>>8&255):String.fromCharCode(bitmap>>16&255,bitmap>>8&255,255&bitmap);return result}((token||"").split(".")[1]||""))},decodeAccessTokenBody=function decodeAccessTokenBody(token){var decoded;try{if(null===(decoded=decodeJWTBody(token)))return null}catch(e){return null}return Object.keys(decoded).forEach((function(key){"string"==typeof key&&key.startsWith("https://verdocs.com/")&&(decoded[key.replace("https://verdocs.com/","")]=decoded[key],delete decoded[key])})),decoded}},"./dist/esm/errors-9b5498c8.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SDKError}));__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var SDKError=function(_Error){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(SDKError,_Error);var _super=function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}(SDKError);function SDKError(message,statusCode,response){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SDKError),(_this=_super.call(this,message||"SDK Error")).response=response,_this.statusCode=statusCode,Object.setPrototypeOf(_assertThisInitialized(_this),(this instanceof SDKError?this.constructor:void 0).prototype),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(SDKError)}(_wrapNativeSuper(Error))},"./dist/esm/verdocs-auth.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"verdocs_auth",(function(){return VerdocsAuth}));__webpack_require__("./node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var _index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./dist/esm/index-f78d163d.js"),_VerdocsEndpoint_cf4392fb_js__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__("./dist/esm/Types-ab9f6af8.js"),__webpack_require__("./dist/esm/VerdocsEndpoint-cf4392fb.js")),_errors_9b5498c8_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./dist/esm/errors-9b5498c8.js");__webpack_require__("./dist/esm/Token-54690789.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var VerdocsAuth=function(){function VerdocsAuth(hostRef){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,VerdocsAuth),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.j)(this,hostRef),this.authenticated=Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.e)(this,"authenticated",7),this.sdkError=Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.e)(this,"sdkError",7),this.endpoint=_VerdocsEndpoint_cf4392fb_js__WEBPACK_IMPORTED_MODULE_9__.a.getDefault(),this.visible=!0,this.logo="https://verdocs.com/assets/blue-logo.svg",this.isAuthenticated=!1,this.displayMode="login",this.username="",this.password="",this.loggingIn=!1,this.activeSession=null,this.loginError=null}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(VerdocsAuth,[{key:"componentWillLoad",value:function componentWillLoad(){var _a,_b;this.endpoint.loadSession(),this.endpoint.session?(console.log("[AUTH] Authenticated"),this.isAuthenticated=!0,this.activeSession=this.endpoint.session,null===(_a=this.authenticated)||void 0===_a||_a.emit({authenticated:!0,session:this.endpoint.session})):(console.log("[AUTH] Anonymous"),null===(_b=this.authenticated)||void 0===_b||_b.emit({authenticated:!1,session:null}))}},{key:"handleLogin",value:function handleLogin(){var _this=this;this.loggingIn=!0,function authenticateUser(endpoint,params){return endpoint.api.post("/authentication/login",params).then((function(r){return r.data}))}(this.endpoint,{username:this.username,password:this.password}).then((function(r){var _a;_this.loggingIn=!1,_this.endpoint.setToken(r.accessToken),_this.activeSession=_this.endpoint.session,_this.isAuthenticated=!0,null===(_a=_this.authenticated)||void 0===_a||_a.emit({authenticated:!0,session:_this.endpoint.session})})).catch((function(e){var _a,_b,_c,_d,_e;console.log("[AUTH] Authentication error",e.response,JSON.stringify(e)),_this.loggingIn=!1,_this.activeSession=null,null===(_a=_this.authenticated)||void 0===_a||_a.emit({authenticated:!1,session:null}),null===(_b=_this.sdkError)||void 0===_b||_b.emit(new _errors_9b5498c8_js__WEBPACK_IMPORTED_MODULE_10__.a(e.message,null===(_c=e.response)||void 0===_c?void 0:_c.status,null===(_d=e.response)||void 0===_d?void 0:_d.data)),403===(null===(_e=null==e?void 0:e.response)||void 0===_e?void 0:_e.status)&&(_this.loginError="Please check your username and password and try again.")}))}},{key:"handleLogout",value:function handleLogout(){var _a;this.endpoint.clearSession(),this.isAuthenticated=!1,null===(_a=this.authenticated)||void 0===_a||_a.emit({authenticated:!1,session:null})}},{key:"handleClearError",value:function handleClearError(){this.loginError=null}},{key:"render",value:function render(){var _this2=this;return this.visible?this.isAuthenticated?Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{class:"status-result"},"Authenticated"):"signup"===this.displayMode?Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{class:"signup-form"},Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("img",{src:this.logo,alt:"Verdocs Logo",class:"logo"}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("h3",null,"Sign up for an account"),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("h4",null,"Already have an account?",Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-button",{label:"Log In",variant:"text",onClick:function onClick(){return _this2.displayMode="login"},disabled:this.loggingIn})),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("form",{onSubmit:function onSubmit(){return _this2.handleLogin()}},Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-text-input",{label:"Email",autocomplete:"username",value:this.username,onInput:function onInput(e){return _this2.username=e.target.value},disabled:this.loggingIn}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-text-input",{label:"Password",type:"password",autocomplete:"current-password",value:this.password,onInput:function onInput(e){return _this2.password=e.target.value},disabled:this.loggingIn}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-button",{label:"Signup",disabled:this.loggingIn,onClick:function onClick(){return _this2.handleLogin()},style:{display:"flex",justifyContent:"center",margin:"30px auto 0"}}))):Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{class:"login-form"},Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("img",{src:this.logo,alt:"Verdocs Logo",class:"logo"}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("h3",null,"Log in to your account"),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("h4",null,"Don't have an account?",Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-button",{label:"Sign Up",variant:"text",onClick:function onClick(){return _this2.displayMode="signup"},disabled:this.loggingIn})),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("form",{onSubmit:function onSubmit(){return _this2.handleLogin()}},Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-text-input",{label:"Email",autocomplete:"username",value:this.username,onInput:function onInput(e){return _this2.username=e.target.value},disabled:this.loggingIn}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-text-input",{label:"Password",type:"password",autocomplete:"current-password",value:this.password,onInput:function onInput(e){return _this2.password=e.target.value},disabled:this.loggingIn}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-button",{label:"Forgot Your Password?",variant:"text",onClick:function onClick(){return _this2.displayMode="signup"},disabled:this.loggingIn,style:{display:"flex",justifyContent:"center",margin:"10px auto 20px"}}),Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-button",{label:"Login",disabled:this.loggingIn,onClick:function onClick(){return _this2.handleLogin()},style:{display:"flex",justifyContent:"center",margin:"10px auto 0"}})),this.loginError?Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("verdocs-ok-dialog",{heading:"Login Error",message:this.loginError,onNext:function onNext(){return _this2.handleClearError()}}):Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",null)):Object(_index_f78d163d_js__WEBPACK_IMPORTED_MODULE_7__.h)("div",{style:{display:"none"}},"Verdocs Auth Placeholder")}}]),VerdocsAuth}();VerdocsAuth.style='verdocs-auth{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}verdocs-auth .login-form,verdocs-auth .signup-form{background:#ffffff;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-ms-flex-direction:column;flex-direction:column;display:-ms-flexbox;display:flex;padding:20px;width:300px;max-width:100%}verdocs-auth .logo{margin:20px 0 30px;width:128px;max-width:100%}verdocs-auth h3{text-align:center;font-weight:400;font-size:16px;line-height:1.75;margin:0}verdocs-auth h4{text-align:center;font-weight:400;font-size:14px;line-height:1.43;margin:0}verdocs-auth .status-result{display:none}verdocs-auth .status-result.debug{white-space:pre-wrap;font-size:14px;background:#fff;padding:10px;display:block;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:center;justify-content:center}verdocs-auth form{width:100%}verdocs-auth verdocs-text-input{margin-bottom:10px}'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L2VzbS9Ub2tlbi01NDY5MDc4OS5qcyIsIndlYnBhY2s6Ly8vLi9kaXN0L2VzbS9lcnJvcnMtOWI1NDk4YzguanMiLCJ3ZWJwYWNrOi8vLy4vZGlzdC9lc20vdmVyZG9jcy1hdXRoLmVudHJ5LmpzIl0sIm5hbWVzIjpbImI2NCIsImI2NHJlIiwiZGVjb2RlSldUQm9keSIsInRva2VuIiwiSlNPTiIsInBhcnNlIiwiQXRvQiIsInN0ciIsIlN0cmluZyIsInJlcGxhY2UiLCJ0ZXN0IiwiVHlwZUVycm9yIiwiYml0bWFwIiwic2xpY2UiLCJsZW5ndGgiLCJyMSIsInIyIiwicmVzdWx0IiwiaSIsImluZGV4T2YiLCJjaGFyQXQiLCJmcm9tQ2hhckNvZGUiLCJzcGxpdCIsImRlY29kZUFjY2Vzc1Rva2VuQm9keSIsImRlY29kZWQiLCJlIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJzdGFydHNXaXRoIiwiU0RLRXJyb3IiLCJtZXNzYWdlIiwic3RhdHVzQ29kZSIsInJlc3BvbnNlIiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJFcnJvciIsIlZlcmRvY3NBdXRoIiwiaG9zdFJlZiIsInJlZ2lzdGVySW5zdGFuY2UiLCJ0aGlzIiwiYXV0aGVudGljYXRlZCIsImNyZWF0ZUV2ZW50Iiwic2RrRXJyb3IiLCJlbmRwb2ludCIsIlZlcmRvY3NFbmRwb2ludCIsImdldERlZmF1bHQiLCJ2aXNpYmxlIiwibG9nbyIsImlzQXV0aGVudGljYXRlZCIsImRpc3BsYXlNb2RlIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImxvZ2dpbmdJbiIsImFjdGl2ZVNlc3Npb24iLCJsb2dpbkVycm9yIiwiY29tcG9uZW50V2lsbExvYWQiLCJfYSIsIl9iIiwibG9hZFNlc3Npb24iLCJzZXNzaW9uIiwiY29uc29sZSIsImxvZyIsImVtaXQiLCJoYW5kbGVMb2dpbiIsImF1dGhlbnRpY2F0ZVVzZXIiLCJwYXJhbXMiLCJhcGkiLCJwb3N0IiwidGhlbiIsInIiLCJkYXRhIiwic2V0VG9rZW4iLCJhY2Nlc3NUb2tlbiIsIl9jIiwiX2QiLCJfZSIsInN0cmluZ2lmeSIsInN0YXR1cyIsImhhbmRsZUxvZ291dCIsImNsZWFyU2Vzc2lvbiIsImhhbmRsZUNsZWFyRXJyb3IiLCJyZW5kZXIiLCJoIiwiY2xhc3MiLCJzcmMiLCJhbHQiLCJsYWJlbCIsInZhcmlhbnQiLCJvbkNsaWNrIiwiZGlzYWJsZWQiLCJvblN1Ym1pdCIsImF1dG9jb21wbGV0ZSIsInZhbHVlIiwib25JbnB1dCIsInRhcmdldCIsInR5cGUiLCJzdHlsZSIsImRpc3BsYXkiLCJqdXN0aWZ5Q29udGVudCIsIm1hcmdpbiIsImhlYWRpbmciLCJvbk5leHQiXSwibWFwcGluZ3MiOiJpeEJBQ0lBLElBQU0sb0VBRU5DLE1BQVEsMEVBcUNSQyxjQUFnQixTQUFoQkEsY0FBMEJDLE9BQVMsT0FBT0MsS0FBS0MsTUFoQ3hDLFNBQVBDLEtBQWlCQyxLQUlqQixHQURBQSxJQUFNQyxPQUFPRCxLQUFLRSxRQUFRLGdCQUFpQixLQUN0Q1IsTUFBTVMsS0FBS0gsS0FDWixNQUFNLElBQUlJLFVBQVUsNEZBR3hCLElBQUlDLE9BREpMLEtBQU8sS0FBS00sTUFBTSxHQUFrQixFQUFiTixJQUFJTyxTQU0zQixJQUpBLElBQ0lDLEdBQ0FDLEdBRkFDLE9BQVMsR0FHVEMsRUFBSSxFQUNEQSxFQUFJWCxJQUFJTyxRQUNYRixPQUNLWixJQUFJbUIsUUFBUVosSUFBSWEsT0FBT0YsT0FBUyxHQUM1QmxCLElBQUltQixRQUFRWixJQUFJYSxPQUFPRixPQUFTLElBQy9CSCxHQUFLZixJQUFJbUIsUUFBUVosSUFBSWEsT0FBT0YsUUFBVSxHQUN2Q0YsR0FBS2hCLElBQUltQixRQUFRWixJQUFJYSxPQUFPRixPQUNyQ0QsUUFDVyxLQUFQRixHQUNNUCxPQUFPYSxhQUFjVCxRQUFVLEdBQU0sS0FDOUIsS0FBUEksR0FDSVIsT0FBT2EsYUFBY1QsUUFBVSxHQUFNLElBQU1BLFFBQVUsRUFBSyxLQUMxREosT0FB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S1csU0FBVTJDLFFBQVMsaUJBQUN0RSxHQUFDLE9BQU0sT0FBSzJCLFNBQVczQixFQUFFdUUsT0FBT0YsS0FBSyxFQUFHSCxTQUFVbEQsS0FBS2EsWUFBYzhCLDBEQUFFLHFCQUFzQixDQUFFSSxNQUFPLFdBQVlTLEtBQU0sV0FBWUosYUFBYyxtQkFBb0JDLE1BQU9yRCxLQUFLWSxTQUFVMEMsUUFBUyxpQkFBQ3RFLEdBQUMsT0FBTSxPQUFLNEIsU0FBVzVCLEVBQUV1RSxPQUFPRixLQUFLLEVBQUdILFNBQVVsRCxLQUFLYSxZQUFjOEIsMERBQUUsaUJBQWtCLENBQUVJLE1BQU8sd0JBQXlCQyxRQUFTLE9BQVFDLFFBQVMsMEJBQU8sT0FBS3ZDLFlBQWMsUUFBUSxFQUFHd0MsU0FBVWxELEtBQUthLFVBQVc0QyxNQUFPLENBQUVDLFFBQVMsT0FBUUMsZUFBZ0IsU0FBVUMsT0FBUSxvQkFBdUJqQiwwREFBRSxpQkFBa0IsQ0FBRUksTUFBTyxRQUFTRyxTQUFVbEQsS0FBS2EsVUFBV29DLFFBQVMsMEJBQU0sT0FBS3pCLGFBQWEsRUFBRWlDLE1BQU8sQ0FBRUMsUUFBUyxPQUFRQyxlQUFnQixTQUFVQyxPQUFRLGtCQUFxQjVELEtBQUtlLFdBQWE0QiwwREFBRSxvQkFBcUIsQ0FBRWtCLFFBQVMsY0FBZXRFLFFBQVNTLEtBQUtlLFdBQVkrQyxPQUFRLHlCQUFNLE9BQUtyQixrQkFBa0IsSUFBTUUsMERBQUUsTUFBTyxPQVJqd0NBLDBEQUFFLE1BQU8sQ0FBRWMsTUFBTyxDQUFFQyxRQUFTLFNBQVksMkJBU3BELEtBQUMsWUF6RWMsR0EyRWpCN0QsWUFBWTRELE1BN0VXLHVsQyIsImZpbGUiOiIzNi40YzY4NzAzMS5pZnJhbWUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogdHNsaW50OmRpc2FibGU6bm8tYml0d2lzZSAqL1xudmFyIGI2NCA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSc7XG4vLyBSZWd1bGFyIGV4cHJlc3Npb24gdG8gY2hlY2sgZm9ybWFsIGNvcnJlY3RuZXNzIG9mIGJhc2U2NCBlbmNvZGVkIHN0cmluZ3NcbnZhciBiNjRyZSA9IC9eKD86W0EtWmEtelxcZCtcXC9dezR9KSo/KD86W0EtWmEtelxcZCtcXC9dezJ9KD86PT0pP3xbQS1aYS16XFxkK1xcL117M309Pyk/JC87XG4vKipcbiAqIFNpbXBsaWZpZWQsIE5vZGUvQnJvd3Nlci1zYWZlIGFsdGVybmF0aXZlIHRvIGF0b2IoKSBmb3IgYmFzZTY0IGRlY29kaW5nLlxuICogTW9kaWZpZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vTWF4QXJ0MjUwMS9iYXNlNjQtanMvYmxvYi9tYXN0ZXIvYmFzZTY0LmpzXG4gKi9cbnZhciBBdG9CID0gZnVuY3Rpb24gKHN0cikge1xuICAgIC8vIGF0b2IgY2FuIHdvcmsgd2l0aCBzdHJpbmdzIHdpdGggd2hpdGVzcGFjZXMsIGV2ZW4gaW5zaWRlIHRoZSBlbmNvZGVkIHBhcnQsXG4gICAgLy8gYnV0IG9ubHkgXFx0LCBcXG4sIFxcZiwgXFxyIGFuZCAnICcsIHdoaWNoIGNhbiBiZSBzdHJpcHBlZC5cbiAgICBzdHIgPSBTdHJpbmcoc3RyKS5yZXBsYWNlKC9bXFx0XFxuXFxmXFxyIF0rL2csICcnKTtcbiAgICBpZiAoIWI2NHJlLnRlc3Qoc3RyKSlcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBleGVjdXRlICdhdG9iJyBvbiAnV2luZG93JzogVGhlIHN0cmluZyB0byBiZSBkZWNvZGVkIGlzIG5vdCBjb3JyZWN0bHkgZW5jb2RlZC5cIik7XG4gICAgLy8gQWRkaW5nIHRoZSBwYWRkaW5nIGlmIG1pc3NpbmcsIGZvciBzZW1wbGljaXR5XG4gICAgc3RyICs9ICc9PScuc2xpY2UoMiAtIChzdHIubGVuZ3RoICYgMykpO1xuICAgIHZhciBiaXRtYXA7XG4gICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgIHZhciByMTtcbiAgICB2YXIgcjI7XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAoOyBpIDwgc3RyLmxlbmd0aDspIHtcbiAgICAgICAgYml0bWFwID1cbiAgICAgICAgICAgIChiNjQuaW5kZXhPZihzdHIuY2hhckF0KGkrKykpIDw8IDE4KSB8XG4gICAgICAgICAgICAgICAgKGI2NC5pbmRleE9mKHN0ci5jaGFyQXQoaSsrKSkgPDwgMTIpIHxcbiAgICAgICAgICAgICAgICAoKHIxID0gYjY0LmluZGV4T2Yoc3RyLmNoYXJBdChpKyspKSkgPDwgNikgfFxuICAgICAgICAgICAgICAgIChyMiA9IGI2NC5pbmRleE9mKHN0ci5jaGFyQXQoaSsrKSkpO1xuICAgICAgICByZXN1bHQgKz1cbiAgICAgICAgICAgIHIxID09PSA2NFxuICAgICAgICAgICAgICAgID8gU3RyaW5nLmZyb21DaGFyQ29kZSgoYml0bWFwID4+IDE2KSAmIDI1NSlcbiAgICAgICAgICAgICAgICA6IHIyID09PSA2NFxuICAgICAgICAgICAgICAgICAgICA/IFN0cmluZy5mcm9tQ2hhckNvZGUoKGJpdG1hcCA+PiAxNikgJiAyNTUsIChiaXRtYXAgPj4gOCkgJiAyNTUpXG4gICAgICAgICAgICAgICAgICAgIDogU3RyaW5nLmZyb21DaGFyQ29kZSgoYml0bWFwID4+IDE2KSAmIDI1NSwgKGJpdG1hcCA+PiA4KSAmIDI1NSwgYml0bWFwICYgMjU1KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG4vKipcbiAqIERlY29kZSB0aGUgYm9keSBvZiBhIEpXVC4gVGhpcyBoZWxwZXIgbWF5IGFsbG93IGZyb250LWVuZCBhcHBsaWNhdGlvbnMgdG8gYXZvaWQgYSBkZXBlbmRlbmN5IG9uIGBqc29ud2VidG9rZW5gIGluXG4gKiBtYW55IGNhc2VzLiBOb3RlIHRoYXQgdGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGZvciB0cnVlIEpXVHMuIE9wYXF1ZSB0b2tlbnMgd2lsbCBjYXVzZSB0aGlzIHRvIHRocm93LlxuICovXG52YXIgZGVjb2RlSldUQm9keSA9IGZ1bmN0aW9uICh0b2tlbikgeyByZXR1cm4gSlNPTi5wYXJzZShBdG9CKCh0b2tlbiB8fCAnJykuc3BsaXQoJy4nKVsxXSB8fCAnJykpOyB9O1xuLyoqXG4gKiBEZWNvZGUgdGhlIGJvZHkgb2YgYW4gVmVyZG9jcyBhY2Nlc3MgdG9rZW4uIE5vdGUgdGhhdCByYXcgdG9rZW5zIGNvbnRhaW4gbmFtZXNwYWNlZCBmaWVsZHMsIGUuZy5cbiAqIGBodHRwczovL3ZlcmRvY3MuY29tL3Byb2ZpbGVfaWRgLiBUbyBtYWtlIHRoZXNlIHRva2VucyBlYXNpZXIgdG8gdXNlIGluIGZyb250LWVuZCBjb2RlLCB0aGlzIG5hbWUtc3BhY2luZ1xuICogd2lsbCBiZSByZW1vdmVkLiBOb3RlIHRoYXQgdXNlciBhbmQgc2lnbmluZyBzZXNzaW9ucyBoYXZlIGRpZmZlcmVudCBhY2Nlc3MgdG9rZW4gZm9ybWF0cy4gVGhlIGNhbGxpbmdcbiAqIGFwcGxpY2F0aW9uIHNob3VsZCBkaXN0aW5ndWlzaCBiZXR3ZWVuIHRoZSB0d28gYmFzZWQgb24gdGhlIGNvbnRleHQgb2YgdGhlIGF1dGhlbnRpY2F0ZWQgc2Vzc2lvbiwgb3IgYnlcbiAqIHRoZSBwcmVzZW5jZSBvZiB0aGUgYGRvY3VtZW50X2lkYCBmaWVsZCwgd2hpY2ggd2lsbCBvbmx5IGJlIHByZXNlbnQgZm9yIHNpZ25pbmcgc2Vzc2lvbnMuXG4gKi9cbnZhciBkZWNvZGVBY2Nlc3NUb2tlbkJvZHkgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICB2YXIgZGVjb2RlZDtcbiAgICB0cnkge1xuICAgICAgICBkZWNvZGVkID0gZGVjb2RlSldUQm9keSh0b2tlbik7XG4gICAgICAgIGlmIChkZWNvZGVkID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgT2JqZWN0LmtleXMoZGVjb2RlZCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyAmJiBrZXkuc3RhcnRzV2l0aCgnaHR0cHM6Ly92ZXJkb2NzLmNvbS8nKSkge1xuICAgICAgICAgICAgZGVjb2RlZFtrZXkucmVwbGFjZSgnaHR0cHM6Ly92ZXJkb2NzLmNvbS8nLCAnJyldID0gZGVjb2RlZFtrZXldO1xuICAgICAgICAgICAgZGVsZXRlIGRlY29kZWRba2V5XTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBkZWNvZGVkO1xufTtcblxuZXhwb3J0IHsgZGVjb2RlQWNjZXNzVG9rZW5Cb2R5IGFzIGQgfTtcbiIsIi8qKlxuICogUGFzc2VkIHRvIHBhcmVudCBjb21wb25lbnRzIGluIGNlcnRhaW4gY2FsbGJhY2tzIHdpdGggdGhlIGxvd2VyLWxldmVsIEpTLVNESyBlbWl0cyBhbiBlcnJvclxuICovXG5jbGFzcyBTREtFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgc3RhdHVzQ29kZSwgcmVzcG9uc2UpIHtcbiAgICBzdXBlcihtZXNzYWdlIHx8ICdTREsgRXJyb3InKTtcbiAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuICB9XG59XG5cbmV4cG9ydCB7IFNES0Vycm9yIGFzIFMgfTtcbiIsImltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgaCB9IGZyb20gJy4vaW5kZXgtZjc4ZDE2M2QuanMnO1xuaW1wb3J0ICcuL1R5cGVzLWFiOWY2YWY4LmpzJztcbmltcG9ydCB7IFYgYXMgVmVyZG9jc0VuZHBvaW50IH0gZnJvbSAnLi9WZXJkb2NzRW5kcG9pbnQtY2Y0MzkyZmIuanMnO1xuaW1wb3J0IHsgUyBhcyBTREtFcnJvciB9IGZyb20gJy4vZXJyb3JzLTliNTQ5OGM4LmpzJztcbmltcG9ydCAnLi9Ub2tlbi01NDY5MDc4OS5qcyc7XG5cbi8qKlxuICogQXV0aGVudGljYXRlIHRvIFZlcmRvY3MgdmlhIHVzZXIvcGFzc3dvcmQgYXV0aGVudGljYXRpb25cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge0F1dGh9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9BdXRoJztcbiAqIGltcG9ydCB7VHJhbnNwb3J0fSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvSFRUUCc7XG4gKlxuICogY29uc3Qge2FjY2Vzc1Rva2VufSA9IGF3YWl0IEF1dGguYXV0aGVudGljYXRlVXNlcih7IHVzZXJuYW1lOiAndGVzdEB0ZXN0LmNvbScsIHBhc3N3b3JkOiAnUEFTU1dPUkQnIH0pO1xuICogVHJhbnNwb3J0LnNldEF1dGhUb2tlbihhY2Nlc3NUb2tlbik7XG4gKiBgYGBcbiAqL1xudmFyIGF1dGhlbnRpY2F0ZVVzZXIgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHBhcmFtcykge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLnBvc3QoJy9hdXRoZW50aWNhdGlvbi9sb2dpbicsIHBhcmFtcylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGF0YTsgfSk7XG59O1xuXG5jb25zdCB2ZXJkb2NzQXV0aENzcyA9IFwidmVyZG9jcy1hdXRoe2ZvbnQtZmFtaWx5OlxcXCJJbnRlclxcXCIsIC1hcHBsZS1zeXN0ZW0sIFxcXCJTZWdvZSBVSVxcXCIsIFxcXCJSb2JvdG9cXFwiLCBcXFwiSGVsdmV0aWNhIE5ldWVcXFwiLCBzYW5zLXNlcmlmO2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy1tcy1mbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC1kaXJlY3Rpb246Y29sdW1uOy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7LW1zLWZsZXgtcGFjazpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn12ZXJkb2NzLWF1dGggLmxvZ2luLWZvcm0sdmVyZG9jcy1hdXRoIC5zaWdudXAtZm9ybXtiYWNrZ3JvdW5kOiNmZmZmZmY7LW1zLWZsZXgtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjstbXMtZmxleC1wYWNrOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOy1tcy1mbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC1kaXJlY3Rpb246Y29sdW1uO2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4O3BhZGRpbmc6MjBweDt3aWR0aDozMDBweDttYXgtd2lkdGg6MTAwJX12ZXJkb2NzLWF1dGggLmxvZ297bWFyZ2luOjIwcHggMCAzMHB4O3dpZHRoOjEyOHB4O21heC13aWR0aDoxMDAlfXZlcmRvY3MtYXV0aCBoM3t0ZXh0LWFsaWduOmNlbnRlcjtmb250LXdlaWdodDo0MDA7Zm9udC1zaXplOjE2cHg7bGluZS1oZWlnaHQ6MS43NTttYXJnaW46MH12ZXJkb2NzLWF1dGggaDR7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC13ZWlnaHQ6NDAwO2ZvbnQtc2l6ZToxNHB4O2xpbmUtaGVpZ2h0OjEuNDM7bWFyZ2luOjB9dmVyZG9jcy1hdXRoIC5zdGF0dXMtcmVzdWx0e2Rpc3BsYXk6bm9uZX12ZXJkb2NzLWF1dGggLnN0YXR1cy1yZXN1bHQuZGVidWd7d2hpdGUtc3BhY2U6cHJlLXdyYXA7Zm9udC1zaXplOjE0cHg7YmFja2dyb3VuZDojZmZmO3BhZGRpbmc6MTBweDtkaXNwbGF5OmJsb2NrOy1tcy1mbGV4LWRpcmVjdGlvbjpyb3c7ZmxleC1kaXJlY3Rpb246cm93Oy1tcy1mbGV4LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9dmVyZG9jcy1hdXRoIGZvcm17d2lkdGg6MTAwJX12ZXJkb2NzLWF1dGggdmVyZG9jcy10ZXh0LWlucHV0e21hcmdpbi1ib3R0b206MTBweH1cIjtcblxuY29uc3QgVmVyZG9jc0F1dGggPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuYXV0aGVudGljYXRlZCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiYXV0aGVudGljYXRlZFwiLCA3KTtcbiAgICB0aGlzLnNka0Vycm9yID0gY3JlYXRlRXZlbnQodGhpcywgXCJzZGtFcnJvclwiLCA3KTtcbiAgICB0aGlzLmVuZHBvaW50ID0gVmVyZG9jc0VuZHBvaW50LmdldERlZmF1bHQoKTtcbiAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgIHRoaXMubG9nbyA9ICdodHRwczovL3ZlcmRvY3MuY29tL2Fzc2V0cy9ibHVlLWxvZ28uc3ZnJztcbiAgICB0aGlzLmlzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xuICAgIHRoaXMuZGlzcGxheU1vZGUgPSAnbG9naW4nO1xuICAgIHRoaXMudXNlcm5hbWUgPSAnJztcbiAgICB0aGlzLnBhc3N3b3JkID0gJyc7XG4gICAgdGhpcy5sb2dnaW5nSW4gPSBmYWxzZTtcbiAgICB0aGlzLmFjdGl2ZVNlc3Npb24gPSBudWxsO1xuICAgIHRoaXMubG9naW5FcnJvciA9IG51bGw7XG4gIH1cbiAgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICB0aGlzLmVuZHBvaW50LmxvYWRTZXNzaW9uKCk7XG4gICAgaWYgKHRoaXMuZW5kcG9pbnQuc2Vzc2lvbikge1xuICAgICAgY29uc29sZS5sb2coJ1tBVVRIXSBBdXRoZW50aWNhdGVkJyk7XG4gICAgICB0aGlzLmlzQXV0aGVudGljYXRlZCA9IHRydWU7XG4gICAgICB0aGlzLmFjdGl2ZVNlc3Npb24gPSB0aGlzLmVuZHBvaW50LnNlc3Npb247XG4gICAgICAoX2EgPSB0aGlzLmF1dGhlbnRpY2F0ZWQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbWl0KHsgYXV0aGVudGljYXRlZDogdHJ1ZSwgc2Vzc2lvbjogdGhpcy5lbmRwb2ludC5zZXNzaW9uIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbQVVUSF0gQW5vbnltb3VzJyk7XG4gICAgICAoX2IgPSB0aGlzLmF1dGhlbnRpY2F0ZWQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5lbWl0KHsgYXV0aGVudGljYXRlZDogZmFsc2UsIHNlc3Npb246IG51bGwgfSk7XG4gICAgfVxuICB9XG4gIGhhbmRsZUxvZ2luKCkge1xuICAgIHRoaXMubG9nZ2luZ0luID0gdHJ1ZTtcbiAgICBhdXRoZW50aWNhdGVVc2VyKHRoaXMuZW5kcG9pbnQsIHsgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkIH0pXG4gICAgICAudGhlbihyID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIHRoaXMubG9nZ2luZ0luID0gZmFsc2U7XG4gICAgICB0aGlzLmVuZHBvaW50LnNldFRva2VuKHIuYWNjZXNzVG9rZW4pO1xuICAgICAgdGhpcy5hY3RpdmVTZXNzaW9uID0gdGhpcy5lbmRwb2ludC5zZXNzaW9uO1xuICAgICAgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPSB0cnVlO1xuICAgICAgKF9hID0gdGhpcy5hdXRoZW50aWNhdGVkKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW1pdCh7IGF1dGhlbnRpY2F0ZWQ6IHRydWUsIHNlc3Npb246IHRoaXMuZW5kcG9pbnQuc2Vzc2lvbiB9KTtcbiAgICB9KVxuICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgICAgIGNvbnNvbGUubG9nKCdbQVVUSF0gQXV0aGVudGljYXRpb24gZXJyb3InLCBlLnJlc3BvbnNlLCBKU09OLnN0cmluZ2lmeShlKSk7XG4gICAgICB0aGlzLmxvZ2dpbmdJbiA9IGZhbHNlO1xuICAgICAgdGhpcy5hY3RpdmVTZXNzaW9uID0gbnVsbDtcbiAgICAgIChfYSA9IHRoaXMuYXV0aGVudGljYXRlZCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVtaXQoeyBhdXRoZW50aWNhdGVkOiBmYWxzZSwgc2Vzc2lvbjogbnVsbCB9KTtcbiAgICAgIChfYiA9IHRoaXMuc2RrRXJyb3IpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5lbWl0KG5ldyBTREtFcnJvcihlLm1lc3NhZ2UsIChfYyA9IGUucmVzcG9uc2UpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5zdGF0dXMsIChfZCA9IGUucmVzcG9uc2UpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5kYXRhKSk7XG4gICAgICBpZiAoKChfZSA9IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5yZXNwb25zZSkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLnN0YXR1cykgPT09IDQwMykge1xuICAgICAgICB0aGlzLmxvZ2luRXJyb3IgPSAnUGxlYXNlIGNoZWNrIHlvdXIgdXNlcm5hbWUgYW5kIHBhc3N3b3JkIGFuZCB0cnkgYWdhaW4uJztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBoYW5kbGVMb2dvdXQoKSB7XG4gICAgdmFyIF9hO1xuICAgIHRoaXMuZW5kcG9pbnQuY2xlYXJTZXNzaW9uKCk7XG4gICAgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTtcbiAgICAoX2EgPSB0aGlzLmF1dGhlbnRpY2F0ZWQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbWl0KHsgYXV0aGVudGljYXRlZDogZmFsc2UsIHNlc3Npb246IG51bGwgfSk7XG4gIH1cbiAgaGFuZGxlQ2xlYXJFcnJvcigpIHtcbiAgICB0aGlzLmxvZ2luRXJyb3IgPSBudWxsO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBpZiAoIXRoaXMudmlzaWJsZSkge1xuICAgICAgcmV0dXJuIGgoXCJkaXZcIiwgeyBzdHlsZTogeyBkaXNwbGF5OiAnbm9uZScgfSB9LCBcIlZlcmRvY3MgQXV0aCBQbGFjZWhvbGRlclwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICByZXR1cm4gaChcImRpdlwiLCB7IGNsYXNzOiBcInN0YXR1cy1yZXN1bHRcIiB9LCBcIkF1dGhlbnRpY2F0ZWRcIik7XG4gICAgfVxuICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lnbnVwJykge1xuICAgICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgY2xhc3M6IFwic2lnbnVwLWZvcm1cIiB9LCBoKFwiaW1nXCIsIHsgc3JjOiB0aGlzLmxvZ28sIGFsdDogXCJWZXJkb2NzIExvZ29cIiwgY2xhc3M6IFwibG9nb1wiIH0pLCBoKFwiaDNcIiwgbnVsbCwgXCJTaWduIHVwIGZvciBhbiBhY2NvdW50XCIpLCBoKFwiaDRcIiwgbnVsbCwgXCJBbHJlYWR5IGhhdmUgYW4gYWNjb3VudD9cIiwgaChcInZlcmRvY3MtYnV0dG9uXCIsIHsgbGFiZWw6IFwiTG9nIEluXCIsIHZhcmlhbnQ6IFwidGV4dFwiLCBvbkNsaWNrOiAoKSA9PiAodGhpcy5kaXNwbGF5TW9kZSA9ICdsb2dpbicpLCBkaXNhYmxlZDogdGhpcy5sb2dnaW5nSW4gfSkpLCBoKFwiZm9ybVwiLCB7IG9uU3VibWl0OiAoKSA9PiB0aGlzLmhhbmRsZUxvZ2luKCkgfSwgaChcInZlcmRvY3MtdGV4dC1pbnB1dFwiLCB7IGxhYmVsOiBcIkVtYWlsXCIsIGF1dG9jb21wbGV0ZTogXCJ1c2VybmFtZVwiLCB2YWx1ZTogdGhpcy51c2VybmFtZSwgb25JbnB1dDogKGUpID0+ICh0aGlzLnVzZXJuYW1lID0gZS50YXJnZXQudmFsdWUpLCBkaXNhYmxlZDogdGhpcy5sb2dnaW5nSW4gfSksIGgoXCJ2ZXJkb2NzLXRleHQtaW5wdXRcIiwgeyBsYWJlbDogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIsIGF1dG9jb21wbGV0ZTogXCJjdXJyZW50LXBhc3N3b3JkXCIsIHZhbHVlOiB0aGlzLnBhc3N3b3JkLCBvbklucHV0OiAoZSkgPT4gKHRoaXMucGFzc3dvcmQgPSBlLnRhcmdldC52YWx1ZSksIGRpc2FibGVkOiB0aGlzLmxvZ2dpbmdJbiB9KSwgaChcInZlcmRvY3MtYnV0dG9uXCIsIHsgbGFiZWw6IFwiU2lnbnVwXCIsIGRpc2FibGVkOiB0aGlzLmxvZ2dpbmdJbiwgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVMb2dpbigpLCBzdHlsZTogeyBkaXNwbGF5OiAnZmxleCcsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgbWFyZ2luOiAnMzBweCBhdXRvIDAnIH0gfSkpKSk7XG4gICAgfVxuICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiBcImxvZ2luLWZvcm1cIiB9LCBoKFwiaW1nXCIsIHsgc3JjOiB0aGlzLmxvZ28sIGFsdDogXCJWZXJkb2NzIExvZ29cIiwgY2xhc3M6IFwibG9nb1wiIH0pLCBoKFwiaDNcIiwgbnVsbCwgXCJMb2cgaW4gdG8geW91ciBhY2NvdW50XCIpLCBoKFwiaDRcIiwgbnVsbCwgXCJEb24ndCBoYXZlIGFuIGFjY291bnQ/XCIsIGgoXCJ2ZXJkb2NzLWJ1dHRvblwiLCB7IGxhYmVsOiBcIlNpZ24gVXBcIiwgdmFyaWFudDogXCJ0ZXh0XCIsIG9uQ2xpY2s6ICgpID0+ICh0aGlzLmRpc3BsYXlNb2RlID0gJ3NpZ251cCcpLCBkaXNhYmxlZDogdGhpcy5sb2dnaW5nSW4gfSkpLCBoKFwiZm9ybVwiLCB7IG9uU3VibWl0OiAoKSA9PiB0aGlzLmhhbmRsZUxvZ2luKCkgfSwgaChcInZlcmRvY3MtdGV4dC1pbnB1dFwiLCB7IGxhYmVsOiBcIkVtYWlsXCIsIGF1dG9jb21wbGV0ZTogXCJ1c2VybmFtZVwiLCB2YWx1ZTogdGhpcy51c2VybmFtZSwgb25JbnB1dDogKGUpID0+ICh0aGlzLnVzZXJuYW1lID0gZS50YXJnZXQudmFsdWUpLCBkaXNhYmxlZDogdGhpcy5sb2dnaW5nSW4gfSksIGgoXCJ2ZXJkb2NzLXRleHQtaW5wdXRcIiwgeyBsYWJlbDogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIsIGF1dG9jb21wbGV0ZTogXCJjdXJyZW50LXBhc3N3b3JkXCIsIHZhbHVlOiB0aGlzLnBhc3N3b3JkLCBvbklucHV0OiAoZSkgPT4gKHRoaXMucGFzc3dvcmQgPSBlLnRhcmdldC52YWx1ZSksIGRpc2FibGVkOiB0aGlzLmxvZ2dpbmdJbiB9KSwgaChcInZlcmRvY3MtYnV0dG9uXCIsIHsgbGFiZWw6IFwiRm9yZ290IFlvdXIgUGFzc3dvcmQ/XCIsIHZhcmlhbnQ6IFwidGV4dFwiLCBvbkNsaWNrOiAoKSA9PiAodGhpcy5kaXNwbGF5TW9kZSA9ICdzaWdudXAnKSwgZGlzYWJsZWQ6IHRoaXMubG9nZ2luZ0luLCBzdHlsZTogeyBkaXNwbGF5OiAnZmxleCcsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgbWFyZ2luOiAnMTBweCBhdXRvIDIwcHgnIH0gfSksIGgoXCJ2ZXJkb2NzLWJ1dHRvblwiLCB7IGxhYmVsOiBcIkxvZ2luXCIsIGRpc2FibGVkOiB0aGlzLmxvZ2dpbmdJbiwgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVMb2dpbigpLCBzdHlsZTogeyBkaXNwbGF5OiAnZmxleCcsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgbWFyZ2luOiAnMTBweCBhdXRvIDAnIH0gfSkpLCB0aGlzLmxvZ2luRXJyb3IgPyBoKFwidmVyZG9jcy1vay1kaWFsb2dcIiwgeyBoZWFkaW5nOiBcIkxvZ2luIEVycm9yXCIsIG1lc3NhZ2U6IHRoaXMubG9naW5FcnJvciwgb25OZXh0OiAoKSA9PiB0aGlzLmhhbmRsZUNsZWFyRXJyb3IoKSB9KSA6IGgoXCJkaXZcIiwgbnVsbCkpKTtcbiAgfVxufTtcblZlcmRvY3NBdXRoLnN0eWxlID0gdmVyZG9jc0F1dGhDc3M7XG5cbmV4cG9ydCB7IFZlcmRvY3NBdXRoIGFzIHZlcmRvY3NfYXV0aCB9O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==
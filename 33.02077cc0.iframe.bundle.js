(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"./dist/esm/verdocs-auth.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"verdocs_auth",(function(){return VerdocsAuth}));__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var _index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./dist/esm/index-43893f54.js"),_VerdocsEndpoint_437ed2a3_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./dist/esm/VerdocsEndpoint-437ed2a3.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var SDKError=function(_Error){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(SDKError,_Error);var _super=function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}(SDKError);function SDKError(message,statusCode,response){var _this;return _classCallCheck(this,SDKError),(_this=_super.call(this,message||"SDK Error")).response=response,_this.statusCode=statusCode,Object.setPrototypeOf(_assertThisInitialized(_this),(this instanceof SDKError?this.constructor:void 0).prototype),_this}return _createClass(SDKError)}(_wrapNativeSuper(Error)),VerdocsAuth=function(){function VerdocsAuth(hostRef){_classCallCheck(this,VerdocsAuth),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.h)(this,hostRef),this.authenticated=Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.d)(this,"authenticated",7),this.sdkError=Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.d)(this,"sdkError",7),this.endpoint=_VerdocsEndpoint_437ed2a3_js__WEBPACK_IMPORTED_MODULE_15__.a.getDefault(),this.visible=!0,this.logo="https://verdocs.com/assets/blue-logo.svg",this.debug=!1,this.isAuthenticated=!1,this.displayMode="login",this.username="",this.password="",this.loggingIn=!1,this.activeSession=null,this.loginError=null}return _createClass(VerdocsAuth,[{key:"componentWillLoad",value:function componentWillLoad(){var _a,_b;this.endpoint.loadSession(),this.endpoint.session?(console.log("[AUTH] Authenticated"),this.isAuthenticated=!0,this.activeSession=this.endpoint.session,null===(_a=this.authenticated)||void 0===_a||_a.emit({authenticated:!0,session:this.endpoint.session})):(console.log("[AUTH] Anonymous"),null===(_b=this.authenticated)||void 0===_b||_b.emit({authenticated:!1,session:null}))}},{key:"handleLogin",value:function handleLogin(){var _this2=this;this.loggingIn=!0,function authenticateUser(endpoint,params){return endpoint.api.post("/authentication/login",params).then((function(r){return r.data}))}(this.endpoint,{username:this.username,password:this.password}).then((function(r){var _a;_this2.loggingIn=!1,_this2.endpoint.setToken(r.accessToken),_this2.activeSession=_this2.endpoint.session,_this2.isAuthenticated=!0,null===(_a=_this2.authenticated)||void 0===_a||_a.emit({authenticated:!0,session:_this2.endpoint.session})})).catch((function(e){var _a,_b,_c,_d,_e;console.log("[AUTH] Authentication error",e.response,JSON.stringify(e)),_this2.loggingIn=!1,_this2.activeSession=null,null===(_a=_this2.authenticated)||void 0===_a||_a.emit({authenticated:!1,session:null}),null===(_b=_this2.sdkError)||void 0===_b||_b.emit(new SDKError(e.message,null===(_c=e.response)||void 0===_c?void 0:_c.status,null===(_d=e.response)||void 0===_d?void 0:_d.data)),403===(null===(_e=null==e?void 0:e.response)||void 0===_e?void 0:_e.status)&&(_this2.loginError="Please check your username and password and try again.")}))}},{key:"handleLogout",value:function handleLogout(){var _a;this.endpoint.clearSession(),this.isAuthenticated=!1,null===(_a=this.authenticated)||void 0===_a||_a.emit({authenticated:!1,session:null})}},{key:"handleClearError",value:function handleClearError(){this.loginError=null}},{key:"render",value:function render(){var _this3=this;return this.visible?this.isAuthenticated?this.debug?Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("div",{class:"status-result debug"},Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("verdocs-button",{label:"Logout",disabled:this.loggingIn,onPress:function onPress(){return _this3.handleLogout()}})):Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("div",{class:"status-result"},"Authenticated"):"signup"===this.displayMode?Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("div",{class:"signup-form"},Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("img",{src:this.logo,alt:"Verdocs Logo",class:"logo"}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("h3",null,"Sign up for an account"),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("h4",null,"Already have an account?",Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("verdocs-button",{label:"Log In",variant:"text",onClick:function onClick(){return _this3.displayMode="login"},disabled:this.loggingIn})),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("form",{onSubmit:function onSubmit(){return _this3.handleLogin()}},Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("verdocs-text-input",{label:"Email",autocomplete:"username",value:this.username,onFieldInput:function onFieldInput(e){return _this3.username=e.detail},disabled:this.loggingIn}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("verdocs-text-input",{label:"Password",type:"password",autocomplete:"current-password",value:this.password,onFieldInput:function onFieldInput(e){return _this3.password=e.detail},disabled:this.loggingIn}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("verdocs-button",{label:"Signup",disabled:this.loggingIn,onPress:function onPress(){return _this3.handleLogin()},style:{display:"flex",justifyContent:"center",margin:"30px auto 0"}}))):Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("div",{class:"login-form"},Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("img",{src:this.logo,alt:"Verdocs Logo",class:"logo"}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("h3",null,"Log in to your account"),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("h4",null,"Don't have an account?",Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("verdocs-button",{label:"Sign Up",variant:"text",onClick:function onClick(){return _this3.displayMode="signup"},disabled:this.loggingIn})),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("form",{onSubmit:function onSubmit(){return _this3.handleLogin()}},Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("verdocs-text-input",{label:"Email",autocomplete:"username",value:this.username,onFieldInput:function onFieldInput(e){return _this3.username=e.detail},disabled:this.loggingIn}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("verdocs-text-input",{label:"Password",type:"password",autocomplete:"current-password",value:this.password,onFieldInput:function onFieldInput(e){return _this3.password=e.detail},disabled:this.loggingIn}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("verdocs-button",{label:"Forgot Your Password?",variant:"text",onClick:function onClick(){return _this3.displayMode="signup"},disabled:this.loggingIn,style:{display:"flex",justifyContent:"center",margin:"10px auto 20px"}}),Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("verdocs-button",{label:"Login",disabled:this.loggingIn,onPress:function onPress(){return _this3.handleLogin()},style:{display:"flex",justifyContent:"center",margin:"10px auto 0"}})),this.loginError?Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("verdocs-ok-dialog",{open:!0,heading:"Login Error",message:this.loginError,onClosed:function onClosed(){return _this3.handleClearError()}}):Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("div",null)):Object(_index_43893f54_js__WEBPACK_IMPORTED_MODULE_14__.f)("div",{style:{display:"none"}},"Verdocs Auth Placeholder")}}]),VerdocsAuth}();VerdocsAuth.style='verdocs-auth{font-family:"Inter", -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}verdocs-auth .login-form,verdocs-auth .signup-form{background:#ffffff;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-ms-flex-direction:column;flex-direction:column;display:-ms-flexbox;display:flex;padding:20px;width:300px;max-width:100%}verdocs-auth .logo{margin:20px 0 30px;width:128px;max-width:100%}verdocs-auth h3{text-align:center;font-weight:400;font-size:16px;line-height:1.75;margin:0}verdocs-auth h4{text-align:center;font-weight:400;font-size:14px;line-height:1.43;margin:0}verdocs-auth .status-result{display:none}verdocs-auth .status-result.debug{white-space:pre-wrap;font-size:14px;background:#fff;padding:10px;display:block;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:center;justify-content:center}verdocs-auth form{width:100%}verdocs-auth verdocs-text-input{margin-bottom:10px}'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbm9kZV9tb2R1bGVzL0B2ZXJkb2NzL2pzLXNkay9Vc2Vycy9BdXRoLmpzIiwid2VicGFjazovLy9zcmMvdXRpbHMvZXJyb3JzLnRzIiwid2VicGFjazovLy9zcmMvY29tcG9uZW50cy9lbWJlZHMvdmVyZG9jcy1hdXRoL3ZlcmRvY3MtYXV0aC50c3giLCJ3ZWJwYWNrOi8vL3NyYy9jb21wb25lbnRzL2VtYmVkcy92ZXJkb2NzLWF1dGgvdmVyZG9jcy1hdXRoLnNjc3MiXSwibmFtZXMiOlsiU0RLRXJyb3IiLCJtZXNzYWdlIiwic3RhdHVzQ29kZSIsInJlc3BvbnNlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJFcnJvciIsIlZlcmRvY3NBdXRoIiwiZW5kcG9pbnQiLCJWZXJkb2NzRW5kcG9pbnQiLCJnZXREZWZhdWx0IiwidmlzaWJsZSIsImxvZ28iLCJkZWJ1ZyIsImlzQXV0aGVudGljYXRlZCIsImRpc3BsYXlNb2RlIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImxvZ2dpbmdJbiIsImFjdGl2ZVNlc3Npb24iLCJsb2dpbkVycm9yIiwiY29tcG9uZW50V2lsbExvYWQiLCJ0aGlzIiwibG9hZFNlc3Npb24iLCJzZXNzaW9uIiwiY29uc29sZSIsImxvZyIsImF1dGhlbnRpY2F0ZWQiLCJfYSIsImVtaXQiLCJfYiIsImhhbmRsZUxvZ2luIiwiYXV0aGVudGljYXRlVXNlciIsInBhcmFtcyIsImFwaSIsInBvc3QiLCJ0aGVuIiwiciIsImRhdGEiLCJBdXRoLmF1dGhlbnRpY2F0ZVVzZXIiLCJzZXRUb2tlbiIsImFjY2Vzc1Rva2VuIiwiZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZGtFcnJvciIsIl9jIiwic3RhdHVzIiwiX2QiLCJfZSIsImhhbmRsZUxvZ291dCIsImNsZWFyU2Vzc2lvbiIsImhhbmRsZUNsZWFyRXJyb3IiLCJyZW5kZXIiLCJoIiwiY2xhc3MiLCJsYWJlbCIsImRpc2FibGVkIiwib25QcmVzcyIsInNyYyIsImFsdCIsInZhcmlhbnQiLCJvbkNsaWNrIiwib25TdWJtaXQiLCJhdXRvY29tcGxldGUiLCJ2YWx1ZSIsIm9uRmllbGRJbnB1dCIsImRldGFpbCIsInR5cGUiLCJzdHlsZSIsImRpc3BsYXkiLCJqdXN0aWZ5Q29udGVudCIsIm1hcmdpbiIsIm9wZW4iLCJoZWFkaW5nIiwib25DbG9zZWQiXSwibWFwcGluZ3MiOiJxeklBV08sSUNSTUEsUyw2MEJBS1gsa0JBQVlDLFFBQWlCQyxXQUFvQkMsVUFBYSxpREFDNUQsdUJBQU1GLFNBQVcsY0FDWkUsU0FBV0EsU0FDaEIsTUFBS0QsV0FBYUEsV0FDbEJFLE9BQU9DLGVBQVAsK0JBQTRCLGtEQUFXQyxXQUpxQixLQUs3RCxDLGdEQVYyQkMsUUN3Q2pCQyxZQUFXLFdBTHhCLGdFLDJRQVNVLEtBQUFDLFNBQTRCQyw2REFBZ0JDLGFBTzVDLEtBQUFDLFNBQW1CLEVBT25CLEtBQUFDLEtBQWUsMkNBT2YsS0FBQUMsT0FBaUIsRUFZaEIsS0FBQUMsaUJBQTJCLEVBQzNCLEtBQUFDLFlBQXNCLFFBQ3RCLEtBQUFDLFNBQW1CLEdBQ25CLEtBQUFDLFNBQW1CLEdBQ25CLEtBQUFDLFdBQXFCLEVBQ3JCLEtBQUFDLGNBQTBCLEtBQzFCLEtBQUFDLFdBQTRCLElBc0l0QyxDQWpMdUIsZ0VBNkN0QixTQUFBQyxvQixVQUNFQyxLQUFLZCxTQUFTZSxjQUNWRCxLQUFLZCxTQUFTZ0IsU0FDaEJDLFFBQVFDLElBQUksd0JBQ1pKLEtBQUtSLGlCQUFrQixFQUN2QlEsS0FBS0gsY0FBZ0JHLEtBQUtkLFNBQVNnQixRQUNqQixRQUFsQixHQUFBRixLQUFLSyxxQkFBYUMsV0FBRUMsS0FBSyxDQUFDRixlQUFlLEVBQU1ILFFBQVNGLEtBQUtkLFNBQVNnQixZQUV0RUMsUUFBUUMsSUFBSSxvQkFDTSxRQUFsQixHQUFBSixLQUFLSyxxQkFBYUcsV0FBRUQsS0FBSyxDQUFDRixlQUFlLEVBQU9ILFFBQVMsT0FFNUQsR0F4RHFCLHlCQTBEdEIsU0FBQU8sY0FBVyxnQkFDVFQs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anMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEF1dGhlbnRpY2F0ZSB0byBWZXJkb2NzIHZpYSB1c2VyL3Bhc3N3b3JkIGF1dGhlbnRpY2F0aW9uXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtBdXRofSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvQXV0aCc7XG4gKiBpbXBvcnQge1RyYW5zcG9ydH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL0hUVFAnO1xuICpcbiAqIGNvbnN0IHthY2Nlc3NUb2tlbn0gPSBhd2FpdCBBdXRoLmF1dGhlbnRpY2F0ZVVzZXIoeyB1c2VybmFtZTogJ3Rlc3RAdGVzdC5jb20nLCBwYXNzd29yZDogJ1BBU1NXT1JEJyB9KTtcbiAqIFRyYW5zcG9ydC5zZXRBdXRoVG9rZW4oYWNjZXNzVG9rZW4pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgYXV0aGVudGljYXRlVXNlciA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAucG9zdCgnL2F1dGhlbnRpY2F0aW9uL2xvZ2luJywgcGFyYW1zKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIEF1dGhlbnRpY2F0ZSB0byBWZXJkb2NzIHZpYSBjbGllbnQgSUQgLyBTZWNyZXQgYXV0aGVudGljYXRpb24uICoqTk9URTogVGhpcyBpcyBvbmx5IHN1aXRhYmxlIGZvclxuICogTm9kZUpTIHNlcnZlci1zaWRlIGFwcGxpY2F0aW9ucy4gTmV2ZXIgZXhwb3NlIHlvdXIgQ2xpZW50IFNlY3JldCBpbiBhIFdlYiBvciBNb2JpbGUgYXBwISoqIEFsc28gbm90ZVxuICogdGhhdCBhY2Nlc3MgdG9rZW5zIG1heSBiZSBjYWNoZWQgYnkgc2VydmVyLXNpZGUgYXBwcyAoYW5kIHRoaXMgaXMgcmVjb21tZW5kZWQpIGJ1dCBkbyBleHBpcmUgYWZ0ZXIgMlxuICogaG91cnMuIFRoaXMgZXhwaXJhdGlvbiBtYXkgY2hhbmdlIGJhc2VkIG9uIGZ1dHVyZSBzZWN1cml0eSBuZWVkcy4gQXBwbGljYXRpb24gZGV2ZWxvcGVycyBhcmUgZW5jb3VyYWdlZFxuICogdG8gY2hlY2sgdGhlIGBleHBgIGV4cGlyYXRpb24gZmllbGQgaW4gdGhlIHJlc3BvbnNlIGFjY2Vzc1Rva2VuIGFuZCByZW5ldyB0b2tlbnMgYWZ0ZXIgdGhleSBleHBpcmUuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtBdXRofSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvQXV0aCc7XG4gKiBpbXBvcnQge1RyYW5zcG9ydH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL0hUVFAnO1xuICpcbiAqIGNvbnN0IHthY2Nlc3NUb2tlbn0gPSBhd2FpdCBBdXRoLmF1dGhlbnRpY2F0ZUFwcCh7IGNsaWVudF9pZDogJ0NMSUVOVElEJywgY2xpZW50X3NlY3JldDogJ1NFQ1JFVCcgfSk7XG4gKiBUcmFuc3BvcnQuc2V0QXV0aFRva2VuKGFjY2Vzc1Rva2VuKTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGF1dGhlbnRpY2F0ZUFwcCA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAucG9zdCgnL2F1dGhlbnRpY2F0aW9uL2xvZ2luX2NsaWVudCcsIHt9LCB7IGhlYWRlcnM6IHBhcmFtcyB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4vKipcbiAqIFZhbGlkYXRlIGEgdG9rZW4uIE9ubHkgVmVyZG9jcyB0b2tlbnMgd2lsbCBiZSBhY2NlcHRlZC4gTW9zdCBhcHBsaWNhdGlvbnMgY2FuIGRlY29kZSB0b2tlbnMgbG9jYWxseSxcbiAqIGJlY2F1c2UgdG9rZW5zIHdpbGwgYmUgdmFsaWRhdGVkIHdoZW4gQVBJIGNhbGxzIGFyZSBtYWRlIGFueXdheS4gSG93ZXZlciwgaGlnaC1zZWN1cml0eSBhcHBsaWNhdGlvbnNcbiAqIG1heSB1c2UgdGhpcyBlbmRwb2ludCB0byBjaGVjayBpZiBhIHRva2VuIGhhcyBiZWVuIHJldm9rZWQuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtBdXRofSBmcm9tICdAdmVyZG9jcy9qcy1zZGsvQXV0aCc7XG4gKlxuICogY29uc3Qge3ZhbGlkfSA9IGF3YWl0IEF1dGgudmFsaWRhdGVUb2tlbih7IHRva2VuIH0pO1xuICogaWYgKCF2YWxpZCkge1xuICogICB3aW5kb3cuYWxlcnQoJ1Nlc3Npb24gaW52YWxpZCBvciBleHBpcmVkLiBQbGVhc2UgcmUtYXV0aGVudGljYXRlLicpO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgdmFsaWRhdGVUb2tlbiA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAucG9zdCgnL3Rva2VuL2lzVmFsaWQnLCBwYXJhbXMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogSWYgY2FsbGVkIGJlZm9yZSB0aGUgc2Vzc2lvbiBleHBpcmVzLCB0aGlzIHdpbGwgcmVmcmVzaCB0aGUgY2FsbGVyJ3Mgc2Vzc2lvbiBhbmQgdG9rZW5zLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7QXV0aH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL0F1dGgnO1xuICogaW1wb3J0IHtUcmFuc3BvcnR9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9IVFRQJztcbiAqXG4gKiBjb25zdCB7YWNjZXNzVG9rZW59ID0gYXdhaXQgQXV0aC5yZWZyZXNoVG9rZW5zKCk7XG4gKiBUcmFuc3BvcnQuc2V0QXV0aFRva2VuKGFjY2Vzc1Rva2VuKTtcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIHJlZnJlc2hUb2tlbnMgPSBmdW5jdGlvbiAoZW5kcG9pbnQpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuYXBpIC8vXG4gICAgICAgIC5nZXQoJy90b2tlbicpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogVXBkYXRlIHRoZSBjYWxsZXIncyBwYXNzd29yZC4gVG8gaGVscCBwcmV2ZW50IENTUkYgYXR0YWNrIHZlY3RvcnMsIHRoZSB1c2VyJ3Mgb2xkIHBhc3N3b3JkIGFuZCBlbWFpbCBhZGRyZXNzIGFyZSByZXF1aXJlZC5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge0F1dGh9IGZyb20gJ0B2ZXJkb2NzL2pzLXNkay9BdXRoJztcbiAqXG4gKiBjb25zdCB7c3RhdHVzLCBtZXNzYWdlfSA9IGF3YWl0IEF1dGgudXBkYXRlUGFzc3dvcmQoeyBlbWFpbCwgb2xkUGFzc3dvcmQsIG5ld1Bhc3N3b3JkIH0pO1xuICogaWYgKHN0YXR1cyAhPT0gJ09LJykge1xuICogICB3aW5kb3cuYWxlcnQoYFBhc3N3b3JkIHJlc2V0IGVycm9yOiAke21lc3NhZ2V9YCk7XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHZhciB1cGRhdGVQYXNzd29yZCA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmFwaSAvL1xuICAgICAgICAucHV0KCcvdXNlci91cGRhdGVfcGFzc3dvcmQnLCBwYXJhbXMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRhdGE7IH0pO1xufTtcbi8qKlxuICogVXBkYXRlIHRoZSBjYWxsZXIncyBlbWFpbCBhZGRyZXNzLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7QXV0aH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL0F1dGgnO1xuICpcbiAqIGNvbnN0IHtwcm9maWxlc30gPSBhd2FpdCBBdXRoLnVwZGF0ZUVtYWlsKHsgZW1haWw6IG5ld0VtYWlsIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgdXBkYXRlRW1haWwgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHBhcmFtcykge1xuICAgIHJldHVybiBlbmRwb2ludC5hcGkgLy9cbiAgICAgICAgLnB1dCgnL3VzZXIvdXBkYXRlX2VtYWlsJywgcGFyYW1zKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KTtcbn07XG4iLCIvKipcbiAqIFBhc3NlZCB0byBwYXJlbnQgY29tcG9uZW50cyBpbiBjZXJ0YWluIGNhbGxiYWNrcyB3aXRoIHRoZSBsb3dlci1sZXZlbCBKUy1TREsgZW1pdHMgYW4gZXJyb3JcbiAqL1xuZXhwb3J0IGNsYXNzIFNES0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb2RlO1xuICBzdGF0dXNDb2RlO1xuICByZXNwb25zZTtcblxuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHN0YXR1c0NvZGU6IG51bWJlciwgcmVzcG9uc2U6IGFueSkge1xuICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ1NESyBFcnJvcicpO1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG4gIH1cbn1cbiIsImltcG9ydCB7QXV0aH0gZnJvbSAnQHZlcmRvY3MvanMtc2RrL1VzZXJzJztcbmltcG9ydCB7Q29tcG9uZW50LCBQcm9wLCBTdGF0ZSwgaCwgRXZlbnQsIEV2ZW50RW1pdHRlcn0gZnJvbSAnQHN0ZW5jaWwvY29yZSc7XG5pbXBvcnQge1ZlcmRvY3NFbmRwb2ludCwgVFNlc3Npb259IGZyb20gJ0B2ZXJkb2NzL2pzLXNkayc7XG5pbXBvcnQge1NES0Vycm9yfSBmcm9tICcuLi8uLi8uLi91dGlscy9lcnJvcnMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElBdXRoU3RhdHVzIHtcbiAgYXV0aGVudGljYXRlZDogYm9vbGVhbjtcbiAgc2Vzc2lvbjogVFNlc3Npb247XG59XG5cbi8qKlxuICogRGlzcGxheSBhbiBhdXRoZW50aWNhdGlvbiBkaWFsb2cgdGhhdCBhbGxvd3MgdGhlIHVzZXIgdG8gbG9naW4gb3Igc2lnbiB1cC4gQ2FsbGJhY2tzIGFyZSBwcm92aWRlZCBmb3IgZXZlbnRzIHRoYXRcbiAqIG9jY3VyIGR1cmluZyB0aGUgcHJvY2VzcyAoZXNwZWNpYWxseSBzdWNjZXNzZnVsIGNvbXBsZXRpb24pLiBUaGUgc3VjY2VzcyBjYWxsYmFjayB3aWxsIGJlIGZpcmVkIGltbWVkaWF0ZWx5IGlmIHRoZVxuICogdXNlciBpcyBhbHJlYWR5IGF1dGhlbnRpY2F0ZWQgd2l0aCBhIHZhbGlkIHNlc3Npb24sIHNvIHRoaXMgY29tcG9uZW50IG1heSBub3QgYWx3YXlzIGRpc3BsYXkgdmlzaWJseS5cbiAqXG4gKiBUbyBzaW1wbGlmeSBzb21lIHR5cGVzIG9mIGF1dGhlbnRpY2F0aW9uIGZsb3dzLCBhIHZpc2liaWxpdHkgZmxhZyBjYW4gZm9yY2UgdGhpcyBjb21wb25lbnQgdG8gbmV2ZXIgZGlzcGxheS4gVGhpc1xuICogYWxsb3dzIHlvdSB0byBzdXNiY3JpYmUgdG8gbm90aWZpY2F0aW9ucyBmcm9tIHRoZVxuICpcbiAqIFRoaXMgZW1iZWQgaXMgcmVzcG9uc2l2ZSAvIG1vYmlsZS1mcmllbmRseSwgYnV0IHRoZSBjYWxsaW5nIGFwcGxpY2F0aW9uIHNob3VsZCBwcm92aWRlIGF0IGxlYXN0IGEgMzAwcHggd2lkZVxuICogY29udGFpbmVyIHRvIGFsbG93IHN1ZmZpY2llbnQgc3BhY2UgZm9yIHRoZSByZXF1aXJlZCBmb3Jtcy5cbiAqXG4gKiBBcyBub3RlZCBiZWxvdywgdGhlIHByaW1hcnkgZXZlbnQgaXMgYGF1dGhlbnRpY2F0ZWRgLiBUaGlzIHdpbGwgYWx3YXlzIGJlIGZpcmVkIGF0IGxlYXN0IG9uY2UsIGltbWVkaWF0ZWx5IGFmdGVyXG4gKiB0aGUgd2lkZ2V0IGlzIHJlbmRlcmVkIGFuZCB0aGUgdXNlcidzIHN0YXR1cyBoYXMgYmVlbiBjaGVja2VkLiBJdCBtYXkgYmUgZmlyZWQgYWdhaW4gYXMgdGhlIHVzZXIgY29tcGxldGVzIChvclxuICogY2FuY2VscykgYXV0aGVudGljYXRpb24gc3RlcHMuXG4gKlxuICogQXV0aGVudGljYXRpb24gaXMgcmVxdWlyZWQgdG8gZGVtb25zdHJhdGUgdGhpcyBFbGVtZW50LiBZb3UgbWF5IGRvIHRoaXMgaW4gU3Rvcnlib29rIGJ5IHVzaW5nIHRoZSBBdXRoXG4gKiBlbWJlZC4gVGhpcyBFbGVtZW50IHdpbGwgcmV1c2UgdGhlIHNhbWUgc2Vzc2lvbiBwcm9kdWNlZCBieSBsb2dnaW5nIGluIHZpYSB0aGF0IEVtYmVkLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGludGVyZmFjZSBJQXV0aFN0YXR1cyB7XG4gKiAgIC8vIElmIHRydWUsIHRoZSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQgd2l0aCBhIHZhbGlkIHNlc3Npb25cbiAqICAgYXV0aGVudGljYXRlZDogYm9vbGVhbjtcbiAqXG4gKiAgIC8vIERldGFpbHMgZm9yIHRoZSB1c2VyJ3Mgc2Vzc2lvblxuICogICBzZXNzaW9uOiBJQWN0aXZlU2Vzc2lvbiB8IG51bGw7XG4gKiB9XG4gKiBgYGBcbiAqL1xuQENvbXBvbmVudCh7XG4gIHRhZzogJ3ZlcmRvY3MtYXV0aCcsXG4gIHN0eWxlVXJsOiAndmVyZG9jcy1hdXRoLnNjc3MnLFxuICBzaGFkb3c6IGZhbHNlLFxufSlcbmV4cG9ydCBjbGFzcyBWZXJkb2NzQXV0aCB7XG4gIC8qKlxuICAgKiBUaGUgZW5kcG9pbnQgdG8gdXNlIHRvIGNvbW11bmljYXRlIHdpdGggVmVyZG9jcy4gSWYgbm90IHNldCwgdGhlIGRlZmF1bHQgZW5kcG9pbnQgd2lsbCBiZSB1c2VkLlxuICAgKi9cbiAgQFByb3AoKSBlbmRwb2ludDogVmVyZG9jc0VuZHBvaW50ID0gVmVyZG9jc0VuZHBvaW50LmdldERlZmF1bHQoKTtcblxuICAvKipcbiAgICogTm9ybWFsbHksIGlmIHRoZSB1c2VyIGhhcyBhIHZhbGlkIHNlc3Npb24sIHRoaXMgZW1iZWQgd2lsbCBiZSBpbnZpc2libGUsIG90aGVyd2lzZSBpdCB3aWxsIGRpc3BsYXlcbiAgICogbG9naW4gLyBzaWdudXAgZm9ybXMuIElmIHRoaXMgaXMgc2V0IHRvIGZhbHNlLCB0aGlzIGVtYmVkIHdpbGwgYmUgaW52aXNpYmxlIGluIGJvdGggY2FzZXMuIEFwcHMgbWF5XG4gICAqIHVzZSB0aGlzIHRvIHZlcmlmeSBpZiBhIHVzZXIgaGFzIGEgdmFsaWQgc2Vzc2lvbiB3aXRob3V0IG5lZWRpbmcgYSBzZXBhcmF0ZSBjYWxsIHRvIFZlcmRvY3MgSlMgU0RLLlxuICAgKi9cbiAgQFByb3AoKSB2aXNpYmxlOiBib29sZWFuID0gdHJ1ZTtcblxuICAvKipcbiAgICogQnkgZGVmYXVsdCwgYSBWZXJkb2NzIGxvZ28gd2lsbCBiZSBkaXNwbGF5ZWQgYWJvdmUgdGhlIGxvZ2luL3NpZ251cCBmb3Jtcy4gVGhpcyBtYXkgYmUgdXNlZCB0b1xuICAgKiBvdmVycmlkZSBpdHMgc291cmNlLiAoQWx0ZXJuYXRpdmVseSwgeW91IG1heSBzaW1wbHkgaGlkZSBpdCB2aWEgQ1NTIG92ZXJyaWRlcy4pIExvZ29zIHNob3VsZCBiZVxuICAgKiBpbiBTVkcgZm9ybWF0IGZvciBiZXN0IHJlc3VsdHMuXG4gICAqL1xuICBAUHJvcCgpIGxvZ286IHN0cmluZyA9ICdodHRwczovL3ZlcmRvY3MuY29tL2Fzc2V0cy9ibHVlLWxvZ28uc3ZnJztcblxuICAvKipcbiAgICogSWYgdGhlIHVzZXIgaXMgYXV0aGVudGljYXRlZCwgdGhpcyBlbWJlZCB3aWxsIG5vcm1hbGx5IHJlbmRlciBpbnZpc2libHkuIElmIGRlYnVnIGlzIHNldCB0cnVlLCBhIHN1bW1hcnlcbiAgICogaWYgdGhlIHVzZXIncyBzZXNzaW9uIGRldGFpbHMgd2lsbCBiZSBkaXNwbGF5ZWQgaW5zdGVhZC4gVGhpcyBtYXkgYmUgdXNlZnVsIHdoaWxlIGRlYnVnZ2luZyBhdXRoZW50aWNhdGlvblxuICAgKiBmbG93cyBpbiBuZXcgYXBwbGljYXRpb25zLlxuICAgKi9cbiAgQFByb3AoKSBkZWJ1ZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBFdmVudCBmaXJlZCB3aGVuIHNlc3Npb24gYXV0aGVudGljYXRpb24gcHJvY2VzcyBoYXMgY29tcGxldGVkLiBDaGVjayB0aGUgZXZlbnQgY29udGVudHMgZm9yIGNvbXBsZXRpb24gc3RhdHVzLlxuICAgKi9cbiAgQEV2ZW50KHtjb21wb3NlZDogdHJ1ZX0pIGF1dGhlbnRpY2F0ZWQ6IEV2ZW50RW1pdHRlcjxJQXV0aFN0YXR1cz47XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIHdoZW4gc2Vzc2lvbiBhdXRoZW50aWNhdGlvbiBwcm9jZXNzIGhhcyBjb21wbGV0ZWQuIENoZWNrIHRoZSBldmVudCBjb250ZW50cyBmb3IgY29tcGxldGlvbiBzdGF0dXMuXG4gICAqL1xuICBARXZlbnQoe2NvbXBvc2VkOiB0cnVlfSkgc2RrRXJyb3I6IEV2ZW50RW1pdHRlcjxTREtFcnJvcj47XG5cbiAgQFN0YXRlKCkgaXNBdXRoZW50aWNhdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIEBTdGF0ZSgpIGRpc3BsYXlNb2RlOiBzdHJpbmcgPSAnbG9naW4nO1xuICBAU3RhdGUoKSB1c2VybmFtZTogc3RyaW5nID0gJyc7XG4gIEBTdGF0ZSgpIHBhc3N3b3JkOiBzdHJpbmcgPSAnJztcbiAgQFN0YXRlKCkgbG9nZ2luZ0luOiBib29sZWFuID0gZmFsc2U7XG4gIEBTdGF0ZSgpIGFjdGl2ZVNlc3Npb246IFRTZXNzaW9uID0gbnVsbDtcbiAgQFN0YXRlKCkgbG9naW5FcnJvcjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgdGhpcy5lbmRwb2ludC5sb2FkU2Vzc2lvbigpO1xuICAgIGlmICh0aGlzLmVuZHBvaW50LnNlc3Npb24pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbQVVUSF0gQXV0aGVudGljYXRlZCcpO1xuICAgICAgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5hY3RpdmVTZXNzaW9uID0gdGhpcy5lbmRwb2ludC5zZXNzaW9uO1xuICAgICAgdGhpcy5hdXRoZW50aWNhdGVkPy5lbWl0KHthdXRoZW50aWNhdGVkOiB0cnVlLCBzZXNzaW9uOiB0aGlzLmVuZHBvaW50LnNlc3Npb259KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ1tBVVRIXSBBbm9ueW1vdXMnKTtcbiAgICAgIHRoaXMuYXV0aGVudGljYXRlZD8uZW1pdCh7YXV0aGVudGljYXRlZDogZmFsc2UsIHNlc3Npb246IG51bGx9KTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVMb2dpbigpIHtcbiAgICB0aGlzLmxvZ2dpbmdJbiA9IHRydWU7XG4gICAgQXV0aC5hdXRoZW50aWNhdGVVc2VyKHRoaXMuZW5kcG9pbnQsIHt1c2VybmFtZTogdGhpcy51c2VybmFtZSwgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmR9KVxuICAgICAgLnRoZW4ociA9PiB7XG4gICAgICAgIHRoaXMubG9nZ2luZ0luID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZW5kcG9pbnQuc2V0VG9rZW4oci5hY2Nlc3NUb2tlbik7XG4gICAgICAgIHRoaXMuYWN0aXZlU2Vzc2lvbiA9IHRoaXMuZW5kcG9pbnQuc2Vzc2lvbjtcbiAgICAgICAgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmF1dGhlbnRpY2F0ZWQ/LmVtaXQoe2F1dGhlbnRpY2F0ZWQ6IHRydWUsIHNlc3Npb246IHRoaXMuZW5kcG9pbnQuc2Vzc2lvbn0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tBVVRIXSBBdXRoZW50aWNhdGlvbiBlcnJvcicsIGUucmVzcG9uc2UsIEpTT04uc3RyaW5naWZ5KGUpKTtcbiAgICAgICAgdGhpcy5sb2dnaW5nSW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hY3RpdmVTZXNzaW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5hdXRoZW50aWNhdGVkPy5lbWl0KHthdXRoZW50aWNhdGVkOiBmYWxzZSwgc2Vzc2lvbjogbnVsbH0pO1xuICAgICAgICB0aGlzLnNka0Vycm9yPy5lbWl0KG5ldyBTREtFcnJvcihlLm1lc3NhZ2UsIGUucmVzcG9uc2U/LnN0YXR1cywgZS5yZXNwb25zZT8uZGF0YSkpO1xuXG4gICAgICAgIGlmIChlPy5yZXNwb25zZT8uc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgICB0aGlzLmxvZ2luRXJyb3IgPSAnUGxlYXNlIGNoZWNrIHlvdXIgdXNlcm5hbWUgYW5kIHBhc3N3b3JkIGFuZCB0cnkgYWdhaW4uJztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBoYW5kbGVMb2dvdXQoKSB7XG4gICAgdGhpcy5lbmRwb2ludC5jbGVhclNlc3Npb24oKTtcbiAgICB0aGlzLmlzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xuICAgIHRoaXMuYXV0aGVudGljYXRlZD8uZW1pdCh7YXV0aGVudGljYXRlZDogZmFsc2UsIHNlc3Npb246IG51bGx9KTtcbiAgfVxuXG4gIGhhbmRsZUNsZWFyRXJyb3IoKSB7XG4gICAgdGhpcy5sb2dpbkVycm9yID0gbnVsbDtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBpZiAoIXRoaXMudmlzaWJsZSkge1xuICAgICAgcmV0dXJuIDxkaXYgc3R5bGU9e3tkaXNwbGF5OiAnbm9uZSd9fT5WZXJkb2NzIEF1dGggUGxhY2Vob2xkZXI8L2Rpdj47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICBpZiAodGhpcy5kZWJ1Zykge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0dXMtcmVzdWx0IGRlYnVnXCI+XG4gICAgICAgICAgICA8dmVyZG9jcy1idXR0b24gbGFiZWw9XCJMb2dvdXRcIiBkaXNhYmxlZD17dGhpcy5sb2dnaW5nSW59IG9uUHJlc3M9eygpID0+IHRoaXMuaGFuZGxlTG9nb3V0KCl9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiA8ZGl2IGNsYXNzPVwic3RhdHVzLXJlc3VsdFwiPkF1dGhlbnRpY2F0ZWQ8L2Rpdj47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdzaWdudXAnKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzPVwic2lnbnVwLWZvcm1cIj5cbiAgICAgICAgICA8aW1nIHNyYz17dGhpcy5sb2dvfSBhbHQ9XCJWZXJkb2NzIExvZ29cIiBjbGFzcz1cImxvZ29cIiAvPlxuXG4gICAgICAgICAgPGgzPlNpZ24gdXAgZm9yIGFuIGFjY291bnQ8L2gzPlxuICAgICAgICAgIDxoND5cbiAgICAgICAgICAgIEFscmVhZHkgaGF2ZSBhbiBhY2NvdW50P1xuICAgICAgICAgICAgPHZlcmRvY3MtYnV0dG9uIGxhYmVsPVwiTG9nIEluXCIgdmFyaWFudD1cInRleHRcIiBvbkNsaWNrPXsoKSA9PiAodGhpcy5kaXNwbGF5TW9kZSA9ICdsb2dpbicpfSBkaXNhYmxlZD17dGhpcy5sb2dnaW5nSW59IC8+XG4gICAgICAgICAgPC9oND5cblxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXsoKSA9PiB0aGlzLmhhbmRsZUxvZ2luKCl9PlxuICAgICAgICAgICAgPHZlcmRvY3MtdGV4dC1pbnB1dCBsYWJlbD1cIkVtYWlsXCIgYXV0b2NvbXBsZXRlPVwidXNlcm5hbWVcIiB2YWx1ZT17dGhpcy51c2VybmFtZX0gb25GaWVsZElucHV0PXtlID0+ICh0aGlzLnVzZXJuYW1lID0gZS5kZXRhaWwpfSBkaXNhYmxlZD17dGhpcy5sb2dnaW5nSW59IC8+XG4gICAgICAgICAgICA8dmVyZG9jcy10ZXh0LWlucHV0XG4gICAgICAgICAgICAgIGxhYmVsPVwiUGFzc3dvcmRcIlxuICAgICAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxuICAgICAgICAgICAgICBhdXRvY29tcGxldGU9XCJjdXJyZW50LXBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucGFzc3dvcmR9XG4gICAgICAgICAgICAgIG9uRmllbGRJbnB1dD17ZSA9PiAodGhpcy5wYXNzd29yZCA9IGUuZGV0YWlsKX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMubG9nZ2luZ0lufVxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgPHZlcmRvY3MtYnV0dG9uXG4gICAgICAgICAgICAgIGxhYmVsPVwiU2lnbnVwXCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMubG9nZ2luZ0lufVxuICAgICAgICAgICAgICBvblByZXNzPXsoKSA9PiB0aGlzLmhhbmRsZUxvZ2luKCl9XG4gICAgICAgICAgICAgIHN0eWxlPXt7ZGlzcGxheTogJ2ZsZXgnLCBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsIG1hcmdpbjogJzMwcHggYXV0byAwJ319XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzPVwibG9naW4tZm9ybVwiPlxuICAgICAgICA8aW1nIHNyYz17dGhpcy5sb2dvfSBhbHQ9XCJWZXJkb2NzIExvZ29cIiBjbGFzcz1cImxvZ29cIiAvPlxuXG4gICAgICAgIDxoMz5Mb2cgaW4gdG8geW91ciBhY2NvdW50PC9oMz5cbiAgICAgICAgPGg0PlxuICAgICAgICAgIERvbid0IGhhdmUgYW4gYWNjb3VudD9cbiAgICAgICAgICA8dmVyZG9jcy1idXR0b24gbGFiZWw9XCJTaWduIFVwXCIgdmFyaWFudD1cInRleHRcIiBvbkNsaWNrPXsoKSA9PiAodGhpcy5kaXNwbGF5TW9kZSA9ICdzaWdudXAnKX0gZGlzYWJsZWQ9e3RoaXMubG9nZ2luZ0lufSAvPlxuICAgICAgICA8L2g0PlxuXG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXsoKSA9PiB0aGlzLmhhbmRsZUxvZ2luKCl9PlxuICAgICAgICAgIDx2ZXJkb2NzLXRleHQtaW5wdXQgbGFiZWw9XCJFbWFpbFwiIGF1dG9jb21wbGV0ZT1cInVzZXJuYW1lXCIgdmFsdWU9e3RoaXMudXNlcm5hbWV9IG9uRmllbGRJbnB1dD17ZSA9PiAodGhpcy51c2VybmFtZSA9IGUuZGV0YWlsKX0gZGlzYWJsZWQ9e3RoaXMubG9nZ2luZ0lufSAvPlxuICAgICAgICAgIDx2ZXJkb2NzLXRleHQtaW5wdXRcbiAgICAgICAgICAgIGxhYmVsPVwiUGFzc3dvcmRcIlxuICAgICAgICAgICAgdHlwZT1cInBhc3N3b3JkXCJcbiAgICAgICAgICAgIGF1dG9jb21wbGV0ZT1cImN1cnJlbnQtcGFzc3dvcmRcIlxuICAgICAgICAgICAgdmFsdWU9e3RoaXMucGFzc3dvcmR9XG4gICAgICAgICAgICBvbkZpZWxkSW5wdXQ9e2UgPT4gKHRoaXMucGFzc3dvcmQgPSBlLmRldGFpbCl9XG4gICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5sb2dnaW5nSW59XG4gICAgICAgICAgLz5cblxuICAgICAgICAgIDx2ZXJkb2NzLWJ1dHRvblxuICAgICAgICAgICAgbGFiZWw9XCJGb3Jnb3QgWW91ciBQYXNzd29yZD9cIlxuICAgICAgICAgICAgdmFyaWFudD1cInRleHRcIlxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gKHRoaXMuZGlzcGxheU1vZGUgPSAnc2lnbnVwJyl9XG4gICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5sb2dnaW5nSW59XG4gICAgICAgICAgICBzdHlsZT17e2Rpc3BsYXk6ICdmbGV4JywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBtYXJnaW46ICcxMHB4IGF1dG8gMjBweCd9fVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICA8dmVyZG9jcy1idXR0b24gbGFiZWw9XCJMb2dpblwiIGRpc2FibGVkPXt0aGlzLmxvZ2dpbmdJbn0gb25QcmVzcz17KCkgPT4gdGhpcy5oYW5kbGVMb2dpbigpfSBzdHlsZT17e2Rpc3BsYXk6ICdmbGV4JywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBtYXJnaW46ICcxMHB4IGF1dG8gMCd9fSAvPlxuICAgICAgICA8L2Zvcm0+XG5cbiAgICAgICAge3RoaXMubG9naW5FcnJvciA/IDx2ZXJkb2NzLW9rLWRpYWxvZyBvcGVuPXt0cnVlfSBoZWFkaW5nPVwiTG9naW4gRXJyb3JcIiBtZXNzYWdlPXt0aGlzLmxvZ2luRXJyb3J9IG9uQ2xvc2VkPXsoKSA9PiB0aGlzLmhhbmRsZUNsZWFyRXJyb3IoKX0gLz4gOiA8ZGl2IC8+fVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuIiwiQGltcG9ydCAnLi4vLi4vLi4vdGhlbWUuc2Nzcyc7XG5cbnZlcmRvY3MtYXV0aCB7XG4gIGZvbnQtZmFtaWx5OiAkdmVyZG9jcy1wcmltYXJ5LWZvbnQ7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuXG4gIC5sb2dpbi1mb3JtLFxuICAuc2lnbnVwLWZvcm0ge1xuICAgIGJhY2tncm91bmQ6ICR2ZXJkb2NzLWdyZXktNDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBwYWRkaW5nOiAyMHB4O1xuICAgIHdpZHRoOiAzMDBweDtcbiAgICBtYXgtd2lkdGg6IDEwMCU7XG4gIH1cblxuICAubG9nbyB7XG4gICAgbWFyZ2luOiAyMHB4IDAgMzBweDtcbiAgICB3aWR0aDogMTI4cHg7XG4gICAgbWF4LXdpZHRoOiAxMDAlO1xuICB9XG5cbiAgaDMge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBmb250LXdlaWdodDogNDAwO1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICBsaW5lLWhlaWdodDogMS43NTtcbiAgICBtYXJnaW46IDA7XG4gIH1cblxuICBoNCB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGxpbmUtaGVpZ2h0OiAxLjQzO1xuICAgIG1hcmdpbjogMDtcbiAgfVxuXG4gIC5zdGF0dXMtcmVzdWx0IHtcbiAgICBkaXNwbGF5OiBub25lO1xuXG4gICAgJi5kZWJ1ZyB7XG4gICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBiYWNrZ3JvdW5kOiAjZmZmO1xuICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIH1cbiAgfVxuXG4gIGZvcm0ge1xuICAgIHdpZHRoOiAxMDAlO1xuICB9XG5cbiAgdmVyZG9jcy10ZXh0LWlucHV0IHtcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9